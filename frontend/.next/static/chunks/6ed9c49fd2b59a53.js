(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,102256,t=>{"use strict";t.s(["getSubGraphTitleMargins",()=>e]);var e=(0,t.i(171206).__name)(t=>{var e,r,a,n;let{flowchart:i}=t,l=null!=(a=null==i||null==(e=i.subGraphTitleMargin)?void 0:e.top)?a:0,o=null!=(n=null==i||null==(r=i.subGraphTitleMargin)?void 0:r.bottom)?n:0;return{subGraphTitleTopMargin:l,subGraphTitleBottomMargin:o,subGraphTitleTotalMargin:l+o}},"getSubGraphTitleMargins")},833448,t=>{"use strict";t.s(["compileStyles",()=>n,"isLabelStyle",()=>l,"solidStateFill",()=>a,"styles2String",()=>o,"userNodeOverrides",()=>s]);var e=t.i(80926),r=t.i(171206),a=(0,r.__name)(t=>{let{handDrawnSeed:r}=(0,e.getConfig2)();return{fill:t,hachureAngle:120,hachureGap:4,fillWeight:2,roughness:.7,stroke:t,seed:r}},"solidStateFill"),n=(0,r.__name)(t=>{let e=i([...t.cssCompiledStyles||[],...t.cssStyles||[],...t.labelStyle||[]]);return{stylesMap:e,stylesArray:[...e]}},"compileStyles"),i=(0,r.__name)(t=>{let e=new Map;return t.forEach(t=>{let[r,a]=t.split(":");e.set(r.trim(),null==a?void 0:a.trim())}),e},"styles2Map"),l=(0,r.__name)(t=>"color"===t||"font-size"===t||"font-family"===t||"font-weight"===t||"font-style"===t||"text-decoration"===t||"text-align"===t||"text-transform"===t||"line-height"===t||"letter-spacing"===t||"word-spacing"===t||"text-shadow"===t||"text-overflow"===t||"white-space"===t||"word-wrap"===t||"word-break"===t||"overflow-wrap"===t||"hyphens"===t,"isLabelStyle"),o=(0,r.__name)(t=>{let{stylesArray:e}=n(t),r=[],a=[],i=[],o=[];return e.forEach(t=>{let e=t[0];l(e)?r.push(t.join(":")+" !important"):(a.push(t.join(":")+" !important"),e.includes("stroke")&&i.push(t.join(":")+" !important"),"fill"===e&&o.push(t.join(":")+" !important"))}),{labelStyles:r.join(";"),nodeStyles:a.join(";"),stylesArray:e,borderStyles:i,backgroundStyles:o}},"styles2String"),s=(0,r.__name)((t,r)=>{var a;let{themeVariables:i,handDrawnSeed:l}=(0,e.getConfig2)(),{nodeBorder:o,mainBkg:s}=i,{stylesMap:c}=n(t);return Object.assign({roughness:.7,fill:c.get("fill")||s,fillStyle:"hachure",fillWeight:4,hachureGap:5.2,stroke:c.get("stroke")||o,seed:l,strokeWidth:(null==(a=c.get("stroke-width"))?void 0:a.replace("px",""))||1.3,fillLineDash:[0,0],strokeLineDash:d(c.get("stroke-dasharray"))},r)},"userNodeOverrides"),d=(0,r.__name)(t=>{if(!t)return[0,0];let e=t.trim().split(/\s+/).map(Number);if(1===e.length){let t=isNaN(e[0])?0:e[0];return[t,t]}return[isNaN(e[0])?0:e[0],isNaN(e[1])?0:e[1]]},"getStrokeDashArray")},475058,216888,t=>{"use strict";function e(t){return function(){return t}}t.s(["default",()=>e],475058),t.s(["withPath",()=>M],216888);var r=t.i(892510);function a(){let t=(0,r._)(["M",",",""]);return a=function(){return t},t}function n(){let t=(0,r._)(["Z"]);return n=function(){return t},t}function i(){let t=(0,r._)(["L",",",""]);return i=function(){return t},t}function l(){let t=(0,r._)(["Q",",",",",",",""]);return l=function(){return t},t}function o(){let t=(0,r._)(["C",",",",",",",",",",",""]);return o=function(){return t},t}function s(){let t=(0,r._)(["M",",",""]);return s=function(){return t},t}function d(){let t=(0,r._)(["L",",",""]);return d=function(){return t},t}function c(){let t=(0,r._)(["L",",",""]);return c=function(){return t},t}function p(){let t=(0,r._)(["A",",",",0,0,",",",",",""]);return p=function(){return t},t}function h(){let t=(0,r._)(["M",",",""]);return h=function(){return t},t}function u(){let t=(0,r._)(["L",",",""]);return u=function(){return t},t}function f(){let t=(0,r._)(["A",",",",0,1,",",",",","A",",",",0,1,",",",",",""]);return f=function(){return t},t}function g(){let t=(0,r._)(["A",",",",0,",",",",",",",""]);return g=function(){return t},t}function y(){let t=(0,r._)(["M",",","h","v","h","Z"]);return y=function(){return t},t}let m=Math.PI,_=2*m,k=_-1e-6;function x(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}class b{moveTo(t,e){this._append(a(),this._x0=this._x1=+t,this._y0=this._y1=+e)}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append(n()))}lineTo(t,e){this._append(i(),this._x1=+t,this._y1=+e)}quadraticCurveTo(t,e,r,a){this._append(l(),+t,+e,this._x1=+r,this._y1=+a)}bezierCurveTo(t,e,r,a,n,i){this._append(o(),+t,+e,+r,+a,this._x1=+n,this._y1=+i)}arcTo(t,e,r,a,n){if(t*=1,e*=1,r*=1,a*=1,(n*=1)<0)throw Error("negative radius: ".concat(n));let i=this._x1,l=this._y1,o=r-t,h=a-e,u=i-t,f=l-e,g=u*u+f*f;if(null===this._x1)this._append(s(),this._x1=t,this._y1=e);else if(g>1e-6)if(Math.abs(f*o-h*u)>1e-6&&n){let s=r-i,d=a-l,y=o*o+h*h,_=Math.sqrt(y),k=Math.sqrt(g),x=n*Math.tan((m-Math.acos((y+g-(s*s+d*d))/(2*_*k)))/2),b=x/k,M=x/_;Math.abs(b-1)>1e-6&&this._append(c(),t+b*u,e+b*f),this._append(p(),n,n,+(f*s>u*d),this._x1=t+M*o,this._y1=e+M*h)}else this._append(d(),this._x1=t,this._y1=e)}arc(t,e,r,a,n,i){if(t*=1,e*=1,r*=1,i=!!i,r<0)throw Error("negative radius: ".concat(r));let l=r*Math.cos(a),o=r*Math.sin(a),s=t+l,d=e+o,c=1^i,p=i?a-n:n-a;null===this._x1?this._append(h(),s,d):(Math.abs(this._x1-s)>1e-6||Math.abs(this._y1-d)>1e-6)&&this._append(u(),s,d),r&&(p<0&&(p=p%_+_),p>k?this._append(f(),r,r,c,t-l,e-o,r,r,c,this._x1=s,this._y1=d):p>1e-6&&this._append(g(),r,r,+(p>=m),c,this._x1=t+r*Math.cos(n),this._y1=e+r*Math.sin(n)))}rect(t,e,r,a){this._append(y(),this._x0=this._x1=+t,this._y0=this._y1=+e,r*=1,+a,-r)}toString(){return this._}constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?x:function(t){let e=Math.floor(t);if(!(e>=0))throw Error("invalid digits: ".concat(t));if(e>15)return x;let r=10**e;return function(t){this._+=t[0];for(let e=1,a=t.length;e<a;++e)this._+=Math.round(arguments[e]*r)/r+t[e]}}(t)}}function M(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(null==r)e=null;else{let t=Math.floor(r);if(!(t>=0))throw RangeError("invalid digits: ".concat(r));e=t}return t},()=>new b(e)}b.prototype},62990,t=>{"use strict";function e(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}t.s(["default",()=>e]),Array.prototype.slice},785833,885532,159843,t=>{"use strict";t.s(["line",()=>o],785833),t.s(["default",()=>o],159843);var e=t.i(62990),r=t.i(475058),a=t.i(48114),n=t.i(216888);function i(t){return t[0]}function l(t){return t[1]}function o(t,o){var s=(0,r.default)(!0),d=null,c=a.default,p=null,h=(0,n.withPath)(u);function u(r){var a,n,i,l=(r=(0,e.default)(r)).length,u=!1;for(null==d&&(p=c(i=h())),a=0;a<=l;++a)!(a<l&&s(n=r[a],a,r))===u&&((u=!u)?p.lineStart():p.lineEnd()),u&&p.point(+t(n,a,r),+o(n,a,r));if(i)return p=null,i+""||null}return t="function"==typeof t?t:void 0===t?i:(0,r.default)(t),o="function"==typeof o?o:void 0===o?l:(0,r.default)(o),u.x=function(e){return arguments.length?(t="function"==typeof e?e:(0,r.default)(+e),u):t},u.y=function(t){return arguments.length?(o="function"==typeof t?t:(0,r.default)(+t),u):o},u.defined=function(t){return arguments.length?(s="function"==typeof t?t:(0,r.default)(!!t),u):s},u.curve=function(t){return arguments.length?(c=t,null!=d&&(p=c(d)),u):c},u.context=function(t){return arguments.length?(null==t?d=p=null:p=c(d=t),u):d},u}t.s(["x",()=>i,"y",()=>l],885532)},620502,t=>{"use strict";t.s(["getLineFunctionsWithOffset",()=>l,"markerOffsets",()=>r,"markerOffsets2",()=>a]);var e=t.i(171206),r={aggregation:17.25,extension:17.25,composition:17.25,dependency:6,lollipop:13.5,arrow_point:4},a={arrow_point:9,arrow_cross:12.5,arrow_circle:12.5};function n(t,e){if(void 0===t||void 0===e)return{angle:0,deltaX:0,deltaY:0};t=i(t),e=i(e);let[r,a]=[t.x,t.y],[n,l]=[e.x,e.y],o=n-r,s=l-a;return{angle:Math.atan(s/o),deltaX:o,deltaY:s}}(0,e.__name)(n,"calculateDeltaAndAngle");var i=(0,e.__name)(t=>Array.isArray(t)?{x:t[0],y:t[1]}:t,"pointTransformer"),l=(0,e.__name)(t=>({x:(0,e.__name)(function(e,a,l){let o=0,s=i(l[0]).x<i(l[l.length-1]).x?"left":"right";if(0===a&&Object.hasOwn(r,t.arrowTypeStart)){let{angle:e,deltaX:a}=n(l[0],l[1]);o=r[t.arrowTypeStart]*Math.cos(e)*(a>=0?1:-1)}else if(a===l.length-1&&Object.hasOwn(r,t.arrowTypeEnd)){let{angle:e,deltaX:a}=n(l[l.length-1],l[l.length-2]);o=r[t.arrowTypeEnd]*Math.cos(e)*(a>=0?1:-1)}let d=Math.abs(i(e).x-i(l[l.length-1]).x),c=Math.abs(i(e).y-i(l[l.length-1]).y),p=Math.abs(i(e).x-i(l[0]).x),h=Math.abs(i(e).y-i(l[0]).y),u=r[t.arrowTypeStart],f=r[t.arrowTypeEnd];if(d<f&&d>0&&c<f){let t=f+1-d;t*="right"===s?-1:1,o-=t}if(p<u&&p>0&&h<u){let t=u+1-p;t*="right"===s?-1:1,o+=t}return i(e).x+o},"x"),y:(0,e.__name)(function(e,a,l){let o=0,s=i(l[0]).y<i(l[l.length-1]).y?"down":"up";if(0===a&&Object.hasOwn(r,t.arrowTypeStart)){let{angle:e,deltaY:a}=n(l[0],l[1]);o=r[t.arrowTypeStart]*Math.abs(Math.sin(e))*(a>=0?1:-1)}else if(a===l.length-1&&Object.hasOwn(r,t.arrowTypeEnd)){let{angle:e,deltaY:a}=n(l[l.length-1],l[l.length-2]);o=r[t.arrowTypeEnd]*Math.abs(Math.sin(e))*(a>=0?1:-1)}let d=Math.abs(i(e).y-i(l[l.length-1]).y),c=Math.abs(i(e).x-i(l[l.length-1]).x),p=Math.abs(i(e).y-i(l[0]).y),h=Math.abs(i(e).x-i(l[0]).x),u=r[t.arrowTypeStart],f=r[t.arrowTypeEnd];if(d<f&&d>0&&c<f){let t=f+1-d;t*="up"===s?-1:1,o-=t}if(p<u&&p>0&&h<u){let t=u+1-p;t*="up"===s?-1:1,o+=t}return i(e).y+o},"y")}),"getLineFunctionsWithOffset")},754802,t=>{"use strict";t.s(["clear",()=>E,"insertEdge",()=>U,"insertEdgeLabel",()=>W,"markers_default",()=>tl,"positionEdgeLabel",()=>X]);var e=t.i(620502),r=t.i(407983),a=t.i(102256),n=t.i(833448),i=t.i(780262),l=t.i(195923),o=t.i(80926),s=t.i(171206);t.i(947716);var d=t.i(891169),c=t.i(851262),p=t.i(826157),h=t.i(872200),u=t.i(722914),f=t.i(693158),g=t.i(363823),y=t.i(992536),m=t.i(226619),_=t.i(381142),k=t.i(700357),x=t.i(163018),b=t.i(785833),M=t.i(723685),w=t.i(883272),L=(0,s.__name)((t,e,r,a,n,i)=>{e.arrowTypeStart&&v(t,"start",e.arrowTypeStart,r,a,n,i),e.arrowTypeEnd&&v(t,"end",e.arrowTypeEnd,r,a,n,i)},"addEdgeMarkers"),S={arrow_cross:{type:"cross",fill:!1},arrow_point:{type:"point",fill:!0},arrow_barb:{type:"barb",fill:!0},arrow_circle:{type:"circle",fill:!1},aggregation:{type:"aggregation",fill:!1},extension:{type:"extension",fill:!1},composition:{type:"composition",fill:!0},dependency:{type:"dependency",fill:!0},lollipop:{type:"lollipop",fill:!1},only_one:{type:"onlyOne",fill:!1},zero_or_one:{type:"zeroOrOne",fill:!1},one_or_more:{type:"oneOrMore",fill:!1},zero_or_more:{type:"zeroOrMore",fill:!1},requirement_arrow:{type:"requirement_arrow",fill:!1},requirement_contains:{type:"requirement_contains",fill:!1}},v=(0,s.__name)((t,e,r,a,n,i,l)=>{let o=S[r];if(!o)return void s.log.warn("Unknown arrow type: ".concat(r));let d=o.type,c="".concat(n,"_").concat(i,"-").concat(d).concat("start"===e?"Start":"End");if(l&&""!==l.trim()){let r=l.replace(/[^\dA-Za-z]/g,"_"),n="".concat(c,"_").concat(r);if(!document.getElementById(n)){let t=document.getElementById(c);if(t){var p;let e=t.cloneNode(!0);e.id=n,e.querySelectorAll("path, circle, line").forEach(t=>{t.setAttribute("stroke",l),o.fill&&t.setAttribute("fill",l)}),null==(p=t.parentNode)||p.appendChild(e)}}t.attr("marker-".concat(e),"url(".concat(a,"#").concat(n,")"))}else t.attr("marker-".concat(e),"url(".concat(a,"#").concat(c,")"))},"addEdgeMarker"),O=new Map,T=new Map,E=(0,s.__name)(()=>{O.clear(),T.clear()},"clear"),C=(0,s.__name)(t=>t?t.reduce((t,e)=>t+";"+e,""):"","getLabelStyles"),W=(0,s.__name)(async(t,e)=>{let a,l=(0,o.evaluate)((0,o.getConfig2)().flowchart.htmlLabels),{labelStyles:d}=(0,n.styles2String)(e);e.labelStyle=d;let c=await (0,i.createText)(t,e.label,{style:e.labelStyle,useHtmlLabels:l,addSvgBackground:!0,isNode:!1});s.log.info("abc82",e,e.labelType);let p=t.insert("g").attr("class","edgeLabel"),h=p.insert("g").attr("class","label").attr("data-id",e.id);h.node().appendChild(c);let u=c.getBBox();if(l){let t=c.children[0],e=(0,M.select)(c);u=t.getBoundingClientRect(),e.attr("width",u.width),e.attr("height",u.height)}if(h.attr("transform","translate("+-u.width/2+", "+-u.height/2+")"),O.set(e.id,p),e.width=u.width,e.height=u.height,e.startLabelLeft){let n=await (0,r.createLabel_default)(e.startLabelLeft,C(e.labelStyle)),i=t.insert("g").attr("class","edgeTerminals"),l=i.insert("g").attr("class","inner");a=l.node().appendChild(n);let o=n.getBBox();l.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),T.get(e.id)||T.set(e.id,{}),T.get(e.id).startLeft=i,P(a,e.startLabelLeft)}if(e.startLabelRight){let n=await (0,r.createLabel_default)(e.startLabelRight,C(e.labelStyle)),i=t.insert("g").attr("class","edgeTerminals"),l=i.insert("g").attr("class","inner");a=i.node().appendChild(n),l.node().appendChild(n);let o=n.getBBox();l.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),T.get(e.id)||T.set(e.id,{}),T.get(e.id).startRight=i,P(a,e.startLabelRight)}if(e.endLabelLeft){let n=await (0,r.createLabel_default)(e.endLabelLeft,C(e.labelStyle)),i=t.insert("g").attr("class","edgeTerminals"),l=i.insert("g").attr("class","inner");a=l.node().appendChild(n);let o=n.getBBox();l.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),i.node().appendChild(n),T.get(e.id)||T.set(e.id,{}),T.get(e.id).endLeft=i,P(a,e.endLabelLeft)}if(e.endLabelRight){let n=await (0,r.createLabel_default)(e.endLabelRight,C(e.labelStyle)),i=t.insert("g").attr("class","edgeTerminals"),l=i.insert("g").attr("class","inner");a=l.node().appendChild(n);let o=n.getBBox();l.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),i.node().appendChild(n),T.get(e.id)||T.set(e.id,{}),T.get(e.id).endRight=i,P(a,e.endLabelRight)}return c},"insertEdgeLabel");function P(t,e){(0,o.getConfig2)().flowchart.htmlLabels&&t&&(t.style.width=9*e.length+"px",t.style.height="12px")}(0,s.__name)(P,"setTerminalWidth");var X=(0,s.__name)((t,e)=>{s.log.debug("Moving label abc88 ",t.id,t.label,O.get(t.id),e);let r=e.updatedPath?e.updatedPath:e.originalPath,n=(0,o.getConfig2)(),{subGraphTitleTotalMargin:i}=(0,a.getSubGraphTitleMargins)(n);if(t.label){let a=O.get(t.id),n=t.x,o=t.y;if(r){let a=l.utils_default.calcLabelPosition(r);s.log.debug("Moving label "+t.label+" from (",n,",",o,") to (",a.x,",",a.y,") abc88"),e.updatedPath&&(n=a.x,o=a.y)}a.attr("transform","translate(".concat(n,", ").concat(o+i/2,")"))}if(t.startLabelLeft){let e=T.get(t.id).startLeft,a=t.x,n=t.y;if(r){let e=l.utils_default.calcTerminalLabelPosition(10*!!t.arrowTypeStart,"start_left",r);a=e.x,n=e.y}e.attr("transform","translate(".concat(a,", ").concat(n,")"))}if(t.startLabelRight){let e=T.get(t.id).startRight,a=t.x,n=t.y;if(r){let e=l.utils_default.calcTerminalLabelPosition(10*!!t.arrowTypeStart,"start_right",r);a=e.x,n=e.y}e.attr("transform","translate(".concat(a,", ").concat(n,")"))}if(t.endLabelLeft){let e=T.get(t.id).endLeft,a=t.x,n=t.y;if(r){let e=l.utils_default.calcTerminalLabelPosition(10*!!t.arrowTypeEnd,"end_left",r);a=e.x,n=e.y}e.attr("transform","translate(".concat(a,", ").concat(n,")"))}if(t.endLabelRight){let e=T.get(t.id).endRight,a=t.x,n=t.y;if(r){let e=l.utils_default.calcTerminalLabelPosition(10*!!t.arrowTypeEnd,"end_right",r);a=e.x,n=e.y}e.attr("transform","translate(".concat(a,", ").concat(n,")"))}},"positionEdgeLabel"),Y=(0,s.__name)((t,e)=>{let r=t.x,a=t.y,n=Math.abs(e.x-r),i=Math.abs(e.y-a),l=t.width/2,o=t.height/2;return n>=l||i>=o},"outsideNode"),A=(0,s.__name)((t,e,r)=>{s.log.debug("intersection calc abc89:\n  outsidePoint: ".concat(JSON.stringify(e),"\n  insidePoint : ").concat(JSON.stringify(r),"\n  node        : x:").concat(t.x," y:").concat(t.y," w:").concat(t.width," h:").concat(t.height));let a=t.x,n=t.y,i=Math.abs(a-r.x),l=t.width/2,o=r.x<e.x?l-i:l+i,d=t.height/2,c=Math.abs(e.y-r.y),p=Math.abs(e.x-r.x);if(Math.abs(n-e.y)*l>Math.abs(a-e.x)*d){let t=r.y<e.y?e.y-d-n:n-d-e.y;o=p*t/c;let a={x:r.x<e.x?r.x+o:r.x-p+o,y:r.y<e.y?r.y+c-t:r.y-c+t};return 0===o&&(a.x=e.x,a.y=e.y),0===p&&(a.x=e.x),0===c&&(a.y=e.y),s.log.debug("abc89 top/bottom calc, Q ".concat(c,", q ").concat(t,", R ").concat(p,", r ").concat(o),a),a}{let t=c*(o=r.x<e.x?e.x-l-a:a-l-e.x)/p,n=r.x<e.x?r.x+p-o:r.x-p+o,i=r.y<e.y?r.y+t:r.y-t;return s.log.debug("sides calc abc89, Q ".concat(c,", q ").concat(t,", R ").concat(p,", r ").concat(o),{_x:n,_y:i}),0===o&&(n=e.x,i=e.y),0===p&&(n=e.x),0===c&&(i=e.y),{x:n,y:i}}},"intersection"),B=(0,s.__name)((t,e)=>{s.log.warn("abc88 cutPathAtIntersect",t,e);let r=[],a=t[0],n=!1;return t.forEach(t=>{if(s.log.info("abc88 checking point",t,e),Y(e,t)||n)s.log.warn("abc88 outside",t,a),a=t,n||r.push(t);else{let i=A(e,a,t);s.log.debug("abc88 inside",t,a,i),s.log.debug("abc88 intersection",i,e);let l=!1;r.forEach(t=>{l=l||t.x===i.x&&t.y===i.y}),r.some(t=>t.x===i.x&&t.y===i.y)?s.log.warn("abc88 no intersect",i,r):r.push(i),n=!0}}),s.log.debug("returning points",r),r},"cutPathAtIntersect");function H(t){let e=[],r=[];for(let a=1;a<t.length-1;a++){let n=t[a-1],i=t[a],l=t[a+1];n.x===i.x&&i.y===l.y&&Math.abs(i.x-l.x)>5&&Math.abs(i.y-n.y)>5?(e.push(i),r.push(a)):n.y===i.y&&i.x===l.x&&Math.abs(i.x-n.x)>5&&Math.abs(i.y-l.y)>5&&(e.push(i),r.push(a))}return{cornerPoints:e,cornerPointPositions:r}}(0,s.__name)(H,"extractCornerPoints");var N=(0,s.__name)(function(t,e,r){let a=e.x-t.x,n=e.y-t.y,i=r/Math.sqrt(a*a+n*n);return{x:e.x-i*a,y:e.y-i*n}},"findAdjacentPoint"),R=(0,s.__name)(function(t){let{cornerPointPositions:e}=H(t),r=[];for(let a=0;a<t.length;a++)if(e.includes(a)){let e=t[a-1],n=t[a+1],i=t[a],l=N(e,i,5),o=N(n,i,5),d=o.x-l.x,c=o.y-l.y;r.push(l);let p=2*Math.sqrt(2),h={x:i.x,y:i.y};Math.abs(n.x-e.x)>10&&Math.abs(n.y-e.y)>=10?(s.log.debug("Corner point fixing",Math.abs(n.x-e.x),Math.abs(n.y-e.y)),h=i.x===l.x?{x:d<0?l.x-5+p:l.x+5-p,y:c<0?l.y-p:l.y+p}:{x:d<0?l.x-p:l.x+p,y:c<0?l.y-5+p:l.y+5-p}):s.log.debug("Corner point skipping fixing",Math.abs(n.x-e.x),Math.abs(n.y-e.y)),r.push(h,o)}else r.push(t[a]);return r},"fixCorners"),z=(0,s.__name)((t,e,r)=>{let a=Array(Math.floor((t-e-r)/4)).fill("".concat(2," ").concat(2)).join(" ");return"0 ".concat(e," ").concat(a," ").concat(r)},"generateDashArray"),U=(0,s.__name)(function(t,r,a,i,S,v,O){var T;let E,C,W=arguments.length>7&&void 0!==arguments[7]&&arguments[7],{handDrawnSeed:P}=(0,o.getConfig2)(),X=r.points,Y=!1,A=[];for(let t in r.cssCompiledStyles)(0,n.isLabelStyle)(t)||A.push(r.cssCompiledStyles[t]);s.log.debug("UIO intersect check",r.points,v.x,S.x),v.intersect&&S.intersect&&!W&&((X=X.slice(1,r.points.length-1)).unshift(S.intersect(X[0])),s.log.debug("Last point UIO",r.start,"-->",r.end,X[X.length-1],v,v.intersect(X[X.length-1])),X.push(v.intersect(X[X.length-1])));let H=btoa(JSON.stringify(X));r.toCluster&&(s.log.info("to cluster abc88",a.get(r.toCluster)),X=B(r.points,a.get(r.toCluster).node),Y=!0),r.fromCluster&&(s.log.debug("from cluster abc88",a.get(r.fromCluster),JSON.stringify(X,null,2)),X=B(X.reverse(),a.get(r.fromCluster).node).reverse(),Y=!0);let N=X.filter(t=>!Number.isNaN(t.y));N=R(N);let U=d.curveBasis;switch(U=c.curveLinear,r.curve){case"linear":U=c.curveLinear;break;case"basis":default:U=d.curveBasis;break;case"cardinal":U=p.curveCardinal;break;case"bumpX":U=h.curveBumpX;break;case"bumpY":U=u.curveBumpY;break;case"catmullRom":U=f.curveCatmullRom;break;case"monotoneX":U=g.curveMonotoneX;break;case"monotoneY":U=y.curveMonotoneY;break;case"natural":U=m.curveNatural;break;case"step":U=_.curveStep;break;case"stepAfter":U=k.curveStepAfter;break;case"stepBefore":U=x.curveStepBefore}let{x:j,y:Z}=(0,e.getLineFunctionsWithOffset)(r),I=(0,b.line)().x(j).y(Z).curve(U);switch(r.thickness){case"normal":default:E="edge-thickness-normal";break;case"thick":E="edge-thickness-thick";break;case"invisible":E="edge-thickness-invisible"}switch(r.pattern){case"solid":default:E+=" edge-pattern-solid";break;case"dotted":E+=" edge-pattern-dotted";break;case"dashed":E+=" edge-pattern-dashed"}let G="rounded"===r.curve?q(Q(N,r),5):I(N),D=Array.isArray(r.style)?r.style:[r.style],F=D.find(t=>null==t?void 0:t.startsWith("stroke:")),J=!1;if("handDrawn"===r.look){let e=w.default.svg(t);Object.assign([],N);let a=e.path(G,{roughness:.3,seed:P});E+=" transition";let n=(C=(0,M.select)(a).select("path").attr("id",r.id).attr("class"," "+E+(r.classes?" "+r.classes:"")).attr("style",D?D.reduce((t,e)=>t+";"+e,""):"")).attr("d");C.attr("d",n),t.node().appendChild(C.node())}else{let a=A.join(";"),n=D?D.reduce((t,e)=>t+e+";",""):"",i="";r.animate&&(i=" edge-animation-fast"),r.animation&&(i=" edge-animation-"+r.animation);let l=(a?a+";"+n+";":n)+";"+(D?D.reduce((t,e)=>t+";"+e,""):"");C=t.append("path").attr("d",G).attr("id",r.id).attr("class"," "+E+(r.classes?" "+r.classes:"")+(null!=i?i:"")).attr("style",l),F=null==(T=l.match(/stroke:([^;]+)/))?void 0:T[1],J=!0===r.animate||!!r.animation||a.includes("animation");let o=C.node(),s="function"==typeof o.getTotalLength?o.getTotalLength():0,d=e.markerOffsets2[r.arrowTypeStart]||0,c=e.markerOffsets2[r.arrowTypeEnd]||0;if("neo"===r.look&&!J){let t="dotted"===r.pattern||"dashed"===r.pattern?z(s,d,c):"0 ".concat(d," ").concat(s-d-c," ").concat(c);C.attr("style","stroke-dasharray: ".concat(t,"; stroke-dashoffset: 0;")+C.attr("style"))}}C.attr("data-edge",!0),C.attr("data-et","edge"),C.attr("data-id",r.id),C.attr("data-points",H),r.showPoints&&N.forEach(e=>{t.append("circle").style("stroke","red").style("fill","red").attr("r",1).attr("cx",e.x).attr("cy",e.y)});let K="";((0,o.getConfig2)().flowchart.arrowMarkerAbsolute||(0,o.getConfig2)().state.arrowMarkerAbsolute)&&(K=(K=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search).replace(/\(/g,"\\(").replace(/\)/g,"\\)")),s.log.info("arrowTypeStart",r.arrowTypeStart),s.log.info("arrowTypeEnd",r.arrowTypeEnd),L(C,r,K,O,i,F);let V=Math.floor(X.length/2),$=X[V];l.utils_default.isLabelCoordinateInPath($,C.attr("d"))||(Y=!0);let tt={};return Y&&(tt.updatedPath=X),tt.originalPath=r.points,tt},"insertEdge");function q(t,e){if(t.length<2)return"";let r="",a=t.length;for(let n=0;n<a;n++){let i=t[n],l=t[n-1],o=t[n+1];if(0===n)r+="M".concat(i.x,",").concat(i.y);else if(n===a-1)r+="L".concat(i.x,",").concat(i.y);else{let t=i.x-l.x,a=i.y-l.y,n=o.x-i.x,s=o.y-i.y,d=Math.hypot(t,a),c=Math.hypot(n,s);if(d<1e-5||c<1e-5){r+="L".concat(i.x,",").concat(i.y);continue}let p=t/d,h=a/d,u=n/c,f=s/c,g=Math.acos(Math.max(-1,Math.min(1,p*u+h*f)));if(g<1e-5||1e-5>Math.abs(Math.PI-g)){r+="L".concat(i.x,",").concat(i.y);continue}let y=Math.min(e/Math.sin(g/2),d/2,c/2),m=i.x-p*y,_=i.y-h*y,k=i.x+u*y,x=i.y+f*y;r+="L".concat(m,",").concat(_),r+="Q".concat(i.x,",").concat(i.y," ").concat(k,",").concat(x)}}return r}function j(t,e){if(!t||!e)return{angle:0,deltaX:0,deltaY:0};let r=e.x-t.x,a=e.y-t.y;return{angle:Math.atan2(a,r),deltaX:r,deltaY:a}}function Q(t,r){let a=t.map(t=>({...t}));if(t.length>=2&&e.markerOffsets[r.arrowTypeStart]){let n=e.markerOffsets[r.arrowTypeStart],i=t[0],{angle:l}=j(i,t[1]),o=n*Math.cos(l),s=n*Math.sin(l);a[0].x=i.x+o,a[0].y=i.y+s}let n=t.length;if(n>=2&&e.markerOffsets[r.arrowTypeEnd]){let i=e.markerOffsets[r.arrowTypeEnd],l=t[n-1],{angle:o}=j(t[n-2],l),s=i*Math.cos(o),d=i*Math.sin(o);a[n-1].x=l.x-s,a[n-1].y=l.y-d}return a}(0,s.__name)(q,"generateRoundedPath"),(0,s.__name)(j,"calculateDeltaAndAngle"),(0,s.__name)(Q,"applyMarkerOffsetsToPoints");var Z=(0,s.__name)((t,e,r,a)=>{e.forEach(e=>{ti[e](t,r,a)})},"insertMarkers"),I=(0,s.__name)((t,e,r)=>{s.log.trace("Making markers for ",r),t.append("defs").append("marker").attr("id",r+"_"+e+"-extensionStart").attr("class","marker extension "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-extensionEnd").attr("class","marker extension "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),G=(0,s.__name)((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-compositionStart").attr("class","marker composition "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-compositionEnd").attr("class","marker composition "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),D=(0,s.__name)((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-aggregationStart").attr("class","marker aggregation "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-aggregationEnd").attr("class","marker aggregation "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),F=(0,s.__name)((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-dependencyStart").attr("class","marker dependency "+e).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-dependencyEnd").attr("class","marker dependency "+e).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),J=(0,s.__name)((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-lollipopStart").attr("class","marker lollipop "+e).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),t.append("defs").append("marker").attr("id",r+"_"+e+"-lollipopEnd").attr("class","marker lollipop "+e).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),K=(0,s.__name)((t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-pointEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-pointStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),V=(0,s.__name)((t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-circleEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-circleStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),$=(0,s.__name)((t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-crossEnd").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-crossStart").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),tt=(0,s.__name)((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),te=(0,s.__name)((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-onlyOneStart").attr("class","marker onlyOne "+e).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M9,0 L9,18 M15,0 L15,18"),t.append("defs").append("marker").attr("id",r+"_"+e+"-onlyOneEnd").attr("class","marker onlyOne "+e).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M3,0 L3,18 M9,0 L9,18")},"only_one"),tr=(0,s.__name)((t,e,r)=>{let a=t.append("defs").append("marker").attr("id",r+"_"+e+"-zeroOrOneStart").attr("class","marker zeroOrOne "+e).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");a.append("circle").attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),a.append("path").attr("d","M9,0 L9,18");let n=t.append("defs").append("marker").attr("id",r+"_"+e+"-zeroOrOneEnd").attr("class","marker zeroOrOne "+e).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");n.append("circle").attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),n.append("path").attr("d","M21,0 L21,18")},"zero_or_one"),ta=(0,s.__name)((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-oneOrMoreStart").attr("class","marker oneOrMore "+e).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),t.append("defs").append("marker").attr("id",r+"_"+e+"-oneOrMoreEnd").attr("class","marker oneOrMore "+e).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18")},"one_or_more"),tn=(0,s.__name)((t,e,r)=>{let a=t.append("defs").append("marker").attr("id",r+"_"+e+"-zeroOrMoreStart").attr("class","marker zeroOrMore "+e).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");a.append("circle").attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),a.append("path").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18");let n=t.append("defs").append("marker").attr("id",r+"_"+e+"-zeroOrMoreEnd").attr("class","marker zeroOrMore "+e).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");n.append("circle").attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),n.append("path").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},"zero_or_more"),ti={extension:I,composition:G,aggregation:D,dependency:F,lollipop:J,point:K,circle:V,cross:$,barb:tt,only_one:te,zero_or_one:tr,one_or_more:ta,zero_or_more:tn,requirement_arrow:(0,s.__name)((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-requirement_arrowEnd").attr("refX",20).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("path").attr("d","M0,0\n      L20,10\n      M20,10\n      L0,20")},"requirement_arrow"),requirement_contains:(0,s.__name)((t,e,r)=>{let a=t.append("defs").append("marker").attr("id",r+"_"+e+"-requirement_containsStart").attr("refX",0).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("g");a.append("circle").attr("cx",10).attr("cy",10).attr("r",9).attr("fill","none"),a.append("line").attr("x1",1).attr("x2",19).attr("y1",10).attr("y2",10),a.append("line").attr("y1",1).attr("y2",19).attr("x1",10).attr("x2",10)},"requirement_contains")},tl=Z}]);