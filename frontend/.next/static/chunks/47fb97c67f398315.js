(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,495242,e=>{"use strict";e.s(["Pause",()=>t],495242);let t=(0,e.i(475254).default)("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]])},977293,e=>{"use strict";e.s(["Popover",()=>I,"PopoverContent",()=>q,"PopoverTrigger",()=>V],977293);var t=e.i(843476),r=e.i(271645),s=e.i(981140),a=e.i(820783),l=e.i(30030),n=e.i(726330),i=e.i(303536),o=e.i(765491),c=e.i(610772),d=e.i(853660),u=e.i(774606),x=e.i(296626),h=e.i(248425),m=Symbol("radix.slottable");function p(e){return r.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===m}var g=e.i(369340),v=e.i(186312),f=e.i(985369),j="Popover",[b,N]=(0,l.createContextScope)(j,[d.createPopperScope]),y=(0,d.createPopperScope)(),[w,C]=b(j),k=e=>{let{__scopePopover:s,children:a,open:l,defaultOpen:n,onOpenChange:i,modal:o=!1}=e,u=y(s),x=r.useRef(null),[h,m]=r.useState(!1),[p,v]=(0,g.useControllableState)({prop:l,defaultProp:null!=n&&n,onChange:i,caller:j});return(0,t.jsx)(d.Root,{...u,children:(0,t.jsx)(w,{scope:s,contentId:(0,c.useId)(),triggerRef:x,open:p,onOpenChange:v,onOpenToggle:r.useCallback(()=>v(e=>!e),[v]),hasCustomAnchor:h,onCustomAnchorAdd:r.useCallback(()=>m(!0),[]),onCustomAnchorRemove:r.useCallback(()=>m(!1),[]),modal:o,children:a})})};k.displayName=j;var P="PopoverAnchor";r.forwardRef((e,s)=>{let{__scopePopover:a,...l}=e,n=C(P,a),i=y(a),{onCustomAnchorAdd:o,onCustomAnchorRemove:c}=n;return r.useEffect(()=>(o(),()=>c()),[o,c]),(0,t.jsx)(d.Anchor,{...i,...l,ref:s})}).displayName=P;var E="PopoverTrigger",T=r.forwardRef((e,r)=>{let{__scopePopover:l,...n}=e,i=C(E,l),o=y(l),c=(0,a.useComposedRefs)(r,i.triggerRef),u=(0,t.jsx)(h.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":D(i.open),...n,ref:c,onClick:(0,s.composeEventHandlers)(e.onClick,i.onOpenToggle)});return i.hasCustomAnchor?u:(0,t.jsx)(d.Anchor,{asChild:!0,...o,children:u})});T.displayName=E;var S="PopoverPortal",[L,R]=b(S,{forceMount:void 0}),F=e=>{let{__scopePopover:r,forceMount:s,children:a,container:l}=e,n=C(S,r);return(0,t.jsx)(L,{scope:r,forceMount:s,children:(0,t.jsx)(x.Presence,{present:s||n.open,children:(0,t.jsx)(u.Portal,{asChild:!0,container:l,children:a})})})};F.displayName=S;var M="PopoverContent",_=r.forwardRef((e,r)=>{let s=R(M,e.__scopePopover),{forceMount:a=s.forceMount,...l}=e,n=C(M,e.__scopePopover);return(0,t.jsx)(x.Presence,{present:a||n.open,children:n.modal?(0,t.jsx)(z,{...l,ref:r}):(0,t.jsx)(U,{...l,ref:r})})});_.displayName=M;var A=function(e){let s=function(e){let t=r.forwardRef((e,t)=>{let{children:s,...l}=e;if(r.isValidElement(s)){var n,i,o;let e,c,d=(c=(e=null==(i=Object.getOwnPropertyDescriptor((n=s).props,"ref"))?void 0:i.get)&&"isReactWarning"in e&&e.isReactWarning)?n.ref:(c=(e=null==(o=Object.getOwnPropertyDescriptor(n,"ref"))?void 0:o.get)&&"isReactWarning"in e&&e.isReactWarning)?n.props.ref:n.props.ref||n.ref,u=function(e,t){let r={...t};for(let s in t){let a=e[s],l=t[s];/^on[A-Z]/.test(s)?a&&l?r[s]=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let s=l(...t);return a(...t),s}:a&&(r[s]=a):"style"===s?r[s]={...a,...l}:"className"===s&&(r[s]=[a,l].filter(Boolean).join(" "))}return{...e,...r}}(l,s.props);return s.type!==r.Fragment&&(u.ref=t?(0,a.composeRefs)(t,d):d),r.cloneElement(s,u)}return r.Children.count(s)>1?r.Children.only(null):null});return t.displayName="".concat(e,".SlotClone"),t}(e),l=r.forwardRef((e,a)=>{let{children:l,...n}=e,i=r.Children.toArray(l),o=i.find(p);if(o){let e=o.props.children,l=i.map(t=>t!==o?t:r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null);return(0,t.jsx)(s,{...n,ref:a,children:r.isValidElement(e)?r.cloneElement(e,void 0,l):null})}return(0,t.jsx)(s,{...n,ref:a,children:l})});return l.displayName="".concat(e,".Slot"),l}("PopoverContent.RemoveScroll"),z=r.forwardRef((e,l)=>{let n=C(M,e.__scopePopover),i=r.useRef(null),o=(0,a.useComposedRefs)(l,i),c=r.useRef(!1);return r.useEffect(()=>{let e=i.current;if(e)return(0,v.hideOthers)(e)},[]),(0,t.jsx)(f.RemoveScroll,{as:A,allowPinchZoom:!0,children:(0,t.jsx)(O,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,s.composeEventHandlers)(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),c.current||null==(t=n.triggerRef.current)||t.focus()}),onPointerDownOutside:(0,s.composeEventHandlers)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;c.current=2===t.button||r},{checkForDefaultPrevented:!1}),onFocusOutside:(0,s.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),U=r.forwardRef((e,s)=>{let a=C(M,e.__scopePopover),l=r.useRef(!1),n=r.useRef(!1);return(0,t.jsx)(O,{...e,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var r,s;null==(r=e.onCloseAutoFocus)||r.call(e,t),t.defaultPrevented||(l.current||null==(s=a.triggerRef.current)||s.focus(),t.preventDefault()),l.current=!1,n.current=!1},onInteractOutside:t=>{var r,s;null==(r=e.onInteractOutside)||r.call(e,t),t.defaultPrevented||(l.current=!0,"pointerdown"===t.detail.originalEvent.type&&(n.current=!0));let i=t.target;(null==(s=a.triggerRef.current)?void 0:s.contains(i))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&n.current&&t.preventDefault()}})}),O=r.forwardRef((e,r)=>{let{__scopePopover:s,trapFocus:a,onOpenAutoFocus:l,onCloseAutoFocus:c,disableOutsidePointerEvents:u,onEscapeKeyDown:x,onPointerDownOutside:h,onFocusOutside:m,onInteractOutside:p,...g}=e,v=C(M,s),f=y(s);return(0,i.useFocusGuards)(),(0,t.jsx)(o.FocusScope,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:l,onUnmountAutoFocus:c,children:(0,t.jsx)(n.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:u,onInteractOutside:p,onEscapeKeyDown:x,onPointerDownOutside:h,onFocusOutside:m,onDismiss:()=>v.onOpenChange(!1),children:(0,t.jsx)(d.Content,{"data-state":D(v.open),role:"dialog",id:v.contentId,...f,...g,ref:r,style:{...g.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),B="PopoverClose";function D(e){return e?"open":"closed"}r.forwardRef((e,r)=>{let{__scopePopover:a,...l}=e,n=C(B,a);return(0,t.jsx)(h.Primitive.button,{type:"button",...l,ref:r,onClick:(0,s.composeEventHandlers)(e.onClick,()=>n.onOpenChange(!1))})}).displayName=B,r.forwardRef((e,r)=>{let{__scopePopover:s,...a}=e,l=y(s);return(0,t.jsx)(d.Arrow,{...l,...a,ref:r})}).displayName="PopoverArrow";var H=e.i(605458);function I(e){let{...r}=e;return(0,t.jsx)(k,{"data-slot":"popover",...r})}function V(e){let{...r}=e;return(0,t.jsx)(T,{"data-slot":"popover-trigger",...r})}function q(e){let{className:r,align:s="center",sideOffset:a=4,...l}=e;return(0,t.jsx)(F,{children:(0,t.jsx)(_,{"data-slot":"popover-content",align:s,sideOffset:a,className:(0,H.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",r),...l})})}},305914,e=>{"use strict";e.s(["default",()=>b],305914);var t=e.i(843476),r=e.i(437902),s=e.i(271645),a=e.i(431343),l=e.i(495242),n=e.i(382373);let i=(0,e.i(475254).default)("rotate-cw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);var o=e.i(367240),c=e.i(531278),d=e.i(497058),u=e.i(859951),x=e.i(740312),h=e.i(977293),m=e.i(589121);let p=[{bg:"bg-[#E8F2FF]",border:"border-[#bcd9ff]",text:"text-[#0b5bbf]",tail:"bg-[#E8F2FF] border-[#bcd9ff]"},{bg:"bg-[#FFF6CC]",border:"border-[#f1dc86]",text:"text-[#8a6a00]",tail:"bg-[#FFF6CC] border-[#f1dc86]"},{bg:"bg-[#F1F5F9]",border:"border-[#d7dee7]",text:"text-[#0f172a]",tail:"bg-[#F1F5F9] border-[#d7dee7]"}];function g(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function v(e,r){if(!e||!(null==r?void 0:r.length))return e;let s=r.filter(Boolean).map(g).join("|");if(!s)return e;let a=RegExp("(".concat(s,")"),"gi");return e.split(a).map((e,r)=>r%2?(0,t.jsx)("mark",{className:"bg-yellow-200/70 rounded px-0.5",children:e},r):(0,t.jsx)("span",{children:e},r))}function f(e,r,s,a,l){return r&&0!==r.length?(0,t.jsx)("div",{className:"inline leading-relaxed",children:r.map((e,l)=>(0,t.jsxs)("span",{onClick:()=>a(l,e.s/1e3),className:"cursor-pointer transition-all duration-200 rounded-sm px-0.5 -mx-0.5 ".concat(s===l?"bg-violet-100 text-violet-900 font-semibold shadow-sm":null!==s&&l<s?"text-gray-400":"text-gray-700 hover:bg-gray-50"),style:{textDecoration:s===l?"underline":"none",textDecorationColor:s===l?"#6D28D9":"transparent",textUnderlineOffset:"3px"},children:[e.t,l<r.length-1?" ":""]},l))}):v(e,l)}function j(e){let t=Math.floor(e/60),r=Math.floor(e%60);return"".concat(t,":").concat(r.toString().padStart(2,"0"))}function b(e){let{title:g,spriteUrl:b,lines:N,meta:y,defaultHighlight:w=[],maxVisibleLines:C=10,speakerPalette:k=p}=e,P=(0,s.useRef)(null),E=(0,s.useRef)(null),[T,S]=(0,s.useState)(null),[L,R]=(0,s.useState)(null),[F,M]=(0,s.useState)(!1),[_,A]=(0,s.useState)(!1),[z,U]=(0,s.useState)(0),[O,B]=(0,s.useState)(0),[D,H]=(0,s.useState)(1),[I,V]=(0,s.useState)(1),[q,Z]=(0,s.useState)(null),[W,K]=(0,s.useState)(null),[G,Y]=(0,s.useState)(!1),[$,X]=(0,s.useState)(!1),[J,Q]=(0,s.useState)(!1),[ee,et]=(0,s.useState)(!1),er=(0,s.useRef)(null),es=[.25,.5,.75,1,1.25,1.5],ea=(0,s.useRef)(void 0),el=(0,s.useRef)(null),en=(0,s.useMemo)(()=>{let e=new Set,t=[];for(let s of N){var r;let a=(null!=(r=s.speaker)?r:"").trim();a&&(e.has(a)||(e.add(a),t.push(a)))}return t},[N]),ei=(0,s.useMemo)(()=>{let e=new Map;return en.forEach((t,r)=>e.set(t,r)),e},[en]),eo=(0,s.useMemo)(()=>N.map(e=>{var t,r,s;let a=null!=e.start&&null!=e.end?Math.max(0,e.end-e.start):void 0;return{...e,_duration:a,_hl:(null==(t=e.highlight_words)?void 0:t.length)?e.highlight_words:w,_speakerIndex:null!=(s=ei.get(null!=(r=e.speaker)?r:""))?s:0}}),[N,ei,w]),ec=!!b&&eo.every(e=>null!=e._duration&&null!=e.start),ed=(0,s.useMemo)(()=>{if(!ec)return 0;let e=0;for(let t of eo)"number"==typeof t.end&&t.end>e&&(e=t.end);return e},[ec,eo]);(0,s.useEffect)(()=>()=>{var e;clearTimeout(er.current),null==(e=P.current)||e.pause()},[]),(0,s.useEffect)(()=>{let e=E.current;if(!e)return;let t=()=>{X(e.scrollHeight>e.clientHeight),Q(e.scrollTop>4),et(e.scrollTop+e.clientHeight<e.scrollHeight-4)};return t(),e.addEventListener("scroll",t,{passive:!0}),window.addEventListener("resize",t),()=>{e.removeEventListener("scroll",t),window.removeEventListener("resize",t)}},[eo.length]),(0,s.useEffect)(()=>{let e=setTimeout(()=>{let e=E.current;if(e){let t=e.scrollHeight>e.clientHeight;t!==$&&X(t)}},100);return()=>clearTimeout(e)},[eo,$]);let eu=(0,s.useCallback)(()=>{let e=P.current;e&&(F?e.pause():(A(!0),el.current=null,S(null),e.play().catch(console.error)))},[F]),ex=(0,s.useCallback)(e=>{let t=P.current;if(!t||!isFinite(t.duration)||0===t.duration)return;let r=Math.max(0,Math.min(t.currentTime+e,t.duration));t.currentTime=r,U(r)},[]),eh=(0,s.useCallback)(()=>{let e=(es.indexOf(D)+1)%es.length,t=es[e];H(t),P.current&&(P.current.playbackRate=t)},[D,es]),em=(0,s.useCallback)(e=>{H(e),P.current&&(P.current.playbackRate=e)},[]),ep=(0,s.useCallback)(e=>{let t=P.current;if(!t||!isFinite(t.duration)||0===t.duration)return;let r=Math.max(0,Math.min(e,t.duration));t.currentTime=r,U(r)},[]),eg=(0,s.useCallback)((e,t)=>{ep(t)},[ep]),ev=(0,s.useCallback)(e=>{let t=Math.max(0,Math.min(100,e[0]))/100;V(t),P.current&&(P.current.volume=t)},[]),ef=(0,s.useCallback)(()=>{if(!(null==y?void 0:y.word_index))return;let e=1e3*z,t=function(e,t){for(let r=0;r<e.length;r++){let s=e[r];if(void 0!==s.start&&void 0!==s.end){let e=1e3*s.start,a=1e3*s.end;if(t>=e&&t<=a)return r}}return null}(eo,e),r=null;if(null!==t){let s=(t+1).toString(),a=y.word_index[s],l=eo[t].start?1e3*eo[t].start:0;a&&(r=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;for(let s=0;s<e.length;s++){let a=r+e[s].s,l=r+e[s].e;if(t>=a&&t<=l)return s}return null}(a,e,l))}Z(t),K(r)},[null==y?void 0:y.word_index,eo,z]);return(0,s.useEffect)(()=>{let e=e=>{var t;if((null==(t=document.activeElement)?void 0:t.tagName.toLowerCase())!=="input")switch(e.key.toLowerCase()){case" ":case"k":e.preventDefault(),eu();break;case"j":case"arrowleft":e.preventDefault(),ex(-3);break;case"l":case"arrowright":e.preventDefault(),ex(3)}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[eu,ex]),(0,s.useEffect)(()=>{let e=()=>{ef(),F&&(ea.current=requestAnimationFrame(e))};return F&&(ea.current=requestAnimationFrame(e)),()=>{ea.current&&cancelAnimationFrame(ea.current)}},[F,ef]),(0,s.useEffect)(()=>{let e=P.current;if(!e)return;let t=()=>{let t=e.duration;(!isFinite(t)||t<=0)&&ed>0&&(t=ed),isFinite(t)&&t>0&&B(t)},r=()=>{t(),A(!1)},s=()=>{G||U(e.currentTime),null!==T&&null!=el.current&&e.currentTime>=el.current-.01&&(e.pause(),el.current=null,S(null),M(!1))},a=()=>{M(!0),A(!1)},l=()=>M(!1),n=()=>{M(!1),Z(null),K(null),el.current=null,S(null)},i=()=>A(!0),o=()=>{A(!1),t()};return e.addEventListener("loadedmetadata",r),e.addEventListener("durationchange",t),e.addEventListener("timeupdate",s),e.addEventListener("play",a),e.addEventListener("pause",l),e.addEventListener("ended",n),e.addEventListener("loadstart",i),e.addEventListener("canplay",o),e.volume=I,e.playbackRate=D,t(),()=>{e.removeEventListener("loadedmetadata",r),e.removeEventListener("durationchange",t),e.removeEventListener("timeupdate",s),e.removeEventListener("play",a),e.removeEventListener("pause",l),e.removeEventListener("ended",n),e.removeEventListener("loadstart",i),e.removeEventListener("canplay",o)}},[b,D,I,G,T,ed]),(0,t.jsx)(m.TooltipProvider,{delayDuration:150,children:(0,t.jsxs)("div",{className:"jsx-a45d5ed199426603 space-y-6",children:[(0,t.jsxs)("div",{className:"jsx-a45d5ed199426603 bg-white rounded-2xl border border-gray-200 shadow-lg p-6",children:[(0,t.jsx)("audio",{ref:P,preload:"auto",src:b,crossOrigin:"anonymous",className:"jsx-a45d5ed199426603 hidden"}),(0,t.jsxs)("div",{className:"jsx-a45d5ed199426603 flex items-center gap-4 mb-4",children:[(0,t.jsx)("div",{className:"jsx-a45d5ed199426603 relative",children:(0,t.jsx)(u.Button,{onClick:eu,className:"w-14 h-14 rounded-full bg-gray-900 hover:bg-gray-800 text-white shadow-lg relative",size:"icon",disabled:_,children:_?(0,t.jsx)(c.Loader2,{className:"w-7 h-7 animate-spin"}):F?(0,t.jsx)(l.Pause,{className:"w-7 h-7"}):(0,t.jsx)(a.Play,{className:"w-7 h-7 ml-1"})})}),(0,t.jsxs)("div",{className:"jsx-a45d5ed199426603 flex-1 mx-4",children:[g&&(0,t.jsx)("div",{className:"jsx-a45d5ed199426603 text-center mb-2",children:(0,t.jsx)("h4",{className:"jsx-a45d5ed199426603 text-sm font-medium text-gray-700 tracking-wide",children:g})}),(0,t.jsxs)("div",{className:"jsx-a45d5ed199426603 flex items-center gap-3",children:[(0,t.jsx)("span",{className:"jsx-a45d5ed199426603 text-sm font-mono text-gray-500 min-w-[2.5rem]",children:j(z)}),(0,t.jsx)("div",{className:"jsx-a45d5ed199426603 flex-1",children:(0,t.jsx)(x.Slider,{value:[O>0?Math.min(z,O):z],max:O>0?O:1,step:.05,onValueChange:e=>{let[t]=e;Y(!0),U(t)},onValueCommit:e=>{let[t]=e;ep(t),Y(!1)},className:"w-full cursor-pointer"})}),(0,t.jsx)("span",{className:"jsx-a45d5ed199426603 text-sm font-mono text-gray-500 min-w-[2.5rem]",children:j(O)})]})]}),(0,t.jsxs)(h.Popover,{children:[(0,t.jsx)(h.PopoverTrigger,{asChild:!0,children:(0,t.jsx)(u.Button,{variant:"ghost",size:"icon",className:"w-10 h-10 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-full",children:(0,t.jsx)(n.Volume2,{className:"w-5 h-5"})})}),(0,t.jsx)(h.PopoverContent,{className:"w-24 p-2",align:"end",children:(0,t.jsxs)("div",{className:"jsx-a45d5ed199426603 flex flex-col items-center h-24 justify-center",children:[(0,t.jsx)(x.Slider,{value:[Math.round(100*I)],max:100,step:1,onValueChange:ev,orientation:"vertical",className:"h-24"}),(0,t.jsxs)("div",{className:"jsx-a45d5ed199426603 text-[10px] text-center mt-1 text-gray-500 w-full",children:[Math.round(100*I),"%"]})]})})]})]}),(0,t.jsxs)("div",{className:"jsx-a45d5ed199426603 flex items-center justify-center gap-6",children:[(0,t.jsxs)(m.Tooltip,{children:[(0,t.jsx)(m.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(u.Button,{variant:"ghost",size:"icon",onClick:()=>ex(-3),className:"w-10 h-10 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-full",children:(0,t.jsx)(o.RotateCcw,{className:"w-5 h-5"})})}),(0,t.jsx)(m.TooltipContent,{children:"Skip back 3s"})]}),(0,t.jsxs)(m.Tooltip,{children:[(0,t.jsx)(m.TooltipTrigger,{asChild:!0,children:(0,t.jsxs)(u.Button,{variant:"ghost",onClick:eh,className:"text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded-lg px-3 py-2 text-sm font-medium min-w-[3rem]",children:[D,"×"]})}),(0,t.jsx)(m.TooltipContent,{children:(0,t.jsxs)("div",{className:"jsx-a45d5ed199426603 text-center",children:[(0,t.jsx)("div",{className:"jsx-a45d5ed199426603 text-xs text-gray-500 mb-1",children:"Available speeds:"}),(0,t.jsx)("div",{className:"jsx-a45d5ed199426603 flex gap-2 justify-center text-sm",children:es.map(e=>(0,t.jsxs)("button",{onClick:()=>em(e),className:"jsx-a45d5ed199426603 "+"px-1.5 py-0.5 rounded cursor-pointer transition-colors ".concat(e===D?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"),children:[e,"×"]},e))})]})})]}),(0,t.jsxs)(m.Tooltip,{children:[(0,t.jsx)(m.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(u.Button,{variant:"ghost",size:"icon",onClick:()=>ex(3),className:"w-10 h-10 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-full",children:(0,t.jsx)(i,{className:"w-5 h-5"})})}),(0,t.jsx)(m.TooltipContent,{children:"Skip forward 3s"})]})]})]}),null!==q&&(0,t.jsxs)("div",{className:"jsx-a45d5ed199426603 bg-gray-50 rounded-xl p-6 border border-gray-200",children:[(0,t.jsx)("div",{className:"jsx-a45d5ed199426603 text-lg leading-relaxed text-center",children:(()=>{var e,t,r;let s=eo[q],a=null==y||null==(e=y.word_index)?void 0:e[String(q+1)],l=null!=(r=s.start)?r:0;return f(s.vi,a,W,e=>{let t=null==a?void 0:a[e];t&&eg(e,l+t.s/1e3)},(null==(t=s.highlight_words)?void 0:t.length)?s.highlight_words:w)})()}),(0,t.jsx)("div",{className:"jsx-a45d5ed199426603 text-center mt-3",children:(0,t.jsx)("span",{className:"jsx-a45d5ed199426603 text-sm text-gray-500 font-medium",children:eo[q].speaker||"Speaker"})}),eo[q].en&&(0,t.jsxs)("div",{className:"jsx-a45d5ed199426603 text-center mt-2 text-sm text-gray-600 italic",children:['"',eo[q].en,'"']})]}),(0,t.jsxs)("div",{ref:E,className:"jsx-a45d5ed199426603 "+"relative ".concat("max-h-[60vh] overflow-y-auto scroll-area pr-1"),children:[$&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"jsx-a45d5ed199426603 "+"pointer-events-none absolute left-0 right-0 top-0 h-6 bg-gradient-to-b from-white to-transparent transition-opacity ".concat(J?"opacity-100":"opacity-0")}),(0,t.jsx)("div",{className:"jsx-a45d5ed199426603 "+"pointer-events-none absolute left-0 right-0 bottom-0 h-6 bg-gradient-to-t from-white to-transparent transition-opacity ".concat(ee?"opacity-100":"opacity-0")})]}),(0,t.jsx)("div",{className:"jsx-a45d5ed199426603 space-y-4",children:eo.map((e,r)=>{var s,a,i;let o=e._speakerIndex,c=o%2==0,x=null!=(a=k[o])?a:k[k.length-1];return(0,t.jsx)("div",{className:"jsx-a45d5ed199426603 "+"flex ".concat(c?"justify-start":"justify-end"),children:(0,t.jsxs)("div",{className:"jsx-a45d5ed199426603 "+"relative max-w-[92%] rounded-xl border p-3 shadow-sm ".concat(x.bg," ").concat(x.border," ").concat(c?"rounded-tl-none":"rounded-tr-none"),children:[(0,t.jsx)("span",{"aria-hidden":!0,className:"jsx-a45d5ed199426603 "+"absolute top-3 ".concat(c?"-left-1.5":"-right-1.5"," h-3 w-3 rotate-45 ").concat(x.bg," z-[-1]")}),(0,t.jsxs)("div",{className:"jsx-a45d5ed199426603 flex items-center gap-2",children:[(0,t.jsx)("span",{className:"jsx-a45d5ed199426603 font-semibold text-gray-700",children:null!=(i=e.speaker)?i:c?"A":"B"}),(ec||e.audioUrl)&&(0,t.jsx)(u.Button,{size:"icon",variant:"ghost",onClick:()=>{var e;return T===r?void(clearTimeout(er.current),null==(e=P.current)||e.pause(),S(null),el.current=null):(e=>{let t=P.current;if(!t)return;let r=eo[e];try{ec&&void 0!==r.start&&void 0!==r.end?(t.currentTime=Math.max(0,r.start),el.current=r.end,t.play().then(()=>S(e)).catch(e=>{console.error("Play sprite line error:",e),S(null),el.current=null})):r.audioUrl&&(t.src!==r.audioUrl&&(t.src=r.audioUrl),el.current=null,t.currentTime=0,t.play().then(()=>S(e)).catch(e=>{console.error("Play line file error:",e),S(null)}))}catch(e){console.error("Error playing line:",e),S(null)}})(r)},title:"Play line",className:"ml-1",children:T===r?(0,t.jsx)(l.Pause,{className:"h-4 w-4"}):(0,t.jsx)(n.Volume2,{className:"h-4 w-4"})}),(0,t.jsxs)(m.Tooltip,{children:[(0,t.jsx)(m.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(u.Button,{variant:"ghost",size:"icon",className:"p-1 h-7 w-7 text-gray-500 hover:text-indigo-600 hover:bg-indigo-50 rounded-full","aria-label":"See English translation",onMouseEnter:()=>R(r),onMouseLeave:()=>R(e=>e===r?null:e),disabled:!e.en,children:(0,t.jsx)(d.TbMessageLanguage,{className:"h-4 w-4"})})}),e.en&&L===r?(0,t.jsx)(m.TooltipContent,{side:"top",align:"center",sideOffset:8,className:"max-w-[28rem] whitespace-pre-wrap leading-relaxed text-sm",children:(0,t.jsxs)("p",{className:"jsx-a45d5ed199426603 italic text-gray-700",children:["“",e.en,"”"]})}):null]})]}),(0,t.jsx)("div",{className:"jsx-a45d5ed199426603 "+"mt-1 ".concat(x.text," font-medium"),children:q===r?(()=>{var t,s,a;let l=null==y||null==(t=y.word_index)?void 0:t[String(r+1)],n=null!=(a=e.start)?a:0;return f(e.vi,l,W,e=>{let t=null==l?void 0:l[e];t&&eg(e,n+t.s/1e3)},(null==(s=e.highlight_words)?void 0:s.length)?e.highlight_words:w)})():v(e.vi,(null==(s=e.highlight_words)?void 0:s.length)?e.highlight_words:w)})]})},r)})})]}),(0,t.jsx)(r.default,{id:"a45d5ed199426603",children:".scroll-area{scrollbar-gutter:stable both-edges;scroll-behavior:smooth;scrollbar-width:none}.scroll-area:hover{scrollbar-width:thin}.scroll-area::-webkit-scrollbar{width:0;height:0}.scroll-area:hover::-webkit-scrollbar{width:6px;height:6px}.scroll-area::-webkit-scrollbar-track{background:0 0}.scroll-area::-webkit-scrollbar-thumb{background:0 0;border-radius:999px}.scroll-area:hover::-webkit-scrollbar-thumb{background:rgba(0,0,0,.35)}.scroll-area::-webkit-scrollbar-thumb:hover{background:rgba(0,0,0,.5)}"})]})})}},635121,e=>{"use strict";e.s(["default",()=>s]);var t=e.i(843476),r=e.i(271645);function s(e){let{url:s,label:a="Open Storybook (Popup)"}=e,[l,n]=(0,r.useState)(!1);return(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("button",{onClick:()=>{if(!s)return;let e=function(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"gemini_story",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:960,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:720,l=null!=(t=window.top)?t:window,n=l.outerHeight?Math.max(0,(l.outerHeight-a)/2):0,i=l.outerWidth?Math.max(0,(l.outerWidth-s)/2):0;return window.open(e,r,"popup=yes,toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=".concat(s,",height=").concat(a,",top=").concat(n,",left=").concat(i))}(s);if(!e||e.closed){n(!0);let e=document.createElement("a");e.href=s,e.target="_blank",e.rel="noopener noreferrer",e.click()}},className:"inline-flex items-center rounded-md px-3 py-2 bg-[#067BC2] text-white hover:bg-[#055a9f] text-sm",children:a}),l&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Popup bị chặn bởi trình duyệt, đã mở trong tab mới."})]})}},316735,e=>{"use strict";e.s(["default",()=>c],316735);var t=e.i(843476),r=e.i(271645),s=e.i(373375),a=e.i(463059);let l=(0,e.i(475254).default)("book-marked",[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);var n=e.i(643531),i=e.i(628574),o=e.i(859951);function c(e){let{grammarPoints:c}=e,[d,u]=(0,r.useState)(0);if(!c||0===c.length)return null;let x=c[d],h=c.length;return(0,t.jsxs)(i.Card,{className:"bg-white shadow-lg rounded-xl",children:[(0,t.jsx)(i.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(l,{className:"h-6 w-6 text-violet-600"}),(0,t.jsx)(i.CardTitle,{className:"text-xl font-bold text-slate-800",children:"Grammar Points"})]}),h>1&&(0,t.jsxs)("div",{className:"ml-auto flex items-center gap-1.5 flex-nowrap",children:[(0,t.jsx)(o.Button,{variant:"ghost",size:"icon",onClick:()=>{u(e=>0===e?h-1:e-1)},className:"h-8 w-8 rounded-full hover:bg-violet-100 hover:text-violet-700 transition-colors","aria-label":"Previous grammar point",children:(0,t.jsx)(s.ChevronLeft,{className:"h-4 w-4"})}),(0,t.jsx)(o.Button,{variant:"ghost",size:"icon",onClick:()=>{u(e=>e===h-1?0:e+1)},className:"h-8 w-8 rounded-full hover:bg-violet-100 hover:text-violet-700 transition-colors","aria-label":"Next grammar point",children:(0,t.jsx)(a.ChevronRight,{className:"h-4 w-4"})})]})]})}),(0,t.jsxs)(i.CardContent,{children:[(0,t.jsxs)("div",{className:"space-y-3 rounded-lg border border-violet-200 bg-violet-50/50 p-4 min-h-[200px]",children:[x.usage&&(0,t.jsx)("p",{className:"text-base text-slate-700 leading-relaxed",children:x.usage}),x.structure&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h5",{className:"text-sm font-semibold text-slate-600 mb-1",children:"Formula"}),(0,t.jsx)("div",{className:"rounded-md bg-violet-100 p-2 text-sm font-mono text-violet-900 border border-violet-200",children:x.structure})]}),Array.isArray(x.notes)&&x.notes.length>0&&(0,t.jsxs)("div",{className:"pt-2",children:[(0,t.jsx)("h5",{className:"text-sm font-semibold text-slate-600 mb-2",children:"Notes"}),(0,t.jsx)("ul",{className:"space-y-2",children:x.notes.map((e,r)=>(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[(0,t.jsx)(n.Check,{className:"h-4 w-4 mt-1 shrink-0 text-violet-500"}),(0,t.jsx)("span",{className:"text-sm text-slate-600",children:e})]},r))})]})]}),h>1&&(0,t.jsx)("div",{className:"flex justify-center gap-1 mt-4",children:Array.from({length:h}).map((e,r)=>(0,t.jsx)("button",{onClick:()=>u(r),className:"h-2 w-2 rounded-full transition-colors ".concat(r===d?"bg-violet-600":"bg-violet-200 hover:bg-violet-300"),"aria-label":"Go to grammar point ".concat(r+1)},r))})]})]})}},805068,e=>{"use strict";e.s(["default",()=>h],805068),e.i(247167);var t=e.i(843476),r=e.i(271645),s=e.i(194983),a=e.i(431343),l=e.i(495242),n=e.i(631171),n=n,i=e.i(399219),i=i,o=e.i(497058),c=e.i(628574),d=e.i(859951),u=e.i(589121),x=e.i(207670);function h(e){let{examples:a}=e;if(!a||0===a.length)return null;let[l,o]=(0,r.useState)(!1),h=a.length>2;return(0,t.jsxs)(c.Card,{className:"bg-white shadow-lg rounded-xl",children:[(0,t.jsx)(c.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(s.MessageCircle,{className:"h-6 w-6 text-emerald-600"}),(0,t.jsx)(c.CardTitle,{className:"text-xl font-bold text-slate-800 flex-1",children:"Example Sentences"}),h&&(0,t.jsx)(d.Button,{variant:"ghost",size:"sm",onClick:()=>o(e=>!e),className:"h-7 px-2 text-emerald-700 hover:text-emerald-800 hover:bg-emerald-100","aria-expanded":l,children:l?(0,t.jsxs)("span",{className:"flex items-center gap-1 text-sm font-medium",children:["Less ",(0,t.jsx)(i.default,{className:"h-4 w-4"})]}):(0,t.jsxs)("span",{className:"flex items-center gap-1 text-sm font-medium",children:["More ",(0,t.jsx)(n.default,{className:"h-4 w-4"})]})})]})}),(0,t.jsx)(u.TooltipProvider,{children:(0,t.jsxs)(c.CardContent,{className:"relative",children:[(0,t.jsx)("div",{className:"space-y-3",children:a.map((e,r)=>(0,t.jsx)("div",{className:(0,x.default)(!l&&r>=2&&"hidden"),children:(0,t.jsx)(m,{example:e})},r))}),h&&!l&&(0,t.jsx)("div",{className:"pointer-events-none absolute inset-x-0 bottom-0 h-20 bg-gradient-to-t from-white to-transparent rounded-b-xl"})]})})]})}function m(e){var s;let{example:n}=e,[i,c]=(0,r.useState)(!1),[x,h]=(0,r.useState)(0),[m,p]=(0,r.useState)(0),[g,v]=(0,r.useState)(null!=(s=n.audioUrl)?s:null),f=(0,r.useRef)(null),j=(0,r.useRef)(null);return(0,r.useEffect)(()=>{!n.audioUrl&&n.audioPath&&v("".concat("https://uavvljncupscxoxofcvp.supabase.co","/storage/v1/object/public/lesson-materials/").concat(n.audioPath))},[n.audioUrl,n.audioPath]),(0,t.jsxs)("div",{className:"group rounded-lg border border-slate-200 bg-slate-50/70 p-4 transition-all duration-200 hover:border-emerald-200 hover:bg-emerald-50/60",children:[g&&(0,t.jsx)("audio",{ref:f,src:g,preload:"metadata",onPlay:()=>c(!0),onPause:()=>c(!1),onEnded:()=>c(!1),onTimeUpdate:()=>{var e;p((null==(e=f.current)?void 0:e.currentTime)||0)},onLoadedMetadata:()=>{var e;h((null==(e=f.current)?void 0:e.duration)||0)}}),(0,t.jsxs)("div",{className:"mb-3 flex items-start gap-2",children:[(0,t.jsxs)("p",{className:"font-semibold text-emerald-800 text-base leading-relaxed flex-1",children:["“",n.vi,"”"]}),n.en&&(0,t.jsxs)(u.Tooltip,{children:[(0,t.jsx)(u.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(d.Button,{variant:"ghost",size:"sm","aria-label":"Show English translation",className:"h-7 w-7 p-0 shrink-0 text-emerald-700 hover:text-emerald-800 hover:bg-emerald-100",children:(0,t.jsx)(o.TbMessageLanguage,{className:"h-4 w-4"})})}),(0,t.jsx)(u.TooltipContent,{side:"top",className:"max-w-xs",children:(0,t.jsx)("p",{className:"text-sm italic",children:n.en})})]})]}),g&&(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(d.Button,{size:"icon",variant:"ghost",onClick:()=>{var e,t;i?null==(e=f.current)||e.pause():null==(t=f.current)||t.play(),c(!i)},className:"h-8 w-8 shrink-0 rounded-full text-emerald-700 bg-emerald-100 hover:bg-emerald-200",children:i?(0,t.jsx)(l.Pause,{className:"h-4 w-4"}):(0,t.jsx)(a.Play,{className:"h-4 w-4"})}),(0,t.jsx)("div",{className:"flex-grow flex items-center gap-2",children:(0,t.jsx)("div",{ref:j,onClick:e=>{if(j.current&&f.current){let t=j.current.clientWidth,r=e.nativeEvent.offsetX/t*x;f.current.currentTime=r,p(r)}},className:"w-full h-1.5 bg-emerald-200/80 rounded-full cursor-pointer",children:(0,t.jsx)("div",{style:{width:"".concat(x>0?m/x*100:0,"%")},className:"h-full bg-emerald-600 rounded-full transition-all"})})})]})]})}},115e3,e=>{"use strict";e.s(["default",()=>b],115e3);var t=e.i(843476),r=e.i(283086),s=e.i(870273),a=e.i(628574),l=e.i(605458),n=e.i(166778),i=e.i(271645),o=e.i(382373),c=e.i(571930),d=e.i(531278),u=e.i(977293),x=e.i(859951),h=e.i(95187),m=(0,h.createServerReference)("40b7874b5beee18e2e913212052e9efd3061f9459a",h.callServer,void 0,h.findSourceMapURL,"saveVocabularyFromLesson"),p=(0,h.createServerReference)("40a12d3392f5f7e3fd35f464eebcfef7da83f3293b",h.callServer,void 0,h.findSourceMapURL,"unsaveVocabularyFromLesson");async function g(e,t){if(!e)throw Error("Audio path is required");let{data:r}=t.storage.from("lesson-materials").getPublicUrl(e),s=r.publicUrl;if(!s)throw Error("Failed to get public URL for audio file");let a=new Audio(s);return new Promise((e,t)=>{a.oncanplaythrough=()=>{a.play().then(()=>{e(a)}).catch(e=>{t(Error("Failed to play audio: ".concat(e.message)))})},a.onerror=e=>{t(Error("Audio loading error: ".concat(e)))},a.load()})}var v=e.i(859016),f=e.i(618566);function j(e){let{vocabulary:r,topicId:s,lessonId:a,children:n}=e,[h,j]=(0,i.useState)(!1),[b,N]=(0,i.useState)(r.isSaved),[y,w]=(0,i.useState)(!1),[C,k]=(0,i.useState)(!1),P=(0,i.useRef)(null),E=(0,f.useRouter)();(0,i.useEffect)(()=>()=>{var e;P.current&&(e=P.current)&&(e.pause(),e.currentTime=0)},[]);let T=async()=>{if(r.audio)try{k(!0);let e=(0,v.createClient)(),t=await g(r.audio,e);P.current=t,t.onended=()=>{k(!1),P.current=null},t.onerror=()=>{k(!1),P.current=null}}catch(e){console.error("Error playing audio:",e),k(!1)}},S=async()=>{if(!y)try{w(!0);let e=await m({topicId:s,lessonId:a,vietnameseText:r.vi,englishText:r.en,ipa:r.ipa||null,audioPath:r.audio||null,pos:r.pos||null});e.success?(N(!0),E.refresh()):console.error("Failed to save vocabulary:",e.error)}catch(e){console.error("Error saving vocabulary:",e)}finally{w(!1)}},L=async()=>{if(!y)try{w(!0);let e=await p(r.vocabKey);e.success?(N(!1),E.refresh()):console.error("Failed to unsave vocabulary:",e.error)}catch(e){console.error("Error unsaving vocabulary:",e)}finally{w(!1)}};return(0,t.jsxs)(u.Popover,{open:h,onOpenChange:j,children:[(0,t.jsx)(u.PopoverTrigger,{asChild:!0,children:(0,t.jsx)("span",{className:(0,l.cn)("cursor-pointer transition-all",h&&"underline decoration-dashed",b&&"text-indigo-600"),onMouseEnter:()=>j(!0),onMouseLeave:()=>j(!1),children:n})}),(0,t.jsx)(u.PopoverContent,{className:"w-auto p-2",side:"top",align:"start",sideOffset:8,onMouseEnter:()=>j(!0),onMouseLeave:()=>j(!1),children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[r.ipa&&(0,t.jsxs)("span",{className:"text-sm font-mono text-slate-700",children:["/",r.ipa,"/"]}),r.audio&&(0,t.jsx)(x.Button,{variant:"ghost",size:"icon",onClick:T,disabled:C,className:"h-7 w-7",title:"Play pronunciation",children:C?(0,t.jsx)(d.Loader2,{className:"h-3.5 w-3.5 animate-spin"}):(0,t.jsx)(o.Volume2,{className:"h-3.5 w-3.5"})}),(0,t.jsx)(x.Button,{variant:"ghost",size:"icon",onClick:b?L:S,disabled:y,className:(0,l.cn)("h-7 w-7",b&&"text-primary"),title:b?"Unsave vocabulary":"Save vocabulary",children:y?(0,t.jsx)(d.Loader2,{className:"h-3.5 w-3.5 animate-spin"}):(0,t.jsx)(c.Bookmark,{className:(0,l.cn)("h-3.5 w-3.5",b&&"fill-current")})})]})})]})}function b(e){let{vocabulary:i,topicId:o,lessonId:c,maxHeight:d="200px"}=e;return i&&0!==i.length?(0,t.jsxs)(a.Card,{className:"bg-white shadow-lg rounded-xl",children:[(0,t.jsxs)(a.CardHeader,{className:"pb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(r.Sparkles,{className:"h-6 w-6 text-indigo-600"}),(0,t.jsx)(a.CardTitle,{className:"text-xl font-bold text-slate-800",children:"Key Vocabulary"})]}),i.length>8&&(0,t.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:["Scroll to see all ",i.length," words"]})]}),(0,t.jsx)(a.CardContent,{className:"pt-0",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:(0,l.cn)("divide-y divide-slate-200 overflow-y-auto custom-scrollbar pr-2",i.length>8&&"pb-4"),style:{maxHeight:d},children:i.map((e,r)=>{let a=(e=>{if(!e)return{label:"",className:"hidden"};let t=String(e).toLowerCase().trim();switch(t.toLowerCase()){case"noun":case"n":return{label:"n.",className:"bg-blue-100 text-blue-800"};case"verb":case"v":return{label:"v.",className:"bg-emerald-100 text-emerald-800"};case"adjective":case"adj":return{label:"adj.",className:"bg-purple-100 text-purple-800"};case"adverb":case"adv":return{label:"adv.",className:"bg-teal-100 text-teal-800"};case"phrase":case"phr":case"phr.":return{label:"phr.",className:"bg-amber-100 text-amber-800"};case"verb phrase":case"vp":return{label:"v.phr.",className:"bg-emerald-200 text-emerald-900"};case"conjunction":case"conj":return{label:"conj.",className:"bg-pink-100 text-pink-800"};case"pronoun":case"pron":return{label:"pron.",className:"bg-indigo-100 text-indigo-800"};case"preposition":case"prep":return{label:"prep.",className:"bg-rose-100 text-rose-800"};case"particle":case"prt":return{label:"prt.",className:"bg-gray-200 text-gray-800"};case"determiner":case"det":return{label:"det.",className:"bg-yellow-100 text-yellow-800"};case"classifier":case"clf":return{label:"clf.",className:"bg-lime-100 text-lime-800"};default:return{label:t.slice(0,3)+".",className:"bg-slate-100 text-slate-800"}}})(e.pos);return(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 py-3 first:pt-0 hover:bg-indigo-50/50 transition-colors duration-150 rounded-md px-2 -mx-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 relative",children:[(0,t.jsx)(n.Badge,{className:(0,l.cn)("rounded-md px-2 py-0.5 text-xs pointer-events-none transition-none",a.className),children:a.label}),(0,t.jsxs)("div",{className:"flex items-center gap-2 relative flex-1",children:[(0,t.jsx)(j,{vocabulary:e,topicId:o,lessonId:c,children:(0,t.jsx)("span",{className:"font-semibold text-indigo-700 leading-relaxed",children:e.vi})}),e.isSaved&&(0,t.jsx)(s.Star,{className:"h-3 w-3 text-amber-500 fill-amber-500 shrink-0"})]})]}),(0,t.jsx)("p",{className:"text-slate-600 justify-self-end text-right leading-relaxed",children:e.en})]},r)})}),i.length>8&&(0,t.jsx)("div",{className:"absolute bottom-0 left-0 right-2 h-6 bg-gradient-to-t from-white to-transparent pointer-events-none rounded-b-lg","aria-hidden":"true"})]})})]}):null}},70388,e=>{"use strict";e.s(["default",()=>l]);var t=e.i(843476),r=e.i(545208),s=e.i(575822),a=e.i(271645);let l=()=>{var e;let{profile:l,loading:n}=(0,r.useUserProfile)(),[i,o]=(0,a.useState)(!1);(0,a.useEffect)(()=>{o(!0)},[]);let c=i&&n,d=c?"--":null!=(e=null==l?void 0:l.coins)?e:0;return(0,t.jsxs)("div",{className:"flex items-center gap-2 bg-amber-50 px-3 py-1.5 rounded-full border border-amber-200 ".concat(c?"animate-pulse":""),children:[(0,t.jsx)(s.Coins,{className:"h-5 w-5 text-amber-500"}),(0,t.jsx)("span",{className:"font-semibold text-amber-700",children:d})]})}},765266,e=>{"use strict";e.s(["UserProgressProvider",()=>n,"useUserProgress",()=>i]);var t=e.i(843476),r=e.i(271645),s=e.i(794846);let a={completedLessons:[],unlockedChapters:[],coins:0},l=(0,r.createContext)(void 0),n=e=>{let{children:n}=e,[i,o]=(0,r.useState)(a),{toast:c}=(0,s.useToast)();return(0,t.jsx)(l.Provider,{value:{userProgress:i,completeLesson:e=>{i.completedLessons.includes(e)||(o(t=>({...t,completedLessons:[...t.completedLessons,e],coins:t.coins+10})),c({title:"Lesson Completed!",description:"You've earned 10 coins.",variant:"default"}))},unlockChapter:(e,t)=>i.coins<t?(c({title:"Not enough coins",description:"You need ".concat(t," coins to unlock this chapter."),variant:"destructive"}),!1):(i.unlockedChapters.includes(e)||(o(r=>({...r,unlockedChapters:[...r.unlockedChapters,e],coins:r.coins-t})),c({title:"Chapter Unlocked!",description:"You've spent ".concat(t," coins to unlock this chapter."),variant:"default"})),!0),isLessonLocked:(e,t)=>{if(!i.unlockedChapters.includes(t))return!0;if(1===e.order)return!1;let r="".concat(t,"-").concat(e.order-1);return!i.completedLessons.includes(r)},canUnlockChapter:e=>i.coins>=e},children:n})},i=()=>{let e=(0,r.useContext)(l);if(void 0===e)throw Error("useUserProgress must be used within a UserProgressProvider");return e}},113207,e=>{"use strict";e.s(["default",()=>n]);var t=e.i(843476),r=e.i(657688),s=e.i(618566),a=e.i(628574),l=e.i(765266);let n=e=>{var n,i;let{topic:o}=e,c=(0,s.useRouter)(),{userProgress:d}=(0,l.useUserProgress)(),u=o.chapters.flatMap(e=>e.lessons),x=u.filter(e=>d.completedLessons.includes(e.id)).length,h=u.length>0?x/u.length*100:0;return(0,t.jsx)(a.Card,{className:"group cursor-pointer transition-all duration-300 hover:shadow-xl hover:scale-105 bg-white border-0 shadow-md overflow-hidden rounded-xl",onClick:()=>{c.push("/learn/".concat(o.slug))},children:(0,t.jsxs)(a.CardContent,{className:"p-0",children:[(0,t.jsxs)("div",{className:"relative aspect-square bg-gradient-to-br from-orange-100 to-orange-200 overflow-hidden rounded-t-xl",children:[o.image?(0,t.jsx)(r.default,{src:o.image,alt:o.title,fill:!0,className:"object-cover group-hover:scale-110 transition-transform duration-300"}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,t.jsx)("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center",children:(0,t.jsx)("div",{className:"w-8 h-8 bg-orange-400 rounded-lg"})})}),h>0&&(0,t.jsx)("div",{className:"absolute top-3 right-3 bg-white/90 backdrop-blur-sm rounded-full px-3 py-1.5",children:(0,t.jsxs)("span",{className:"text-xs font-bold text-green-600",children:[Math.round(h),"%"]})})]}),(0,t.jsxs)("div",{className:"p-5",children:[(0,t.jsx)("h3",{className:"font-bold text-gray-900 mb-2 group-hover:text-[#067BC2] transition-colors text-lg",children:o.title}),o.description&&(0,t.jsx)("p",{className:"text-sm text-gray-600 leading-relaxed mb-3 line-clamp-2",children:o.description}),(0,t.jsxs)("div",{className:"text-xs text-gray-500 font-medium",children:[null!=(n=o.lessonCount)?n:0," lesson",(null!=(i=o.lessonCount)?i:0)!==1?"s":""]})]})]})})}},447297,e=>{"use strict";e.s(["default",()=>s]);var t=e.i(843476),r=e.i(113207);let s=e=>{let{zone:s}=e;return(0,t.jsxs)("section",{className:"mb-12",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:s.title}),(0,t.jsx)("p",{className:"text-gray-600 text-lg leading-relaxed max-w-4xl",children:s.description})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:s.topics.map(e=>(0,t.jsx)(r.default,{topic:e},e.id))})]})}},595468,e=>{"use strict";e.s(["CheckCircle2",()=>t.default]);var t=e.i(123287)},285370,e=>{"use strict";e.s(["LessonProgressBadge",()=>n]);var t=e.i(843476),r=e.i(166778),s=e.i(595468),a=e.i(503116),l=e.i(114683);function n(e){let{status:n,bestScore:i=0,passThreshold:o=80,className:c=""}=e;return"passed"===n?(0,t.jsxs)(r.Badge,{className:"bg-green-500 hover:bg-green-600 text-white flex items-center gap-1 text-xs px-2 py-1 w-fit ".concat(c),children:[(0,t.jsx)(s.CheckCircle2,{size:12}),(0,t.jsxs)("span",{children:[Math.round(i),"%"]})]}):"in_progress"===n?(0,t.jsxs)(r.Badge,{variant:"secondary",className:"bg-blue-100 hover:bg-blue-200 text-blue-700 flex items-center gap-1 text-xs px-2 py-1 w-fit ".concat(c),children:[(0,t.jsx)(a.Clock,{size:12}),(0,t.jsxs)("span",{children:[Math.round(i),"%"]})]}):(0,t.jsxs)(r.Badge,{variant:"outline",className:"bg-gray-50 text-gray-600 flex items-center gap-1 text-xs px-2 py-1 w-fit ".concat(c),children:[(0,t.jsx)(l.Circle,{size:12}),(0,t.jsx)("span",{children:"Start"})]})}},991101,e=>{"use strict";e.s(["LessonUnlockTooltip",()=>n]);var t=e.i(843476),r=e.i(589121),s=e.i(270756),a=e.i(595468),l=e.i(243553);function n(e){let{unlockStatus:n,children:i}=e;return n.isLocked?(0,t.jsx)(r.TooltipProvider,{children:(0,t.jsxs)(r.Tooltip,{children:[(0,t.jsx)(r.TooltipTrigger,{asChild:!0,children:i}),(0,t.jsx)(r.TooltipContent,{side:"right",className:"bg-gray-900 text-white border-gray-700 max-w-xs",children:(()=>{switch(n.reason){case"login_required":return(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)(s.Lock,{size:16,className:"mt-0.5 flex-shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold",children:"Login Required"}),(0,t.jsx)("p",{className:"text-xs text-gray-300 mt-1",children:"Please log in to access lessons"})]})]});case"zone_locked":return(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)(s.Lock,{size:16,className:"mt-0.5 flex-shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold",children:"Zone Locked"}),(0,t.jsx)("p",{className:"text-xs text-gray-300 mt-1",children:n.requiredAction}),void 0!==n.completedTopicsInPrevZone&&void 0!==n.totalTopicsInPrevZone&&(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsx)("div",{className:"text-xs text-gray-400",children:"Progress:"}),(0,t.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-2 mt-1",children:(0,t.jsx)("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat(n.completedTopicsInPrevZone/n.totalTopicsInPrevZone*100,"%")}})}),(0,t.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:[n.completedTopicsInPrevZone," / ",n.totalTopicsInPrevZone," topics completed"]})]})]})]});case"previous_incomplete":return(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)(a.CheckCircle2,{size:16,className:"mt-0.5 flex-shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold",children:"Previous Lesson Required"}),(0,t.jsx)("p",{className:"text-xs text-gray-300 mt-1",children:n.requiredAction})]})]});case"tier_restriction":return(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)(l.Crown,{size:16,className:"mt-0.5 flex-shrink-0 text-yellow-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold",children:"Upgrade Required"}),(0,t.jsx)("p",{className:"text-xs text-gray-300 mt-1",children:n.requiredAction||"Upgrade your subscription to access this lesson"})]})]});case"loading":return(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold",children:"Loading..."}),(0,t.jsx)("p",{className:"text-xs text-gray-300 mt-1",children:"Checking unlock status"})]})]});default:return(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)(s.Lock,{size:16,className:"mt-0.5 flex-shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold",children:"Locked"}),(0,t.jsx)("p",{className:"text-xs text-gray-300 mt-1",children:"This lesson is currently unavailable"})]})]})}})()})]})}):(0,t.jsx)(t.Fragment,{children:i})}}]);