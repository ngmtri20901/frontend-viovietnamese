(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,407983,883272,t=>{"use strict";t.s(["clear",()=>tv,"clear2",()=>e5,"createLabel_default",()=>tu,"insertCluster",()=>tb,"insertNode",()=>e2,"isValidShape",()=>e$,"labelHelper",()=>ta,"positionNode",()=>e3,"setNodeElem",()=>e1,"updateNodeBounds",()=>tn],407983);var e,a=t.i(102256),l=t.i(833448),n=t.i(780262),r=t.i(195923),i=t.i(80926),s=t.i(171206);t.i(947716);var o=t.i(723685);function c(t,e,a){if(t&&t.length){let[l,n]=e,r=Math.PI/180*a,i=Math.cos(r),s=Math.sin(r);for(let e of t){let[t,a]=e;e[0]=(t-l)*i-(a-n)*s+l,e[1]=(t-l)*s+(a-n)*i+n}}}function h(t,e){var a;let l=e.hachureAngle+90,n=e.hachureGap;n<0&&(n=4*e.strokeWidth),n=Math.round(Math.max(n,.1));let r=1;return e.roughness>=1&&((null==(a=e.randomizer)?void 0:a.next())||Math.random())>.7&&(r=n),function(t,e,a){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,n=Math.max(e,.1),r=t[0]&&t[0][0]&&"number"==typeof t[0][0]?[t]:t,i=[0,0];if(a)for(let t of r)c(t,i,a);let s=function(t,e,a){let l=[];for(let e of t){var n,r;let t=[...e];n=t[0],r=t[t.length-1],n[0]===r[0]&&n[1]===r[1]||t.push([t[0][0],t[0][1]]),t.length>2&&l.push(t)}let i=[];e=Math.max(e,.1);let s=[];for(let t of l)for(let e=0;e<t.length-1;e++){let a=t[e],l=t[e+1];if(a[1]!==l[1]){let t=Math.min(a[1],l[1]);s.push({ymin:t,ymax:Math.max(a[1],l[1]),x:t===a[1]?a[0]:l[0],islope:(l[0]-a[0])/(l[1]-a[1])})}}if(s.sort((t,e)=>t.ymin<e.ymin?-1:t.ymin>e.ymin?1:t.x<e.x?-1:t.x>e.x?1:t.ymax===e.ymax?0:(t.ymax-e.ymax)/Math.abs(t.ymax-e.ymax)),!s.length)return i;let o=[],c=s[0].ymin,h=0;for(;o.length||s.length;){if(s.length){let t=-1;for(let e=0;e<s.length&&!(s[e].ymin>c);e++)t=e;s.splice(0,t+1).forEach(t=>{o.push({s:c,edge:t})})}if((o=o.filter(t=>!(t.edge.ymax<=c))).sort((t,e)=>t.edge.x===e.edge.x?0:(t.edge.x-e.edge.x)/Math.abs(t.edge.x-e.edge.x)),(1!==a||h%e==0)&&o.length>1)for(let t=0;t<o.length;t+=2){let e=t+1;if(e>=o.length)break;let a=o[t].edge,l=o[e].edge;i.push([[Math.round(a.x),c],[Math.round(l.x),c]])}c+=a,o.forEach(t=>{t.edge.x=t.edge.x+a*t.edge.islope}),h++}return i}(r,n,l);if(a){for(let t of r)c(t,i,-a);let t=[];s.forEach(e=>t.push(...e)),c(t,i,-a)}return s}(t,n,l,r||1)}t.s(["default",()=>te],883272);class d{fillPolygons(t,e){return this._fillPolygons(t,e)}_fillPolygons(t,e){let a=h(t,e);return{type:"fillSketch",ops:this.renderLines(a,e)}}renderLines(t,e){let a=[];for(let l of t)a.push(...this.helper.doubleLineOps(l[0][0],l[0][1],l[1][0],l[1][1],e));return a}constructor(t){this.helper=t}}function u(t){let e=t[0],a=t[1];return Math.sqrt(Math.pow(e[0]-a[0],2)+Math.pow(e[1]-a[1],2))}class g extends d{fillPolygons(t,e){let a=e.hachureGap;a<0&&(a=4*e.strokeWidth);let l=h(t,Object.assign({},e,{hachureGap:a=Math.max(a,.1)})),n=Math.PI/180*e.hachureAngle,r=[],i=.5*a*Math.cos(n),s=.5*a*Math.sin(n);for(let[t,e]of l)u([t,e])&&r.push([[t[0]-i,t[1]+s],[...e]],[[t[0]+i,t[1]-s],[...e]]);return{type:"fillSketch",ops:this.renderLines(r,e)}}}class f extends d{fillPolygons(t,e){let a=this._fillPolygons(t,e),l=Object.assign({},e,{hachureAngle:e.hachureAngle+90}),n=this._fillPolygons(t,l);return a.ops=a.ops.concat(n.ops),a}}class p{fillPolygons(t,e){let a=h(t,e=Object.assign({},e,{hachureAngle:0}));return this.dotsOnLines(a,e)}dotsOnLines(t,e){let a=[],l=e.hachureGap;l<0&&(l=4*e.strokeWidth),l=Math.max(l,.1);let n=e.fillWeight;n<0&&(n=e.strokeWidth/2);let r=l/4;for(let i of t){let t=u(i),s=Math.ceil(t/l)-1,o=t-s*l,c=(i[0][0]+i[1][0])/2-l/4,h=Math.min(i[0][1],i[1][1]);for(let t=0;t<s;t++){let i=c-r+2*Math.random()*r,s=h+o+t*l-r+2*Math.random()*r,d=this.helper.ellipse(i,s,n,n,e);a.push(...d.ops)}}return{type:"fillSketch",ops:a}}constructor(t){this.helper=t}}class y{fillPolygons(t,e){let a=h(t,e);return{type:"fillSketch",ops:this.dashedLine(a,e)}}dashedLine(t,e){let a=e.dashOffset<0?e.hachureGap<0?4*e.strokeWidth:e.hachureGap:e.dashOffset,l=e.dashGap<0?e.hachureGap<0?4*e.strokeWidth:e.hachureGap:e.dashGap,n=[];return t.forEach(t=>{let r=u(t),i=Math.floor(r/(a+l)),s=(r+l-i*(a+l))/2,o=t[0],c=t[1];o[0]>c[0]&&(o=t[1],c=t[0]);let h=Math.atan((c[1]-o[1])/(c[0]-o[0]));for(let t=0;t<i;t++){let r=t*(a+l),i=r+a,c=[o[0]+r*Math.cos(h)+s*Math.cos(h),o[1]+r*Math.sin(h)+s*Math.sin(h)],d=[o[0]+i*Math.cos(h)+s*Math.cos(h),o[1]+i*Math.sin(h)+s*Math.sin(h)];n.push(...this.helper.doubleLineOps(c[0],c[1],d[0],d[1],e))}}),n}constructor(t){this.helper=t}}class m{fillPolygons(t,e){let a=e.hachureGap<0?4*e.strokeWidth:e.hachureGap,l=e.zigzagOffset<0?a:e.zigzagOffset,n=h(t,e=Object.assign({},e,{hachureGap:a+l}));return{type:"fillSketch",ops:this.zigzagLines(n,l,e)}}zigzagLines(t,e,a){let l=[];return t.forEach(t=>{let n=Math.round(u(t)/(2*e)),r=t[0],i=t[1];r[0]>i[0]&&(r=t[1],i=t[0]);let s=Math.atan((i[1]-r[1])/(i[0]-r[0]));for(let t=0;t<n;t++){let n=2*t*e,i=2*(t+1)*e,o=Math.sqrt(2*Math.pow(e,2)),c=[r[0]+n*Math.cos(s),r[1]+n*Math.sin(s)],h=[r[0]+i*Math.cos(s),r[1]+i*Math.sin(s)],d=[c[0]+o*Math.cos(s+Math.PI/4),c[1]+o*Math.sin(s+Math.PI/4)];l.push(...this.helper.doubleLineOps(c[0],c[1],d[0],d[1],a),...this.helper.doubleLineOps(d[0],d[1],h[0],h[1],a))}}),l}constructor(t){this.helper=t}}let x={};class w{next(){return this.seed?(0x80000000-1&(this.seed=Math.imul(48271,this.seed)))/0x80000000:Math.random()}constructor(t){this.seed=t}}let b={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function v(t){let e=[],a=function(t){let e=[];for(;""!==t;)if(t.match(/^([ \t\r\n,]+)/))t=t.substr(RegExp.$1.length);else if(t.match(/^([aAcChHlLmMqQsStTvVzZ])/))e[e.length]={type:0,text:RegExp.$1},t=t.substr(RegExp.$1.length);else{if(!t.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];e[e.length]={type:1,text:"".concat(parseFloat(RegExp.$1))},t=t.substr(RegExp.$1.length)}return e[e.length]={type:2,text:""},e}(t),l="BOD",n=0,r=a[0];for(;2!==r.type;){let i=0,s=[];if("BOD"===l){if("M"!==r.text&&"m"!==r.text)return v("M0,0"+t);n++,i=b[r.text],l=r.text}else 1===r.type?i=b[l]:(n++,i=b[r.text],l=r.text);if(!(n+i<a.length))throw Error("Path data ended short");for(let t=n;t<n+i;t++){let e=a[t];if(1!==e.type)throw Error("Param not a number: "+l+","+e.text);s[s.length]=+e.text}if("number"!=typeof b[l])throw Error("Bad segment: "+l);{let t={key:l,data:s};e.push(t),n+=i,r=a[n],"M"===l&&(l="L"),"m"===l&&(l="l")}}return e}function k(t){let e=0,a=0,l=0,n=0,r=[];for(let{key:i,data:s}of t)switch(i){case"M":r.push({key:"M",data:[...s]}),[e,a]=s,[l,n]=s;break;case"m":e+=s[0],a+=s[1],r.push({key:"M",data:[e,a]}),l=e,n=a;break;case"L":r.push({key:"L",data:[...s]}),[e,a]=s;break;case"l":e+=s[0],a+=s[1],r.push({key:"L",data:[e,a]});break;case"C":r.push({key:"C",data:[...s]}),e=s[4],a=s[5];break;case"c":{let t=s.map((t,l)=>l%2?t+a:t+e);r.push({key:"C",data:t}),e=t[4],a=t[5];break}case"Q":r.push({key:"Q",data:[...s]}),e=s[2],a=s[3];break;case"q":{let t=s.map((t,l)=>l%2?t+a:t+e);r.push({key:"Q",data:t}),e=t[2],a=t[3];break}case"A":r.push({key:"A",data:[...s]}),e=s[5],a=s[6];break;case"a":e+=s[5],a+=s[6],r.push({key:"A",data:[s[0],s[1],s[2],s[3],s[4],e,a]});break;case"H":r.push({key:"H",data:[...s]}),e=s[0];break;case"h":e+=s[0],r.push({key:"H",data:[e]});break;case"V":r.push({key:"V",data:[...s]}),a=s[0];break;case"v":a+=s[0],r.push({key:"V",data:[a]});break;case"S":r.push({key:"S",data:[...s]}),e=s[2],a=s[3];break;case"s":{let t=s.map((t,l)=>l%2?t+a:t+e);r.push({key:"S",data:t}),e=t[2],a=t[3];break}case"T":r.push({key:"T",data:[...s]}),e=s[0],a=s[1];break;case"t":e+=s[0],a+=s[1],r.push({key:"T",data:[e,a]});break;case"Z":case"z":r.push({key:"Z",data:[]}),e=l,a=n}return r}function M(t){let e=[],a="",l=0,n=0,r=0,i=0,s=0,o=0;for(let{key:c,data:h}of t){switch(c){case"M":e.push({key:"M",data:[...h]}),[l,n]=h,[r,i]=h;break;case"C":e.push({key:"C",data:[...h]}),l=h[4],n=h[5],s=h[2],o=h[3];break;case"L":e.push({key:"L",data:[...h]}),[l,n]=h;break;case"H":l=h[0],e.push({key:"L",data:[l,n]});break;case"V":n=h[0],e.push({key:"L",data:[l,n]});break;case"S":{let t=0,r=0;"C"===a||"S"===a?(t=l+(l-s),r=n+(n-o)):(t=l,r=n),e.push({key:"C",data:[t,r,...h]}),s=h[0],o=h[1],l=h[2],n=h[3];break}case"T":{let[t,r]=h,i=0,c=0;"Q"===a||"T"===a?(i=l+(l-s),c=n+(n-o)):(i=l,c=n);let d=l+2*(i-l)/3,u=n+2*(c-n)/3,g=t+2*(i-t)/3,f=r+2*(c-r)/3;e.push({key:"C",data:[d,u,g,f,t,r]}),s=i,o=c,l=t,n=r;break}case"Q":{let[t,a,r,i]=h,c=l+2*(t-l)/3,d=n+2*(a-n)/3,u=r+2*(t-r)/3,g=i+2*(a-i)/3;e.push({key:"C",data:[c,d,u,g,r,i]}),s=t,o=a,l=r,n=i;break}case"A":{let t=Math.abs(h[0]),a=Math.abs(h[1]),r=h[2],i=h[3],s=h[4],o=h[5],c=h[6];0===t||0===a?(e.push({key:"C",data:[l,n,o,c,o,c]}),l=o,n=c):(l!==o||n!==c)&&((function t(e,a,l,n,r,i,s,o,c,h){let d=Math.PI*s/180,u=[],g=0,f=0,p=0,y=0;if(h)[g,f,p,y]=h;else{[e,a]=S(e,a,-d),[l,n]=S(l,n,-d);let t=(e-l)/2,s=(a-n)/2,h=t*t/(r*r)+s*s/(i*i);h>1&&(r*=h=Math.sqrt(h),i*=h);let u=r*r,m=i*i,x=(o===c?-1:1)*Math.sqrt(Math.abs((u*m-u*s*s-m*t*t)/(u*s*s+m*t*t)));p=x*r*s/i+(e+l)/2,y=-(x*i)*t/r+(a+n)/2,g=Math.asin(parseFloat(((a-y)/i).toFixed(9))),f=Math.asin(parseFloat(((n-y)/i).toFixed(9))),e<p&&(g=Math.PI-g),l<p&&(f=Math.PI-f),g<0&&(g=2*Math.PI+g),f<0&&(f=2*Math.PI+f),c&&g>f&&(g-=2*Math.PI),!c&&f>g&&(f-=2*Math.PI)}let m=f-g;if(Math.abs(m)>120*Math.PI/180){let e=f,a=l,o=n;u=t(l=p+r*Math.cos(f=c&&f>g?g+120*Math.PI/180*1:g+-(120*Math.PI/180*1)),n=y+i*Math.sin(f),a,o,r,i,s,0,c,[f,e,p,y])}m=f-g;let x=Math.cos(g),w=Math.cos(f),b=Math.tan(m/4),v=4/3*r*b,k=4/3*i*b,M=[e,a],_=[e+v*Math.sin(g),a-k*x],D=[l+v*Math.sin(f),n-k*w],C=[l,n];if(_[0]=2*M[0]-_[0],_[1]=2*M[1]-_[1],h)return[_,D,C].concat(u);{u=[_,D,C].concat(u);let t=[];for(let e=0;e<u.length;e+=3){let a=S(u[e][0],u[e][1],d),l=S(u[e+1][0],u[e+1][1],d),n=S(u[e+2][0],u[e+2][1],d);t.push([a[0],a[1],l[0],l[1],n[0],n[1]])}return t}})(l,n,o,c,t,a,r,i,s).forEach(function(t){e.push({key:"C",data:t})}),l=o,n=c);break}case"Z":e.push({key:"Z",data:[]}),l=r,n=i}a=c}return e}function S(t,e,a){return[t*Math.cos(a)-e*Math.sin(a),t*Math.sin(a)+e*Math.cos(a)]}let _={randOffset:function(t,e){return E(t,e)},randOffsetWithRange:function(t,e,a){return W(t,e,a)},ellipse:function(t,e,a,l,n){let r=A(a,l,n);return P(t,e,n,r).opset},doubleLineOps:function(t,e,a,l,n){return z(t,e,a,l,n,!0)}};function D(t,e,a,l,n){return{type:"path",ops:z(t,e,a,l,n)}}function C(t,e,a){let l=(t||[]).length;if(l>2){let n=[];for(let e=0;e<l-1;e++)n.push(...z(t[e][0],t[e][1],t[e+1][0],t[e+1][1],a));return e&&n.push(...z(t[l-1][0],t[l-1][1],t[0][0],t[0][1],a)),{type:"path",ops:n}}return 2===l?D(t[0][0],t[0][1],t[1][0],t[1][1],a):{type:"path",ops:[]}}function N(t,e){if(t.length){let a="number"==typeof t[0][0]?[t]:t,l=q(a[0],+(1+.2*e.roughness),e),n=e.disableMultiStroke?[]:q(a[0],1.5*(1+.22*e.roughness),R(e));for(let t=1;t<a.length;t++){let r=a[t];if(r.length){let t=q(r,+(1+.2*e.roughness),e),a=e.disableMultiStroke?[]:q(r,1.5*(1+.22*e.roughness),R(e));for(let e of t)"move"!==e.op&&l.push(e);for(let t of a)"move"!==t.op&&n.push(t)}}return{type:"path",ops:l.concat(n)}}return{type:"path",ops:[]}}function A(t,e,a){let l=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(t/2,2)+Math.pow(e/2,2))/2)),n=2*Math.PI/Math.ceil(Math.max(a.curveStepCount,a.curveStepCount/Math.sqrt(200)*l)),r=Math.abs(t/2),i=Math.abs(e/2),s=1-a.curveFitting;return r+=E(r*s,a),i+=E(i*s,a),{increment:n,rx:r,ry:i}}function P(t,e,a,l){let[n,r]=F(l.increment,t,e,l.rx,l.ry,1,l.increment*W(.1,W(.4,1,a),a),a),i=H(n,null,a);if(!a.disableMultiStroke&&0!==a.roughness){let[n]=F(l.increment,t,e,l.rx,l.ry,1.5,0,a),r=H(n,null,a);i=i.concat(r)}return{estimatedPoints:r,opset:{type:"path",ops:i}}}function O(t,e,a,l,n,r,i,s,o){let c=Math.abs(a/2),h=Math.abs(l/2);c+=E(.01*c,o),h+=E(.01*h,o);let d=n,u=r;for(;d<0;)d+=2*Math.PI,u+=2*Math.PI;u-d>2*Math.PI&&(d=0,u=2*Math.PI);let g=Math.min(2*Math.PI/o.curveStepCount/2,(u-d)/2),f=G(g,t,e,c,h,d,u,1,o);if(!o.disableMultiStroke){let a=G(g,t,e,c,h,d,u,1.5,o);f.push(...a)}return i&&(s?f.push(...z(t,e,t+c*Math.cos(d),e+h*Math.sin(d),o),...z(t,e,t+c*Math.cos(u),e+h*Math.sin(u),o)):f.push({op:"lineTo",data:[t,e]},{op:"lineTo",data:[t+c*Math.cos(d),e+h*Math.sin(d)]})),{type:"path",ops:f}}function B(t,e){let a=M(k(v(t))),l=[],n=[0,0],r=[0,0];for(let{key:t,data:i}of a)switch(t){case"M":r=[i[0],i[1]],n=[i[0],i[1]];break;case"L":l.push(...z(r[0],r[1],i[0],i[1],e)),r=[i[0],i[1]];break;case"C":{let[t,a,n,s,o,c]=i;l.push(...function(t,e,a,l,n,r,i,s){let o=[],c=[s.maxRandomnessOffset||1,(s.maxRandomnessOffset||1)+.3],h=[0,0],d=s.disableMultiStroke?1:2,u=s.preserveVertices;for(let g=0;g<d;g++)0===g?o.push({op:"move",data:[i[0],i[1]]}):o.push({op:"move",data:[i[0]+(u?0:E(c[0],s)),i[1]+(u?0:E(c[0],s))]}),h=u?[n,r]:[n+E(c[g],s),r+E(c[g],s)],o.push({op:"bcurveTo",data:[t+E(c[g],s),e+E(c[g],s),a+E(c[g],s),l+E(c[g],s),h[0],h[1]]});return o}(t,a,n,s,o,c,r,e)),r=[o,c];break}case"Z":l.push(...z(r[0],r[1],n[0],n[1],e)),r=[n[0],n[1]]}return{type:"path",ops:l}}function L(t,e){let a=[];for(let l of t)if(l.length){let t=e.maxRandomnessOffset||0,n=l.length;if(n>2){a.push({op:"move",data:[l[0][0]+E(t,e),l[0][1]+E(t,e)]});for(let r=1;r<n;r++)a.push({op:"lineTo",data:[l[r][0]+E(t,e),l[r][1]+E(t,e)]})}}return{type:"fillPath",ops:a}}function T(t,e){return(function(t,e){let a=t.fillStyle||"hachure";if(!x[a])switch(a){case"zigzag":x[a]||(x[a]=new g(e));break;case"cross-hatch":x[a]||(x[a]=new f(e));break;case"dots":x[a]||(x[a]=new p(e));break;case"dashed":x[a]||(x[a]=new y(e));break;case"zigzag-line":x[a]||(x[a]=new m(e));break;default:x[a="hachure"]||(x[a]=new d(e))}return x[a]})(e,_).fillPolygons(t,e)}function R(t){let e=Object.assign({},t);return e.randomizer=void 0,t.seed&&(e.seed=t.seed+1),e}function I(t){return t.randomizer||(t.randomizer=new w(t.seed||0)),t.randomizer.next()}function W(t,e,a){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return a.roughness*l*(I(a)*(e-t)+t)}function E(t,e){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return W(-t,t,e,a)}function z(t,e,a,l,n){let r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=r?n.disableMultiStrokeFill:n.disableMultiStroke,s=j(t,e,a,l,n,!0,!1);if(i)return s;let o=j(t,e,a,l,n,!0,!0);return s.concat(o)}function j(t,e,a,l,n,r,i){let s=Math.pow(t-a,2)+Math.pow(e-l,2),o=Math.sqrt(s),c=1;c=o<200?1:o>500?.4:-.0016668*o+1.233334;let h=n.maxRandomnessOffset||0;h*h*100>s&&(h=o/10);let d=h/2,u=.2+.2*I(n),g=n.bowing*n.maxRandomnessOffset*(l-e)/200,f=n.bowing*n.maxRandomnessOffset*(t-a)/200;g=E(g,n,c),f=E(f,n,c);let p=[],y=()=>E(d,n,c),m=()=>E(h,n,c),x=n.preserveVertices;return r&&(i?p.push({op:"move",data:[t+(x?0:y()),e+(x?0:y())]}):p.push({op:"move",data:[t+(x?0:E(h,n,c)),e+(x?0:E(h,n,c))]})),i?p.push({op:"bcurveTo",data:[g+t+(a-t)*u+y(),f+e+(l-e)*u+y(),g+t+2*(a-t)*u+y(),f+e+2*(l-e)*u+y(),a+(x?0:y()),l+(x?0:y())]}):p.push({op:"bcurveTo",data:[g+t+(a-t)*u+m(),f+e+(l-e)*u+m(),g+t+2*(a-t)*u+m(),f+e+2*(l-e)*u+m(),a+(x?0:m()),l+(x?0:m())]}),p}function q(t,e,a){if(!t.length)return[];let l=[];l.push([t[0][0]+E(e,a),t[0][1]+E(e,a)]),l.push([t[0][0]+E(e,a),t[0][1]+E(e,a)]);for(let n=1;n<t.length;n++)l.push([t[n][0]+E(e,a),t[n][1]+E(e,a)]),n===t.length-1&&l.push([t[n][0]+E(e,a),t[n][1]+E(e,a)]);return H(l,null,a)}function H(t,e,a){let l=t.length,n=[];if(l>3){let r=[],i=1-a.curveTightness;n.push({op:"move",data:[t[1][0],t[1][1]]});for(let e=1;e+2<l;e++){let a=t[e];r[0]=[a[0],a[1]],r[1]=[a[0]+(i*t[e+1][0]-i*t[e-1][0])/6,a[1]+(i*t[e+1][1]-i*t[e-1][1])/6],r[2]=[t[e+1][0]+(i*t[e][0]-i*t[e+2][0])/6,t[e+1][1]+(i*t[e][1]-i*t[e+2][1])/6],r[3]=[t[e+1][0],t[e+1][1]],n.push({op:"bcurveTo",data:[r[1][0],r[1][1],r[2][0],r[2][1],r[3][0],r[3][1]]})}if(e&&2===e.length){let t=a.maxRandomnessOffset;n.push({op:"lineTo",data:[e[0]+E(t,a),e[1]+E(t,a)]})}}else 3===l?(n.push({op:"move",data:[t[1][0],t[1][1]]}),n.push({op:"bcurveTo",data:[t[1][0],t[1][1],t[2][0],t[2][1],t[2][0],t[2][1]]})):2===l&&n.push(...j(t[0][0],t[0][1],t[1][0],t[1][1],a,!0,!0));return n}function F(t,e,a,l,n,r,i,s){let o=[],c=[];if(0===s.roughness){t/=4,c.push([e+l*Math.cos(-t),a+n*Math.sin(-t)]);for(let r=0;r<=2*Math.PI;r+=t){let t=[e+l*Math.cos(r),a+n*Math.sin(r)];o.push(t),c.push(t)}c.push([e+ +l,a+0*n]),c.push([e+l*Math.cos(t),a+n*Math.sin(t)])}else{let h=E(.5,s)-Math.PI/2;c.push([E(r,s)+e+.9*l*Math.cos(h-t),E(r,s)+a+.9*n*Math.sin(h-t)]);let d=2*Math.PI+h-.01;for(let i=h;i<d;i+=t){let t=[E(r,s)+e+l*Math.cos(i),E(r,s)+a+n*Math.sin(i)];o.push(t),c.push(t)}c.push([E(r,s)+e+l*Math.cos(h+2*Math.PI+.5*i),E(r,s)+a+n*Math.sin(h+2*Math.PI+.5*i)]),c.push([E(r,s)+e+.98*l*Math.cos(h+i),E(r,s)+a+.98*n*Math.sin(h+i)]),c.push([E(r,s)+e+.9*l*Math.cos(h+.5*i),E(r,s)+a+.9*n*Math.sin(h+.5*i)])}return[c,o]}function G(t,e,a,l,n,r,i,s,o){let c=r+E(.1,o),h=[];h.push([E(s,o)+e+.9*l*Math.cos(c-t),E(s,o)+a+.9*n*Math.sin(c-t)]);for(let r=c;r<=i;r+=t)h.push([E(s,o)+e+l*Math.cos(r),E(s,o)+a+n*Math.sin(r)]);return h.push([e+l*Math.cos(i),a+n*Math.sin(i)]),h.push([e+l*Math.cos(i),a+n*Math.sin(i)]),H(h,null,o)}function V(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=t.length;if(a<3)throw Error("A curve must have at least three points.");let l=[];if(3===a)l.push([...t[0]],[...t[1]],[...t[2]],[...t[2]]);else{let a=[];a.push(t[0],t[0]);for(let e=1;e<t.length;e++)a.push(t[e]),e===t.length-1&&a.push(t[e]);let n=[],r=1-e;l.push([...a[0]]);for(let t=1;t+2<a.length;t++){let e=a[t];n[0]=[e[0],e[1]],n[1]=[e[0]+(r*a[t+1][0]-r*a[t-1][0])/6,e[1]+(r*a[t+1][1]-r*a[t-1][1])/6],n[2]=[a[t+1][0]+(r*a[t][0]-r*a[t+2][0])/6,a[t+1][1]+(r*a[t][1]-r*a[t+2][1])/6],n[3]=[a[t+1][0],a[t+1][1]],l.push(n[1],n[2],n[3])}}return l}function U(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)}function Z(t,e,a){return[t[0]+(e[0]-t[0])*a,t[1]+(e[1]-t[1])*a]}function X(t,e,a,l,n){let r=n||[],i=t[e],s=t[a-1],o=0,c=1;for(let l=e+1;l<a-1;++l){let e=function(t,e,a){let l=U(e,a);if(0===l)return U(t,e);let n=((t[0]-e[0])*(a[0]-e[0])+(t[1]-e[1])*(a[1]-e[1]))/l;return U(t,Z(e,a,n=Math.max(0,Math.min(1,n))))}(t[l],i,s);e>o&&(o=e,c=l)}return Math.sqrt(o)>l?(X(t,e,c+1,l,r),X(t,c,a,l,r)):(r.length||r.push(i),r.push(s)),r}function Q(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15,a=arguments.length>2?arguments[2]:void 0,l=[],n=(t.length-1)/3;for(let a=0;a<n;a++)!function t(e,a,l,n){let r=n||[];if(function(t,e){let a=t[e+0],l=t[e+1],n=t[e+2],r=t[e+3],i=3*l[0]-2*a[0]-r[0];i*=i;let s=3*l[1]-2*a[1]-r[1];s*=s;let o=3*n[0]-2*r[0]-a[0];o*=o;let c=3*n[1]-2*r[1]-a[1];return c*=c,i<o&&(i=o),s<c&&(s=c),i+s}(e,a)<l){let t=e[a+0];r.length?Math.sqrt(U(r[r.length-1],t))>1&&r.push(t):r.push(t),r.push(e[a+3])}else{let n=e[a+0],i=e[a+1],s=e[a+2],o=e[a+3],c=Z(n,i,.5),h=Z(i,s,.5),d=Z(s,o,.5),u=Z(c,h,.5),g=Z(h,d,.5),f=Z(u,g,.5);t([n,c,u,f],0,l,r),t([f,g,d,o],0,l,r)}return r}(t,3*a,e,l);return a&&a>0?X(l,0,l.length,a):l}let J="none";class Y{static newSeed(){return Math.floor(0x80000000*Math.random())}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,e,a){return{shape:t,sets:e||[],options:a||this.defaultOptions}}line(t,e,a,l,n){let r=this._o(n);return this._d("line",[D(t,e,a,l,r)],r)}rectangle(t,e,a,l,n){var r,i,s,o;let c=this._o(n),h=[],d=C([[r=t,i=e],[r+(s=a),i],[r+s,i+(o=l)],[r,i+o]],!0,c);if(c.fill){let n=[[t,e],[t+a,e],[t+a,e+l],[t,e+l]];"solid"===c.fillStyle?h.push(L([n],c)):h.push(T([n],c))}return c.stroke!==J&&h.push(d),this._d("rectangle",h,c)}ellipse(t,e,a,l,n){let r=this._o(n),i=[],s=A(a,l,r),o=P(t,e,r,s);if(r.fill)if("solid"===r.fillStyle){let a=P(t,e,r,s).opset;a.type="fillPath",i.push(a)}else i.push(T([o.estimatedPoints],r));return r.stroke!==J&&i.push(o.opset),this._d("ellipse",i,r)}circle(t,e,a,l){let n=this.ellipse(t,e,a,a,l);return n.shape="circle",n}linearPath(t,e){let a=this._o(e);return this._d("linearPath",[C(t,!1,a)],a)}arc(t,e,a,l,n,r){let i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7?arguments[7]:void 0,o=this._o(s),c=[],h=O(t,e,a,l,n,r,i,!0,o);if(i&&o.fill)if("solid"===o.fillStyle){let i=Object.assign({},o);i.disableMultiStroke=!0;let s=O(t,e,a,l,n,r,!0,!1,i);s.type="fillPath",c.push(s)}else c.push(function(t,e,a,l,n,r,i){let s=Math.abs(a/2),o=Math.abs(l/2);s+=E(.01*s,i),o+=E(.01*o,i);let c=n,h=r;for(;c<0;)c+=2*Math.PI,h+=2*Math.PI;h-c>2*Math.PI&&(c=0,h=2*Math.PI);let d=(h-c)/i.curveStepCount,u=[];for(let a=c;a<=h;a+=d)u.push([t+s*Math.cos(a),e+o*Math.sin(a)]);return u.push([t+s*Math.cos(h),e+o*Math.sin(h)]),u.push([t,e]),T([u],i)}(t,e,a,l,n,r,o));return o.stroke!==J&&c.push(h),this._d("arc",c,o)}curve(t,e){let a=this._o(e),l=[],n=N(t,a);if(a.fill&&a.fill!==J)if("solid"===a.fillStyle){let e=N(t,Object.assign(Object.assign({},a),{disableMultiStroke:!0,roughness:a.roughness?a.roughness+a.fillShapeRoughnessGain:0}));l.push({type:"fillPath",ops:this._mergedShape(e.ops)})}else{let e=[];if(t.length)for(let l of"number"==typeof t[0][0]?[t]:t)l.length<3?e.push(...l):3===l.length?e.push(...Q(V([l[0],l[0],l[1],l[2]]),10,(1+a.roughness)/2)):e.push(...Q(V(l),10,(1+a.roughness)/2));e.length&&l.push(T([e],a))}return a.stroke!==J&&l.push(n),this._d("curve",l,a)}polygon(t,e){let a=this._o(e),l=[],n=C(t,!0,a);return a.fill&&("solid"===a.fillStyle?l.push(L([t],a)):l.push(T([t],a))),a.stroke!==J&&l.push(n),this._d("polygon",l,a)}path(t,e){let a=this._o(e),l=[];if(!t)return this._d("path",l,a);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");let n=a.fill&&"transparent"!==a.fill&&a.fill!==J,r=a.stroke!==J,i=!!(a.simplification&&a.simplification<1),s=function(t,e,a){let l=M(k(v(t))),n=[],r=[],i=[0,0],s=[],o=()=>{s.length>=4&&r.push(...Q(s,1)),s=[]},c=()=>{o(),r.length&&(n.push(r),r=[])};for(let{key:t,data:e}of l)switch(t){case"M":c(),i=[e[0],e[1]],r.push(i);break;case"L":o(),r.push([e[0],e[1]]);break;case"C":if(!s.length){let t=r.length?r[r.length-1]:i;s.push([t[0],t[1]])}s.push([e[0],e[1]]),s.push([e[2],e[3]]),s.push([e[4],e[5]]);break;case"Z":o(),r.push([i[0],i[1]])}if(c(),!a)return n;let h=[];for(let t of n){let e=X(t,0,t.length,a);e.length&&h.push(e)}return h}(t,0,i?4-4*(a.simplification||1):(1+a.roughness)/2),o=B(t,a);if(n)if("solid"===a.fillStyle)if(1===s.length){let e=B(t,Object.assign(Object.assign({},a),{disableMultiStroke:!0,roughness:a.roughness?a.roughness+a.fillShapeRoughnessGain:0}));l.push({type:"fillPath",ops:this._mergedShape(e.ops)})}else l.push(L(s,a));else l.push(T(s,a));return r&&(i?s.forEach(t=>{l.push(C(t,!1,a))}):l.push(o)),this._d("path",l,a)}opsToPath(t,e){let a="";for(let l of t.ops){let t="number"==typeof e&&e>=0?l.data.map(t=>+t.toFixed(e)):l.data;switch(l.op){case"move":a+="M".concat(t[0]," ").concat(t[1]," ");break;case"bcurveTo":a+="C".concat(t[0]," ").concat(t[1],", ").concat(t[2]," ").concat(t[3],", ").concat(t[4]," ").concat(t[5]," ");break;case"lineTo":a+="L".concat(t[0]," ").concat(t[1]," ")}}return a.trim()}toPaths(t){let e=t.sets||[],a=t.options||this.defaultOptions,l=[];for(let t of e){let e=null;switch(t.type){case"path":e={d:this.opsToPath(t),stroke:a.stroke,strokeWidth:a.strokeWidth,fill:J};break;case"fillPath":e={d:this.opsToPath(t),stroke:J,strokeWidth:0,fill:a.fill||J};break;case"fillSketch":e=this.fillSketch(t,a)}e&&l.push(e)}return l}fillSketch(t,e){let a=e.fillWeight;return a<0&&(a=e.strokeWidth/2),{d:this.opsToPath(t),stroke:e.fill||J,strokeWidth:a,fill:J}}_mergedShape(t){return t.filter((t,e)=>0===e||"move"!==t.op)}constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}}class K{draw(t){let e=t.sets||[],a=t.options||this.getDefaultOptions(),l=this.ctx,n=t.options.fixedDecimalPlaceDigits;for(let r of e)switch(r.type){case"path":l.save(),l.strokeStyle="none"===a.stroke?"transparent":a.stroke,l.lineWidth=a.strokeWidth,a.strokeLineDash&&l.setLineDash(a.strokeLineDash),a.strokeLineDashOffset&&(l.lineDashOffset=a.strokeLineDashOffset),this._drawToContext(l,r,n),l.restore();break;case"fillPath":{l.save(),l.fillStyle=a.fill||"";let e="curve"===t.shape||"polygon"===t.shape||"path"===t.shape?"evenodd":"nonzero";this._drawToContext(l,r,n,e),l.restore();break}case"fillSketch":this.fillSketch(l,r,a)}}fillSketch(t,e,a){let l=a.fillWeight;l<0&&(l=a.strokeWidth/2),t.save(),a.fillLineDash&&t.setLineDash(a.fillLineDash),a.fillLineDashOffset&&(t.lineDashOffset=a.fillLineDashOffset),t.strokeStyle=a.fill||"",t.lineWidth=l,this._drawToContext(t,e,a.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,e,a){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"nonzero";for(let l of(t.beginPath(),e.ops)){let e="number"==typeof a&&a>=0?l.data.map(t=>+t.toFixed(a)):l.data;switch(l.op){case"move":t.moveTo(e[0],e[1]);break;case"bcurveTo":t.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5]);break;case"lineTo":t.lineTo(e[0],e[1])}}"fillPath"===e.type?t.fill(l):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,e,a,l,n){let r=this.gen.line(t,e,a,l,n);return this.draw(r),r}rectangle(t,e,a,l,n){let r=this.gen.rectangle(t,e,a,l,n);return this.draw(r),r}ellipse(t,e,a,l,n){let r=this.gen.ellipse(t,e,a,l,n);return this.draw(r),r}circle(t,e,a,l){let n=this.gen.circle(t,e,a,l);return this.draw(n),n}linearPath(t,e){let a=this.gen.linearPath(t,e);return this.draw(a),a}polygon(t,e){let a=this.gen.polygon(t,e);return this.draw(a),a}arc(t,e,a,l,n,r){let i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7?arguments[7]:void 0,o=this.gen.arc(t,e,a,l,n,r,i,s);return this.draw(o),o}curve(t,e){let a=this.gen.curve(t,e);return this.draw(a),a}path(t,e){let a=this.gen.path(t,e);return this.draw(a),a}constructor(t,e){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new Y(e)}}let $="http://www.w3.org/2000/svg";class tt{draw(t){let e=t.sets||[],a=t.options||this.getDefaultOptions(),l=this.svg.ownerDocument||window.document,n=l.createElementNS($,"g"),r=t.options.fixedDecimalPlaceDigits;for(let i of e){let e=null;switch(i.type){case"path":(e=l.createElementNS($,"path")).setAttribute("d",this.opsToPath(i,r)),e.setAttribute("stroke",a.stroke),e.setAttribute("stroke-width",a.strokeWidth+""),e.setAttribute("fill","none"),a.strokeLineDash&&e.setAttribute("stroke-dasharray",a.strokeLineDash.join(" ").trim()),a.strokeLineDashOffset&&e.setAttribute("stroke-dashoffset","".concat(a.strokeLineDashOffset));break;case"fillPath":(e=l.createElementNS($,"path")).setAttribute("d",this.opsToPath(i,r)),e.setAttribute("stroke","none"),e.setAttribute("stroke-width","0"),e.setAttribute("fill",a.fill||""),"curve"!==t.shape&&"polygon"!==t.shape||e.setAttribute("fill-rule","evenodd");break;case"fillSketch":e=this.fillSketch(l,i,a)}e&&n.appendChild(e)}return n}fillSketch(t,e,a){let l=a.fillWeight;l<0&&(l=a.strokeWidth/2);let n=t.createElementNS($,"path");return n.setAttribute("d",this.opsToPath(e,a.fixedDecimalPlaceDigits)),n.setAttribute("stroke",a.fill||""),n.setAttribute("stroke-width",l+""),n.setAttribute("fill","none"),a.fillLineDash&&n.setAttribute("stroke-dasharray",a.fillLineDash.join(" ").trim()),a.fillLineDashOffset&&n.setAttribute("stroke-dashoffset","".concat(a.fillLineDashOffset)),n}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,e){return this.gen.opsToPath(t,e)}line(t,e,a,l,n){let r=this.gen.line(t,e,a,l,n);return this.draw(r)}rectangle(t,e,a,l,n){let r=this.gen.rectangle(t,e,a,l,n);return this.draw(r)}ellipse(t,e,a,l,n){let r=this.gen.ellipse(t,e,a,l,n);return this.draw(r)}circle(t,e,a,l){let n=this.gen.circle(t,e,a,l);return this.draw(n)}linearPath(t,e){let a=this.gen.linearPath(t,e);return this.draw(a)}polygon(t,e){let a=this.gen.polygon(t,e);return this.draw(a)}arc(t,e,a,l,n,r){let i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7?arguments[7]:void 0,o=this.gen.arc(t,e,a,l,n,r,i,s);return this.draw(o)}curve(t,e){let a=this.gen.curve(t,e);return this.draw(a)}path(t,e){let a=this.gen.path(t,e);return this.draw(a)}constructor(t,e){this.svg=t,this.gen=new Y(e)}}var te={canvas:(t,e)=>new K(t,e),svg:(t,e)=>new tt(t,e),generator:t=>new Y(t),newSeed:()=>Y.newSeed()},ta=(0,s.__name)(async(t,e,a)=>{var l,c,h;let d,u=e.useHtmlLabels||(0,i.evaluate)(null==(l=(0,i.getConfig2)())?void 0:l.htmlLabels),g=t.insert("g").attr("class",a||"node default").attr("id",e.domId||e.id),f=g.insert("g").attr("class","label").attr("style",(0,r.handleUndefinedAttr)(e.labelStyle));d=void 0===e.label?"":"string"==typeof e.label?e.label:e.label[0];let p=await (0,n.createText)(f,(0,i.sanitizeText)((0,r.decodeEntities)(d),(0,i.getConfig2)()),{useHtmlLabels:u,width:e.width||(null==(c=(0,i.getConfig2)().flowchart)?void 0:c.wrappingWidth),cssClasses:"markdown-node-label",style:e.labelStyle,addSvgBackground:!!e.icon||!!e.img}),y=p.getBBox(),m=(null!=(h=null==e?void 0:e.padding)?h:0)/2;if(u){let t=p.children[0],e=(0,o.select)(p),a=t.getElementsByTagName("img");if(a){let t=""===d.replace(/<img[^>]*>/g,"").trim();await Promise.all([...a].map(e=>new Promise(a=>{function l(){if(e.style.display="flex",e.style.flexDirection="column",t){let t=(0,i.getConfig2)().fontSize?(0,i.getConfig2)().fontSize:window.getComputedStyle(document.body).fontSize,[a=i.defaultConfig_default.fontSize]=(0,r.parseFontSize)(t),l=5*a+"px";e.style.minWidth=l,e.style.maxWidth=l}else e.style.width="100%";a(e)}(0,s.__name)(l,"setupImage"),setTimeout(()=>{e.complete&&l()}),e.addEventListener("error",l),e.addEventListener("load",l)})))}y=t.getBoundingClientRect(),e.attr("width",y.width),e.attr("height",y.height)}return u?f.attr("transform","translate("+-y.width/2+", "+-y.height/2+")"):f.attr("transform","translate(0, "+-y.height/2+")"),e.centerLabel&&f.attr("transform","translate("+-y.width/2+", "+-y.height/2+")"),f.insert("rect",":first-child"),{shapeSvg:g,bbox:y,halfPadding:m,label:f}},"labelHelper"),tl=(0,s.__name)(async(t,e,a)=>{var l,s,c,h,d,u;let g=a.useHtmlLabels||(0,i.evaluate)(null==(s=(0,i.getConfig2)())||null==(l=s.flowchart)?void 0:l.htmlLabels),f=t.insert("g").attr("class","label").attr("style",a.labelStyle||""),p=await (0,n.createText)(f,(0,i.sanitizeText)((0,r.decodeEntities)(e),(0,i.getConfig2)()),{useHtmlLabels:g,width:a.width||(null==(h=(0,i.getConfig2)())||null==(c=h.flowchart)?void 0:c.wrappingWidth),style:a.labelStyle,addSvgBackground:!!a.icon||!!a.img}),y=p.getBBox(),m=a.padding/2;if((0,i.evaluate)(null==(u=(0,i.getConfig2)())||null==(d=u.flowchart)?void 0:d.htmlLabels)){let t=p.children[0],e=(0,o.select)(p);y=t.getBoundingClientRect(),e.attr("width",y.width),e.attr("height",y.height)}return g?f.attr("transform","translate("+-y.width/2+", "+-y.height/2+")"):f.attr("transform","translate(0, "+-y.height/2+")"),a.centerLabel&&f.attr("transform","translate("+-y.width/2+", "+-y.height/2+")"),f.insert("rect",":first-child"),{shapeSvg:t,bbox:y,halfPadding:m,label:f}},"insertLabel"),tn=(0,s.__name)((t,e)=>{let a=e.node().getBBox();t.width=a.width,t.height=a.height},"updateNodeBounds"),tr=(0,s.__name)((t,e)=>("handDrawn"===t.look?"rough-node":"node")+" "+t.cssClasses+" "+(e||""),"getNodeClasses");function ti(t){let e=t.map((t,e)=>"".concat(0===e?"M":"L").concat(t.x,",").concat(t.y));return e.push("Z"),e.join(" ")}function ts(t,e,a,l,n,r){let i=[],s=a-t,o=2*Math.PI/(s/r),c=e+(l-e)/2;for(let e=0;e<=50;e++){let a=t+e/50*s,l=c+n*Math.sin(o*(a-t));i.push({x:a,y:l})}return i}function to(t,e,a,l,n,r){let i=[],s=n*Math.PI/180,o=(r*Math.PI/180-s)/(l-1);for(let n=0;n<l;n++){let l=s+n*o,r=t+a*Math.cos(l),c=e+a*Math.sin(l);i.push({x:-r,y:-c})}return i}(0,s.__name)(ti,"createPathFromPoints"),(0,s.__name)(ts,"generateFullSineWavePoints"),(0,s.__name)(to,"generateCirclePoints");var tc=(0,s.__name)((t,e)=>{var a,l,n=t.x,r=t.y,i=e.x-n,s=e.y-r,o=t.width/2,c=t.height/2;return Math.abs(s)*o>Math.abs(i)*c?(s<0&&(c=-c),a=0===s?0:c*i/s,l=c):(i<0&&(o=-o),a=o,l=0===i?0:o*s/i),{x:n+a,y:r+l}},"intersectRect");function th(t,e){e&&t.attr("style",e)}async function td(t){let e=(0,o.select)(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),a=e.append("xhtml:div"),l=(0,i.getConfig2)(),n=t.label;t.label&&(0,i.hasKatex)(t.label)&&(n=await (0,i.renderKatexSanitized)(t.label.replace(i.common_default.lineBreakRegex,"\n"),l));let r='<span class="'+(t.isNode?"nodeLabel":"edgeLabel")+'" '+(t.labelStyle?'style="'+t.labelStyle+'"':"")+">"+n+"</span>";return a.html((0,i.sanitizeText)(r,l)),th(a,t.labelStyle),a.style("display","inline-block"),a.style("padding-right","1px"),a.style("white-space","nowrap"),a.attr("xmlns","http://www.w3.org/1999/xhtml"),e.node()}(0,s.__name)(th,"applyStyle"),(0,s.__name)(td,"addHtmlLabel");var tu=(0,s.__name)(async(t,e,a,l)=>{let n=t||"";if("object"==typeof n&&(n=n[0]),(0,i.evaluate)((0,i.getConfig2)().flowchart.htmlLabels)){n=n.replace(/\\n|\n/g,"<br />"),s.log.info("vertexText"+n);let t={isNode:l,label:(0,r.decodeEntities)(n).replace(/fa[blrs]?:fa-[\w-]+/g,t=>"<i class='".concat(t.replace(":"," "),"'></i>")),labelStyle:e?e.replace("fill:","color:"):e};return await td(t)}{let t=document.createElementNS("http://www.w3.org/2000/svg","text");t.setAttribute("style",e.replace("color:","fill:"));for(let e of"string"==typeof n?n.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(n)?n:[]){let l=document.createElementNS("http://www.w3.org/2000/svg","tspan");l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),l.setAttribute("dy","1em"),l.setAttribute("x","0"),a?l.setAttribute("class","title-row"):l.setAttribute("class","row"),l.textContent=e.trim(),t.appendChild(l)}return t}},"createLabel"),tg=(0,s.__name)((t,e,a,l,n)=>["M",t+n,e,"H",t+a-n,"A",n,n,"0 0 1",t+a,e+n,"V",e+l-n,"A",n,n,"0 0 1",t+a-n,e+l,"H",t+n,"A",n,n,"0 0 1",t,e+l-n,"V",e+n,"A",n,n,"0 0 1",t+n,e,"Z"].join(" "),"createRoundedRectPathD"),tf=(0,s.__name)(async(t,e)=>{let r;s.log.info("Creating subgraph rect for ",e.id,e);let c=(0,i.getConfig2)(),{themeVariables:h,handDrawnSeed:d}=c,{clusterBkg:u,clusterBorder:g}=h,{labelStyles:f,nodeStyles:p,borderStyles:y,backgroundStyles:m}=(0,l.styles2String)(e),x=t.insert("g").attr("class","cluster "+e.cssClasses).attr("id",e.id).attr("data-look",e.look),w=(0,i.evaluate)(c.flowchart.htmlLabels),b=x.insert("g").attr("class","cluster-label "),v=await (0,n.createText)(b,e.label,{style:e.labelStyle,useHtmlLabels:w,isNode:!0}),k=v.getBBox();if((0,i.evaluate)(c.flowchart.htmlLabels)){let t=v.children[0],e=(0,o.select)(v);k=t.getBoundingClientRect(),e.attr("width",k.width),e.attr("height",k.height)}let M=e.width<=k.width+e.padding?k.width+e.padding:e.width;e.width<=k.width+e.padding?e.diff=(M-e.width)/2-e.padding:e.diff=-e.padding;let S=e.height,_=e.x-M/2,D=e.y-S/2;if(s.log.trace("Data ",e,JSON.stringify(e)),"handDrawn"===e.look){let t=te.svg(x),a=(0,l.userNodeOverrides)(e,{roughness:.7,fill:u,stroke:g,fillWeight:3,seed:d}),n=t.path(tg(_,D,M,S,0),a);(r=x.insert(()=>(s.log.debug("Rough node insert CXC",n),n),":first-child")).select("path:nth-child(2)").attr("style",y.join(";")),r.select("path").attr("style",m.join(";").replace("fill","stroke"))}else(r=x.insert("rect",":first-child")).attr("style",p).attr("rx",e.rx).attr("ry",e.ry).attr("x",_).attr("y",D).attr("width",M).attr("height",S);let{subGraphTitleTopMargin:C}=(0,a.getSubGraphTitleMargins)(c);if(b.attr("transform","translate(".concat(e.x-k.width/2,", ").concat(e.y-e.height/2+C,")")),f){let t=b.select("span");t&&t.attr("style",f)}let N=r.node().getBBox();return e.offsetX=0,e.width=N.width,e.height=N.height,e.offsetY=k.height-e.padding/2,e.intersect=function(t){return tc(e,t)},{cluster:x,labelBBox:k}},"rect"),tp=(0,s.__name)((t,e)=>{let a=t.insert("g").attr("class","note-cluster").attr("id",e.id),l=a.insert("rect",":first-child"),n=0*e.padding,r=n/2;l.attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-e.width/2-r).attr("y",e.y-e.height/2-r).attr("width",e.width+n).attr("height",e.height+n).attr("fill","none");let i=l.node().getBBox();return e.width=i.width,e.height=i.height,e.intersect=function(t){return tc(e,t)},{cluster:a,labelBBox:{width:0,height:0}}},"noteGroup"),ty=(0,s.__name)(async(t,e)=>{let a,l=(0,i.getConfig2)(),{themeVariables:n,handDrawnSeed:r}=l,{altBackground:s,compositeBackground:c,compositeTitleBackground:h,nodeBorder:d}=n,u=t.insert("g").attr("class",e.cssClasses).attr("id",e.id).attr("data-id",e.id).attr("data-look",e.look),g=u.insert("g",":first-child"),f=u.insert("g").attr("class","cluster-label"),p=u.append("rect"),y=f.node().appendChild(await tu(e.label,e.labelStyle,void 0,!0)),m=y.getBBox();if((0,i.evaluate)(l.flowchart.htmlLabels)){let t=y.children[0],e=(0,o.select)(y);m=t.getBoundingClientRect(),e.attr("width",m.width),e.attr("height",m.height)}let x=0*e.padding,w=(e.width<=m.width+e.padding?m.width+e.padding:e.width)+x;e.width<=m.width+e.padding?e.diff=(w-e.width)/2-e.padding:e.diff=-e.padding;let b=e.height+x,v=e.height+x-m.height-6,k=e.x-w/2,M=e.y-b/2;e.width=w;let S=e.y-e.height/2-x/2+m.height+2;if("handDrawn"===e.look){let t=e.cssClasses.includes("statediagram-cluster-alt"),l=te.svg(u),n=e.rx||e.ry?l.path(tg(k,M,w,b,10),{roughness:.7,fill:h,fillStyle:"solid",stroke:d,seed:r}):l.rectangle(k,M,w,b,{seed:r});a=u.insert(()=>n,":first-child");let i=l.rectangle(k,S,w,v,{fill:t?s:c,fillStyle:t?"hachure":"solid",stroke:d,seed:r});a=u.insert(()=>n,":first-child"),p=u.insert(()=>i)}else(a=g.insert("rect",":first-child")).attr("class","outer").attr("x",k).attr("y",M).attr("width",w).attr("height",b).attr("data-look",e.look),p.attr("class","inner").attr("x",k).attr("y",S).attr("width",w).attr("height",v);return f.attr("transform","translate(".concat(e.x-m.width/2,", ").concat(M+1-3*!(0,i.evaluate)(l.flowchart.htmlLabels),")")),e.height=a.node().getBBox().height,e.offsetX=0,e.offsetY=m.height-e.padding/2,e.labelBBox=m,e.intersect=function(t){return tc(e,t)},{cluster:u,labelBBox:m}},"roundedWithTitle"),tm=(0,s.__name)(async(t,e)=>{let r;s.log.info("Creating subgraph rect for ",e.id,e);let c=(0,i.getConfig2)(),{themeVariables:h,handDrawnSeed:d}=c,{clusterBkg:u,clusterBorder:g}=h,{labelStyles:f,nodeStyles:p,borderStyles:y,backgroundStyles:m}=(0,l.styles2String)(e),x=t.insert("g").attr("class","cluster "+e.cssClasses).attr("id",e.id).attr("data-look",e.look),w=(0,i.evaluate)(c.flowchart.htmlLabels),b=x.insert("g").attr("class","cluster-label "),v=await (0,n.createText)(b,e.label,{style:e.labelStyle,useHtmlLabels:w,isNode:!0,width:e.width}),k=v.getBBox();if((0,i.evaluate)(c.flowchart.htmlLabels)){let t=v.children[0],e=(0,o.select)(v);k=t.getBoundingClientRect(),e.attr("width",k.width),e.attr("height",k.height)}let M=e.width<=k.width+e.padding?k.width+e.padding:e.width;e.width<=k.width+e.padding?e.diff=(M-e.width)/2-e.padding:e.diff=-e.padding;let S=e.height,_=e.x-M/2,D=e.y-S/2;if(s.log.trace("Data ",e,JSON.stringify(e)),"handDrawn"===e.look){let t=te.svg(x),a=(0,l.userNodeOverrides)(e,{roughness:.7,fill:u,stroke:g,fillWeight:4,seed:d}),n=t.path(tg(_,D,M,S,e.rx),a);(r=x.insert(()=>(s.log.debug("Rough node insert CXC",n),n),":first-child")).select("path:nth-child(2)").attr("style",y.join(";")),r.select("path").attr("style",m.join(";").replace("fill","stroke"))}else(r=x.insert("rect",":first-child")).attr("style",p).attr("rx",e.rx).attr("ry",e.ry).attr("x",_).attr("y",D).attr("width",M).attr("height",S);let{subGraphTitleTopMargin:C}=(0,a.getSubGraphTitleMargins)(c);if(b.attr("transform","translate(".concat(e.x-k.width/2,", ").concat(e.y-e.height/2+C,")")),f){let t=b.select("span");t&&t.attr("style",f)}let N=r.node().getBBox();return e.offsetX=0,e.width=N.width,e.height=N.height,e.offsetY=k.height-e.padding/2,e.intersect=function(t){return tc(e,t)},{cluster:x,labelBBox:k}},"kanbanSection"),tx={rect:tf,squareRect:tf,roundedWithTitle:ty,noteGroup:tp,divider:(0,s.__name)((t,e)=>{let a,{themeVariables:l,handDrawnSeed:n}=(0,i.getConfig2)(),{nodeBorder:r}=l,s=t.insert("g").attr("class",e.cssClasses).attr("id",e.id).attr("data-look",e.look),o=s.insert("g",":first-child"),c=0*e.padding,h=e.width+c;e.diff=-e.padding;let d=e.height+c,u=e.x-h/2,g=e.y-d/2;if(e.width=h,"handDrawn"===e.look){let t=te.svg(s).rectangle(u,g,h,d,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:r,seed:n});a=s.insert(()=>t,":first-child")}else(a=o.insert("rect",":first-child")).attr("class","divider").attr("x",u).attr("y",g).attr("width",h).attr("height",d).attr("data-look",e.look);return e.height=a.node().getBBox().height,e.offsetX=0,e.offsetY=0,e.intersect=function(t){return tc(e,t)},{cluster:s,labelBBox:{}}},"divider"),kanbanSection:tm},tw=new Map,tb=(0,s.__name)(async(t,e)=>{let a=e.shape||"rect",l=await tx[a](t,e);return tw.set(e.id,l),l},"insertCluster"),tv=(0,s.__name)(()=>{tw=new Map},"clear");function tk(t,e,a,l){var n=t.x,r=t.y,i=n-l.x,s=r-l.y,o=Math.sqrt(e*e*s*s+a*a*i*i),c=Math.abs(e*a*i/o);l.x<n&&(c=-c);var h=Math.abs(e*a*s/o);return l.y<r&&(h=-h),{x:n+c,y:r+h}}function tM(t,e,a){return tk(t,e,e,a)}function tS(t,e,a,l){{let n=e.y-t.y,r=t.x-e.x,i=e.x*t.y-t.x*e.y,s=n*a.x+r*a.y+i,o=n*l.x+r*l.y+i;if(0!==s&&0!==o&&t_(s,o))return;let c=l.y-a.y,h=a.x-l.x,d=l.x*a.y-a.x*l.y,u=c*t.x+h*t.y+d,g=c*e.x+h*e.y+d;if(1e-6>Math.abs(u)&&1e-6>Math.abs(g)&&t_(u,g))return;let f=n*h-c*r;if(0===f)return;let p=Math.abs(f/2),y=r*d-h*i;return{x:y<0?(y-p)/f:(y+p)/f,y:(y=c*i-n*d)<0?(y-p)/f:(y+p)/f}}}function t_(t,e){return t*e>0}function tD(t,e,a){let l=t.x,n=t.y,r=[],i=1/0,s=1/0;"function"==typeof e.forEach?e.forEach(function(t){i=Math.min(i,t.x),s=Math.min(s,t.y)}):(i=Math.min(i,e.x),s=Math.min(s,e.y));let o=l-t.width/2-i,c=n-t.height/2-s;for(let l=0;l<e.length;l++){let n=e[l],i=e[l<e.length-1?l+1:0],s=tS(t,a,{x:o+n.x,y:c+n.y},{x:o+i.x,y:c+i.y});s&&r.push(s)}return r.length?(r.length>1&&r.sort(function(t,e){let l=t.x-a.x,n=t.y-a.y,r=Math.sqrt(l*l+n*n),i=e.x-a.x,s=e.y-a.y,o=Math.sqrt(i*i+s*s);return r<o?-1:+(r!==o)}),r[0]):t}(0,s.__name)(function(t,e){return t.intersect(e)},"intersectNode"),(0,s.__name)(tk,"intersectEllipse"),(0,s.__name)(tM,"intersectCircle"),(0,s.__name)(tS,"intersectLine"),(0,s.__name)(t_,"sameSign"),(0,s.__name)(tD,"intersectPolygon");var tC={circle:tM,polygon:tD,rect:tc};function tN(t,e){let{labelStyles:a}=(0,l.styles2String)(e);e.labelStyle=a;let n=tr(e),i=n;n||(i="anchor");let o=t.insert("g").attr("class",i).attr("id",e.domId||e.id),{cssStyles:c}=e,h=te.svg(o),d=(0,l.userNodeOverrides)(e,{fill:"black",stroke:"none",fillStyle:"solid"});"handDrawn"!==e.look&&(d.roughness=0);let u=h.circle(0,0,2,d),g=o.insert(()=>u,":first-child");return g.attr("class","anchor").attr("style",(0,r.handleUndefinedAttr)(c)),tn(e,g),e.intersect=function(t){return s.log.info("Circle intersect",e,1,t),tC.circle(e,1,t)},o}function tA(t,e,a,l,n,r,i){let s=Math.atan2(l-e,a-t),o=Math.sqrt(((a-t)/2/n)**2+((l-e)/2/r)**2);if(o>1)throw Error("The given radii are too small to create an arc between the points.");let c=Math.sqrt(1-o**2),h=(t+a)/2+c*r*Math.sin(s)*(i?-1:1),d=(e+l)/2-c*n*Math.cos(s)*(i?-1:1),u=Math.atan2((e-d)/r,(t-h)/n),g=Math.atan2((l-d)/r,(a-h)/n)-u;i&&g<0&&(g+=2*Math.PI),!i&&g>0&&(g-=2*Math.PI);let f=[];for(let t=0;t<20;t++){let e=u+t/19*g,a=h+n*Math.cos(e),l=d+r*Math.sin(e);f.push({x:a,y:l})}return f}async function tP(t,e){let{labelStyles:a,nodeStyles:n}=(0,l.styles2String)(e);e.labelStyle=a;let{shapeSvg:r,bbox:i}=await ta(t,e,tr(e)),s=i.width+e.padding+20,o=i.height+e.padding,c=o/2,h=c/(2.5+o/50),{cssStyles:d}=e,u=[{x:s/2,y:-o/2},{x:-s/2,y:-o/2},...tA(-s/2,-o/2,-s/2,o/2,h,c,!1),{x:s/2,y:o/2},...tA(s/2,o/2,s/2,-o/2,h,c,!0)],g=te.svg(r),f=(0,l.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(f.roughness=0,f.fillStyle="solid");let p=ti(u),y=g.path(p,f),m=r.insert(()=>y,":first-child");return m.attr("class","basic label-container"),d&&"handDrawn"!==e.look&&m.selectAll("path").attr("style",d),n&&"handDrawn"!==e.look&&m.selectAll("path").attr("style",n),m.attr("transform","translate(".concat(h/2,", 0)")),tn(e,m),e.intersect=function(t){return tC.polygon(e,u,t)},r}function tO(t,e,a,l){return t.insert("polygon",":first-child").attr("points",l.map(function(t){return t.x+","+t.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-e/2+","+a/2+")")}async function tB(t,e){let a,{labelStyles:n,nodeStyles:r}=(0,l.styles2String)(e);e.labelStyle=n;let{shapeSvg:i,bbox:s}=await ta(t,e,tr(e)),o=s.height+e.padding,c=s.width+e.padding+12,h=-o,d=[{x:12,y:h},{x:c,y:h},{x:c,y:0},{x:0,y:0},{x:0,y:h+12},{x:12,y:h}],{cssStyles:u}=e;if("handDrawn"===e.look){let t=te.svg(i),n=(0,l.userNodeOverrides)(e,{}),r=ti(d),s=t.path(r,n);a=i.insert(()=>s,":first-child").attr("transform","translate(".concat(-c/2,", ").concat(o/2,")")),u&&a.attr("style",u)}else a=tO(i,c,o,d);return r&&a.attr("style",r),tn(e,a),e.intersect=function(t){return tC.polygon(e,d,t)},i}function tL(t,e){var a,n;let{nodeStyles:r}=(0,l.styles2String)(e);e.label="";let i=t.insert("g").attr("class",tr(e)).attr("id",null!=(a=e.domId)?a:e.id),{cssStyles:s}=e,o=Math.max(28,null!=(n=e.width)?n:0),c=[{x:0,y:o/2},{x:o/2,y:0},{x:0,y:-o/2},{x:-o/2,y:0}],h=te.svg(i),d=(0,l.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(d.roughness=0,d.fillStyle="solid");let u=ti(c),g=h.path(u,d),f=i.insert(()=>g,":first-child");return s&&"handDrawn"!==e.look&&f.selectAll("path").attr("style",s),r&&"handDrawn"!==e.look&&f.selectAll("path").attr("style",r),e.width=28,e.height=28,e.intersect=function(t){return tC.polygon(e,c,t)},i}async function tT(t,e,a){var n;let i,{labelStyles:o,nodeStyles:c}=(0,l.styles2String)(e);e.labelStyle=o;let{shapeSvg:h,bbox:d,halfPadding:u}=await ta(t,e,tr(e)),g=null!=(n=null==a?void 0:a.padding)?n:u,f=d.width/2+g,{cssStyles:p}=e;if("handDrawn"===e.look){let t=te.svg(h),a=(0,l.userNodeOverrides)(e,{}),n=t.circle(0,0,2*f,a);(i=h.insert(()=>n,":first-child")).attr("class","basic label-container").attr("style",(0,r.handleUndefinedAttr)(p))}else i=h.insert("circle",":first-child").attr("class","basic label-container").attr("style",c).attr("r",f).attr("cx",0).attr("cy",0);return tn(e,i),e.calcIntersect=function(t,e){let a=t.width/2;return tC.circle(t,a,e)},e.intersect=function(t){return s.log.info("Circle intersect",e,f,t),tC.circle(e,f,t)},h}function tR(t){let e=Math.cos(Math.PI/4),a=Math.sin(Math.PI/4),l=2*t,n={x:l/2*e,y:l/2*a},r={x:-(l/2)*e,y:l/2*a},i={x:-(l/2)*e,y:-(l/2)*a},s={x:l/2*e,y:-(l/2)*a};return"M ".concat(r.x,",").concat(r.y," L ").concat(s.x,",").concat(s.y,"\n                   M ").concat(n.x,",").concat(n.y," L ").concat(i.x,",").concat(i.y)}function tI(t,e){var a,n;let{labelStyles:r,nodeStyles:i}=(0,l.styles2String)(e);e.labelStyle=r,e.label="";let o=t.insert("g").attr("class",tr(e)).attr("id",null!=(a=e.domId)?a:e.id),c=Math.max(30,null!=(n=null==e?void 0:e.width)?n:0),{cssStyles:h}=e,d=te.svg(o),u=(0,l.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(u.roughness=0,u.fillStyle="solid");let g=d.circle(0,0,2*c,u),f=tR(c),p=d.path(f,u),y=o.insert(()=>g,":first-child");return y.insert(()=>p),h&&"handDrawn"!==e.look&&y.selectAll("path").attr("style",h),i&&"handDrawn"!==e.look&&y.selectAll("path").attr("style",i),tn(e,y),e.intersect=function(t){return s.log.info("crossedCircle intersect",e,{radius:c,point:t}),tC.circle(e,c,t)},o}function tW(t,e,a){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:180,i=[],s=n*Math.PI/180,o=(r*Math.PI/180-s)/(l-1);for(let n=0;n<l;n++){let l=s+n*o,r=t+a*Math.cos(l),c=e+a*Math.sin(l);i.push({x:-r,y:-c})}return i}async function tE(t,e){var a,n,r,i,s;let{labelStyles:o,nodeStyles:c}=(0,l.styles2String)(e);e.labelStyle=o;let{shapeSvg:h,bbox:d,label:u}=await ta(t,e,tr(e)),g=d.width+(null!=(a=e.padding)?a:0),f=d.height+(null!=(n=e.padding)?n:0),p=Math.max(5,.1*f),{cssStyles:y}=e,m=[...tW(g/2,-f/2,p,30,-90,0),{x:-g/2-p,y:p},...tW(g/2+2*p,-p,p,20,-180,-270),...tW(g/2+2*p,p,p,20,-90,-180),{x:-g/2-p,y:-f/2},...tW(g/2,f/2,p,20,0,90)],x=[{x:g/2,y:-f/2-p},{x:-g/2,y:-f/2-p},...tW(g/2,-f/2,p,20,-90,0),{x:-g/2-p,y:-p},...tW(g/2+.1*g,-p,p,20,-180,-270),...tW(g/2+.1*g,p,p,20,-90,-180),{x:-g/2-p,y:f/2},...tW(g/2,f/2,p,20,0,90),{x:-g/2,y:f/2+p},{x:g/2,y:f/2+p}],w=te.svg(h),b=(0,l.userNodeOverrides)(e,{fill:"none"});"handDrawn"!==e.look&&(b.roughness=0,b.fillStyle="solid");let v=ti(m).replace("Z",""),k=w.path(v,b),M=ti(x),S=w.path(M,{...b}),_=h.insert("g",":first-child");return _.insert(()=>S,":first-child").attr("stroke-opacity",0),_.insert(()=>k,":first-child"),_.attr("class","text"),y&&"handDrawn"!==e.look&&_.selectAll("path").attr("style",y),c&&"handDrawn"!==e.look&&_.selectAll("path").attr("style",c),_.attr("transform","translate(".concat(p,", 0)")),u.attr("transform","translate(".concat(-g/2+p-(d.x-(null!=(r=d.left)?r:0)),",").concat(-f/2+(null!=(i=e.padding)?i:0)/2-(d.y-(null!=(s=d.top)?s:0)),")")),tn(e,_),e.intersect=function(t){return tC.polygon(e,x,t)},h}function tz(t,e,a){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:180,i=[],s=n*Math.PI/180,o=(r*Math.PI/180-s)/(l-1);for(let n=0;n<l;n++){let l=s+n*o,r=t+a*Math.cos(l),c=e+a*Math.sin(l);i.push({x:r,y:c})}return i}async function tj(t,e){var a,n,r,i,s,o;let{labelStyles:c,nodeStyles:h}=(0,l.styles2String)(e);e.labelStyle=c;let{shapeSvg:d,bbox:u,label:g}=await ta(t,e,tr(e)),f=u.width+(null!=(a=e.padding)?a:0),p=u.height+(null!=(n=e.padding)?n:0),y=Math.max(5,.1*p),{cssStyles:m}=e,x=[...tz(f/2,-p/2,y,20,-90,0),{x:f/2+y,y:-y},...tz(f/2+2*y,-y,y,20,-180,-270),...tz(f/2+2*y,y,y,20,-90,-180),{x:f/2+y,y:p/2},...tz(f/2,p/2,y,20,0,90)],w=[{x:-f/2,y:-p/2-y},{x:f/2,y:-p/2-y},...tz(f/2,-p/2,y,20,-90,0),{x:f/2+y,y:-y},...tz(f/2+2*y,-y,y,20,-180,-270),...tz(f/2+2*y,y,y,20,-90,-180),{x:f/2+y,y:p/2},...tz(f/2,p/2,y,20,0,90),{x:f/2,y:p/2+y},{x:-f/2,y:p/2+y}],b=te.svg(d),v=(0,l.userNodeOverrides)(e,{fill:"none"});"handDrawn"!==e.look&&(v.roughness=0,v.fillStyle="solid");let k=ti(x).replace("Z",""),M=b.path(k,v),S=ti(w),_=b.path(S,{...v}),D=d.insert("g",":first-child");return D.insert(()=>_,":first-child").attr("stroke-opacity",0),D.insert(()=>M,":first-child"),D.attr("class","text"),m&&"handDrawn"!==e.look&&D.selectAll("path").attr("style",m),h&&"handDrawn"!==e.look&&D.selectAll("path").attr("style",h),D.attr("transform","translate(".concat(-y,", 0)")),g.attr("transform","translate(".concat(-f/2+(null!=(r=e.padding)?r:0)/2-(u.x-(null!=(i=u.left)?i:0)),",").concat(-p/2+(null!=(s=e.padding)?s:0)/2-(u.y-(null!=(o=u.top)?o:0)),")")),tn(e,D),e.intersect=function(t){return tC.polygon(e,w,t)},d}function tq(t,e,a){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:180,i=[],s=n*Math.PI/180,o=(r*Math.PI/180-s)/(l-1);for(let n=0;n<l;n++){let l=s+n*o,r=t+a*Math.cos(l),c=e+a*Math.sin(l);i.push({x:-r,y:-c})}return i}async function tH(t,e){var a,n,r,i,s,o;let{labelStyles:c,nodeStyles:h}=(0,l.styles2String)(e);e.labelStyle=c;let{shapeSvg:d,bbox:u,label:g}=await ta(t,e,tr(e)),f=u.width+(null!=(a=e.padding)?a:0),p=u.height+(null!=(n=e.padding)?n:0),y=Math.max(5,.1*p),{cssStyles:m}=e,x=[...tq(f/2,-p/2,y,30,-90,0),{x:-f/2-y,y:y},...tq(f/2+2*y,-y,y,20,-180,-270),...tq(f/2+2*y,y,y,20,-90,-180),{x:-f/2-y,y:-p/2},...tq(f/2,p/2,y,20,0,90)],w=[...tq(-f/2+y+y/2,-p/2,y,20,-90,-180),{x:f/2-y/2,y:y},...tq(-f/2-y/2,-y,y,20,0,90),...tq(-f/2-y/2,y,y,20,-90,0),{x:f/2-y/2,y:-y},...tq(-f/2+y+y/2,p/2,y,30,-180,-270)],b=[{x:f/2,y:-p/2-y},{x:-f/2,y:-p/2-y},...tq(f/2,-p/2,y,20,-90,0),{x:-f/2-y,y:-y},...tq(f/2+2*y,-y,y,20,-180,-270),...tq(f/2+2*y,y,y,20,-90,-180),{x:-f/2-y,y:p/2},...tq(f/2,p/2,y,20,0,90),{x:-f/2,y:p/2+y},{x:f/2-y-y/2,y:p/2+y},...tq(-f/2+y+y/2,-p/2,y,20,-90,-180),{x:f/2-y/2,y:y},...tq(-f/2-y/2,-y,y,20,0,90),...tq(-f/2-y/2,y,y,20,-90,0),{x:f/2-y/2,y:-y},...tq(-f/2+y+y/2,p/2,y,30,-180,-270)],v=te.svg(d),k=(0,l.userNodeOverrides)(e,{fill:"none"});"handDrawn"!==e.look&&(k.roughness=0,k.fillStyle="solid");let M=ti(x).replace("Z",""),S=v.path(M,k),_=ti(w).replace("Z",""),D=v.path(_,k),C=ti(b),N=v.path(C,{...k}),A=d.insert("g",":first-child");return A.insert(()=>N,":first-child").attr("stroke-opacity",0),A.insert(()=>S,":first-child"),A.insert(()=>D,":first-child"),A.attr("class","text"),m&&"handDrawn"!==e.look&&A.selectAll("path").attr("style",m),h&&"handDrawn"!==e.look&&A.selectAll("path").attr("style",h),A.attr("transform","translate(".concat(y-y/4,", 0)")),g.attr("transform","translate(".concat(-f/2+(null!=(r=e.padding)?r:0)/2-(u.x-(null!=(i=u.left)?i:0)),",").concat(-p/2+(null!=(s=e.padding)?s:0)/2-(u.y-(null!=(o=u.top)?o:0)),")")),tn(e,A),e.intersect=function(t){return tC.polygon(e,b,t)},d}async function tF(t,e){var a,n,r,i;let{labelStyles:s,nodeStyles:o}=(0,l.styles2String)(e);e.labelStyle=s;let{shapeSvg:c,bbox:h}=await ta(t,e,tr(e)),d=Math.max(80,(h.width+(null!=(a=e.padding)?a:0)*2)*1.25,null!=(n=null==e?void 0:e.width)?n:0),u=Math.max(20,h.height+(null!=(r=e.padding)?r:0)*2,null!=(i=null==e?void 0:e.height)?i:0),g=u/2,{cssStyles:f}=e,p=te.svg(c),y=(0,l.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(y.roughness=0,y.fillStyle="solid");let m=d-g,x=u/4,w=[{x:m,y:0},{x:x,y:0},{x:0,y:u/2},{x:x,y:u},{x:m,y:u},...to(-m,-u/2,g,50,270,90)],b=ti(w),v=p.path(b,y),k=c.insert(()=>v,":first-child");return k.attr("class","basic label-container"),f&&"handDrawn"!==e.look&&k.selectChildren("path").attr("style",f),o&&"handDrawn"!==e.look&&k.selectChildren("path").attr("style",o),k.attr("transform","translate(".concat(-d/2,", ").concat(-u/2,")")),tn(e,k),e.intersect=function(t){return tC.polygon(e,w,t)},c}(0,s.__name)(tN,"anchor"),(0,s.__name)(tA,"generateArcPoints"),(0,s.__name)(tP,"bowTieRect"),(0,s.__name)(tO,"insertPolygonShape"),(0,s.__name)(tB,"card"),(0,s.__name)(tL,"choice"),(0,s.__name)(tT,"circle"),(0,s.__name)(tR,"createLine"),(0,s.__name)(tI,"crossedCircle"),(0,s.__name)(tW,"generateCirclePoints"),(0,s.__name)(tE,"curlyBraceLeft"),(0,s.__name)(tz,"generateCirclePoints"),(0,s.__name)(tj,"curlyBraceRight"),(0,s.__name)(tq,"generateCirclePoints"),(0,s.__name)(tH,"curlyBraces"),(0,s.__name)(tF,"curvedTrapezoid");var tG=(0,s.__name)((t,e,a,l,n,r)=>["M".concat(t,",").concat(e+r),"a".concat(n,",").concat(r," 0,0,0 ").concat(a,",0"),"a".concat(n,",").concat(r," 0,0,0 ").concat(-a,",0"),"l0,".concat(l),"a".concat(n,",").concat(r," 0,0,0 ").concat(a,",0"),"l0,".concat(-l)].join(" "),"createCylinderPathD"),tV=(0,s.__name)((t,e,a,l,n,r)=>["M".concat(t,",").concat(e+r),"M".concat(t+a,",").concat(e+r),"a".concat(n,",").concat(r," 0,0,0 ").concat(-a,",0"),"l0,".concat(l),"a".concat(n,",").concat(r," 0,0,0 ").concat(a,",0"),"l0,".concat(-l)].join(" "),"createOuterCylinderPathD"),tU=(0,s.__name)((t,e,a,l,n,r)=>["M".concat(t-a/2,",").concat(-l/2),"a".concat(n,",").concat(r," 0,0,0 ").concat(a,",0")].join(" "),"createInnerCylinderPathD");async function tZ(t,e){var a,n,i,s,o;let c,{labelStyles:h,nodeStyles:d}=(0,l.styles2String)(e);e.labelStyle=h;let{shapeSvg:u,bbox:g,label:f}=await ta(t,e,tr(e)),p=Math.max(g.width+e.padding,null!=(a=e.width)?a:0),y=p/2,m=y/(2.5+p/50),x=Math.max(g.height+m+e.padding,null!=(n=e.height)?n:0),{cssStyles:w}=e;if("handDrawn"===e.look){let t=te.svg(u),a=tV(0,0,p,x,y,m),n=tU(0,m,p,x,y,m),r=t.path(a,(0,l.userNodeOverrides)(e,{})),i=t.path(n,(0,l.userNodeOverrides)(e,{fill:"none"}));c=u.insert(()=>i,":first-child"),(c=u.insert(()=>r,":first-child")).attr("class","basic label-container"),w&&c.attr("style",w)}else{let t=tG(0,0,p,x,y,m);c=u.insert("path",":first-child").attr("d",t).attr("class","basic label-container").attr("style",(0,r.handleUndefinedAttr)(w)).attr("style",d)}return c.attr("label-offset-y",m),c.attr("transform","translate(".concat(-p/2,", ").concat(-(x/2+m),")")),tn(e,c),f.attr("transform","translate(".concat(-(g.width/2)-(g.x-(null!=(i=g.left)?i:0)),", ").concat(-(g.height/2)+(null!=(s=e.padding)?s:0)/1.5-(g.y-(null!=(o=g.top)?o:0)),")")),e.intersect=function(t){var a,l,n,r,i,s;let o=tC.rect(e,t),c=o.x-(null!=(a=e.x)?a:0);if(0!=y&&(Math.abs(c)<(null!=(l=e.width)?l:0)/2||Math.abs(c)==(null!=(n=e.width)?n:0)/2&&Math.abs(o.y-(null!=(r=e.y)?r:0))>(null!=(i=e.height)?i:0)/2-m)){let a=m*m*(1-c*c/(y*y));a>0&&(a=Math.sqrt(a)),a=m-a,t.y-(null!=(s=e.y)?s:0)>0&&(a=-a),o.y+=a}return o},u}async function tX(t,e){var a,n,r,i;let{labelStyles:s,nodeStyles:o}=(0,l.styles2String)(e);e.labelStyle=s;let{shapeSvg:c,bbox:h,label:d}=await ta(t,e,tr(e)),u=h.width+e.padding,g=h.height+e.padding,f=.2*g,p=-u/2,y=-g/2-f/2,{cssStyles:m}=e,x=te.svg(c),w=(0,l.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(w.roughness=0,w.fillStyle="solid");let b=x.polygon([{x:p,y:y+f},{x:-p,y:y+f},{x:-p,y:-y},{x:p,y:-y},{x:p,y},{x:-p,y},{x:-p,y:y+f}].map(t=>[t.x,t.y]),w),v=c.insert(()=>b,":first-child");return v.attr("class","basic label-container"),m&&"handDrawn"!==e.look&&v.selectAll("path").attr("style",m),o&&"handDrawn"!==e.look&&v.selectAll("path").attr("style",o),d.attr("transform","translate(".concat(p+(null!=(a=e.padding)?a:0)/2-(h.x-(null!=(n=h.left)?n:0)),", ").concat(y+f+(null!=(r=e.padding)?r:0)/2-(h.y-(null!=(i=h.top)?i:0)),")")),tn(e,v),e.intersect=function(t){return tC.rect(e,t)},c}async function tQ(t,e){let a,{labelStyles:n,nodeStyles:i}=(0,l.styles2String)(e);e.labelStyle=n;let{shapeSvg:o,bbox:c,halfPadding:h}=await ta(t,e,tr(e)),d=c.width/2+h+5,u=c.width/2+h,{cssStyles:g}=e;if("handDrawn"===e.look){var f,p;let t=te.svg(o),n=(0,l.userNodeOverrides)(e,{roughness:.2,strokeWidth:2.5}),i=(0,l.userNodeOverrides)(e,{roughness:.2,strokeWidth:1.5}),s=t.circle(0,0,2*d,n),c=t.circle(0,0,2*u,i);(a=o.insert("g",":first-child")).attr("class",(0,r.handleUndefinedAttr)(e.cssClasses)).attr("style",(0,r.handleUndefinedAttr)(g)),null==(f=a.node())||f.appendChild(s),null==(p=a.node())||p.appendChild(c)}else{let t=(a=o.insert("g",":first-child")).insert("circle",":first-child"),e=a.insert("circle");a.attr("class","basic label-container").attr("style",i),t.attr("class","outer-circle").attr("style",i).attr("r",d).attr("cx",0).attr("cy",0),e.attr("class","inner-circle").attr("style",i).attr("r",u).attr("cx",0).attr("cy",0)}return tn(e,a),e.intersect=function(t){return s.log.info("DoubleCircle intersect",e,d,t),tC.circle(e,d,t)},o}function tJ(t,e,a){var n;let{config:{themeVariables:r}}=a,{labelStyles:i,nodeStyles:o}=(0,l.styles2String)(e);e.label="",e.labelStyle=i;let c=t.insert("g").attr("class",tr(e)).attr("id",null!=(n=e.domId)?n:e.id),{cssStyles:h}=e,d=te.svg(c),{nodeBorder:u}=r,g=(0,l.userNodeOverrides)(e,{fillStyle:"solid"});"handDrawn"!==e.look&&(g.roughness=0);let f=d.circle(0,0,14,g),p=c.insert(()=>f,":first-child");return p.selectAll("path").attr("style","fill: ".concat(u," !important;")),h&&h.length>0&&"handDrawn"!==e.look&&p.selectAll("path").attr("style",h),o&&"handDrawn"!==e.look&&p.selectAll("path").attr("style",o),tn(e,p),e.intersect=function(t){return s.log.info("filledCircle intersect",e,{radius:7,point:t}),tC.circle(e,7,t)},c}async function tY(t,e){var a,n,r,i;let{labelStyles:o,nodeStyles:c}=(0,l.styles2String)(e);e.labelStyle=o;let{shapeSvg:h,bbox:d,label:u}=await ta(t,e,tr(e)),g=d.width+(null!=(a=e.padding)?a:0),f=g+d.height,p=g+d.height,y=[{x:0,y:-f},{x:p,y:-f},{x:p/2,y:0}],{cssStyles:m}=e,x=te.svg(h),w=(0,l.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(w.roughness=0,w.fillStyle="solid");let b=ti(y),v=x.path(b,w),k=h.insert(()=>v,":first-child").attr("transform","translate(".concat(-f/2,", ").concat(f/2,")"));return m&&"handDrawn"!==e.look&&k.selectChildren("path").attr("style",m),c&&"handDrawn"!==e.look&&k.selectChildren("path").attr("style",c),e.width=g,e.height=f,tn(e,k),u.attr("transform","translate(".concat(-d.width/2-(d.x-(null!=(n=d.left)?n:0)),", ").concat(-f/2+(null!=(r=e.padding)?r:0)/2+(d.y-(null!=(i=d.top)?i:0)),")")),e.intersect=function(t){return s.log.info("Triangle intersect",e,y,t),tC.polygon(e,y,t)},h}function tK(t,e,a){var n,r,i,s,o,c;let{dir:h,config:{state:d,themeVariables:u}}=a,{nodeStyles:g}=(0,l.styles2String)(e);e.label="";let f=t.insert("g").attr("class",tr(e)).attr("id",null!=(n=e.domId)?n:e.id),{cssStyles:p}=e,y=Math.max(70,null!=(r=null==e?void 0:e.width)?r:0),m=Math.max(10,null!=(i=null==e?void 0:e.height)?i:0);"LR"===h&&(y=Math.max(10,null!=(s=null==e?void 0:e.width)?s:0),m=Math.max(70,null!=(o=null==e?void 0:e.height)?o:0));let x=-1*y/2,w=-1*m/2,b=te.svg(f),v=(0,l.userNodeOverrides)(e,{stroke:u.lineColor,fill:u.lineColor});"handDrawn"!==e.look&&(v.roughness=0,v.fillStyle="solid");let k=b.rectangle(x,w,y,m,v),M=f.insert(()=>k,":first-child");p&&"handDrawn"!==e.look&&M.selectAll("path").attr("style",p),g&&"handDrawn"!==e.look&&M.selectAll("path").attr("style",g),tn(e,M);let S=null!=(c=null==d?void 0:d.padding)?c:0;return e.width&&e.height&&(e.width+=S/2||0,e.height+=S/2||0),e.intersect=function(t){return tC.rect(e,t)},f}async function t$(t,e){var a,n,r,i;let{labelStyles:o,nodeStyles:c}=(0,l.styles2String)(e);e.labelStyle=o;let{shapeSvg:h,bbox:d}=await ta(t,e,tr(e)),u=Math.max(80,d.width+(null!=(a=e.padding)?a:0)*2,null!=(n=null==e?void 0:e.width)?n:0),g=Math.max(50,d.height+(null!=(r=e.padding)?r:0)*2,null!=(i=null==e?void 0:e.height)?i:0),f=g/2,{cssStyles:p}=e,y=te.svg(h),m=(0,l.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(m.roughness=0,m.fillStyle="solid");let x=[{x:-u/2,y:-g/2},{x:u/2-f,y:-g/2},...to(-u/2+f,0,f,50,90,270),{x:u/2-f,y:g/2},{x:-u/2,y:g/2}],w=ti(x),b=y.path(w,m),v=h.insert(()=>b,":first-child");return v.attr("class","basic label-container"),p&&"handDrawn"!==e.look&&v.selectChildren("path").attr("style",p),c&&"handDrawn"!==e.look&&v.selectChildren("path").attr("style",c),tn(e,v),e.intersect=function(t){return s.log.info("Pill intersect",e,{radius:f,point:t}),tC.polygon(e,x,t)},h}async function t0(t,e){var a,n;let{labelStyles:r,nodeStyles:i}=(0,l.styles2String)(e);e.labelStyle=r;let{shapeSvg:s,bbox:o}=await ta(t,e,tr(e)),c=o.height+(null!=(a=e.padding)?a:0),h=o.width+(null!=(n=e.padding)?n:0)*2.5,{cssStyles:d}=e,u=te.svg(s),g=(0,l.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(g.roughness=0,g.fillStyle="solid");let f=h/2,p=f/6,y=c/2,m=(f+=p)-y/2,x=[{x:-m,y:-y},{x:0,y:-y},{x:m,y:-y},{x:f,y:0},{x:m,y:y},{x:0,y:y},{x:-m,y:y},{x:-f,y:0}],w=ti(x),b=u.path(w,g),v=s.insert(()=>b,":first-child");return v.attr("class","basic label-container"),d&&"handDrawn"!==e.look&&v.selectChildren("path").attr("style",d),i&&"handDrawn"!==e.look&&v.selectChildren("path").attr("style",i),e.width=h,e.height=c,tn(e,v),e.intersect=function(t){return tC.polygon(e,x,t)},s}async function t2(t,e){var a,n;let{labelStyles:r,nodeStyles:i}=(0,l.styles2String)(e);e.label="",e.labelStyle=r;let{shapeSvg:o}=await ta(t,e,tr(e)),c=Math.max(30,null!=(a=null==e?void 0:e.width)?a:0),h=Math.max(30,null!=(n=null==e?void 0:e.height)?n:0),{cssStyles:d}=e,u=te.svg(o),g=(0,l.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(g.roughness=0,g.fillStyle="solid");let f=[{x:0,y:0},{x:c,y:0},{x:0,y:h},{x:c,y:h}],p=ti(f),y=u.path(p,g),m=o.insert(()=>y,":first-child");return m.attr("class","basic label-container"),d&&"handDrawn"!==e.look&&m.selectChildren("path").attr("style",d),i&&"handDrawn"!==e.look&&m.selectChildren("path").attr("style",i),m.attr("transform","translate(".concat(-c/2,", ").concat(-h/2,")")),tn(e,m),e.intersect=function(t){return s.log.info("Pill intersect",e,{points:f}),tC.polygon(e,f,t)},o}async function t1(t,e,a){var r,i,o,c;let{config:{themeVariables:h,flowchart:d}}=a,{labelStyles:u}=(0,l.styles2String)(e);e.labelStyle=u;let g=Math.max(null!=(r=e.assetHeight)?r:48,null!=(i=e.assetWidth)?i:48),f=null==d?void 0:d.wrappingWidth;e.width=Math.max(g,null!=f?f:0);let{shapeSvg:p,bbox:y,label:m}=await ta(t,e,"icon-shape default"),x="t"===e.pos,{nodeBorder:w}=h,{stylesMap:b}=(0,l.compileStyles)(e),v=-g/2,k=-g/2,M=8*!!e.label,S=te.svg(p),_=(0,l.userNodeOverrides)(e,{stroke:"none",fill:"none"});"handDrawn"!==e.look&&(_.roughness=0,_.fillStyle="solid");let D=S.rectangle(v,k,g,g,_),C=Math.max(g,y.width),N=g+y.height+M,A=S.rectangle(-C/2,-N/2,C,N,{..._,fill:"transparent",stroke:"none"}),P=p.insert(()=>D,":first-child"),O=p.insert(()=>A);if(e.icon){let t=p.append("g");t.html("<g>".concat(await (0,n.getIconSVG)(e.icon,{height:g,width:g,fallbackPrefix:""}),"</g>"));let a=t.node().getBBox(),l=a.width,r=a.height,i=a.x,s=a.y;t.attr("transform","translate(".concat(-l/2-i,",").concat(x?y.height/2+M/2-r/2-s:-y.height/2-M/2-r/2-s,")")),t.attr("style","color: ".concat(null!=(o=b.get("stroke"))?o:w,";"))}return m.attr("transform","translate(".concat(-y.width/2-(y.x-(null!=(c=y.left)?c:0)),",").concat(x?-N/2:N/2-y.height,")")),P.attr("transform","translate(".concat(0,",").concat(x?y.height/2+M/2:-y.height/2-M/2,")")),tn(e,O),e.intersect=function(t){var a,l,n;if(s.log.info("iconSquare intersect",e,t),!e.label)return tC.rect(e,t);let r=null!=(a=e.x)?a:0,i=null!=(l=e.y)?l:0,o=null!=(n=e.height)?n:0,c=[];return c=x?[{x:r-y.width/2,y:i-o/2},{x:r+y.width/2,y:i-o/2},{x:r+y.width/2,y:i-o/2+y.height+M},{x:r+g/2,y:i-o/2+y.height+M},{x:r+g/2,y:i+o/2},{x:r-g/2,y:i+o/2},{x:r-g/2,y:i-o/2+y.height+M},{x:r-y.width/2,y:i-o/2+y.height+M}]:[{x:r-g/2,y:i-o/2},{x:r+g/2,y:i-o/2},{x:r+g/2,y:i-o/2+g},{x:r+y.width/2,y:i-o/2+g},{x:r+y.width/2/2,y:i+o/2},{x:r-y.width/2,y:i+o/2},{x:r-y.width/2,y:i-o/2+g},{x:r-g/2,y:i-o/2+g}],tC.polygon(e,c,t)},p}async function t5(t,e,a){var r,i,o,c;let{config:{themeVariables:h,flowchart:d}}=a,{labelStyles:u}=(0,l.styles2String)(e);e.labelStyle=u;let g=Math.max(null!=(r=e.assetHeight)?r:48,null!=(i=e.assetWidth)?i:48),f=null==d?void 0:d.wrappingWidth;e.width=Math.max(g,null!=f?f:0);let{shapeSvg:p,bbox:y,label:m}=await ta(t,e,"icon-shape default"),x=8*!!e.label,w="t"===e.pos,{nodeBorder:b,mainBkg:v}=h,{stylesMap:k}=(0,l.compileStyles)(e),M=te.svg(p),S=(0,l.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(S.roughness=0,S.fillStyle="solid");let _=k.get("fill");S.stroke=null!=_?_:v;let D=p.append("g");e.icon&&D.html("<g>".concat(await (0,n.getIconSVG)(e.icon,{height:g,width:g,fallbackPrefix:""}),"</g>"));let C=D.node().getBBox(),N=C.width,A=C.height,P=C.x,O=C.y,B=Math.max(N,A)*Math.SQRT2+40,L=M.circle(0,0,B,S),T=Math.max(B,y.width),R=B+y.height+x,I=M.rectangle(-T/2,-R/2,T,R,{...S,fill:"transparent",stroke:"none"}),W=p.insert(()=>L,":first-child"),E=p.insert(()=>I);return D.attr("transform","translate(".concat(-N/2-P,",").concat(w?y.height/2+x/2-A/2-O:-y.height/2-x/2-A/2-O,")")),D.attr("style","color: ".concat(null!=(o=k.get("stroke"))?o:b,";")),m.attr("transform","translate(".concat(-y.width/2-(y.x-(null!=(c=y.left)?c:0)),",").concat(w?-R/2:R/2-y.height,")")),W.attr("transform","translate(".concat(0,",").concat(w?y.height/2+x/2:-y.height/2-x/2,")")),tn(e,E),e.intersect=function(t){return s.log.info("iconSquare intersect",e,t),tC.rect(e,t)},p}async function t3(t,e,a){var r,i,o,c;let{config:{themeVariables:h,flowchart:d}}=a,{labelStyles:u}=(0,l.styles2String)(e);e.labelStyle=u;let g=Math.max(null!=(r=e.assetHeight)?r:48,null!=(i=e.assetWidth)?i:48),f=null==d?void 0:d.wrappingWidth;e.width=Math.max(g,null!=f?f:0);let{shapeSvg:p,bbox:y,halfPadding:m,label:x}=await ta(t,e,"icon-shape default"),w="t"===e.pos,b=g+2*m,v=g+2*m,{nodeBorder:k,mainBkg:M}=h,{stylesMap:S}=(0,l.compileStyles)(e),_=8*!!e.label,D=te.svg(p),C=(0,l.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(C.roughness=0,C.fillStyle="solid");let N=S.get("fill");C.stroke=null!=N?N:M;let A=D.path(tg(-v/2,-b/2,v,b,5),C),P=Math.max(v,y.width),O=b+y.height+_,B=D.rectangle(-P/2,-O/2,P,O,{...C,fill:"transparent",stroke:"none"}),L=p.insert(()=>A,":first-child").attr("class","icon-shape2"),T=p.insert(()=>B);if(e.icon){let t=p.append("g");t.html("<g>".concat(await (0,n.getIconSVG)(e.icon,{height:g,width:g,fallbackPrefix:""}),"</g>"));let a=t.node().getBBox(),l=a.width,r=a.height,i=a.x,s=a.y;t.attr("transform","translate(".concat(-l/2-i,",").concat(w?y.height/2+_/2-r/2-s:-y.height/2-_/2-r/2-s,")")),t.attr("style","color: ".concat(null!=(o=S.get("stroke"))?o:k,";"))}return x.attr("transform","translate(".concat(-y.width/2-(y.x-(null!=(c=y.left)?c:0)),",").concat(w?-O/2:O/2-y.height,")")),L.attr("transform","translate(".concat(0,",").concat(w?y.height/2+_/2:-y.height/2-_/2,")")),tn(e,T),e.intersect=function(t){var a,l,n;if(s.log.info("iconSquare intersect",e,t),!e.label)return tC.rect(e,t);let r=null!=(a=e.x)?a:0,i=null!=(l=e.y)?l:0,o=null!=(n=e.height)?n:0,c=[];return c=w?[{x:r-y.width/2,y:i-o/2},{x:r+y.width/2,y:i-o/2},{x:r+y.width/2,y:i-o/2+y.height+_},{x:r+v/2,y:i-o/2+y.height+_},{x:r+v/2,y:i+o/2},{x:r-v/2,y:i+o/2},{x:r-v/2,y:i-o/2+y.height+_},{x:r-y.width/2,y:i-o/2+y.height+_}]:[{x:r-v/2,y:i-o/2},{x:r+v/2,y:i-o/2},{x:r+v/2,y:i-o/2+b},{x:r+y.width/2,y:i-o/2+b},{x:r+y.width/2/2,y:i+o/2},{x:r-y.width/2,y:i+o/2},{x:r-y.width/2,y:i-o/2+b},{x:r-v/2,y:i-o/2+b}],tC.polygon(e,c,t)},p}async function t8(t,e,a){var r,i,o,c;let{config:{themeVariables:h,flowchart:d}}=a,{labelStyles:u}=(0,l.styles2String)(e);e.labelStyle=u;let g=Math.max(null!=(r=e.assetHeight)?r:48,null!=(i=e.assetWidth)?i:48),f=null==d?void 0:d.wrappingWidth;e.width=Math.max(g,null!=f?f:0);let{shapeSvg:p,bbox:y,halfPadding:m,label:x}=await ta(t,e,"icon-shape default"),w="t"===e.pos,b=g+2*m,v=g+2*m,{nodeBorder:k,mainBkg:M}=h,{stylesMap:S}=(0,l.compileStyles)(e),_=8*!!e.label,D=te.svg(p),C=(0,l.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(C.roughness=0,C.fillStyle="solid");let N=S.get("fill");C.stroke=null!=N?N:M;let A=D.path(tg(-v/2,-b/2,v,b,.1),C),P=Math.max(v,y.width),O=b+y.height+_,B=D.rectangle(-P/2,-O/2,P,O,{...C,fill:"transparent",stroke:"none"}),L=p.insert(()=>A,":first-child"),T=p.insert(()=>B);if(e.icon){let t=p.append("g");t.html("<g>".concat(await (0,n.getIconSVG)(e.icon,{height:g,width:g,fallbackPrefix:""}),"</g>"));let a=t.node().getBBox(),l=a.width,r=a.height,i=a.x,s=a.y;t.attr("transform","translate(".concat(-l/2-i,",").concat(w?y.height/2+_/2-r/2-s:-y.height/2-_/2-r/2-s,")")),t.attr("style","color: ".concat(null!=(o=S.get("stroke"))?o:k,";"))}return x.attr("transform","translate(".concat(-y.width/2-(y.x-(null!=(c=y.left)?c:0)),",").concat(w?-O/2:O/2-y.height,")")),L.attr("transform","translate(".concat(0,",").concat(w?y.height/2+_/2:-y.height/2-_/2,")")),tn(e,T),e.intersect=function(t){var a,l,n;if(s.log.info("iconSquare intersect",e,t),!e.label)return tC.rect(e,t);let r=null!=(a=e.x)?a:0,i=null!=(l=e.y)?l:0,o=null!=(n=e.height)?n:0,c=[];return c=w?[{x:r-y.width/2,y:i-o/2},{x:r+y.width/2,y:i-o/2},{x:r+y.width/2,y:i-o/2+y.height+_},{x:r+v/2,y:i-o/2+y.height+_},{x:r+v/2,y:i+o/2},{x:r-v/2,y:i+o/2},{x:r-v/2,y:i-o/2+y.height+_},{x:r-y.width/2,y:i-o/2+y.height+_}]:[{x:r-v/2,y:i-o/2},{x:r+v/2,y:i-o/2},{x:r+v/2,y:i-o/2+b},{x:r+y.width/2,y:i-o/2+b},{x:r+y.width/2/2,y:i+o/2},{x:r-y.width/2,y:i+o/2},{x:r-y.width/2,y:i-o/2+b},{x:r-v/2,y:i-o/2+b}],tC.polygon(e,c,t)},p}async function t4(t,e,a){var n,r,i,o;let{config:{flowchart:c}}=a,h=new Image;h.src=null!=(n=null==e?void 0:e.img)?n:"",await h.decode();let d=Number(h.naturalWidth.toString().replace("px","")),u=Number(h.naturalHeight.toString().replace("px",""));e.imageAspectRatio=d/u;let{labelStyles:g}=(0,l.styles2String)(e);e.labelStyle=g;let f=null==c?void 0:c.wrappingWidth;e.defaultWidth=null==c?void 0:c.wrappingWidth;let p=Math.max(e.label&&null!=f?f:0,null!=(r=null==e?void 0:e.assetWidth)?r:d),y="on"===e.constraint&&(null==e?void 0:e.assetHeight)?e.assetHeight*e.imageAspectRatio:p,m="on"===e.constraint?y/e.imageAspectRatio:null!=(i=null==e?void 0:e.assetHeight)?i:u;e.width=Math.max(y,null!=f?f:0);let{shapeSvg:x,bbox:w,label:b}=await ta(t,e,"image-shape default"),v="t"===e.pos,k=-y/2,M=8*!!e.label,S=te.svg(x),_=(0,l.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(_.roughness=0,_.fillStyle="solid");let D=S.rectangle(k,-m/2,y,m,_),C=Math.max(y,w.width),N=m+w.height+M,A=S.rectangle(-C/2,-N/2,C,N,{..._,fill:"none",stroke:"none"}),P=x.insert(()=>D,":first-child"),O=x.insert(()=>A);if(e.img){let t=x.append("image");t.attr("href",e.img),t.attr("width",y),t.attr("height",m),t.attr("preserveAspectRatio","none"),t.attr("transform","translate(".concat(-y/2,",").concat(v?N/2-m:-N/2,")"))}return b.attr("transform","translate(".concat(-w.width/2-(w.x-(null!=(o=w.left)?o:0)),",").concat(v?-m/2-w.height/2-M/2:m/2-w.height/2+M/2,")")),P.attr("transform","translate(".concat(0,",").concat(v?w.height/2+M/2:-w.height/2-M/2,")")),tn(e,O),e.intersect=function(t){var a,l,n;if(s.log.info("iconSquare intersect",e,t),!e.label)return tC.rect(e,t);let r=null!=(a=e.x)?a:0,i=null!=(l=e.y)?l:0,o=null!=(n=e.height)?n:0,c=[];return c=v?[{x:r-w.width/2,y:i-o/2},{x:r+w.width/2,y:i-o/2},{x:r+w.width/2,y:i-o/2+w.height+M},{x:r+y/2,y:i-o/2+w.height+M},{x:r+y/2,y:i+o/2},{x:r-y/2,y:i+o/2},{x:r-y/2,y:i-o/2+w.height+M},{x:r-w.width/2,y:i-o/2+w.height+M}]:[{x:r-y/2,y:i-o/2},{x:r+y/2,y:i-o/2},{x:r+y/2,y:i-o/2+m},{x:r+w.width/2,y:i-o/2+m},{x:r+w.width/2/2,y:i+o/2},{x:r-w.width/2,y:i+o/2},{x:r-w.width/2,y:i-o/2+m},{x:r-y/2,y:i-o/2+m}],tC.polygon(e,c,t)},x}async function t9(t,e){var a,n,r,i;let s,{labelStyles:o,nodeStyles:c}=(0,l.styles2String)(e);e.labelStyle=o;let{shapeSvg:h,bbox:d}=await ta(t,e,tr(e)),u=Math.max(d.width+(null!=(a=e.padding)?a:0)*2,null!=(n=null==e?void 0:e.width)?n:0),g=Math.max(d.height+(null!=(r=e.padding)?r:0)*2,null!=(i=null==e?void 0:e.height)?i:0),f=[{x:0,y:0},{x:u,y:0},{x:u+3*g/6,y:-g},{x:-3*g/6,y:-g}],{cssStyles:p}=e;if("handDrawn"===e.look){let t=te.svg(h),a=(0,l.userNodeOverrides)(e,{}),n=ti(f),r=t.path(n,a);s=h.insert(()=>r,":first-child").attr("transform","translate(".concat(-u/2,", ").concat(g/2,")")),p&&s.attr("style",p)}else s=tO(h,u,g,f);return c&&s.attr("style",c),e.width=u,e.height=g,tn(e,s),e.intersect=function(t){return tC.polygon(e,f,t)},h}async function t6(t,e,a){let n,{labelStyles:i,nodeStyles:s}=(0,l.styles2String)(e);e.labelStyle=i;let{shapeSvg:o,bbox:c}=await ta(t,e,tr(e)),h=Math.max(c.width+2*a.labelPaddingX,(null==e?void 0:e.width)||0),d=Math.max(c.height+2*a.labelPaddingY,(null==e?void 0:e.height)||0),u=-h/2,g=-d/2,{rx:f,ry:p}=e,{cssStyles:y}=e;if((null==a?void 0:a.rx)&&a.ry&&(f=a.rx,p=a.ry),"handDrawn"===e.look){let t=te.svg(o),a=(0,l.userNodeOverrides)(e,{}),i=f||p?t.path(tg(u,g,h,d,f||0),a):t.rectangle(u,g,h,d,a);(n=o.insert(()=>i,":first-child")).attr("class","basic label-container").attr("style",(0,r.handleUndefinedAttr)(y))}else(n=o.insert("rect",":first-child")).attr("class","basic label-container").attr("style",s).attr("rx",(0,r.handleUndefinedAttr)(f)).attr("ry",(0,r.handleUndefinedAttr)(p)).attr("x",u).attr("y",g).attr("width",h).attr("height",d);return tn(e,n),e.calcIntersect=function(t,e){return tC.rect(t,e)},e.intersect=function(t){return tC.rect(e,t)},o}async function t7(t,e){var a,l;let{shapeSvg:n,bbox:r,label:i}=await ta(t,e,"label"),s=n.insert("rect",":first-child");return s.attr("width",.1).attr("height",.1),n.attr("class","label edgeLabel"),i.attr("transform","translate(".concat(-(r.width/2)-(r.x-(null!=(a=r.left)?a:0)),", ").concat(-(r.height/2)-(r.y-(null!=(l=r.top)?l:0)),")")),tn(e,s),e.intersect=function(t){return tC.rect(e,t)},n}async function et(t,e){var a,n,r,i;let s,{labelStyles:o,nodeStyles:c}=(0,l.styles2String)(e);e.labelStyle=o;let{shapeSvg:h,bbox:d}=await ta(t,e,tr(e)),u=Math.max(d.width+(null!=(a=e.padding)?a:0),null!=(n=null==e?void 0:e.width)?n:0),g=Math.max(d.height+(null!=(r=e.padding)?r:0),null!=(i=null==e?void 0:e.height)?i:0),f=[{x:0,y:0},{x:u+3*g/6,y:0},{x:u,y:-g},{x:-(3*g)/6,y:-g}],{cssStyles:p}=e;if("handDrawn"===e.look){let t=te.svg(h),a=(0,l.userNodeOverrides)(e,{}),n=ti(f),r=t.path(n,a);s=h.insert(()=>r,":first-child").attr("transform","translate(".concat(-u/2,", ").concat(g/2,")")),p&&s.attr("style",p)}else s=tO(h,u,g,f);return c&&s.attr("style",c),e.width=u,e.height=g,tn(e,s),e.intersect=function(t){return tC.polygon(e,f,t)},h}async function ee(t,e){var a,n,r,i;let s,{labelStyles:o,nodeStyles:c}=(0,l.styles2String)(e);e.labelStyle=o;let{shapeSvg:h,bbox:d}=await ta(t,e,tr(e)),u=Math.max(d.width+(null!=(a=e.padding)?a:0),null!=(n=null==e?void 0:e.width)?n:0),g=Math.max(d.height+(null!=(r=e.padding)?r:0),null!=(i=null==e?void 0:e.height)?i:0),f=[{x:-3*g/6,y:0},{x:u,y:0},{x:u+3*g/6,y:-g},{x:0,y:-g}],{cssStyles:p}=e;if("handDrawn"===e.look){let t=te.svg(h),a=(0,l.userNodeOverrides)(e,{}),n=ti(f),r=t.path(n,a);s=h.insert(()=>r,":first-child").attr("transform","translate(".concat(-u/2,", ").concat(g/2,")")),p&&s.attr("style",p)}else s=tO(h,u,g,f);return c&&s.attr("style",c),e.width=u,e.height=g,tn(e,s),e.intersect=function(t){return tC.polygon(e,f,t)},h}function ea(t,e){var a,n,r;let{labelStyles:i,nodeStyles:o}=(0,l.styles2String)(e);e.label="",e.labelStyle=i;let c=t.insert("g").attr("class",tr(e)).attr("id",null!=(a=e.domId)?a:e.id),{cssStyles:h}=e,d=Math.max(35,null!=(n=null==e?void 0:e.width)?n:0),u=Math.max(35,null!=(r=null==e?void 0:e.height)?r:0),g=[{x:d,y:0},{x:0,y:u+3.5},{x:d-14,y:u+3.5},{x:0,y:2*u},{x:d,y:u-3.5},{x:14,y:u-3.5}],f=te.svg(c),p=(0,l.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(p.roughness=0,p.fillStyle="solid");let y=ti(g),m=f.path(y,p),x=c.insert(()=>m,":first-child");return h&&"handDrawn"!==e.look&&x.selectAll("path").attr("style",h),o&&"handDrawn"!==e.look&&x.selectAll("path").attr("style",o),x.attr("transform","translate(-".concat(d/2,",").concat(-u,")")),tn(e,x),e.intersect=function(t){return s.log.info("lightningBolt intersect",e,t),tC.polygon(e,g,t)},c}(0,s.__name)(tZ,"cylinder"),(0,s.__name)(tX,"dividedRectangle"),(0,s.__name)(tQ,"doublecircle"),(0,s.__name)(tJ,"filledCircle"),(0,s.__name)(tY,"flippedTriangle"),(0,s.__name)(tK,"forkJoin"),(0,s.__name)(t$,"halfRoundedRectangle"),(0,s.__name)(t0,"hexagon"),(0,s.__name)(t2,"hourglass"),(0,s.__name)(t1,"icon"),(0,s.__name)(t5,"iconCircle"),(0,s.__name)(t3,"iconRounded"),(0,s.__name)(t8,"iconSquare"),(0,s.__name)(t4,"imageSquare"),(0,s.__name)(t9,"inv_trapezoid"),(0,s.__name)(t6,"drawRect"),(0,s.__name)(t7,"labelRect"),(0,s.__name)(et,"lean_left"),(0,s.__name)(ee,"lean_right"),(0,s.__name)(ea,"lightningBolt");var el=(0,s.__name)((t,e,a,l,n,r,i)=>["M".concat(t,",").concat(e+r),"a".concat(n,",").concat(r," 0,0,0 ").concat(a,",0"),"a".concat(n,",").concat(r," 0,0,0 ").concat(-a,",0"),"l0,".concat(l),"a".concat(n,",").concat(r," 0,0,0 ").concat(a,",0"),"l0,".concat(-l),"M".concat(t,",").concat(e+r+i),"a".concat(n,",").concat(r," 0,0,0 ").concat(a,",0")].join(" "),"createCylinderPathD"),en=(0,s.__name)((t,e,a,l,n,r,i)=>["M".concat(t,",").concat(e+r),"M".concat(t+a,",").concat(e+r),"a".concat(n,",").concat(r," 0,0,0 ").concat(-a,",0"),"l0,".concat(l),"a".concat(n,",").concat(r," 0,0,0 ").concat(a,",0"),"l0,".concat(-l),"M".concat(t,",").concat(e+r+i),"a".concat(n,",").concat(r," 0,0,0 ").concat(a,",0")].join(" "),"createOuterCylinderPathD"),er=(0,s.__name)((t,e,a,l,n,r)=>["M".concat(t-a/2,",").concat(-l/2),"a".concat(n,",").concat(r," 0,0,0 ").concat(a,",0")].join(" "),"createInnerCylinderPathD");async function ei(t,e){var a,n,i,s,o,c;let h,{labelStyles:d,nodeStyles:u}=(0,l.styles2String)(e);e.labelStyle=d;let{shapeSvg:g,bbox:f,label:p}=await ta(t,e,tr(e)),y=Math.max(f.width+(null!=(a=e.padding)?a:0),null!=(n=e.width)?n:0),m=y/2,x=m/(2.5+y/50),w=Math.max(f.height+x+(null!=(i=e.padding)?i:0),null!=(s=e.height)?s:0),b=.1*w,{cssStyles:v}=e;if("handDrawn"===e.look){let t=te.svg(g),a=en(0,0,y,w,m,x,b),n=er(0,x,y,w,m,x),r=(0,l.userNodeOverrides)(e,{}),i=t.path(a,r),s=t.path(n,r);g.insert(()=>s,":first-child").attr("class","line"),(h=g.insert(()=>i,":first-child")).attr("class","basic label-container"),v&&h.attr("style",v)}else{let t=el(0,0,y,w,m,x,b);h=g.insert("path",":first-child").attr("d",t).attr("class","basic label-container").attr("style",(0,r.handleUndefinedAttr)(v)).attr("style",u)}return h.attr("label-offset-y",x),h.attr("transform","translate(".concat(-y/2,", ").concat(-(w/2+x),")")),tn(e,h),p.attr("transform","translate(".concat(-(f.width/2)-(f.x-(null!=(o=f.left)?o:0)),", ").concat(-(f.height/2)+x-(f.y-(null!=(c=f.top)?c:0)),")")),e.intersect=function(t){var a,l,n,r,i,s;let o=tC.rect(e,t),c=o.x-(null!=(a=e.x)?a:0);if(0!=m&&(Math.abs(c)<(null!=(l=e.width)?l:0)/2||Math.abs(c)==(null!=(n=e.width)?n:0)/2&&Math.abs(o.y-(null!=(r=e.y)?r:0))>(null!=(i=e.height)?i:0)/2-x)){let a=x*x*(1-c*c/(m*m));a>0&&(a=Math.sqrt(a)),a=x-a,t.y-(null!=(s=e.y)?s:0)>0&&(a=-a),o.y+=a}return o},g}async function es(t,e){var a,n,r,i,s,o,c,h;let{labelStyles:d,nodeStyles:u}=(0,l.styles2String)(e);e.labelStyle=d;let{shapeSvg:g,bbox:f,label:p}=await ta(t,e,tr(e)),y=Math.max(f.width+(null!=(a=e.padding)?a:0)*2,null!=(n=null==e?void 0:e.width)?n:0),m=Math.max(f.height+(null!=(r=e.padding)?r:0)*2,null!=(i=null==e?void 0:e.height)?i:0),x=m/4,w=m+x,{cssStyles:b}=e,v=te.svg(g),k=(0,l.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(k.roughness=0,k.fillStyle="solid");let M=[{x:-y/2-y/2*.1,y:-w/2},{x:-y/2-y/2*.1,y:w/2},...ts(-y/2-y/2*.1,w/2,y/2+y/2*.1,w/2,x,.8),{x:y/2+y/2*.1,y:-w/2},{x:-y/2-y/2*.1,y:-w/2},{x:-y/2,y:-w/2},{x:-y/2,y:w/2*1.1},{x:-y/2,y:-w/2}],S=v.polygon(M.map(t=>[t.x,t.y]),k),_=g.insert(()=>S,":first-child");return _.attr("class","basic label-container"),b&&"handDrawn"!==e.look&&_.selectAll("path").attr("style",b),u&&"handDrawn"!==e.look&&_.selectAll("path").attr("style",u),_.attr("transform","translate(0,".concat(-x/2,")")),p.attr("transform","translate(".concat(-y/2+(null!=(s=e.padding)?s:0)+y/2*.1/2-(f.x-(null!=(o=f.left)?o:0)),",").concat(-m/2+(null!=(c=e.padding)?c:0)-x/2-(f.y-(null!=(h=f.top)?h:0)),")")),tn(e,_),e.intersect=function(t){return tC.polygon(e,M,t)},g}async function eo(t,e){var a,n,r,i,s,o;let{labelStyles:c,nodeStyles:h}=(0,l.styles2String)(e);e.labelStyle=c;let{shapeSvg:d,bbox:u,label:g}=await ta(t,e,tr(e)),f=Math.max(u.width+(null!=(a=e.padding)?a:0)*2,null!=(n=null==e?void 0:e.width)?n:0),p=Math.max(u.height+(null!=(r=e.padding)?r:0)*2,null!=(i=null==e?void 0:e.height)?i:0),y=-f/2,m=-p/2,{cssStyles:x}=e,w=te.svg(d),b=(0,l.userNodeOverrides)(e,{}),v=[{x:y-5,y:m+5},{x:y-5,y:m+p+5},{x:y+f-5,y:m+p+5},{x:y+f-5,y:m+p},{x:y+f,y:m+p},{x:y+f,y:m+p-5},{x:y+f+5,y:m+p-5},{x:y+f+5,y:m-5},{x:y+5,y:m-5},{x:y+5,y:m},{x:y,y:m},{x:y,y:m+5}];"handDrawn"!==e.look&&(b.roughness=0,b.fillStyle="solid");let k=ti(v),M=w.path(k,b),S=ti([{x:y,y:m+5},{x:y+f-5,y:m+5},{x:y+f-5,y:m+p},{x:y+f,y:m+p},{x:y+f,y:m},{x:y,y:m}]),_=w.path(S,{...b,fill:"none"}),D=d.insert(()=>_,":first-child");return D.insert(()=>M,":first-child"),D.attr("class","basic label-container"),x&&"handDrawn"!==e.look&&D.selectAll("path").attr("style",x),h&&"handDrawn"!==e.look&&D.selectAll("path").attr("style",h),g.attr("transform","translate(".concat(-(u.width/2)-5-(u.x-(null!=(s=u.left)?s:0)),", ").concat(-(u.height/2)+5-(u.y-(null!=(o=u.top)?o:0)),")")),tn(e,D),e.intersect=function(t){return tC.polygon(e,v,t)},d}async function ec(t,e){var a,n,r,i,s,o;let{labelStyles:c,nodeStyles:h}=(0,l.styles2String)(e);e.labelStyle=c;let{shapeSvg:d,bbox:u,label:g}=await ta(t,e,tr(e)),f=Math.max(u.width+(null!=(a=e.padding)?a:0)*2,null!=(n=null==e?void 0:e.width)?n:0),p=Math.max(u.height+(null!=(r=e.padding)?r:0)*2,null!=(i=null==e?void 0:e.height)?i:0),y=p/4,m=p+y,x=-f/2,w=-m/2,{cssStyles:b}=e,v=ts(x-5,w+m+5,x+f-5,w+m+5,y,.8),k=null==v?void 0:v[v.length-1],M=[{x:x-5,y:w+5},{x:x-5,y:w+m+5},...v,{x:x+f-5,y:k.y-5},{x:x+f,y:k.y-5},{x:x+f,y:k.y-10},{x:x+f+5,y:k.y-10},{x:x+f+5,y:w-5},{x:x+5,y:w-5},{x:x+5,y:w},{x,y:w},{x,y:w+5}],S=[{x,y:w+5},{x:x+f-5,y:w+5},{x:x+f-5,y:k.y-5},{x:x+f,y:k.y-5},{x:x+f,y:w},{x,y:w}],_=te.svg(d),D=(0,l.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(D.roughness=0,D.fillStyle="solid");let C=ti(M),N=_.path(C,D),A=ti(S),P=_.path(A,D),O=d.insert(()=>N,":first-child");return O.insert(()=>P),O.attr("class","basic label-container"),b&&"handDrawn"!==e.look&&O.selectAll("path").attr("style",b),h&&"handDrawn"!==e.look&&O.selectAll("path").attr("style",h),O.attr("transform","translate(0,".concat(-y/2,")")),g.attr("transform","translate(".concat(-(u.width/2)-5-(u.x-(null!=(s=u.left)?s:0)),", ").concat(-(u.height/2)+5-y/2-(u.y-(null!=(o=u.top)?o:0)),")")),tn(e,O),e.intersect=function(t){return tC.polygon(e,M,t)},d}async function eh(t,e,a){var n,r,s,o,c,h,d;let{config:{themeVariables:u}}=a,{labelStyles:g,nodeStyles:f}=(0,l.styles2String)(e);e.labelStyle=g,e.useHtmlLabels||(null==(n=(0,i.getConfig)().flowchart)?void 0:n.htmlLabels)!==!1||(e.centerLabel=!0);let{shapeSvg:p,bbox:y,label:m}=await ta(t,e,tr(e)),x=Math.max(y.width+(null!=(r=e.padding)?r:0)*2,null!=(s=null==e?void 0:e.width)?s:0),w=Math.max(y.height+(null!=(o=e.padding)?o:0)*2,null!=(c=null==e?void 0:e.height)?c:0),{cssStyles:b}=e,v=te.svg(p),k=(0,l.userNodeOverrides)(e,{fill:u.noteBkgColor,stroke:u.noteBorderColor});"handDrawn"!==e.look&&(k.roughness=0,k.fillStyle="solid");let M=v.rectangle(-x/2,-w/2,x,w,k),S=p.insert(()=>M,":first-child");return S.attr("class","basic label-container"),b&&"handDrawn"!==e.look&&S.selectAll("path").attr("style",b),f&&"handDrawn"!==e.look&&S.selectAll("path").attr("style",f),m.attr("transform","translate(".concat(-y.width/2-(y.x-(null!=(h=y.left)?h:0)),", ").concat(-(y.height/2)-(y.y-(null!=(d=y.top)?d:0)),")")),tn(e,S),e.intersect=function(t){return tC.rect(e,t)},p}(0,s.__name)(ei,"linedCylinder"),(0,s.__name)(es,"linedWaveEdgedRect"),(0,s.__name)(eo,"multiRect"),(0,s.__name)(ec,"multiWaveEdgedRectangle"),(0,s.__name)(eh,"note");var ed=(0,s.__name)((t,e,a)=>["M".concat(t+a/2,",").concat(e),"L".concat(t+a,",").concat(e-a/2),"L".concat(t+a/2,",").concat(e-a),"L".concat(t,",").concat(e-a/2),"Z"].join(" "),"createDecisionBoxPathD");async function eu(t,e){let a,{labelStyles:n,nodeStyles:r}=(0,l.styles2String)(e);e.labelStyle=n;let{shapeSvg:i,bbox:s}=await ta(t,e,tr(e)),o=s.width+e.padding+(s.height+e.padding),c=[{x:o/2,y:0},{x:o,y:-o/2},{x:o/2,y:-o},{x:0,y:-o/2}],{cssStyles:h}=e;if("handDrawn"===e.look){let t=te.svg(i),n=(0,l.userNodeOverrides)(e,{}),r=ed(0,0,o),s=t.path(r,n);a=i.insert(()=>s,":first-child").attr("transform","translate(".concat(-o/2+.5,", ").concat(o/2,")")),h&&a.attr("style",h)}else(a=tO(i,o,o,c)).attr("transform","translate(".concat(-o/2+.5,", ").concat(o/2,")"));return r&&a.attr("style",r),tn(e,a),e.calcIntersect=function(t,e){let a=t.width,l=tC.polygon(t,[{x:a/2,y:0},{x:a,y:-a/2},{x:a/2,y:-a},{x:0,y:-a/2}],e);return{x:l.x-.5,y:l.y-.5}},e.intersect=function(t){return this.calcIntersect(e,t)},i}async function eg(t,e){var a,n,r,i,s,o;let{labelStyles:c,nodeStyles:h}=(0,l.styles2String)(e);e.labelStyle=c;let{shapeSvg:d,bbox:u,label:g}=await ta(t,e,tr(e)),f=Math.max(u.width+(null!=(a=e.padding)?a:0),null!=(n=null==e?void 0:e.width)?n:0),p=Math.max(u.height+(null!=(r=e.padding)?r:0),null!=(i=null==e?void 0:e.height)?i:0),y=-f/2,m=-p/2,x=m/2,w=[{x:y+x,y:m},{x:y,y:0},{x:y+x,y:-m},{x:-y,y:-m},{x:-y,y:m}],{cssStyles:b}=e,v=te.svg(d),k=(0,l.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(k.roughness=0,k.fillStyle="solid");let M=ti(w),S=v.path(M,k),_=d.insert(()=>S,":first-child");return _.attr("class","basic label-container"),b&&"handDrawn"!==e.look&&_.selectAll("path").attr("style",b),h&&"handDrawn"!==e.look&&_.selectAll("path").attr("style",h),_.attr("transform","translate(".concat(-x/2,",0)")),g.attr("transform","translate(".concat(-x/2-u.width/2-(u.x-(null!=(s=u.left)?s:0)),", ").concat(-(u.height/2)-(u.y-(null!=(o=u.top)?o:0)),")")),tn(e,_),e.intersect=function(t){return tC.polygon(e,w,t)},d}async function ef(t,e){var a,n;let r,c,h,{labelStyles:d,nodeStyles:u}=(0,l.styles2String)(e);e.labelStyle=d,r=e.cssClasses?"node "+e.cssClasses:"node default";let g=t.insert("g").attr("class",r).attr("id",e.domId||e.id),f=g.insert("g"),p=g.insert("g").attr("class","label").attr("style",u),y=e.description,m=e.label,x=p.node().appendChild(await tu(m,e.labelStyle,!0,!0)),w={width:0,height:0};if((0,i.evaluate)(null==(n=(0,i.getConfig2)())||null==(a=n.flowchart)?void 0:a.htmlLabels)){let t=x.children[0],e=(0,o.select)(x);w=t.getBoundingClientRect(),e.attr("width",w.width),e.attr("height",w.height)}s.log.info("Text 2",y);let b=y||[],v=x.getBBox(),k=p.node().appendChild(await tu(b.join?b.join("<br/>"):b,e.labelStyle,!0,!0)),M=k.children[0],S=(0,o.select)(k);w=M.getBoundingClientRect(),S.attr("width",w.width),S.attr("height",w.height);let _=(e.padding||0)/2;(0,o.select)(k).attr("transform","translate( "+(w.width>v.width?0:(v.width-w.width)/2)+", "+(v.height+_+5)+")"),(0,o.select)(x).attr("transform","translate( "+(w.width<v.width?0:-(v.width-w.width)/2)+", 0)"),w=p.node().getBBox(),p.attr("transform","translate("+-w.width/2+", "+(-w.height/2-_+3)+")");let D=w.width+(e.padding||0),C=w.height+(e.padding||0),N=-w.width/2-_,A=-w.height/2-_;if("handDrawn"===e.look){let t=te.svg(g),a=(0,l.userNodeOverrides)(e,{}),n=t.path(tg(N,A,D,C,e.rx||0),a),r=t.line(-w.width/2-_,-w.height/2-_+v.height+_,w.width/2+_,-w.height/2-_+v.height+_,a);h=g.insert(()=>(s.log.debug("Rough node insert CXC",n),r),":first-child"),c=g.insert(()=>(s.log.debug("Rough node insert CXC",n),n),":first-child")}else c=f.insert("rect",":first-child"),h=f.insert("line"),c.attr("class","outer title-state").attr("style",u).attr("x",-w.width/2-_).attr("y",-w.height/2-_).attr("width",w.width+(e.padding||0)).attr("height",w.height+(e.padding||0)),h.attr("class","divider").attr("x1",-w.width/2-_).attr("x2",w.width/2+_).attr("y1",-w.height/2-_+v.height+_).attr("y2",-w.height/2-_+v.height+_);return tn(e,c),e.intersect=function(t){return tC.rect(e,t)},g}function ep(t,e,a,l,n,r,i){let s=Math.atan2(l-e,a-t),o=Math.sqrt(((a-t)/2/n)**2+((l-e)/2/r)**2);if(o>1)throw Error("The given radii are too small to create an arc between the points.");let c=Math.sqrt(1-o**2),h=(t+a)/2+c*r*Math.sin(s)*(i?-1:1),d=(e+l)/2-c*n*Math.cos(s)*(i?-1:1),u=Math.atan2((e-d)/r,(t-h)/n),g=Math.atan2((l-d)/r,(a-h)/n)-u;i&&g<0&&(g+=2*Math.PI),!i&&g>0&&(g-=2*Math.PI);let f=[];for(let t=0;t<20;t++){let e=u+t/19*g,a=h+n*Math.cos(e),l=d+r*Math.sin(e);f.push({x:a,y:l})}return f}async function ey(t,e){var a,n;let{labelStyles:r,nodeStyles:i}=(0,l.styles2String)(e);e.labelStyle=r;let{shapeSvg:s,bbox:o}=await ta(t,e,tr(e)),c=null!=(a=null==e?void 0:e.padding)?a:0,h=null!=(n=null==e?void 0:e.padding)?n:0,d=((null==e?void 0:e.width)?null==e?void 0:e.width:o.width)+2*c,u=((null==e?void 0:e.height)?null==e?void 0:e.height:o.height)+2*h,g=e.radius||5,f=e.taper||5,{cssStyles:p}=e,y=te.svg(s),m=(0,l.userNodeOverrides)(e,{});e.stroke&&(m.stroke=e.stroke),"handDrawn"!==e.look&&(m.roughness=0,m.fillStyle="solid");let x=[{x:-d/2+f,y:-u/2},{x:d/2-f,y:-u/2},...ep(d/2-f,-u/2,d/2,-u/2+f,g,g,!0),{x:d/2,y:-u/2+f},{x:d/2,y:u/2-f},...ep(d/2,u/2-f,d/2-f,u/2,g,g,!0),{x:d/2-f,y:u/2},{x:-d/2+f,y:u/2},...ep(-d/2+f,u/2,-d/2,u/2-f,g,g,!0),{x:-d/2,y:u/2-f},{x:-d/2,y:-u/2+f},...ep(-d/2,-u/2+f,-d/2+f,-u/2,g,g,!0)],w=ti(x),b=y.path(w,m),v=s.insert(()=>b,":first-child");return v.attr("class","basic label-container outer-path"),p&&"handDrawn"!==e.look&&v.selectChildren("path").attr("style",p),i&&"handDrawn"!==e.look&&v.selectChildren("path").attr("style",i),tn(e,v),e.intersect=function(t){return tC.polygon(e,x,t)},s}async function em(t,e){var a,n,i,s,o,c,h,d,u;let{labelStyles:g,nodeStyles:f}=(0,l.styles2String)(e);e.labelStyle=g;let{shapeSvg:p,bbox:y,label:m}=await ta(t,e,tr(e)),x=null!=(a=null==e?void 0:e.padding)?a:0,w=Math.max(y.width+(null!=(n=e.padding)?n:0)*2,null!=(i=null==e?void 0:e.width)?i:0),b=Math.max(y.height+(null!=(s=e.padding)?s:0)*2,null!=(o=null==e?void 0:e.height)?o:0),v=-y.width/2-x,k=-y.height/2-x,{cssStyles:M}=e,S=te.svg(p),_=(0,l.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(_.roughness=0,_.fillStyle="solid");let D=S.polygon([{x:v,y:k},{x:v+w+8,y:k},{x:v+w+8,y:k+b},{x:v-8,y:k+b},{x:v-8,y:k},{x:v,y:k},{x:v,y:k+b}].map(t=>[t.x,t.y]),_),C=p.insert(()=>D,":first-child");return C.attr("class","basic label-container").attr("style",(0,r.handleUndefinedAttr)(M)),f&&"handDrawn"!==e.look&&C.selectAll("path").attr("style",f),M&&"handDrawn"!==e.look&&C.selectAll("path").attr("style",f),m.attr("transform","translate(".concat(-w/2+4+(null!=(c=e.padding)?c:0)-(y.x-(null!=(h=y.left)?h:0)),",").concat(-b/2+(null!=(d=e.padding)?d:0)-(y.y-(null!=(u=y.top)?u:0)),")")),tn(e,C),e.intersect=function(t){return tC.rect(e,t)},p}async function ex(t,e){var a,n,r,i,s,o,c,h;let{labelStyles:d,nodeStyles:u}=(0,l.styles2String)(e);e.labelStyle=d;let{shapeSvg:g,bbox:f,label:p}=await ta(t,e,tr(e)),y=Math.max(f.width+(null!=(a=e.padding)?a:0)*2,null!=(n=null==e?void 0:e.width)?n:0),m=Math.max(f.height+(null!=(r=e.padding)?r:0)*2,null!=(i=null==e?void 0:e.height)?i:0),x=-y/2,w=-m/2,{cssStyles:b}=e,v=te.svg(g),k=(0,l.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(k.roughness=0,k.fillStyle="solid");let M=[{x,y:w},{x,y:w+m},{x:x+y,y:w+m},{x:x+y,y:w-m/2}],S=ti(M),_=v.path(S,k),D=g.insert(()=>_,":first-child");return D.attr("class","basic label-container"),b&&"handDrawn"!==e.look&&D.selectChildren("path").attr("style",b),u&&"handDrawn"!==e.look&&D.selectChildren("path").attr("style",u),D.attr("transform","translate(0, ".concat(m/4,")")),p.attr("transform","translate(".concat(-y/2+(null!=(s=e.padding)?s:0)-(f.x-(null!=(o=f.left)?o:0)),", ").concat(-m/4+(null!=(c=e.padding)?c:0)-(f.y-(null!=(h=f.top)?h:0)),")")),tn(e,D),e.intersect=function(t){return tC.polygon(e,M,t)},g}async function ew(t,e){var a;let l={rx:0,ry:0,classes:"",labelPaddingX:null!=(a=e.labelPaddingX)?a:2*((null==e?void 0:e.padding)||0),labelPaddingY:+((null==e?void 0:e.padding)||0)};return t6(t,e,l)}async function eb(t,e){let{labelStyles:a,nodeStyles:n}=(0,l.styles2String)(e);e.labelStyle=a;let{shapeSvg:r,bbox:i}=await ta(t,e,tr(e)),s=i.height+e.padding,o=i.width+s/4+e.padding,c=s/2,{cssStyles:h}=e,d=te.svg(r),u=(0,l.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(u.roughness=0,u.fillStyle="solid");let g=[{x:-o/2+c,y:-s/2},{x:o/2-c,y:-s/2},...to(-o/2+c,0,c,50,90,270),{x:o/2-c,y:s/2},...to(o/2-c,0,c,50,270,450)],f=ti(g),p=d.path(f,u),y=r.insert(()=>p,":first-child");return y.attr("class","basic label-container outer-path"),h&&"handDrawn"!==e.look&&y.selectChildren("path").attr("style",h),n&&"handDrawn"!==e.look&&y.selectChildren("path").attr("style",n),tn(e,y),e.intersect=function(t){return tC.polygon(e,g,t)},r}async function ev(t,e){return t6(t,e,{rx:5,ry:5,classes:"flowchart-node"})}function ek(t,e,a){let{config:{themeVariables:n}}=a,{labelStyles:r,nodeStyles:i}=(0,l.styles2String)(e);e.labelStyle=r;let{cssStyles:s}=e,{lineColor:o,stateBorder:c,nodeBorder:h}=n,d=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),u=te.svg(d),g=(0,l.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(g.roughness=0,g.fillStyle="solid");let f=u.circle(0,0,14,{...g,stroke:o,strokeWidth:2}),p=null!=c?c:h,y=u.circle(0,0,5,{...g,fill:p,stroke:p,strokeWidth:2,fillStyle:"solid"}),m=d.insert(()=>f,":first-child");return m.insert(()=>y),s&&m.selectAll("path").attr("style",s),i&&m.selectAll("path").attr("style",i),tn(e,m),e.intersect=function(t){return tC.circle(e,7,t)},d}function eM(t,e,a){let n,{config:{themeVariables:r}}=a,{lineColor:i}=r,s=t.insert("g").attr("class","node default").attr("id",e.domId||e.id);if("handDrawn"===e.look){let t=te.svg(s).circle(0,0,14,(0,l.solidStateFill)(i));(n=s.insert(()=>t)).attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else(n=s.insert("circle",":first-child")).attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return tn(e,n),e.intersect=function(t){return tC.circle(e,7,t)},s}async function eS(t,e){let{labelStyles:a,nodeStyles:n}=(0,l.styles2String)(e);e.labelStyle=a;let{shapeSvg:i,bbox:s}=await ta(t,e,tr(e)),o=((null==e?void 0:e.padding)||0)/2,c=s.width+e.padding,h=s.height+e.padding,d=-s.width/2-o,u=-s.height/2-o,g=[{x:0,y:0},{x:c,y:0},{x:c,y:-h},{x:0,y:-h},{x:0,y:0},{x:-8,y:0},{x:c+8,y:0},{x:c+8,y:-h},{x:-8,y:-h},{x:-8,y:0}];if("handDrawn"===e.look){let t=te.svg(i),a=(0,l.userNodeOverrides)(e,{}),n=t.rectangle(d-8,u,c+16,h,a),s=t.line(d,u,d,u+h,a),o=t.line(d+c,u,d+c,u+h,a);i.insert(()=>s,":first-child"),i.insert(()=>o,":first-child");let g=i.insert(()=>n,":first-child"),{cssStyles:f}=e;g.attr("class","basic label-container").attr("style",(0,r.handleUndefinedAttr)(f)),tn(e,g)}else{let t=tO(i,c,h,g);n&&t.attr("style",n),tn(e,t)}return e.intersect=function(t){return tC.polygon(e,g,t)},i}async function e_(t,e){var a,n,r,i;let{labelStyles:s,nodeStyles:o}=(0,l.styles2String)(e);e.labelStyle=s;let{shapeSvg:c,bbox:h}=await ta(t,e,tr(e)),d=Math.max(h.width+(null!=(a=e.padding)?a:0)*2,null!=(n=null==e?void 0:e.width)?n:0),u=Math.max(h.height+(null!=(r=e.padding)?r:0)*2,null!=(i=null==e?void 0:e.height)?i:0),g=-d/2,f=-u/2,p=.2*u,{cssStyles:y}=e,m=te.svg(c),x=(0,l.userNodeOverrides)(e,{}),w=[{x:g-p/2,y:f},{x:g+d+p/2,y:f},{x:g+d+p/2,y:f+u},{x:g-p/2,y:f+u}];"handDrawn"!==e.look&&(x.roughness=0,x.fillStyle="solid");let b=ti(w),v=m.path(b,x),k=ti([{x:g+d-p/2,y:f+u},{x:g+d+p/2,y:f+u},{x:g+d+p/2,y:f+u-.2*u}]),M=m.path(k,{...x,fillStyle:"solid"}),S=c.insert(()=>M,":first-child");return S.insert(()=>v,":first-child"),S.attr("class","basic label-container"),y&&"handDrawn"!==e.look&&S.selectAll("path").attr("style",y),o&&"handDrawn"!==e.look&&S.selectAll("path").attr("style",o),tn(e,S),e.intersect=function(t){return tC.polygon(e,w,t)},c}async function eD(t,e){var a,n,r,i,s,o,c,h;let{labelStyles:d,nodeStyles:u}=(0,l.styles2String)(e);e.labelStyle=d;let{shapeSvg:g,bbox:f,label:p}=await ta(t,e,tr(e)),y=Math.max(f.width+(null!=(a=e.padding)?a:0)*2,null!=(n=null==e?void 0:e.width)?n:0),m=Math.max(f.height+(null!=(r=e.padding)?r:0)*2,null!=(i=null==e?void 0:e.height)?i:0),x=m/4,w=.2*y,b=.2*m,v=m+x,{cssStyles:k}=e,M=te.svg(g),S=(0,l.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(S.roughness=0,S.fillStyle="solid");let _=[{x:-y/2-y/2*.1,y:v/2},...ts(-y/2-y/2*.1,v/2,y/2+y/2*.1,v/2,x,.8),{x:y/2+y/2*.1,y:-v/2},{x:-y/2-y/2*.1,y:-v/2}],D=-y/2+y/2*.1,C=-v/2-.4*b,N=[{x:D+y-w,y:(C+m)*1.4},{x:D+y,y:C+m-b},{x:D+y,y:(C+m)*.9},...ts(D+y,(C+m)*1.3,D+y-w,(C+m)*1.5,-(.03*m),.5)],A=ti(_),P=M.path(A,S),O=ti(N),B=M.path(O,{...S,fillStyle:"solid"}),L=g.insert(()=>B,":first-child");return L.insert(()=>P,":first-child"),L.attr("class","basic label-container"),k&&"handDrawn"!==e.look&&L.selectAll("path").attr("style",k),u&&"handDrawn"!==e.look&&L.selectAll("path").attr("style",u),L.attr("transform","translate(0,".concat(-x/2,")")),p.attr("transform","translate(".concat(-y/2+(null!=(s=e.padding)?s:0)-(f.x-(null!=(o=f.left)?o:0)),",").concat(-m/2+(null!=(c=e.padding)?c:0)-x/2-(f.y-(null!=(h=f.top)?h:0)),")")),tn(e,L),e.intersect=function(t){return tC.polygon(e,_,t)},g}async function eC(t,e){let{labelStyles:a,nodeStyles:n}=(0,l.styles2String)(e);e.labelStyle=a;let{shapeSvg:r,bbox:i}=await ta(t,e,tr(e)),s=Math.max(i.width+e.padding,(null==e?void 0:e.width)||0),o=Math.max(i.height+e.padding,(null==e?void 0:e.height)||0),c=r.insert("rect",":first-child");return c.attr("class","text").attr("style",n).attr("rx",0).attr("ry",0).attr("x",-s/2).attr("y",-o/2).attr("width",s).attr("height",o),tn(e,c),e.intersect=function(t){return tC.rect(e,t)},r}(0,s.__name)(eu,"question"),(0,s.__name)(eg,"rect_left_inv_arrow"),(0,s.__name)(ef,"rectWithTitle"),(0,s.__name)(ep,"generateArcPoints"),(0,s.__name)(ey,"roundedRect"),(0,s.__name)(em,"shadedProcess"),(0,s.__name)(ex,"slopedRect"),(0,s.__name)(ew,"squareRect"),(0,s.__name)(eb,"stadium"),(0,s.__name)(ev,"state"),(0,s.__name)(ek,"stateEnd"),(0,s.__name)(eM,"stateStart"),(0,s.__name)(eS,"subroutine"),(0,s.__name)(e_,"taggedRect"),(0,s.__name)(eD,"taggedWaveEdgedRectangle"),(0,s.__name)(eC,"text");var eN=(0,s.__name)((t,e,a,l,n,r)=>"M".concat(t,",").concat(e,"\n    a").concat(n,",").concat(r," 0,0,1 ",0,",").concat(-l,"\n    l").concat(a,",",0,"\n    a").concat(n,",").concat(r," 0,0,1 ",0,",").concat(l,"\n    M").concat(a,",").concat(-l,"\n    a").concat(n,",").concat(r," 0,0,0 ",0,",").concat(l,"\n    l").concat(-a,",",0),"createCylinderPathD"),eA=(0,s.__name)((t,e,a,l,n,r)=>["M".concat(t,",").concat(e),"M".concat(t+a,",").concat(e),"a".concat(n,",").concat(r," 0,0,0 ",0,",").concat(-l),"l".concat(-a,",0"),"a".concat(n,",").concat(r," 0,0,0 ",0,",").concat(l),"l".concat(a,",0")].join(" "),"createOuterCylinderPathD"),eP=(0,s.__name)((t,e,a,l,n,r)=>["M".concat(t+a/2,",").concat(-l/2),"a".concat(n,",").concat(r," 0,0,0 0,").concat(l)].join(" "),"createInnerCylinderPathD");async function eO(t,e){var a,n;let i,{labelStyles:s,nodeStyles:o}=(0,l.styles2String)(e);e.labelStyle=s;let{shapeSvg:c,bbox:h,label:d,halfPadding:u}=await ta(t,e,tr(e)),g="neo"===e.look?2*u:u,f=h.height+g,p=f/2,y=p/(2.5+f/50),m=h.width+y+g,{cssStyles:x}=e;if("handDrawn"===e.look){let t=te.svg(c),a=eA(0,0,m,f,y,p),n=eP(0,0,m,f,y,p),r=t.path(a,(0,l.userNodeOverrides)(e,{})),s=t.path(n,(0,l.userNodeOverrides)(e,{fill:"none"}));i=c.insert(()=>s,":first-child"),(i=c.insert(()=>r,":first-child")).attr("class","basic label-container"),x&&i.attr("style",x)}else{let t=eN(0,0,m,f,y,p);(i=c.insert("path",":first-child").attr("d",t).attr("class","basic label-container").attr("style",(0,r.handleUndefinedAttr)(x)).attr("style",o)).attr("class","basic label-container"),x&&i.selectAll("path").attr("style",x),o&&i.selectAll("path").attr("style",o)}return i.attr("label-offset-x",y),i.attr("transform","translate(".concat(-m/2,", ").concat(f/2," )")),d.attr("transform","translate(".concat(-(h.width/2)-y-(h.x-(null!=(a=h.left)?a:0)),", ").concat(-(h.height/2)-(h.y-(null!=(n=h.top)?n:0)),")")),tn(e,i),e.intersect=function(t){var a,l,n,r,i,s;let o=tC.rect(e,t),c=o.y-(null!=(a=e.y)?a:0);if(0!=p&&(Math.abs(c)<(null!=(l=e.height)?l:0)/2||Math.abs(c)==(null!=(n=e.height)?n:0)/2&&Math.abs(o.x-(null!=(r=e.x)?r:0))>(null!=(i=e.width)?i:0)/2-y)){let a=y*y*(1-c*c/(p*p));0!=a&&(a=Math.sqrt(Math.abs(a))),a=y-a,t.x-(null!=(s=e.x)?s:0)>0&&(a=-a),o.x+=a}return o},c}async function eB(t,e){let a,{labelStyles:n,nodeStyles:r}=(0,l.styles2String)(e);e.labelStyle=n;let{shapeSvg:i,bbox:s}=await ta(t,e,tr(e)),o=s.width+e.padding,c=s.height+e.padding,h=[{x:-3*c/6,y:0},{x:o+3*c/6,y:0},{x:o,y:-c},{x:0,y:-c}],{cssStyles:d}=e;if("handDrawn"===e.look){let t=te.svg(i),n=(0,l.userNodeOverrides)(e,{}),r=ti(h),s=t.path(r,n);a=i.insert(()=>s,":first-child").attr("transform","translate(".concat(-o/2,", ").concat(c/2,")")),d&&a.attr("style",d)}else a=tO(i,o,c,h);return r&&a.attr("style",r),e.width=o,e.height=c,tn(e,a),e.intersect=function(t){return tC.polygon(e,h,t)},i}async function eL(t,e){var a,n,r,i;let{labelStyles:s,nodeStyles:o}=(0,l.styles2String)(e);e.labelStyle=s;let{shapeSvg:c,bbox:h}=await ta(t,e,tr(e)),d=Math.max(60,h.width+(null!=(a=e.padding)?a:0)*2,null!=(n=null==e?void 0:e.width)?n:0),u=Math.max(20,h.height+(null!=(r=e.padding)?r:0)*2,null!=(i=null==e?void 0:e.height)?i:0),{cssStyles:g}=e,f=te.svg(c),p=(0,l.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(p.roughness=0,p.fillStyle="solid");let y=[{x:-d/2*.8,y:-u/2},{x:d/2*.8,y:-u/2},{x:d/2,y:-u/2*.6},{x:d/2,y:u/2},{x:-d/2,y:u/2},{x:-d/2,y:-u/2*.6}],m=ti(y),x=f.path(m,p),w=c.insert(()=>x,":first-child");return w.attr("class","basic label-container"),g&&"handDrawn"!==e.look&&w.selectChildren("path").attr("style",g),o&&"handDrawn"!==e.look&&w.selectChildren("path").attr("style",o),tn(e,w),e.intersect=function(t){return tC.polygon(e,y,t)},c}async function eT(t,e){var a,n,r,o,c;let{labelStyles:h,nodeStyles:d}=(0,l.styles2String)(e);e.labelStyle=h;let{shapeSvg:u,bbox:g,label:f}=await ta(t,e,tr(e)),p=(0,i.evaluate)(null==(a=(0,i.getConfig2)().flowchart)?void 0:a.htmlLabels),y=g.width+(null!=(n=e.padding)?n:0),m=y+g.height,x=y+g.height,w=[{x:0,y:0},{x:x,y:0},{x:x/2,y:-m}],{cssStyles:b}=e,v=te.svg(u),k=(0,l.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(k.roughness=0,k.fillStyle="solid");let M=ti(w),S=v.path(M,k),_=u.insert(()=>S,":first-child").attr("transform","translate(".concat(-m/2,", ").concat(m/2,")"));return b&&"handDrawn"!==e.look&&_.selectChildren("path").attr("style",b),d&&"handDrawn"!==e.look&&_.selectChildren("path").attr("style",d),e.width=y,e.height=m,tn(e,_),f.attr("transform","translate(".concat(-g.width/2-(g.x-(null!=(r=g.left)?r:0)),", ").concat(m/2-(g.height+(null!=(o=e.padding)?o:0)/(p?2:1)-(g.y-(null!=(c=g.top)?c:0))),")")),e.intersect=function(t){return s.log.info("Triangle intersect",e,w,t),tC.polygon(e,w,t)},u}async function eR(t,e){var a,n,r,i,s,o,c,h;let{labelStyles:d,nodeStyles:u}=(0,l.styles2String)(e);e.labelStyle=d;let{shapeSvg:g,bbox:f,label:p}=await ta(t,e,tr(e)),y=Math.max(f.width+(null!=(a=e.padding)?a:0)*2,null!=(n=null==e?void 0:e.width)?n:0),m=Math.max(f.height+(null!=(r=e.padding)?r:0)*2,null!=(i=null==e?void 0:e.height)?i:0),x=m/8,w=m+x,{cssStyles:b}=e,v=70-y,k=v>0?v/2:0,M=te.svg(g),S=(0,l.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(S.roughness=0,S.fillStyle="solid");let _=[{x:-y/2-k,y:w/2},...ts(-y/2-k,w/2,y/2+k,w/2,x,.8),{x:y/2+k,y:-w/2},{x:-y/2-k,y:-w/2}],D=ti(_),C=M.path(D,S),N=g.insert(()=>C,":first-child");return N.attr("class","basic label-container"),b&&"handDrawn"!==e.look&&N.selectAll("path").attr("style",b),u&&"handDrawn"!==e.look&&N.selectAll("path").attr("style",u),N.attr("transform","translate(0,".concat(-x/2,")")),p.attr("transform","translate(".concat(-y/2+(null!=(s=e.padding)?s:0)-(f.x-(null!=(o=f.left)?o:0)),",").concat(-m/2+(null!=(c=e.padding)?c:0)-x-(f.y-(null!=(h=f.top)?h:0)),")")),tn(e,N),e.intersect=function(t){return tC.polygon(e,_,t)},g}async function eI(t,e){var a,n,r,i;let{labelStyles:s,nodeStyles:o}=(0,l.styles2String)(e);e.labelStyle=s;let{shapeSvg:c,bbox:h}=await ta(t,e,tr(e)),d=Math.max(h.width+(null!=(a=e.padding)?a:0)*2,null!=(n=null==e?void 0:e.width)?n:0),u=Math.max(h.height+(null!=(r=e.padding)?r:0)*2,null!=(i=null==e?void 0:e.height)?i:0),g=d/u,f=d,p=u;f>p*g?p=f/g:f=p*g,f=Math.max(f,100);let y=Math.min(.2*(p=Math.max(p,50)),p/4),m=p+2*y,{cssStyles:x}=e,w=te.svg(c),b=(0,l.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(b.roughness=0,b.fillStyle="solid");let v=[{x:-f/2,y:m/2},...ts(-f/2,m/2,f/2,m/2,y,1),{x:f/2,y:-m/2},...ts(f/2,-m/2,-f/2,-m/2,y,-1)],k=ti(v),M=w.path(k,b),S=c.insert(()=>M,":first-child");return S.attr("class","basic label-container"),x&&"handDrawn"!==e.look&&S.selectAll("path").attr("style",x),o&&"handDrawn"!==e.look&&S.selectAll("path").attr("style",o),tn(e,S),e.intersect=function(t){return tC.polygon(e,v,t)},c}async function eW(t,e){var a,n,r,i,s,o;let{labelStyles:c,nodeStyles:h}=(0,l.styles2String)(e);e.labelStyle=c;let{shapeSvg:d,bbox:u,label:g}=await ta(t,e,tr(e)),f=Math.max(u.width+(null!=(a=e.padding)?a:0)*2,null!=(n=null==e?void 0:e.width)?n:0),p=Math.max(u.height+(null!=(r=e.padding)?r:0)*2,null!=(i=null==e?void 0:e.height)?i:0),y=-f/2,m=-p/2,{cssStyles:x}=e,w=te.svg(d),b=(0,l.userNodeOverrides)(e,{}),v=[{x:y-5,y:m-5},{x:y-5,y:m+p},{x:y+f,y:m+p},{x:y+f,y:m-5}],k="M".concat(y-5,",").concat(m-5," L").concat(y+f,",").concat(m-5," L").concat(y+f,",").concat(m+p," L").concat(y-5,",").concat(m+p," L").concat(y-5,",").concat(m-5,"\n                M").concat(y-5,",").concat(m," L").concat(y+f,",").concat(m,"\n                M").concat(y,",").concat(m-5," L").concat(y,",").concat(m+p);"handDrawn"!==e.look&&(b.roughness=0,b.fillStyle="solid");let M=w.path(k,b),S=d.insert(()=>M,":first-child");return S.attr("transform","translate(".concat(2.5,", ").concat(2.5,")")),S.attr("class","basic label-container"),x&&"handDrawn"!==e.look&&S.selectAll("path").attr("style",x),h&&"handDrawn"!==e.look&&S.selectAll("path").attr("style",h),g.attr("transform","translate(".concat(-(u.width/2)+2.5-(u.x-(null!=(s=u.left)?s:0)),", ").concat(-(u.height/2)+2.5-(u.y-(null!=(o=u.top)?o:0)),")")),tn(e,S),e.intersect=function(t){return tC.polygon(e,v,t)},d}async function eE(t,e){var a,n,s,c,h,d,u;if(e.alias&&(e.label=e.alias),"handDrawn"===e.look){let{themeVariables:a}=(0,i.getConfig)(),{background:l}=a,n={...e,id:e.id+"-background",look:"default",cssStyles:["stroke: none","fill: ".concat(l)]};await eE(t,n)}let g=(0,i.getConfig)();e.useHtmlLabels=g.htmlLabels;let f=null!=(s=null==(a=g.er)?void 0:a.diagramPadding)?s:10,p=null!=(c=null==(n=g.er)?void 0:n.entityPadding)?c:6,{cssStyles:y}=e,{labelStyles:m,nodeStyles:x}=(0,l.styles2String)(e);if(0===e.attributes.length&&e.label){let a={rx:0,ry:0,labelPaddingX:f,labelPaddingY:1.5*f,classes:""};(0,r.calculateTextWidth)(e.label,g)+2*a.labelPaddingX<g.er.minEntityWidth&&(e.width=g.er.minEntityWidth);let l=await t6(t,e,a);if(!(0,i.evaluate)(g.htmlLabels)){let t=l.select("text"),e=null==(h=t.node())?void 0:h.getBBox();t.attr("transform","translate(".concat(-e.width/2,", 0)"))}return l}g.htmlLabels||(f*=1.25,p*=1.25);let w=tr(e);w||(w="node default");let b=t.insert("g").attr("class",w).attr("id",e.domId||e.id),v=await ez(b,null!=(d=e.label)?d:"",g,0,0,["name"],m);v.height+=p;let k=0,M=[],S=[],_=0,D=0,C=0,N=0,A=!0,P=!0;for(let t of e.attributes){let e=await ez(b,t.type,g,0,k,["attribute-type"],m);_=Math.max(_,e.width+f);let a=await ez(b,t.name,g,0,k,["attribute-name"],m);D=Math.max(D,a.width+f);let l=await ez(b,t.keys.join(),g,0,k,["attribute-keys"],m);C=Math.max(C,l.width+f);let n=await ez(b,t.comment,g,0,k,["attribute-comment"],m);N=Math.max(N,n.width+f);let r=Math.max(e.height,a.height,l.height,n.height)+p;S.push({yOffset:k,rowHeight:r}),k+=r}let O=4;C<=f&&(A=!1,C=0,O--),N<=f&&(P=!1,N=0,O--);let B=b.node().getBBox();if(v.width+2*f-(_+D+C+N)>0){let t=v.width+2*f-(_+D+C+N);_+=t/O,D+=t/O,C>0&&(C+=t/O),N>0&&(N+=t/O)}let L=_+D+C+N,T=te.svg(b),R=(0,l.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(R.roughness=0,R.fillStyle="solid");let I=0;S.length>0&&(I=S.reduce((t,e)=>{var a;return t+(null!=(a=null==e?void 0:e.rowHeight)?a:0)},0));let W=Math.max(B.width+2*f,(null==e?void 0:e.width)||0,L),E=Math.max((null!=I?I:0)+v.height,(null==e?void 0:e.height)||0),z=-W/2,j=-E/2;b.selectAll("g:not(:first-child)").each((t,e,a)=>{let l=(0,o.select)(a[e]),n=l.attr("transform"),r=0,i=0;if(n){let t=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(n);t&&(r=parseFloat(t[1]),i=parseFloat(t[2]),l.attr("class").includes("attribute-name")?r+=_:l.attr("class").includes("attribute-keys")?r+=_+D:l.attr("class").includes("attribute-comment")&&(r+=_+D+C))}l.attr("transform","translate(".concat(z+f/2+r,", ").concat(i+j+v.height+p/2,")"))}),b.select(".name").attr("transform","translate("+-v.width/2+", "+(j+p/2)+")");let q=T.rectangle(z,j,W,E,R),H=b.insert(()=>q,":first-child").attr("style",y.join("")),{themeVariables:F}=(0,i.getConfig)(),{rowEven:G,rowOdd:V,nodeBorder:U}=F;for(let[t,e]of(M.push(0),S.entries())){let a=(t+1)%2==0&&0!==e.yOffset,l=T.rectangle(z,v.height+j+(null==e?void 0:e.yOffset),W,null==e?void 0:e.rowHeight,{...R,fill:a?G:V,stroke:U});b.insert(()=>l,"g.label").attr("style",y.join("")).attr("class","row-rect-".concat(a?"even":"odd"))}let Z=T.line(z,v.height+j,W+z,v.height+j,R);for(let t of(b.insert(()=>Z).attr("class","divider"),Z=T.line(_+z,v.height+j,_+z,E+j,R),b.insert(()=>Z).attr("class","divider"),A&&(Z=T.line(_+D+z,v.height+j,_+D+z,E+j,R),b.insert(()=>Z).attr("class","divider")),P&&(Z=T.line(_+D+C+z,v.height+j,_+D+C+z,E+j,R),b.insert(()=>Z).attr("class","divider")),M))Z=T.line(z,v.height+j+t,W+z,v.height+j+t,R),b.insert(()=>Z).attr("class","divider");if(tn(e,H),x&&"handDrawn"!==e.look){let t=x.split(";"),e=null==t||null==(u=t.filter(t=>t.includes("stroke")))?void 0:u.map(t=>"".concat(t)).join("; ");b.selectAll("path").attr("style",null!=e?e:""),b.selectAll(".row-rect-even path").attr("style",x)}return e.intersect=function(t){return tC.rect(e,t)},b}async function ez(t,e,a){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",d=t.insert("g").attr("class","label ".concat(c.join(" "))).attr("transform","translate(".concat(l,", ").concat(s,")")).attr("style",h);e!==(0,i.parseGenericTypes)(e)&&(e=(e=(0,i.parseGenericTypes)(e)).replaceAll("<","&lt;").replaceAll(">","&gt;"));let u=d.node().appendChild(await (0,n.createText)(d,e,{width:(0,r.calculateTextWidth)(e,a)+100,style:h,useHtmlLabels:a.htmlLabels},a));if(e.includes("&lt;")||e.includes("&gt;")){let t=u.children[0];for(t.textContent=t.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">");t.childNodes[0];)(t=t.childNodes[0]).textContent=t.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">")}let g=u.getBBox();if((0,i.evaluate)(a.htmlLabels)){let t=u.children[0];t.style.textAlign="start";let e=(0,o.select)(u);g=t.getBoundingClientRect(),e.attr("width",g.width),e.attr("height",g.height)}return g}async function ej(t,a,l,n){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null!=(e=l.class.padding)?e:12,i=3*!n,s=t.insert("g").attr("class",tr(a)).attr("id",a.domId||a.id),o=null,c=null,h=null,d=null,u=0,g=0,f=0;if(o=s.insert("g").attr("class","annotation-group text"),a.annotations.length>0){let t=a.annotations[0];await eq(o,{text:"".concat(t,"")},0),u=o.node().getBBox().height}c=s.insert("g").attr("class","label-group text"),await eq(c,a,0,["font-weight: bolder"]);let p=c.node().getBBox();g=p.height,h=s.insert("g").attr("class","members-group text");let y=0;for(let t of a.members){let e=await eq(h,t,y,[t.parseClassifier()]);y+=e+i}(f=h.node().getBBox().height)<=0&&(f=r/2),d=s.insert("g").attr("class","methods-group text");let m=0;for(let t of a.methods){let e=await eq(d,t,m,[t.parseClassifier()]);m+=e+i}let x=s.node().getBBox();if(null!==o){let t=o.node().getBBox();o.attr("transform","translate(".concat(-t.width/2,")"))}return c.attr("transform","translate(".concat(-p.width/2,", ").concat(u,")")),x=s.node().getBBox(),h.attr("transform","translate(".concat(0,", ").concat(u+g+2*r,")")),x=s.node().getBBox(),d.attr("transform","translate(".concat(0,", ").concat(u+g+(f?f+4*r:2*r),")")),x=s.node().getBBox(),{shapeSvg:s,bbox:x}}async function eq(t,e,a){var l;let c,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],d=t.insert("g").attr("class","label").attr("style",h.join("; ")),u=(0,i.getConfig)(),g="useHtmlLabels"in e?e.useHtmlLabels:null==(l=(0,i.evaluate)(u.htmlLabels))||l,f="";f="text"in e?e.text:e.label,!g&&f.startsWith("\\")&&(f=f.substring(1)),(0,i.hasKatex)(f)&&(g=!0);let p=await (0,n.createText)(d,(0,i.sanitizeText2)((0,r.decodeEntities)(f)),{width:(0,r.calculateTextWidth)(f,u)+50,classes:"markdown-node-label",useHtmlLabels:g},u),y=1;if(g){let t=p.children[0],e=(0,o.select)(p);y=t.innerHTML.split("<br>").length,t.innerHTML.includes("</math>")&&(y+=t.innerHTML.split("<mrow>").length-1);let a=t.getElementsByTagName("img");if(a){let t=""===f.replace(/<img[^>]*>/g,"").trim();await Promise.all([...a].map(e=>new Promise(a=>{function l(){if(e.style.display="flex",e.style.flexDirection="column",t){var l,n;let t=5*parseInt(null!=(n=null==(l=u.fontSize)?void 0:l.toString())?n:window.getComputedStyle(document.body).fontSize,10)+"px";e.style.minWidth=t,e.style.maxWidth=t}else e.style.width="100%";a(e)}(0,s.__name)(l,"setupImage"),setTimeout(()=>{e.complete&&l()}),e.addEventListener("error",l),e.addEventListener("load",l)})))}c=t.getBoundingClientRect(),e.attr("width",c.width),e.attr("height",c.height)}else{h.includes("font-weight: bolder")&&(0,o.select)(p).selectAll("tspan").attr("font-weight",""),y=p.children.length;let t=p.children[0];(""===p.textContent||p.textContent.includes("&gt"))&&(t.textContent=f[0]+f.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim()," "===f[1]&&(t.textContent=t.textContent[0]+" "+t.textContent.substring(1))),"undefined"===t.textContent&&(t.textContent=""),c=p.getBBox()}return d.attr("transform","translate(0,"+(-c.height/(2*y)+a)+")"),c.height}async function eH(t,e){var a,n,r,s,c,h,d,u;let g=(0,i.getConfig2)(),f=null!=(r=g.class.padding)?r:12,p=null==(c=null!=(s=e.useHtmlLabels)?s:(0,i.evaluate)(g.htmlLabels))||c;e.annotations=null!=(h=e.annotations)?h:[],e.members=null!=(d=e.members)?d:[],e.methods=null!=(u=e.methods)?u:[];let{shapeSvg:y,bbox:m}=await ej(t,e,g,p,f),{labelStyles:x,nodeStyles:w}=(0,l.styles2String)(e);e.labelStyle=x,e.cssStyles=e.styles||"";let b=(null==(a=e.styles)?void 0:a.join(";"))||w||"";e.cssStyles||(e.cssStyles=b.replaceAll("!important","").split(";"));let v=0===e.members.length&&0===e.methods.length&&!(null==(n=g.class)?void 0:n.hideEmptyMembersBox),k=te.svg(y),M=(0,l.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(M.roughness=0,M.fillStyle="solid");let S=m.width,_=m.height;0===e.members.length&&0===e.methods.length?_+=f:e.members.length>0&&0===e.methods.length&&(_+=2*f);let D=-S/2,C=-_/2,N=k.rectangle(D-f,C-f-(v?f:0===e.members.length&&0===e.methods.length?-f/2:0),S+2*f,_+2*f+(v?2*f:0===e.members.length&&0===e.methods.length?-f:0),M),A=y.insert(()=>N,":first-child");A.attr("class","basic label-container");let P=A.node().getBBox();y.selectAll(".text").each((t,a,l)=>{let n=(0,o.select)(l[a]),r=n.attr("transform"),i=0;if(r){let t=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(r);t&&(i=parseFloat(t[2]))}let s=i+C+f-(v?f:0===e.members.length&&0===e.methods.length?-f/2:0);p||(s-=4);let c=D;if(n.attr("class").includes("label-group")||n.attr("class").includes("annotation-group")){var h;c=-(null==(h=n.node())?void 0:h.getBBox().width)/2||0,y.selectAll("text").each(function(t,e,a){"middle"===window.getComputedStyle(a[e]).textAnchor&&(c=0)})}n.attr("transform","translate(".concat(c,", ").concat(s,")"))});let O=y.select(".annotation-group").node().getBBox().height-(v?f/2:0)||0,B=y.select(".label-group").node().getBBox().height-(v?f/2:0)||0,L=y.select(".members-group").node().getBBox().height-(v?f/2:0)||0;if(e.members.length>0||e.methods.length>0||v){let t=k.line(P.x,O+B+C+f,P.x+P.width,O+B+C+f,M);y.insert(()=>t).attr("class","divider").attr("style",b)}if(v||e.members.length>0||e.methods.length>0){let t=k.line(P.x,O+B+L+C+2*f+f,P.x+P.width,O+B+L+C+f+2*f,M);y.insert(()=>t).attr("class","divider").attr("style",b)}if("handDrawn"!==e.look&&y.selectAll("path").attr("style",b),A.select(":nth-child(2)").attr("style",b),y.selectAll(".divider").select("path").attr("style",b),e.labelStyle?y.selectAll("span").attr("style",e.labelStyle):y.selectAll("span").attr("style",b),!p){let t=RegExp(/color\s*:\s*([^;]*)/),e=t.exec(b);if(e){let t=e[0].replace("color","fill");y.selectAll("tspan").attr("style",t)}else if(x){let e=t.exec(x);if(e){let t=e[0].replace("color","fill");y.selectAll("tspan").attr("style",t)}}}return tn(e,A),e.intersect=function(t){return tC.rect(e,t)},y}async function eF(t,e){var a,n,r,i,s;let c,{labelStyles:h,nodeStyles:d}=(0,l.styles2String)(e);e.labelStyle=h;let u="verifyMethod"in e,g=tr(e),f=t.insert("g").attr("class",g).attr("id",null!=(r=e.domId)?r:e.id),p=c=u?await eG(f,"&lt;&lt;".concat(e.type,"&gt;&gt;"),0,e.labelStyle):await eG(f,"&lt;&lt;Element&gt;&gt;",0,e.labelStyle),y=await eG(f,e.name,p,e.labelStyle+"; font-weight: bold;");if(p+=y+20,u){let t=await eG(f,"".concat(e.requirementId?"ID: ".concat(e.requirementId):""),p,e.labelStyle);p+=t;let a=await eG(f,"".concat(e.text?"Text: ".concat(e.text):""),p,e.labelStyle);p+=a;let l=await eG(f,"".concat(e.risk?"Risk: ".concat(e.risk):""),p,e.labelStyle);p+=l,await eG(f,"".concat(e.verifyMethod?"Verification: ".concat(e.verifyMethod):""),p,e.labelStyle)}else{let t=await eG(f,"".concat(e.type?"Type: ".concat(e.type):""),p,e.labelStyle);p+=t,await eG(f,"".concat(e.docRef?"Doc Ref: ".concat(e.docRef):""),p,e.labelStyle)}let m=(null!=(i=null==(a=f.node())?void 0:a.getBBox().width)?i:200)+20,x=(null!=(s=null==(n=f.node())?void 0:n.getBBox().height)?s:200)+20,w=-m/2,b=-x/2,v=te.svg(f),k=(0,l.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(k.roughness=0,k.fillStyle="solid");let M=v.rectangle(w,b,m,x,k),S=f.insert(()=>M,":first-child");if(S.attr("class","basic label-container").attr("style",d),f.selectAll(".label").each((t,e,a)=>{let l=(0,o.select)(a[e]),n=l.attr("transform"),r=0,i=0;if(n){let t=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(n);t&&(r=parseFloat(t[1]),i=parseFloat(t[2]))}let s=i-x/2,c=w+10;(0===e||1===e)&&(c=r),l.attr("transform","translate(".concat(c,", ").concat(s+20,")"))}),p>c+y+20){let t=v.line(w,b+c+y+20,w+m,b+c+y+20,k);f.insert(()=>t).attr("style",d)}return tn(e,S),e.intersect=function(t){return tC.rect(e,t)},f}async function eG(t,e,a){var l;let s,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(""===e)return 0;let h=t.insert("g").attr("class","label").attr("style",c),d=(0,i.getConfig2)(),u=null==(l=d.htmlLabels)||l,g=await (0,n.createText)(h,(0,i.sanitizeText2)((0,r.decodeEntities)(e)),{width:(0,r.calculateTextWidth)(e,d)+50,classes:"markdown-node-label",useHtmlLabels:u,style:c},d);if(u){let t=g.children[0],e=(0,o.select)(g);s=t.getBoundingClientRect(),e.attr("width",s.width),e.attr("height",s.height)}else{for(let t of g.children[0].children)t.textContent=t.textContent.replaceAll("&gt;",">").replaceAll("&lt;","<"),c&&t.setAttribute("style",c);s=g.getBBox(),s.height+=6}return h.attr("transform","translate(".concat(-s.width/2,",").concat(-s.height/2+a,")")),s.height}(0,s.__name)(eO,"tiltedCylinder"),(0,s.__name)(eB,"trapezoid"),(0,s.__name)(eL,"trapezoidalPentagon"),(0,s.__name)(eT,"triangle"),(0,s.__name)(eR,"waveEdgedRectangle"),(0,s.__name)(eI,"waveRectangle"),(0,s.__name)(eW,"windowPane"),(0,s.__name)(eE,"erBox"),(0,s.__name)(ez,"addText"),(0,s.__name)(ej,"textHelper"),(0,s.__name)(eq,"addText"),(0,s.__name)(eH,"classBox"),(0,s.__name)(eF,"requirementBox"),(0,s.__name)(eG,"addText");var eV=(0,s.__name)(t=>{switch(t){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}},"colorFromPriority");async function eU(t,e,a){var n,r,i;let s,o,c,h,{config:d}=a,{labelStyles:u,nodeStyles:g}=(0,l.styles2String)(e);e.labelStyle=u||"";let f=e.width;e.width=(null!=(r=e.width)?r:200)-10;let{shapeSvg:p,bbox:y,label:m}=await ta(t,e,tr(e)),x=e.padding||10,w="";"ticket"in e&&e.ticket&&(null==d||null==(n=d.kanban)?void 0:n.ticketBaseUrl)&&(w=null==d||null==(i=d.kanban)?void 0:i.ticketBaseUrl.replace("#TICKET#",e.ticket),s=p.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",w).attr("target","_blank"));let b={useHtmlLabels:e.useHtmlLabels,labelStyle:e.labelStyle||"",width:e.width,img:e.img,padding:e.padding||8,centerLabel:!1};s?{label:o,bbox:c}=await tl(s,"ticket"in e&&e.ticket||"",b):{label:o,bbox:c}=await tl(p,"ticket"in e&&e.ticket||"",b);let{label:v,bbox:k}=await tl(p,"assigned"in e&&e.assigned||"",b);e.width=f;let M=(null==e?void 0:e.width)||0,S=Math.max(c.height,k.height)/2,_=Math.max(y.height+20,(null==e?void 0:e.height)||0)+S,D=-M/2,C=-_/2;m.attr("transform","translate("+(x-M/2)+", "+(-S-y.height/2)+")"),o.attr("transform","translate("+(x-M/2)+", "+(-S+y.height/2)+")"),v.attr("transform","translate("+(x+M/2-k.width-20)+", "+(-S+y.height/2)+")");let{rx:N,ry:A}=e,{cssStyles:P}=e;if("handDrawn"===e.look){let t=te.svg(p),a=(0,l.userNodeOverrides)(e,{}),n=N||A?t.path(tg(D,C,M,_,N||0),a):t.rectangle(D,C,M,_,a);(h=p.insert(()=>n,":first-child")).attr("class","basic label-container").attr("style",P||null)}else{(h=p.insert("rect",":first-child")).attr("class","basic label-container __APA__").attr("style",g).attr("rx",null!=N?N:5).attr("ry",null!=A?A:5).attr("x",D).attr("y",C).attr("width",M).attr("height",_);let t="priority"in e&&e.priority;if(t){let e=p.append("line"),a=D+2,l=C+Math.floor((null!=N?N:0)/2),n=C+_-Math.floor((null!=N?N:0)/2);e.attr("x1",a).attr("y1",l).attr("x2",a).attr("y2",n).attr("stroke-width","4").attr("stroke",eV(t))}}return tn(e,h),e.height=_,e.intersect=function(t){return tC.rect(e,t)},p}async function eZ(t,e){let a,{labelStyles:n,nodeStyles:i}=(0,l.styles2String)(e);e.labelStyle=n;let{shapeSvg:o,bbox:c,halfPadding:h,label:d}=await ta(t,e,tr(e)),u=c.width+10*h,g=c.height+8*h,f=.15*u,{cssStyles:p}=e,y=c.width+20,m=c.height+20,x=Math.max(u,y),w=Math.max(g,m);d.attr("transform","translate(".concat(-c.width/2,", ").concat(-c.height/2,")"));let b="M0 0 \n    a".concat(f,",").concat(f," 1 0,0 ").concat(.25*x,",").concat(-1*w*.1,"\n    a").concat(f,",").concat(f," 1 0,0 ").concat(.25*x,",",0,"\n    a").concat(f,",").concat(f," 1 0,0 ").concat(.25*x,",",0,"\n    a").concat(f,",").concat(f," 1 0,0 ").concat(.25*x,",").concat(.1*w,"\n\n    a").concat(f,",").concat(f," 1 0,0 ").concat(.15*x,",").concat(.33*w,"\n    a").concat(.8*f,",").concat(.8*f," 1 0,0 0,").concat(.34*w,"\n    a").concat(f,",").concat(f," 1 0,0 ").concat(-1*x*.15,",").concat(.33*w,"\n\n    a").concat(f,",").concat(f," 1 0,0 ").concat(-1*x*.25,",").concat(.15*w,"\n    a").concat(f,",").concat(f," 1 0,0 ").concat(-1*x*.25,",0\n    a").concat(f,",").concat(f," 1 0,0 ").concat(-1*x*.25,",0\n    a").concat(f,",").concat(f," 1 0,0 ").concat(-1*x*.25,",").concat(-1*w*.15,"\n\n    a").concat(f,",").concat(f," 1 0,0 ").concat(-1*x*.1,",").concat(-1*w*.33,"\n    a").concat(.8*f,",").concat(.8*f," 1 0,0 0,").concat(-1*w*.34,"\n    a").concat(f,",").concat(f," 1 0,0 ").concat(.1*x,",").concat(-1*w*.33,"\n  H0 V0 Z");if("handDrawn"===e.look){let t=te.svg(o),n=(0,l.userNodeOverrides)(e,{}),i=t.path(b,n);(a=o.insert(()=>i,":first-child")).attr("class","basic label-container").attr("style",(0,r.handleUndefinedAttr)(p))}else a=o.insert("path",":first-child").attr("class","basic label-container").attr("style",i).attr("d",b);return a.attr("transform","translate(".concat(-x/2,", ").concat(-w/2,")")),tn(e,a),e.calcIntersect=function(t,e){return tC.rect(t,e)},e.intersect=function(t){return s.log.info("Bang intersect",e,t),tC.rect(e,t)},o}async function eX(t,e){let a,{labelStyles:n,nodeStyles:i}=(0,l.styles2String)(e);e.labelStyle=n;let{shapeSvg:o,bbox:c,halfPadding:h,label:d}=await ta(t,e,tr(e)),u=c.width+2*h,g=c.height+2*h,f=.15*u,p=.25*u,y=.35*u,m=.2*u,{cssStyles:x}=e,w="M0 0 \n    a".concat(f,",").concat(f," 0 0,1 ").concat(.25*u,",").concat(-1*u*.1,"\n    a").concat(y,",").concat(y," 1 0,1 ").concat(.4*u,",").concat(-1*u*.1,"\n    a").concat(p,",").concat(p," 1 0,1 ").concat(.35*u,",").concat(.2*u,"\n\n    a").concat(f,",").concat(f," 1 0,1 ").concat(.15*u,",").concat(.35*g,"\n    a").concat(m,",").concat(m," 1 0,1 ").concat(-1*u*.15,",").concat(.65*g,"\n\n    a").concat(p,",").concat(f," 1 0,1 ").concat(-1*u*.25,",").concat(.15*u,"\n    a").concat(y,",").concat(y," 1 0,1 ").concat(-1*u*.5,",0\n    a").concat(f,",").concat(f," 1 0,1 ").concat(-1*u*.25,",").concat(-1*u*.15,"\n\n    a").concat(f,",").concat(f," 1 0,1 ").concat(-1*u*.1,",").concat(-1*g*.35,"\n    a").concat(m,",").concat(m," 1 0,1 ").concat(.1*u,",").concat(-1*g*.65,"\n  H0 V0 Z");if("handDrawn"===e.look){let t=te.svg(o),n=(0,l.userNodeOverrides)(e,{}),i=t.path(w,n);(a=o.insert(()=>i,":first-child")).attr("class","basic label-container").attr("style",(0,r.handleUndefinedAttr)(x))}else a=o.insert("path",":first-child").attr("class","basic label-container").attr("style",i).attr("d",w);return d.attr("transform","translate(".concat(-c.width/2,", ").concat(-c.height/2,")")),a.attr("transform","translate(".concat(-u/2,", ").concat(-g/2,")")),tn(e,a),e.calcIntersect=function(t,e){return tC.rect(t,e)},e.intersect=function(t){return s.log.info("Cloud intersect",e,t),tC.rect(e,t)},o}async function eQ(t,e){let{labelStyles:a,nodeStyles:n}=(0,l.styles2String)(e);e.labelStyle=a;let{shapeSvg:r,bbox:i,halfPadding:s,label:o}=await ta(t,e,tr(e)),c=i.width+8*s,h=i.height+2*s,d="\n    M".concat(-c/2," ").concat(h/2-5,"\n    v").concat(-h+10,"\n    q0,-").concat(5," ").concat(5,",-").concat(5,"\n    h").concat(c-10,"\n    q").concat(5,",0 ").concat(5,",").concat(5,"\n    v").concat(h-10,"\n    q0,").concat(5," -").concat(5,",").concat(5,"\n    h").concat(-c+10,"\n    q-").concat(5,",0 -").concat(5,",-").concat(5,"\n    Z\n  "),u=r.append("path").attr("id","node-"+e.id).attr("class","node-bkg node-"+e.type).attr("style",n).attr("d",d);return r.append("line").attr("class","node-line-").attr("x1",-c/2).attr("y1",h/2).attr("x2",c/2).attr("y2",h/2),o.attr("transform","translate(".concat(-i.width/2,", ").concat(-i.height/2,")")),r.append(()=>o.node()),tn(e,u),e.calcIntersect=function(t,e){return tC.rect(t,e)},e.intersect=function(t){return tC.rect(e,t)},r}async function eJ(t,e){var a;let l={padding:null!=(a=e.padding)?a:0};return tT(t,e,l)}(0,s.__name)(eU,"kanbanItem"),(0,s.__name)(eZ,"bang"),(0,s.__name)(eX,"cloud"),(0,s.__name)(eQ,"defaultMindmapNode"),(0,s.__name)(eJ,"mindmapCircle");var eY=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:ew},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:ey},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:eb},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:eS},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:tZ},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:tT},{semanticName:"Bang",name:"Bang",shortName:"bang",description:"Bang",aliases:["bang"],handler:eZ},{semanticName:"Cloud",name:"Cloud",shortName:"cloud",description:"cloud",aliases:["cloud"],handler:eX},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:eu},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:t0},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:ee},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:et},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:eB},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:t9},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:tQ},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:eC},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:tB},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:em},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:eM},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:ek},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:tK},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:t2},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:tE},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:tj},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:tH},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:ea},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:eR},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:t$},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:eO},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:ei},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:tF},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:tX},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:eT},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:eW},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:tJ},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:eL},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:tY},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:ex},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:ec},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:eo},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:tP},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:tI},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:eD},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:e_},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:eI},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:eg},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:es}],eK=(0,s.__name)(()=>Object.fromEntries([...Object.entries({state:ev,choice:tL,note:eh,rectWithTitle:ef,labelRect:t7,iconSquare:t8,iconCircle:t5,icon:t1,iconRounded:t3,imageSquare:t4,anchor:tN,kanbanItem:eU,mindmapCircle:eJ,defaultMindmapNode:eQ,classBox:eH,erBox:eE,requirementBox:eF}),...eY.flatMap(t=>[t.shortName,..."aliases"in t?t.aliases:[],..."internalAliases"in t?t.internalAliases:[]].map(e=>[e,t.handler]))]),"generateShapeMap")();function e$(t){return t in eK}(0,s.__name)(e$,"isValidShape");var e0=new Map;async function e2(t,e,a){let l,n;"rect"===e.shape&&(e.rx&&e.ry?e.shape="roundedRect":e.shape="squareRect");let r=e.shape?eK[e.shape]:void 0;if(!r)throw Error("No such shape: ".concat(e.shape,". Please check your syntax."));if(e.link){let i;"sandbox"===a.config.securityLevel?i="_top":e.linkTarget&&(i=e.linkTarget||"_blank"),l=t.insert("svg:a").attr("xlink:href",e.link).attr("target",null!=i?i:null),n=await r(l,e,a)}else l=n=await r(t,e,a);return e.tooltip&&n.attr("title",e.tooltip),e0.set(e.id,l),e.haveCallback&&l.attr("class",l.attr("class")+" clickable"),l}(0,s.__name)(e2,"insertNode");var e1=(0,s.__name)((t,e)=>{e0.set(e.id,t)},"setNodeElem"),e5=(0,s.__name)(()=>{e0.clear()},"clear"),e3=(0,s.__name)(t=>{let e=e0.get(t.id);s.log.trace("Transforming node",t.diff,t,"translate("+(t.x-t.width/2-5)+", "+t.width/2+")");let a=t.diff||0;return t.clusterNode?e.attr("transform","translate("+(t.x+a-t.width/2)+", "+(t.y-t.height/2-8)+")"):e.attr("transform","translate("+t.x+", "+t.y+")"),a},"positionNode")}]);