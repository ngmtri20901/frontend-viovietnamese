(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,855193,e=>{"use strict";e.s(["Label",()=>n],855193);var t=e.i(843476),a=e.i(271645);e.i(174080);var s=e.i(991918),r=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,r)=>{let i=(0,s.createSlot)("Primitive.".concat(r)),l=a.forwardRef((e,a)=>{let{asChild:s,...l}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(s?i:r,{...l,ref:a})});return l.displayName="Primitive.".concat(r),{...e,[r]:l}},{}),i=a.forwardRef((e,a)=>(0,t.jsx)(r.label,{...e,ref:a,onMouseDown:t=>{var a;t.target.closest("button, input, select, textarea")||(null==(a=e.onMouseDown)||a.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var l=e.i(605458);function n(e){let{className:a,...s}=e;return(0,t.jsx)(i,{"data-slot":"label",className:(0,l.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...s})}},812885,e=>{"use strict";e.s(["Textarea",()=>s]);var t=e.i(843476),a=e.i(605458);function s(e){let{className:s,...r}=e;return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,a.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),...r})}},107233,e=>{"use strict";e.s(["Plus",()=>t],107233);let t=(0,e.i(475254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},727612,e=>{"use strict";e.s(["Trash2",()=>t],727612);let t=(0,e.i(475254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},37727,e=>{"use strict";e.s(["X",()=>t.default]);var t=e.i(841947)},16715,e=>{"use strict";e.s(["RefreshCw",()=>t],16715);let t=(0,e.i(475254).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},251381,e=>{"use strict";e.s(["default",()=>E],251381);var t=e.i(843476),a=e.i(271645),s=e.i(859016),r=e.i(846696);e.i(247167);var i=e.i(859951),l=e.i(918878),n=e.i(812885),o=e.i(628574),c=e.i(507800),d=e.i(855193),m=e.i(475254);let u=(0,m.default)("image-plus",[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]]);var h=e.i(382373),x=e.i(367240),p=e.i(107233),f=e.i(16715),g=e.i(37727),v=e.i(283086);let j=(0,m.default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var y=e.i(618566),b=e.i(846932),N=e.i(166778);function w(e){let{vietnamese:a,english:s,pronunciation:r,wordType:i,topic:l,imagePreview:n,isFlipped:c=!1,onFlip:d}=e;return(0,t.jsxs)("div",{className:"relative",style:{perspective:"1000px"},children:[(0,t.jsxs)(b.motion.div,{style:{width:"100%",height:"320px",position:"relative",transformStyle:"preserve-3d"},transition:{duration:.6},animate:{rotateY:180*!!c},children:[(0,t.jsx)(b.motion.div,{style:{position:"absolute",width:"100%",height:"100%",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden"},children:(0,t.jsx)(o.Card,{className:"h-full cursor-pointer transition-all duration-300 hover:shadow-lg",onClick:d,children:(0,t.jsx)(o.CardContent,{className:"h-full flex flex-col justify-center items-center p-8 text-center",children:(0,t.jsxs)("div",{className:"space-y-4 w-full",children:[n&&(0,t.jsx)("div",{className:"w-20 h-20 mx-auto mb-4 rounded-lg overflow-hidden bg-muted",children:(0,t.jsx)("img",{src:n||"/placeholder.svg",alt:"Flashcard visual",className:"w-full h-full object-cover"})}),(0,t.jsx)("div",{className:"text-3xl font-bold text-foreground",children:a||"Vietnamese text will appear here"}),r&&(0,t.jsx)("div",{className:"text-lg text-muted-foreground font-mono",children:r}),(0,t.jsxs)("div",{className:"flex justify-center gap-2 flex-wrap",children:[i&&(0,t.jsx)(N.Badge,{variant:"secondary",className:"capitalize",children:i}),l&&(0,t.jsx)(N.Badge,{variant:"outline",className:"capitalize",children:l.replace("-"," ")})]})]})})})}),(0,t.jsx)(b.motion.div,{style:{position:"absolute",width:"100%",height:"100%",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:(0,t.jsx)(o.Card,{className:"h-full cursor-pointer transition-all duration-300 hover:shadow-lg",onClick:d,children:(0,t.jsx)(o.CardContent,{className:"h-full flex flex-col justify-center items-center p-8 text-center",children:(0,t.jsxs)("div",{className:"space-y-4 w-full",children:[(0,t.jsx)("div",{className:"text-3xl font-bold text-foreground",children:s||"Your translation will appear here"}),a&&(0,t.jsx)("div",{className:"text-lg text-muted-foreground",children:a}),(0,t.jsxs)("div",{className:"flex justify-center gap-2 flex-wrap",children:[i&&(0,t.jsx)(N.Badge,{variant:"secondary",className:"capitalize",children:i}),l&&(0,t.jsx)(N.Badge,{variant:"outline",className:"capitalize",children:l.replace("-"," ")})]})]})})})})]}),(0,t.jsxs)("div",{className:"absolute bottom-4 right-4 text-xs text-muted-foreground bg-background/80 px-2 py-1 rounded",children:[c?"Back":"Front"," â€¢ Click to flip"]})]})}var C=e.i(95187),k=(0,C.createServerReference)("40df7fcce92212cb097847765ff160f9fc458fc66f",C.callServer,void 0,C.findSourceMapURL,"createFlashcard"),F=(0,C.createServerReference)("601ee54aa3ae234bd73dda91171672730ddb48c914",C.callServer,void 0,C.findSourceMapURL,"uploadFlashcardImage"),S=(0,C.createServerReference)("406bf430709870b36d9a7ac85feffe60d998327396",C.callServer,void 0,C.findSourceMapURL,"updateCustomFlashcard");function T(e){let{userId:m,initialData:b,onCancelEdit:N,onSuccess:C}=e,T=(0,y.useRouter)(),[M,P]=(0,a.useState)(!1),[I,B]=(0,a.useState)(!1),[V,_]=(0,a.useState)({vietnamese:"",english:"",pronunciation:"",wordType:"",topic:"",imageFile:null,imageUrl:null}),[E,L]=(0,a.useState)(!1),[U,R]=(0,a.useState)("");(0,a.useEffect)(()=>{if(b)if(_({vietnamese:b.vietnamese_text||"",english:b.english_text||"",pronunciation:b.ipa_pronunciation||"",wordType:"",topic:b.topic||"",imageFile:null,imageUrl:b.image_url||null}),b.image_url){let{data:e}=(0,s.createClient)().storage.from("images").getPublicUrl(b.image_url);(null==e?void 0:e.publicUrl)&&R(e.publicUrl)}else R("");else D()},[b]);let A=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;if(e.length<=t)return e;let a=e.split(".").pop()||"",s=e.slice(0,e.lastIndexOf(".")).slice(0,3)+"...";return"".concat(s).concat(a?"."+a:"")},z=(e,t)=>{_(a=>({...a,[e]:t}))},D=()=>{_({vietnamese:"",english:"",pronunciation:"",wordType:"",topic:"",imageFile:null,imageUrl:null}),R(""),L(!1)},H=async()=>{if(!V.vietnamese.trim())return void r.toast.error("Please enter Vietnamese text first");B(!0),console.log("ðŸ”Š Fetching IPA pronunciation...");try{let e=await fetch("".concat("https://vietnamesenext.onrender.com","/api/v1/phoneme/ipa"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:V.vietnamese.trim()})});if(!e.ok)throw Error("Failed to fetch IPA: ".concat(e.status," ").concat(e.statusText));let t=await e.json();console.log("âœ… IPA pronunciation received:",t);let a=t.ipa||t.pronunciation||t.text||"";a?(_(e=>({...e,pronunciation:a})),r.toast.success("IPA pronunciation generated successfully!")):r.toast.error("No IPA pronunciation returned from API")}catch(t){console.error("âŒ Error fetching IPA:",t);let e=t instanceof Error?t.message:"Failed to fetch IPA pronunciation";r.toast.error(e)}finally{B(!1)}},O=async()=>{if(!V.vietnamese.trim()||!V.english.trim())return void r.toast.error("Please enter both Vietnamese text and English translation");P(!0);try{let e=V.imageUrl;if(V.imageFile){console.log("ðŸ–¼ï¸ Uploading image...");let t=await F(V.imageFile,m);if(!t.success)throw Error(t.error||"Failed to upload image");e=t.url||null}if(b){console.log("ðŸ“ Updating flashcard...");let t=await S({id:b.id,vietnamese_text:V.vietnamese.trim(),english_text:V.english.trim(),ipa_pronunciation:V.pronunciation.trim()||null,image_url:e,topic:V.topic.trim()||null,notes:null});if(!t.success)throw Error(t.error||"Failed to update flashcard");r.toast.success("Flashcard updated successfully")}else{console.log("ðŸ’¾ Creating flashcard...");let t=await k({vietnamese_text:V.vietnamese.trim(),english_text:V.english.trim(),ipa_pronunciation:V.pronunciation.trim()||null,image_url:e,topic:V.topic.trim()||null,notes:null});if(!t.success)throw Error(t.error||"Failed to create flashcard");r.toast.success("Flashcard created successfully")}b||D(),null==C||C(),T.refresh()}catch(t){console.error("âŒ Error saving flashcard:",t);let e=t instanceof Error?t.message:"Failed to save flashcard";r.toast.error(e)}finally{P(!1)}};return(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,t.jsxs)(o.Card,{className:"h-fit border-2",children:[(0,t.jsxs)(o.CardHeader,{className:"pb-4",children:[(0,t.jsx)(o.CardTitle,{className:"flex items-center gap-2 text-lg",children:(0,t.jsx)("span",{children:b?"Edit Flashcard":"Create New Flashcard"})}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:b?"Update the details below":"Fill in the information to create your flashcard"})]}),(0,t.jsxs)(o.CardContent,{className:"space-y-5",children:[(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d.Label,{htmlFor:"vietnamese",className:"text-sm font-semibold text-foreground",children:"Vietnamese Text *"}),(0,t.jsx)(n.Textarea,{id:"vietnamese",placeholder:"Enter Vietnamese word or phrase...",value:V.vietnamese,onChange:e=>z("vietnamese",e.target.value),className:"min-h-[70px] resize-none border-2 focus:border-primary/50 transition-colors"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d.Label,{htmlFor:"english",className:"text-sm font-semibold text-foreground",children:"Translation *"}),(0,t.jsx)(n.Textarea,{id:"english",placeholder:"Enter translation...",value:V.english,onChange:e=>z("english",e.target.value),className:"min-h-[70px] resize-none border-2 focus:border-primary/50 transition-colors"})]})]})}),(0,t.jsxs)("div",{className:"border-t pt-4",children:[(0,t.jsx)("h4",{className:"text-sm font-semibold text-foreground mb-3",children:"Additional Details"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d.Label,{className:"text-sm font-medium text-foreground",children:"Word Type"}),(0,t.jsxs)(c.Select,{value:V.wordType,onValueChange:e=>z("wordType",e),children:[(0,t.jsx)(c.SelectTrigger,{className:"border-2 focus:border-primary/50 transition-colors",children:(0,t.jsx)(c.SelectValue,{placeholder:"Select type..."})}),(0,t.jsx)(c.SelectContent,{children:["Noun","Verb","Adjective","Adverb","Pronoun","Preposition","Conjunction","Interjection"].map(e=>(0,t.jsx)(c.SelectItem,{value:e.toLowerCase(),children:e},e))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d.Label,{className:"text-sm font-medium text-foreground",children:"Topic"}),(0,t.jsxs)(c.Select,{value:V.topic,onValueChange:e=>z("topic",e),children:[(0,t.jsx)(c.SelectTrigger,{className:"border-2 focus:border-primary/50 transition-colors",children:(0,t.jsx)(c.SelectValue,{placeholder:"Select topic..."})}),(0,t.jsx)(c.SelectContent,{children:["Food & Drink","Family","Travel","Work","Education","Health","Sports","Technology","Nature","Culture"].map(e=>(0,t.jsx)(c.SelectItem,{value:e.toLowerCase().replace(/\s+/g,"-"),children:e},e))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(d.Label,{className:"text-sm font-medium text-foreground flex items-center gap-2",children:[(0,t.jsx)(u,{className:"w-4 h-4 text-muted-foreground"}),"Add Image",(0,t.jsx)("span",{className:"text-xs text-muted-foreground font-normal",children:"(Max 3MB)"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let a=null==(t=e.target.files)?void 0:t[0];if(a){if(a.size>3145728){r.toast.error("Image size exceeds 3MB limit. Please choose a smaller image. (Current: ".concat((a.size/1024/1024).toFixed(2),"MB)")),e.target.value="";return}_(e=>({...e,imageFile:a}));let t=new FileReader;t.onload=e=>{var t;R(null==(t=e.target)?void 0:t.result)},t.readAsDataURL(a)}},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10",id:"image-upload"}),(0,t.jsx)(i.Button,{type:"button",variant:"outline",className:"w-full border-2 focus:border-primary/50 transition-colors h-10 text-sm bg-transparent pointer-events-none",asChild:!0,children:(0,t.jsxs)("label",{htmlFor:"image-upload",className:"cursor-pointer flex items-center justify-center gap-2 pointer-events-auto",children:[(0,t.jsx)(u,{className:"w-4 h-4"}),V.imageFile?A(V.imageFile.name):"Choose file"]})})]}),(V.imageFile||V.imageUrl)&&(0,t.jsx)(i.Button,{type:"button",variant:"ghost",size:"icon",onClick:()=>{_(e=>({...e,imageFile:null,imageUrl:null})),R("");let e=document.getElementById("image-upload");e&&(e.value="")},className:"h-10 w-10 text-destructive hover:text-destructive hover:bg-destructive/10 flex-shrink-0",title:"Remove image",children:(0,t.jsx)(g.X,{className:"w-4 h-4"})})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2 mt-4",children:[(0,t.jsxs)(d.Label,{htmlFor:"pronunciation",className:"text-sm font-medium text-foreground flex items-center gap-2",children:[(0,t.jsx)(h.Volume2,{className:"w-4 h-4 text-muted-foreground"}),"Pronunciation (IPA)"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(l.Input,{id:"pronunciation",placeholder:"e.g., /ËˆvjÉ›t.nÉ‘m/",value:V.pronunciation,onChange:e=>z("pronunciation",e.target.value),className:"border-2 focus:border-primary/50 transition-colors font-mono flex-1"}),(0,t.jsx)(i.Button,{type:"button",variant:"outline",size:"icon",onClick:H,disabled:I||!V.vietnamese.trim(),className:"h-10 w-10 flex-shrink-0",title:"Generate IPA pronunciation",children:(0,t.jsx)(v.Sparkles,{className:"w-4 h-4 ".concat(I?"animate-spin":"")})})]})]})]}),(0,t.jsx)("div",{className:"border-t pt-5",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,t.jsxs)(i.Button,{variant:"outline",onClick:()=>{D(),null==N||N()},disabled:M,className:"flex-1 h-11 font-medium",children:[b?(0,t.jsx)(g.X,{className:"w-4 h-4 mr-2"}):(0,t.jsx)(x.RotateCcw,{className:"w-4 h-4 mr-2"}),b?"Cancel Edit":"Reset"]}),(0,t.jsxs)(i.Button,{onClick:O,disabled:M||!V.vietnamese||!V.english,className:"flex-1 h-11 font-medium",children:[b?(0,t.jsx)(j,{className:"w-4 h-4 mr-2"}):(0,t.jsx)(p.Plus,{className:"w-4 h-4 mr-2"}),M?b?"Updating...":"Creating...":b?"Update Flashcard":"Create & Add More"]})]})})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold",children:"Live Preview"}),(0,t.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>L(!E),className:"flex items-center gap-2 transition-transform duration-300",children:[(0,t.jsx)(f.RefreshCw,{className:"w-4 h-4 transition-transform duration-500 ".concat(E?"[transform:rotateY(180deg)]":"")}),"  Flip"]})]}),(0,t.jsx)("div",{className:"relative",children:(0,t.jsx)(w,{vietnamese:V.vietnamese,english:V.english,pronunciation:V.pronunciation,wordType:V.wordType,topic:V.topic,imagePreview:U,isFlipped:E,onFlip:()=>L(!E)})}),(0,t.jsx)(o.Card,{className:"bg-muted/50",children:(0,t.jsxs)(o.CardContent,{className:"p-4",children:[(0,t.jsx)("h3",{className:"font-medium mb-2",children:"Card Information"}),(0,t.jsxs)("div",{className:"space-y-1 text-sm text-muted-foreground",children:[(0,t.jsxs)("div",{children:["Vietnamese: ",V.vietnamese||"Not set"]}),(0,t.jsxs)("div",{children:["Translation: ",V.english||"Not set"]}),(0,t.jsxs)("div",{children:["Pronunciation: ",V.pronunciation||"Not set"]}),(0,t.jsxs)("div",{children:["Type: ",V.wordType||"Not set"]}),(0,t.jsxs)("div",{children:["Topic: ",V.topic?V.topic.replace("-"," "):"Not set"]}),(0,t.jsxs)("div",{children:["Image: ",V.imageFile?A(V.imageFile.name):V.imageUrl?"Set (Existing)":"Not set"]})]})]})})]})]})}var M=e.i(531278),P=e.i(727612),I=e.i(643531),B=(0,C.createServerReference)("404db174e64fde8dc83f3aecc37e4914f00496bceb",C.callServer,void 0,C.findSourceMapURL,"deleteCustomFlashcard"),V=e.i(605458);function _(e){let{flashcards:s,selectedId:l,onSelect:n,onRefresh:c}=e,[d,m]=(0,a.useState)(null),u=async(e,t)=>{if(e.stopPropagation(),confirm("Are you sure you want to delete this flashcard? This action cannot be undone."))try{m(t);let e=await B(t);e.success?(r.toast.success("Flashcard deleted successfully"),c()):r.toast.error(e.error||"Failed to delete flashcard")}catch(e){console.error("Error deleting flashcard:",e),r.toast.error("Failed to delete flashcard")}finally{m(null)}};return 0===s.length?(0,t.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:(0,t.jsx)("p",{children:"No flashcards created yet. Create your first flashcard above!"})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold",children:"Your Flashcards"}),(0,t.jsxs)(N.Badge,{variant:"secondary",children:[s.length," ",1===s.length?"flashcard":"flashcards"]})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(e=>{let a=l===e.id;return(0,t.jsxs)(o.Card,{className:(0,V.cn)("relative cursor-pointer transition-all hover:shadow-md",a?"ring-2 ring-primary border-primary/50 bg-primary/5":"hover:border-primary/30"),onClick:()=>n(e),children:[a&&(0,t.jsx)("div",{className:"absolute -top-2 -right-2 bg-primary text-primary-foreground rounded-full p-1 shadow-sm z-10",children:(0,t.jsx)(I.Check,{className:"w-3 h-3"})}),(0,t.jsxs)("div",{className:"p-4 flex flex-col h-full",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start gap-2 mb-2",children:[(0,t.jsx)("h3",{className:"font-bold text-lg truncate",title:e.vietnamese_text,children:e.vietnamese_text}),(0,t.jsx)("div",{className:"flex gap-1 shrink-0",children:(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-destructive hover:bg-destructive/10",onClick:t=>u(t,e.id),disabled:d===e.id,title:"Delete flashcard",children:d===e.id?(0,t.jsx)(M.Loader2,{className:"w-4 h-4 animate-spin"}):(0,t.jsx)(P.Trash2,{className:"w-4 h-4"})})})]}),e.ipa_pronunciation&&(0,t.jsxs)("p",{className:"text-xs text-muted-foreground font-mono mb-2",children:["/",e.ipa_pronunciation,"/"]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-auto",children:e.english_text}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 mt-3",children:[e.topic&&(0,t.jsx)(N.Badge,{variant:"outline",className:"text-[10px] h-5",children:e.topic.replace("-"," ")}),(0,t.jsx)(N.Badge,{variant:"secondary",className:"text-[10px] h-5",children:"lesson"===e.source_type?"From Lesson":"Manual"})]})]})]},e.id)})})]})}function E(e){let{userId:i}=e,[l,n]=(0,a.useState)([]),[o,c]=(0,a.useState)(!0),[d,m]=(0,a.useState)(null),u=(0,a.useCallback)(async()=>{try{c(!0);let e=(0,s.createClient)(),{data:t,error:a}=await e.from("custom_flashcards").select("*").eq("user_id",i).eq("status","ACTIVE").order("created_at",{ascending:!1});if(a)throw a;n(t||[])}catch(e){console.error("Error fetching flashcards:",e),r.toast.error("Failed to load flashcards")}finally{c(!1)}},[i]);return((0,a.useEffect)(()=>{u()},[u]),o)?(0,t.jsx)("div",{className:"flex items-center justify-center py-12 min-h-screen",children:(0,t.jsx)(M.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):(0,t.jsx)("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsx)(T,{userId:i,initialData:d,onCancelEdit:()=>{m(null)},onSuccess:()=>{u(),m(null)}}),(0,t.jsx)("div",{className:"border-t pt-8",children:(0,t.jsx)(_,{flashcards:l,selectedId:(null==d?void 0:d.id)||null,onSelect:e=>{m(e),window.scrollTo({top:0,behavior:"smooth"})},onRefresh:u})})]})})}}]);