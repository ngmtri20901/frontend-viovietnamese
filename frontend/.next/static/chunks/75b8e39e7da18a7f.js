(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,642640,t=>{"use strict";t.s(["diagram",()=>ty]);var c=t.i(602099),e=t.i(857387),a=t.i(195923),r=t.i(80926),n=t.i(171206),o=t.i(289590);t.i(947716);var i=t.i(723685),s={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},l=r.defaultConfig_default.gitGraph,m=(0,n.__name)(()=>(0,a.cleanAndMerge)({...l,...(0,r.getConfig)().gitGraph}),"getConfig"),d=new e.ImperativeState(()=>{let t=m(),c=t.mainBranchName,e=t.mainBranchOrder;return{mainBranchName:c,commits:new Map,head:null,branchConfig:new Map([[c,{name:c,order:e}]]),branches:new Map([[c,null]]),currBranch:c,direction:"LR",seq:0,options:{}}});function h(){return(0,a.random)({length:7})}function g(t,c){let e=Object.create(null);return t.reduce((t,a)=>{let r=c(a);return e[r]||(e[r]=!0,t.push(a)),t},[])}(0,n.__name)(h,"getID"),(0,n.__name)(g,"uniqBy");var u=(0,n.__name)(function(t){d.records.direction=t},"setDirection"),y=(0,n.__name)(function(t){n.log.debug("options str",t),t=(t=null==t?void 0:t.trim())||"{}";try{d.records.options=JSON.parse(t)}catch(t){n.log.error("error while parsing gitGraph options",t.message)}},"setOptions"),p=(0,n.__name)(function(){return d.records.options},"getOptions"),f=(0,n.__name)(function(t){let c=t.msg,e=t.id,a=t.type,o=t.tags;n.log.info("commit",c,e,a,o),n.log.debug("Entering commit:",c,e,a,o);let i=m();e=r.common_default.sanitizeText(e,i),c=r.common_default.sanitizeText(c,i),o=null==o?void 0:o.map(t=>r.common_default.sanitizeText(t,i));let l={id:e||d.records.seq+"-"+h(),message:c,seq:d.records.seq++,type:null!=a?a:s.NORMAL,tags:null!=o?o:[],parents:null==d.records.head?[]:[d.records.head.id],branch:d.records.currBranch};d.records.head=l,n.log.info("main branch",i.mainBranchName),d.records.commits.has(l.id)&&n.log.warn("Commit ID ".concat(l.id," already exists")),d.records.commits.set(l.id,l),d.records.branches.set(d.records.currBranch,l.id),n.log.debug("in pushCommit "+l.id)},"commit"),x=(0,n.__name)(function(t){let c=t.name,e=t.order;if(c=r.common_default.sanitizeText(c,m()),d.records.branches.has(c))throw Error('Trying to create an existing branch. (Help: Either use a new name if you want create a new branch or try using "checkout '.concat(c,'")'));d.records.branches.set(c,null!=d.records.head?d.records.head.id:null),d.records.branchConfig.set(c,{name:c,order:e}),v(c),n.log.debug("in createBranch")},"branch"),b=(0,n.__name)(t=>{let c=t.branch,e=t.id,a=t.type,o=t.tags,i=m();c=r.common_default.sanitizeText(c,i),e&&(e=r.common_default.sanitizeText(e,i));let l=d.records.branches.get(d.records.currBranch),g=d.records.branches.get(c),u=l?d.records.commits.get(l):void 0,y=g?d.records.commits.get(g):void 0;if(u&&y&&u.branch===c)throw Error("Cannot merge branch '".concat(c,"' into itself."));if(d.records.currBranch===c){let t=Error('Incorrect usage of "merge". Cannot merge a branch to itself');throw t.hash={text:"merge ".concat(c),token:"merge ".concat(c),expected:["branch abc"]},t}if(void 0===u||!u){let t=Error('Incorrect usage of "merge". Current branch ('.concat(d.records.currBranch,")has no commits"));throw t.hash={text:"merge ".concat(c),token:"merge ".concat(c),expected:["commit"]},t}if(!d.records.branches.has(c)){let t=Error('Incorrect usage of "merge". Branch to be merged ('+c+") does not exist");throw t.hash={text:"merge ".concat(c),token:"merge ".concat(c),expected:["branch ".concat(c)]},t}if(void 0===y||!y){let t=Error('Incorrect usage of "merge". Branch to be merged ('+c+") has no commits");throw t.hash={text:"merge ".concat(c),token:"merge ".concat(c),expected:['"commit"']},t}if(u===y){let t=Error('Incorrect usage of "merge". Both branches have same head');throw t.hash={text:"merge ".concat(c),token:"merge ".concat(c),expected:["branch abc"]},t}if(e&&d.records.commits.has(e)){let t=Error('Incorrect usage of "merge". Commit with id:'+e+" already exists, use different custom id");throw t.hash={text:"merge ".concat(c," ").concat(e," ").concat(a," ").concat(null==o?void 0:o.join(" ")),token:"merge ".concat(c," ").concat(e," ").concat(a," ").concat(null==o?void 0:o.join(" ")),expected:["merge ".concat(c," ").concat(e,"_UNIQUE ").concat(a," ").concat(null==o?void 0:o.join(" "))]},t}let p={id:e||"".concat(d.records.seq,"-").concat(h()),message:"merged branch ".concat(c," into ").concat(d.records.currBranch),seq:d.records.seq++,parents:null==d.records.head?[]:[d.records.head.id,g||""],branch:d.records.currBranch,type:s.MERGE,customType:a,customId:!!e,tags:null!=o?o:[]};d.records.head=p,d.records.commits.set(p.id,p),d.records.branches.set(d.records.currBranch,p.id),n.log.debug(d.records.branches),n.log.debug("in mergeBranch")},"merge"),_=(0,n.__name)(function(t){let c=t.id,e=t.targetId,a=t.tags,o=t.parent;n.log.debug("Entering cherryPick:",c,e,a);let i=m();if(c=r.common_default.sanitizeText(c,i),e=r.common_default.sanitizeText(e,i),a=null==a?void 0:a.map(t=>r.common_default.sanitizeText(t,i)),o=r.common_default.sanitizeText(o,i),!c||!d.records.commits.has(c)){let t=Error('Incorrect usage of "cherryPick". Source commit id should exist and provided');throw t.hash={text:"cherryPick ".concat(c," ").concat(e),token:"cherryPick ".concat(c," ").concat(e),expected:["cherry-pick abc"]},t}let l=d.records.commits.get(c);if(void 0===l||!l)throw Error('Incorrect usage of "cherryPick". Source commit id should exist and provided');if(o&&!(Array.isArray(l.parents)&&l.parents.includes(o)))throw Error("Invalid operation: The specified parent commit is not an immediate parent of the cherry-picked commit.");let g=l.branch;if(l.type===s.MERGE&&!o)throw Error("Incorrect usage of cherry-pick: If the source commit is a merge commit, an immediate parent commit must be specified.");if(!e||!d.records.commits.has(e)){if(g===d.records.currBranch){let t=Error('Incorrect usage of "cherryPick". Source commit is already on current branch');throw t.hash={text:"cherryPick ".concat(c," ").concat(e),token:"cherryPick ".concat(c," ").concat(e),expected:["cherry-pick abc"]},t}let t=d.records.branches.get(d.records.currBranch);if(void 0===t||!t){let t=Error('Incorrect usage of "cherry-pick". Current branch ('.concat(d.records.currBranch,")has no commits"));throw t.hash={text:"cherryPick ".concat(c," ").concat(e),token:"cherryPick ".concat(c," ").concat(e),expected:["cherry-pick abc"]},t}let r=d.records.commits.get(t);if(void 0===r||!r){let t=Error('Incorrect usage of "cherry-pick". Current branch ('.concat(d.records.currBranch,")has no commits"));throw t.hash={text:"cherryPick ".concat(c," ").concat(e),token:"cherryPick ".concat(c," ").concat(e),expected:["cherry-pick abc"]},t}let i={id:d.records.seq+"-"+h(),message:"cherry-picked ".concat(null==l?void 0:l.message," into ").concat(d.records.currBranch),seq:d.records.seq++,parents:null==d.records.head?[]:[d.records.head.id,l.id],branch:d.records.currBranch,type:s.CHERRY_PICK,tags:a?a.filter(Boolean):["cherry-pick:".concat(l.id).concat(l.type===s.MERGE?"|parent:".concat(o):"")]};d.records.head=i,d.records.commits.set(i.id,i),d.records.branches.set(d.records.currBranch,i.id),n.log.debug(d.records.branches),n.log.debug("in cherryPick")}},"cherryPick"),v=(0,n.__name)(function(t){if(t=r.common_default.sanitizeText(t,m()),d.records.branches.has(t)){d.records.currBranch=t;let e=d.records.branches.get(d.records.currBranch);if(void 0!==e&&e){var c;d.records.head=null!=(c=d.records.commits.get(e))?c:null}else d.records.head=null}else{let c=Error('Trying to checkout branch which is not yet created. (Help try using "branch '.concat(t,'")'));throw c.hash={text:"checkout ".concat(t),token:"checkout ".concat(t),expected:["branch ".concat(t)]},c}},"checkout");function w(t,c,e){let a=t.indexOf(c);-1===a?t.push(e):t.splice(a,1,e)}function B(t){let c=t.reduce((t,c)=>t.seq>c.seq?t:c,t[0]),e="";t.forEach(function(t){t===c?e+="	*":e+="	|"});let a=[e,c.id,c.seq];for(let t in d.records.branches)d.records.branches.get(t)===c.id&&a.push(t);if(n.log.debug(a.join(" ")),c.parents&&2==c.parents.length&&c.parents[0]&&c.parents[1]){let e=d.records.commits.get(c.parents[0]);w(t,c,e),c.parents[1]&&t.push(d.records.commits.get(c.parents[1]))}else if(0==c.parents.length)return;else if(c.parents[0]){let e=d.records.commits.get(c.parents[0]);w(t,c,e)}B(t=g(t,t=>t.id))}(0,n.__name)(w,"upsert"),(0,n.__name)(B,"prettyPrintCommitHistory");var E=(0,n.__name)(function(){n.log.debug(d.records.commits),B([M()[0]])},"prettyPrint"),C=(0,n.__name)(function(){d.reset(),(0,r.clear)()},"clear"),T=(0,n.__name)(function(){return[...d.records.branchConfig.values()].map((t,c)=>null!==t.order&&void 0!==t.order?t:{...t,order:parseFloat("0.".concat(c))}).sort((t,c)=>{var e,a;return(null!=(e=t.order)?e:0)-(null!=(a=c.order)?a:0)}).map(t=>{let{name:c}=t;return{name:c}})},"getBranchesAsObjArray"),L=(0,n.__name)(function(){return d.records.branches},"getBranches"),k=(0,n.__name)(function(){return d.records.commits},"getCommits"),M=(0,n.__name)(function(){let t=[...d.records.commits.values()];return t.forEach(function(t){n.log.debug(t.id)}),t.sort((t,c)=>t.seq-c.seq),t},"getCommitsArray"),R={commitType:s,getConfig:m,setDirection:u,setOptions:y,getOptions:p,commit:f,branch:x,merge:b,cherryPick:_,checkout:v,prettyPrint:E,clear:C,getBranchesAsObjArray:T,getBranches:L,getCommits:k,getCommitsArray:M,getCurrentBranch:(0,n.__name)(function(){return d.records.currBranch},"getCurrentBranch"),getDirection:(0,n.__name)(function(){return d.records.direction},"getDirection"),getHead:(0,n.__name)(function(){return d.records.head},"getHead"),setAccTitle:r.setAccTitle,getAccTitle:r.getAccTitle,getAccDescription:r.getAccDescription,setAccDescription:r.setAccDescription,setDiagramTitle:r.setDiagramTitle,getDiagramTitle:r.getDiagramTitle},P=(0,n.__name)((t,e)=>{for(let a of((0,c.populateCommonDb)(t,e),t.dir&&e.setDirection(t.dir),t.statements))A(a,e)},"populate"),A=(0,n.__name)((t,c)=>{let e={Commit:(0,n.__name)(t=>c.commit(I(t)),"Commit"),Branch:(0,n.__name)(t=>c.branch(G(t)),"Branch"),Merge:(0,n.__name)(t=>c.merge(O(t)),"Merge"),Checkout:(0,n.__name)(t=>c.checkout(q(t)),"Checkout"),CherryPicking:(0,n.__name)(t=>c.cherryPick(H(t)),"CherryPicking")}[t.$type];e?e(t):n.log.error("Unknown statement type: ".concat(t.$type))},"parseStatement"),I=(0,n.__name)(t=>{var c,e;return{id:t.id,msg:null!=(c=t.message)?c:"",type:void 0!==t.type?s[t.type]:s.NORMAL,tags:null!=(e=t.tags)?e:void 0}},"parseCommit"),G=(0,n.__name)(t=>{var c;return{name:t.name,order:null!=(c=t.order)?c:0}},"parseBranch"),O=(0,n.__name)(t=>{var c,e;return{branch:t.branch,id:null!=(c=t.id)?c:"",type:void 0!==t.type?s[t.type]:void 0,tags:null!=(e=t.tags)?e:void 0}},"parseMerge"),q=(0,n.__name)(t=>t.branch,"parseCheckout"),H=(0,n.__name)(t=>{var c;return{id:t.id,targetId:"",tags:(null==(c=t.tags)?void 0:c.length)===0?void 0:t.tags,parent:t.parent}},"parseCherryPicking"),z={parse:(0,n.__name)(async t=>{let c=await (0,o.parse)("gitGraph",t);n.log.debug(c),P(c,R)},"parse")},D=(0,r.getConfig2)(),S=null==D?void 0:D.gitGraph,N=new Map,W=new Map,j=new Map,K=[],F=0,U="LR",Y=(0,n.__name)(()=>{N.clear(),W.clear(),j.clear(),F=0,K=[],U="LR"},"clear"),V=(0,n.__name)(t=>{let c=document.createElementNS("http://www.w3.org/2000/svg","text");return("string"==typeof t?t.split(/\\n|\n|<br\s*\/?>/gi):t).forEach(t=>{let e=document.createElementNS("http://www.w3.org/2000/svg","tspan");e.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),e.setAttribute("dy","1em"),e.setAttribute("x","0"),e.setAttribute("class","row"),e.textContent=t.trim(),c.appendChild(e)}),c},"drawText"),$=(0,n.__name)(t=>{let c,e,a;return"BT"===U?(e=(0,n.__name)((t,c)=>t<=c,"comparisonFunc"),a=1/0):(e=(0,n.__name)((t,c)=>t>=c,"comparisonFunc"),a=0),t.forEach(t=>{var r,n;let o="TB"===U||"BT"==U?null==(r=W.get(t))?void 0:r.y:null==(n=W.get(t))?void 0:n.x;void 0!==o&&e(o,a)&&(c=t,a=o)}),c},"findClosestParent"),J=(0,n.__name)(t=>{let c="",e=1/0;return t.forEach(t=>{let a=W.get(t).y;a<=e&&(c=t,e=a)}),c||void 0},"findClosestParentBT"),Q=(0,n.__name)((t,c,e)=>{let a=e,r=e,n=[];t.forEach(t=>{let e=c.get(t);if(!e)throw Error("Commit not found for key ".concat(t));e.parents.length?r=Math.max(a=Z(e),r):n.push(e),tt(e,a)}),a=r,n.forEach(t=>{tc(t,a,e)}),t.forEach(t=>{let e=c.get(t);if(null==e?void 0:e.parents.length){let t=J(e.parents);(a=W.get(t).y-40)<=r&&(r=a);let c=N.get(e.branch).pos,n=a-10;W.set(e.id,{x:c,y:n})}})},"setParallelBTPos"),X=(0,n.__name)(t=>{var c;let e=$(t.parents.filter(t=>null!==t));if(!e)throw Error("Closest parent not found for commit ".concat(t.id));let a=null==(c=W.get(e))?void 0:c.y;if(void 0===a)throw Error("Closest parent position not found for commit ".concat(t.id));return a},"findClosestParentPos"),Z=(0,n.__name)(t=>X(t)+40,"calculateCommitPosition"),tt=(0,n.__name)((t,c)=>{let e=N.get(t.branch);if(!e)throw Error("Branch not found for commit ".concat(t.id));let a=e.pos,r=c+10;return W.set(t.id,{x:a,y:r}),{x:a,y:r}},"setCommitPosition"),tc=(0,n.__name)((t,c,e)=>{let a=N.get(t.branch);if(!a)throw Error("Branch not found for commit ".concat(t.id));let r=a.pos;W.set(t.id,{x:r,y:c+e})},"setRootPosition"),te=(0,n.__name)((t,c,e,a,r,n)=>{if(n===s.HIGHLIGHT)t.append("rect").attr("x",e.x-10).attr("y",e.y-10).attr("width",20).attr("height",20).attr("class","commit ".concat(c.id," commit-highlight").concat(r%8," ").concat(a,"-outer")),t.append("rect").attr("x",e.x-6).attr("y",e.y-6).attr("width",12).attr("height",12).attr("class","commit ".concat(c.id," commit").concat(r%8," ").concat(a,"-inner"));else if(n===s.CHERRY_PICK)t.append("circle").attr("cx",e.x).attr("cy",e.y).attr("r",10).attr("class","commit ".concat(c.id," ").concat(a)),t.append("circle").attr("cx",e.x-3).attr("cy",e.y+2).attr("r",2.75).attr("fill","#fff").attr("class","commit ".concat(c.id," ").concat(a)),t.append("circle").attr("cx",e.x+3).attr("cy",e.y+2).attr("r",2.75).attr("fill","#fff").attr("class","commit ".concat(c.id," ").concat(a)),t.append("line").attr("x1",e.x+3).attr("y1",e.y+1).attr("x2",e.x).attr("y2",e.y-5).attr("stroke","#fff").attr("class","commit ".concat(c.id," ").concat(a)),t.append("line").attr("x1",e.x-3).attr("y1",e.y+1).attr("x2",e.x).attr("y2",e.y-5).attr("stroke","#fff").attr("class","commit ".concat(c.id," ").concat(a));else{let o=t.append("circle");if(o.attr("cx",e.x),o.attr("cy",e.y),o.attr("r",c.type===s.MERGE?9:10),o.attr("class","commit ".concat(c.id," commit").concat(r%8)),n===s.MERGE){let n=t.append("circle");n.attr("cx",e.x),n.attr("cy",e.y),n.attr("r",6),n.attr("class","commit ".concat(a," ").concat(c.id," commit").concat(r%8))}n===s.REVERSE&&t.append("path").attr("d","M ".concat(e.x-5,",").concat(e.y-5,"L").concat(e.x+5,",").concat(e.y+5,"M").concat(e.x-5,",").concat(e.y+5,"L").concat(e.x+5,",").concat(e.y-5)).attr("class","commit ".concat(a," ").concat(c.id," commit").concat(r%8))}},"drawCommitBullet"),ta=(0,n.__name)((t,c,e,a)=>{if(c.type!==s.CHERRY_PICK&&(c.customId&&c.type===s.MERGE||c.type!==s.MERGE)&&(null==S?void 0:S.showCommitLabel)){var r;let n=t.append("g"),o=n.insert("rect").attr("class","commit-label-bkg"),i=n.append("text").attr("x",a).attr("y",e.y+25).attr("class","commit-label").text(c.id),s=null==(r=i.node())?void 0:r.getBBox();if(s&&(o.attr("x",e.posWithOffset-s.width/2-2).attr("y",e.y+13.5).attr("width",s.width+4).attr("height",s.height+4),"TB"===U||"BT"===U?(o.attr("x",e.x-(s.width+16+5)).attr("y",e.y-12),i.attr("x",e.x-(s.width+16)).attr("y",e.y+s.height-12)):i.attr("x",e.posWithOffset-s.width/2),S.rotateCommitLabel))if("TB"===U||"BT"===U)i.attr("transform","rotate(-45, "+e.x+", "+e.y+")"),o.attr("transform","rotate(-45, "+e.x+", "+e.y+")");else{let t=-7.5-(s.width+10)/25*9.5,c=10+s.width/25*8.5;n.attr("transform","translate("+t+", "+c+") rotate(-45, "+a+", "+e.y+")")}}},"drawCommitLabel"),tr=(0,n.__name)((t,c,e,a)=>{if(c.tags.length>0){let n=0,o=0,i=0,s=[];for(let a of c.tags.reverse()){var r;let c=t.insert("polygon"),l=t.append("circle"),m=t.append("text").attr("y",e.y-16-n).attr("class","tag-label").text(a),d=null==(r=m.node())?void 0:r.getBBox();if(!d)throw Error("Tag bbox not found");o=Math.max(o,d.width),i=Math.max(i,d.height),m.attr("x",e.posWithOffset-d.width/2),s.push({tag:m,hole:l,rect:c,yOffset:n}),n+=20}for(let{tag:t,hole:c,rect:r,yOffset:n}of s){let s=i/2,l=e.y-19.2-n;if(r.attr("class","tag-label-bkg").attr("points","\n      ".concat(a-o/2-2,",").concat(l+2,"  \n      ").concat(a-o/2-2,",").concat(l-2,"\n      ").concat(e.posWithOffset-o/2-4,",").concat(l-s-2,"\n      ").concat(e.posWithOffset+o/2+4,",").concat(l-s-2,"\n      ").concat(e.posWithOffset+o/2+4,",").concat(l+s+2,"\n      ").concat(e.posWithOffset-o/2-4,",").concat(l+s+2)),c.attr("cy",l).attr("cx",a-o/2+2).attr("r",1.5).attr("class","tag-hole"),"TB"===U||"BT"===U){let i=a+n;r.attr("class","tag-label-bkg").attr("points","\n        ".concat(e.x,",").concat(i+2,"\n        ").concat(e.x,",").concat(i-2,"\n        ").concat(e.x+10,",").concat(i-s-2,"\n        ").concat(e.x+10+o+4,",").concat(i-s-2,"\n        ").concat(e.x+10+o+4,",").concat(i+s+2,"\n        ").concat(e.x+10,",").concat(i+s+2)).attr("transform","translate(12,12) rotate(45, "+e.x+","+a+")"),c.attr("cx",e.x+2).attr("cy",i).attr("transform","translate(12,12) rotate(45, "+e.x+","+a+")"),t.attr("x",e.x+5).attr("y",i+3).attr("transform","translate(14,14) rotate(45, "+e.x+","+a+")")}}}},"drawCommitTags"),tn=(0,n.__name)(t=>{var c;switch(null!=(c=t.customType)?c:t.type){case s.NORMAL:return"commit-normal";case s.REVERSE:return"commit-reverse";case s.HIGHLIGHT:return"commit-highlight";case s.MERGE:return"commit-merge";case s.CHERRY_PICK:return"commit-cherry-pick";default:return"commit-normal"}},"getCommitClassType"),to=(0,n.__name)((t,c,e,a)=>{var r,n,o;let i={x:0,y:0};if(t.parents.length>0){let e=$(t.parents);if(e){let o=null!=(r=a.get(e))?r:i;return"TB"===c?o.y+40:"BT"===c?(null!=(n=a.get(t.id))?n:i).y-40:o.x+40}}else if("TB"===c)return 30;else if("BT"===c)return(null!=(o=a.get(t.id))?o:i).y-40;return 0},"calculatePosition"),ti=(0,n.__name)((t,c,e)=>{var a,r;let n="BT"===U&&e?c:c+10,o="TB"===U||"BT"===U?n:null==(a=N.get(t.branch))?void 0:a.pos,i="TB"===U||"BT"===U?null==(r=N.get(t.branch))?void 0:r.pos:n;if(void 0===i||void 0===o)throw Error("Position were undefined for commit ".concat(t.id));return{x:i,y:o,posWithOffset:n}},"getCommitPosition"),ts=(0,n.__name)((t,c,e)=>{var a;if(!S)throw Error("GitGraph config not found");let r=t.append("g").attr("class","commit-bullets"),o=t.append("g").attr("class","commit-labels"),i=30*("TB"===U||"BT"===U),s=[...c.keys()],l=null!=(a=null==S?void 0:S.parallelCommits)&&a,m=s.sort((0,n.__name)((t,e)=>{var a,r;let n=null==(a=c.get(t))?void 0:a.seq,o=null==(r=c.get(e))?void 0:r.seq;return void 0!==n&&void 0!==o?n-o:0},"sortKeys"));"BT"===U&&(l&&Q(m,c,i),m=m.reverse()),m.forEach(t=>{let a=c.get(t);if(!a)throw Error("Commit not found for key ".concat(t));l&&(i=to(a,U,i,W));let n=ti(a,i,l);if(e){var s,m,d;let t=tn(a),c=null!=(m=a.customType)?m:a.type,e=null!=(d=null==(s=N.get(a.branch))?void 0:s.index)?d:0;te(r,a,n,t,e,c),ta(o,a,n,i),tr(o,a,n,i)}"TB"===U||"BT"===U?W.set(a.id,{x:n.x,y:n.posWithOffset}):W.set(a.id,{x:n.posWithOffset,y:n.y}),(i="BT"===U&&l?i+40:i+40+10)>F&&(F=i)})},"drawCommits"),tl=(0,n.__name)((t,c,e,a,r)=>{let o=("TB"===U||"BT"===U?e.x<a.x:e.y<a.y)?c.branch:t.branch,i=(0,n.__name)(t=>t.branch===o,"isOnBranchToGetCurve"),s=(0,n.__name)(e=>e.seq>t.seq&&e.seq<c.seq,"isBetweenCommits");return[...r.values()].some(t=>s(t)&&i(t))},"shouldRerouteArrow"),tm=(0,n.__name)(function(t,c){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=t+Math.abs(t-c)/2;if(e>5)return a;if(K.every(t=>Math.abs(t-a)>=10))return K.push(a),a;let r=Math.abs(t-c);return tm(t,c-r/5,e+1)},"findLane"),td=(0,n.__name)((t,c,e,a)=>{var r,n,o,i,l;let m,d=W.get(c.id),h=W.get(e.id);if(void 0===d||void 0===h)throw Error("Commit positions not found for commits ".concat(c.id," and ").concat(e.id));let g=tl(c,e,d,h,a),u="",y="",p=0,f=0,x=null==(r=N.get(e.branch))?void 0:r.index;if(e.type===s.MERGE&&c.id!==e.parents[0]&&(x=null==(n=N.get(c.branch))?void 0:n.index),g){u="A 10 10, 0, 0, 0,",y="A 10 10, 0, 0, 1,",p=10,f=10;let t=d.y<h.y?tm(d.y,h.y):tm(h.y,d.y),e=d.x<h.x?tm(d.x,h.x):tm(h.x,d.x);"TB"===U?d.x<h.x?m="M ".concat(d.x," ").concat(d.y," L ").concat(e-p," ").concat(d.y," ").concat(y," ").concat(e," ").concat(d.y+f," L ").concat(e," ").concat(h.y-p," ").concat(u," ").concat(e+f," ").concat(h.y," L ").concat(h.x," ").concat(h.y):(x=null==(o=N.get(c.branch))?void 0:o.index,m="M ".concat(d.x," ").concat(d.y," L ").concat(e+p," ").concat(d.y," ").concat(u," ").concat(e," ").concat(d.y+f," L ").concat(e," ").concat(h.y-p," ").concat(y," ").concat(e-f," ").concat(h.y," L ").concat(h.x," ").concat(h.y)):"BT"===U?d.x<h.x?m="M ".concat(d.x," ").concat(d.y," L ").concat(e-p," ").concat(d.y," ").concat(u," ").concat(e," ").concat(d.y-f," L ").concat(e," ").concat(h.y+p," ").concat(y," ").concat(e+f," ").concat(h.y," L ").concat(h.x," ").concat(h.y):(x=null==(i=N.get(c.branch))?void 0:i.index,m="M ".concat(d.x," ").concat(d.y," L ").concat(e+p," ").concat(d.y," ").concat(y," ").concat(e," ").concat(d.y-f," L ").concat(e," ").concat(h.y+p," ").concat(u," ").concat(e-f," ").concat(h.y," L ").concat(h.x," ").concat(h.y)):d.y<h.y?m="M ".concat(d.x," ").concat(d.y," L ").concat(d.x," ").concat(t-p," ").concat(u," ").concat(d.x+f," ").concat(t," L ").concat(h.x-p," ").concat(t," ").concat(y," ").concat(h.x," ").concat(t+f," L ").concat(h.x," ").concat(h.y):(x=null==(l=N.get(c.branch))?void 0:l.index,m="M ".concat(d.x," ").concat(d.y," L ").concat(d.x," ").concat(t+p," ").concat(y," ").concat(d.x+f," ").concat(t," L ").concat(h.x-p," ").concat(t," ").concat(u," ").concat(h.x," ").concat(t-f," L ").concat(h.x," ").concat(h.y))}else u="A 20 20, 0, 0, 0,",y="A 20 20, 0, 0, 1,",p=20,f=20,"TB"===U?(d.x<h.x&&(m=e.type===s.MERGE&&c.id!==e.parents[0]?"M ".concat(d.x," ").concat(d.y," L ").concat(d.x," ").concat(h.y-p," ").concat(u," ").concat(d.x+f," ").concat(h.y," L ").concat(h.x," ").concat(h.y):"M ".concat(d.x," ").concat(d.y," L ").concat(h.x-p," ").concat(d.y," ").concat(y," ").concat(h.x," ").concat(d.y+f," L ").concat(h.x," ").concat(h.y)),d.x>h.x&&(u="A 20 20, 0, 0, 0,",y="A 20 20, 0, 0, 1,",p=20,f=20,m=e.type===s.MERGE&&c.id!==e.parents[0]?"M ".concat(d.x," ").concat(d.y," L ").concat(d.x," ").concat(h.y-p," ").concat(y," ").concat(d.x-f," ").concat(h.y," L ").concat(h.x," ").concat(h.y):"M ".concat(d.x," ").concat(d.y," L ").concat(h.x+p," ").concat(d.y," ").concat(u," ").concat(h.x," ").concat(d.y+f," L ").concat(h.x," ").concat(h.y)),d.x===h.x&&(m="M ".concat(d.x," ").concat(d.y," L ").concat(h.x," ").concat(h.y))):"BT"===U?(d.x<h.x&&(m=e.type===s.MERGE&&c.id!==e.parents[0]?"M ".concat(d.x," ").concat(d.y," L ").concat(d.x," ").concat(h.y+p," ").concat(y," ").concat(d.x+f," ").concat(h.y," L ").concat(h.x," ").concat(h.y):"M ".concat(d.x," ").concat(d.y," L ").concat(h.x-p," ").concat(d.y," ").concat(u," ").concat(h.x," ").concat(d.y-f," L ").concat(h.x," ").concat(h.y)),d.x>h.x&&(u="A 20 20, 0, 0, 0,",y="A 20 20, 0, 0, 1,",p=20,f=20,m=e.type===s.MERGE&&c.id!==e.parents[0]?"M ".concat(d.x," ").concat(d.y," L ").concat(d.x," ").concat(h.y+p," ").concat(u," ").concat(d.x-f," ").concat(h.y," L ").concat(h.x," ").concat(h.y):"M ".concat(d.x," ").concat(d.y," L ").concat(h.x-p," ").concat(d.y," ").concat(u," ").concat(h.x," ").concat(d.y-f," L ").concat(h.x," ").concat(h.y)),d.x===h.x&&(m="M ".concat(d.x," ").concat(d.y," L ").concat(h.x," ").concat(h.y))):(d.y<h.y&&(m=e.type===s.MERGE&&c.id!==e.parents[0]?"M ".concat(d.x," ").concat(d.y," L ").concat(h.x-p," ").concat(d.y," ").concat(y," ").concat(h.x," ").concat(d.y+f," L ").concat(h.x," ").concat(h.y):"M ".concat(d.x," ").concat(d.y," L ").concat(d.x," ").concat(h.y-p," ").concat(u," ").concat(d.x+f," ").concat(h.y," L ").concat(h.x," ").concat(h.y)),d.y>h.y&&(m=e.type===s.MERGE&&c.id!==e.parents[0]?"M ".concat(d.x," ").concat(d.y," L ").concat(h.x-p," ").concat(d.y," ").concat(u," ").concat(h.x," ").concat(d.y-f," L ").concat(h.x," ").concat(h.y):"M ".concat(d.x," ").concat(d.y," L ").concat(d.x," ").concat(h.y+p," ").concat(y," ").concat(d.x+f," ").concat(h.y," L ").concat(h.x," ").concat(h.y)),d.y===h.y&&(m="M ".concat(d.x," ").concat(d.y," L ").concat(h.x," ").concat(h.y)));if(void 0===m)throw Error("Line definition not found");t.append("path").attr("d",m).attr("class","arrow arrow"+x%8)},"drawArrow"),th=(0,n.__name)((t,c)=>{let e=t.append("g").attr("class","commit-arrows");[...c.keys()].forEach(t=>{let a=c.get(t);a.parents&&a.parents.length>0&&a.parents.forEach(t=>{td(e,c.get(t),a,c)})})},"drawArrows"),tg=(0,n.__name)((t,c)=>{let e=t.append("g");c.forEach((t,c)=>{var a;let r=c%8,n=null==(a=N.get(t.name))?void 0:a.pos;if(void 0===n)throw Error("Position not found for branch ".concat(t.name));let o=e.append("line");o.attr("x1",0),o.attr("y1",n),o.attr("x2",F),o.attr("y2",n),o.attr("class","branch branch"+r),"TB"===U?(o.attr("y1",30),o.attr("x1",n),o.attr("y2",F),o.attr("x2",n)):"BT"===U&&(o.attr("y1",F),o.attr("x1",n),o.attr("y2",30),o.attr("x2",n)),K.push(n);let i=V(t.name),s=e.insert("rect"),l=e.insert("g").attr("class","branchLabel").insert("g").attr("class","label branch-label"+r);l.node().appendChild(i);let m=i.getBBox();s.attr("class","branchLabelBkg label"+r).attr("rx",4).attr("ry",4).attr("x",-m.width-4-30*((null==S?void 0:S.rotateCommitLabel)===!0)).attr("y",-m.height/2+8).attr("width",m.width+18).attr("height",m.height+4),l.attr("transform","translate("+(-m.width-14-30*((null==S?void 0:S.rotateCommitLabel)===!0))+", "+(n-m.height/2-1)+")"),"TB"===U?(s.attr("x",n-m.width/2-10).attr("y",0),l.attr("transform","translate("+(n-m.width/2-5)+", 0)")):"BT"===U?(s.attr("x",n-m.width/2-10).attr("y",F),l.attr("transform","translate("+(n-m.width/2-5)+", "+F+")")):s.attr("transform","translate(-19, "+(n-m.height/2)+")")})},"drawBranches"),tu=(0,n.__name)(function(t,c,e,a,r){return N.set(t,{pos:c,index:e}),c+=50+40*!!r+("TB"===U||"BT"===U?a.width/2:0)},"setBranchPosition"),ty={parser:z,db:R,renderer:{draw:(0,n.__name)(function(t,c,e,o){var s,l;if(Y(),n.log.debug("in gitgraph renderer",t+"\n","id:",c,e),!S)throw Error("GitGraph config not found");let m=null!=(s=S.rotateCommitLabel)&&s,d=o.db;j=d.getCommits();let h=d.getBranchesAsObjArray();U=d.getDirection();let g=(0,i.select)('[id="'.concat(c,'"]')),u=0;h.forEach((t,c)=>{var e;let a=V(t.name),r=g.append("g"),n=r.insert("g").attr("class","branchLabel"),o=n.insert("g").attr("class","label branch-label");null==(e=o.node())||e.appendChild(a);let i=a.getBBox();u=tu(t.name,u,c,i,m),o.remove(),n.remove(),r.remove()}),ts(g,j,!1),S.showBranches&&tg(g,h),th(g,j),ts(g,j,!0),a.utils_default.insertTitle(g,"gitTitleText",null!=(l=S.titleTopMargin)?l:0,d.getDiagramTitle()),(0,r.setupGraphViewbox2)(void 0,g,S.diagramPadding,S.useMaxWidth)},"draw")},styles:(0,n.__name)(t=>"\n  .commit-id,\n  .commit-msg,\n  .branch-label {\n    fill: lightgrey;\n    color: lightgrey;\n    font-family: 'trebuchet ms', verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n  }\n  ".concat([0,1,2,3,4,5,6,7].map(c=>"\n        .branch-label".concat(c," { fill: ").concat(t["gitBranchLabel"+c],"; }\n        .commit").concat(c," { stroke: ").concat(t["git"+c],"; fill: ").concat(t["git"+c],"; }\n        .commit-highlight").concat(c," { stroke: ").concat(t["gitInv"+c],"; fill: ").concat(t["gitInv"+c],"; }\n        .label").concat(c,"  { fill: ").concat(t["git"+c],"; }\n        .arrow").concat(c," { stroke: ").concat(t["git"+c],"; }\n        ")).join("\n"),"\n\n  .branch {\n    stroke-width: 1;\n    stroke: ").concat(t.lineColor,";\n    stroke-dasharray: 2;\n  }\n  .commit-label { font-size: ").concat(t.commitLabelFontSize,"; fill: ").concat(t.commitLabelColor,";}\n  .commit-label-bkg { font-size: ").concat(t.commitLabelFontSize,"; fill: ").concat(t.commitLabelBackground,"; opacity: 0.5; }\n  .tag-label { font-size: ").concat(t.tagLabelFontSize,"; fill: ").concat(t.tagLabelColor,";}\n  .tag-label-bkg { fill: ").concat(t.tagLabelBackground,"; stroke: ").concat(t.tagLabelBorder,"; }\n  .tag-hole { fill: ").concat(t.textColor,"; }\n\n  .commit-merge {\n    stroke: ").concat(t.primaryColor,";\n    fill: ").concat(t.primaryColor,";\n  }\n  .commit-reverse {\n    stroke: ").concat(t.primaryColor,";\n    fill: ").concat(t.primaryColor,";\n    stroke-width: 3;\n  }\n  .commit-highlight-outer {\n  }\n  .commit-highlight-inner {\n    stroke: ").concat(t.primaryColor,";\n    fill: ").concat(t.primaryColor,";\n  }\n\n  .arrow { stroke-width: 8; stroke-linecap: round; fill: none}\n  .gitTitleText {\n    text-anchor: middle;\n    font-size: 18px;\n    fill: ").concat(t.textColor,";\n  }\n"),"getStyles")}}]);