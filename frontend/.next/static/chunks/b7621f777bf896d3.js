(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,817782,t=>{"use strict";t.s(["forEach",()=>e.default]);var e=t.i(984891)},169109,439616,t=>{"use strict";t.s(["flatten",()=>i],169109),t.s(["default",()=>i],439616);var e=t.i(661196);let i=function(t){return(null==t?0:t.length)?(0,e.default)(t,1):[]}},553908,398545,144515,49205,t=>{"use strict";t.s(["map",()=>d],553908),t.s(["default",()=>d],144515);var e=t.i(982735),i=t.i(450266);t.s(["default",()=>r],398545);var n=t.i(369104),a=t.i(441338);let r=function(t,e){var i=-1,r=(0,a.default)(t)?Array(t.length):[];return(0,n.default)(t,function(t,n,a){r[++i]=e(t,n,a)}),r};var s=t.i(644071);let d=function(t,n){return((0,s.default)(t)?e.default:r)(t,(0,i.default)(n,3))};t.s(["default",()=>y],49205);var o=/\s/;let g=function(t){for(var e=t.length;e--&&o.test(t.charAt(e)););return e};var l=/^\s+/,u=t.i(159110),h=t.i(316827),f=0/0,c=/^[-+]0x[0-9a-f]+$/i,p=/^0b[01]+$/i,_=/^0o[0-7]+$/i,v=parseInt;let C=function(t){if("number"==typeof t)return t;if((0,h.default)(t))return f;if((0,u.default)(t)){var e,i="function"==typeof t.valueOf?t.valueOf():t;t=(0,u.default)(i)?i+"":i}if("string"!=typeof t)return 0===t?t:+t;t=(e=t)?e.slice(0,g(e)+1).replace(l,""):e;var n=p.test(t);return n||_.test(t)?v(t.slice(2),n?2:8):c.test(t)?f:+t};var x=1/0;let y=function(t){return t?(t=C(t))===x||t===-x?(t<0?-1:1)*17976931348623157e292:t==t?t:0:0===t?t:0}},533837,t=>{"use strict";t.s(["default",()=>o],533837);var e=t.i(426881),i=t.i(508888),n=t.i(172778),a=t.i(448178),r=t.i(159110),s=t.i(277734);let d=function(t,e,d,o){if(!(0,r.default)(t))return t;e=(0,n.default)(e,t);for(var g=-1,l=e.length,u=l-1,h=t;null!=h&&++g<l;){var f=(0,s.default)(e[g]),c=d;if("__proto__"===f||"constructor"===f||"prototype"===f)break;if(g!=u){var p=h[f];void 0===(c=o?o(p,f,h):void 0)&&(c=(0,r.default)(p)?p:(0,a.default)(e[g+1])?[]:{})}(0,i.default)(h,f,c),h=h[f]}return t},o=function(t,i,a){for(var r=-1,s=i.length,o={};++r<s;){var g=i[r],l=(0,e.default)(t,g);a(l,g)&&d(o,(0,n.default)(g,t),l)}return o}},161378,t=>{"use strict";t.s(["defaults",()=>d],161378);var e=t.i(790104),i=t.i(208986),n=t.i(327925),a=t.i(872585),r=Object.prototype,s=r.hasOwnProperty;let d=(0,e.default)(function(t,e){t=Object(t);var d=-1,o=e.length,g=o>2?e[2]:void 0;for(g&&(0,n.default)(e[0],e[1],g)&&(o=1);++d<o;)for(var l=e[d],u=(0,a.default)(l),h=-1,f=u.length;++h<f;){var c=u[h],p=t[c];(void 0===p||(0,i.default)(p,r[c])&&!s.call(t,c))&&(t[c]=l[c])}return t})},901101,t=>{"use strict";t.s(["default",()=>i]);var e=t.i(316827);let i=function(t,i,n){for(var a=-1,r=t.length;++a<r;){var s=t[a],d=i(s);if(null!=d&&(void 0===o?d==d&&!(0,e.default)(d):n(d,o)))var o=d,g=s}return g}},421813,t=>{"use strict";t.s(["last",()=>e],421813);let e=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},309113,634904,t=>{"use strict";t.s(["default",()=>a],309113);var e=t.i(901101);t.s(["default",()=>i],634904);let i=function(t,e){return t<e};var n=t.i(910022);let a=function(t){return t&&t.length?(0,e.default)(t,n.default,i):void 0}},485186,t=>{"use strict";t.s(["has",()=>a],485186);var e=Object.prototype.hasOwnProperty;let i=function(t,i){return null!=t&&e.call(t,i)};var n=t.i(878978);let a=function(t,e){return null!=t&&(0,n.default)(t,e,i)}},877811,t=>{"use strict";t.s(["default",()=>a]);var e=t.i(450266),i=t.i(441338),n=t.i(154069);let a=function(t){return function(a,r,s){var d=Object(a);if(!(0,i.default)(a)){var o=(0,e.default)(r,3);a=(0,n.default)(a),r=function(t){return o(d[t],t,d)}}var g=t(a,r,s);return g>-1?d[o?a[g]:g]:void 0}}},37557,t=>{"use strict";t.s(["default",()=>i]);var e=t.i(49205);let i=function(t){var i=(0,e.default)(t),n=i%1;return i==i?n?i-n:i:0}},735962,t=>{"use strict";t.s(["find",()=>s],735962);var e=t.i(877811),i=t.i(653411),n=t.i(450266),a=t.i(37557),r=Math.max;let s=(0,e.default)(function(t,e,s){var d=null==t?0:t.length;if(!d)return -1;var o=null==s?0:(0,a.default)(s);return o<0&&(o=r(d+o,0)),(0,i.default)(t,(0,n.default)(e,3),o)})},892474,t=>{"use strict";t.s(["default",()=>a]);var e=t.i(835287),i=t.i(644071),n=t.i(563615);let a=function(t){return"string"==typeof t||!(0,i.default)(t)&&(0,n.default)(t)&&"[object String]"==(0,e.default)(t)}},36405,t=>{"use strict";t.s(["default",()=>i]);var e=RegExp("[\\u200d\ud800-\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");let i=function(t){return e.test(t)}},967168,t=>{"use strict";t.s(["isArray",()=>e.default]);var e=t.i(644071)},35815,t=>{"use strict";t.s(["setupViewPortForSVG",()=>n]);var e=t.i(80926),i=t.i(171206),n=(0,i.__name)((t,n,s,d)=>{t.attr("class",s);let{width:o,height:g,x:l,y:u}=a(t,n);(0,e.configureSvgSize)(t,g,o,d);let h=r(l,u,o,g,n);t.attr("viewBox",h),i.log.debug("viewBox configured: ".concat(h," with padding: ").concat(n))},"setupViewPortForSVG"),a=(0,i.__name)((t,e)=>{var i;let n=(null==(i=t.node())?void 0:i.getBBox())||{width:0,height:0,x:0,y:0};return{width:n.width+2*e,height:n.height+2*e,x:n.x,y:n.y}},"calculateDimensionsWithPadding"),r=(0,i.__name)((t,e,i,n,a)=>"".concat(t-a," ").concat(e-a," ").concat(i," ").concat(n),"createViewBox")},707510,t=>{"use strict";t.s(["getDiagramElement",()=>n]);var e=t.i(171206);t.i(947716);var i=t.i(723685),n=(0,e.__name)((t,e)=>{let n;return"sandbox"===e&&(n=(0,i.select)("#i"+t)),("sandbox"===e?(0,i.select)(n.nodes()[0].contentDocument.body):(0,i.select)("body")).select('[id="'.concat(t,'"]'))},"getDiagramElement")},566661,587652,178662,704642,t=>{"use strict";t.s([],566661),t.s(["Graph",()=>p],704642);var e=t.i(621017);t.s(["constant",()=>i.default],587652);var i=t.i(949132),i=i,n=t.i(37050),a=t.i(812319),r=t.i(615308);t.s(["each",()=>s.default],178662);var s=t.i(984891),s=s,d=t.i(595007),o=t.i(661196),g=t.i(790104),l=t.i(981597),u=t.i(113431),h=(0,g.default)(function(t){return(0,l.default)((0,o.default)(t,1,u.default,!0))}),f=t.i(126841),c=t.i(681047);class p{isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(t){return this._label=t,this}graph(){return this._label}setDefaultNodeLabel(t){return e.isFunction(t)||(t=i.default(t)),this._defaultNodeLabelFn=t,this}nodeCount(){return this._nodeCount}nodes(){return n.keys(this._nodes)}sources(){var t=this;return a.filter(this.nodes(),function(e){return r.isEmpty(t._in[e])})}sinks(){var t=this;return a.filter(this.nodes(),function(e){return r.isEmpty(t._out[e])})}setNodes(t,e){var i=arguments,n=this;return s.default(t,function(t){i.length>1?n.setNode(t,e):n.setNode(t)}),this}setNode(t,e){return Object.prototype.hasOwnProperty.call(this._nodes,t)?arguments.length>1&&(this._nodes[t]=e):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]="\0",this._children[t]={},this._children["\0"][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount),this}node(t){return this._nodes[t]}hasNode(t){return Object.prototype.hasOwnProperty.call(this._nodes,t)}removeNode(t){if(Object.prototype.hasOwnProperty.call(this._nodes,t)){var e=t=>this.removeEdge(this._edgeObjs[t]);delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],s.default(this.children(t),t=>{this.setParent(t)}),delete this._children[t]),s.default(n.keys(this._in[t]),e),delete this._in[t],delete this._preds[t],s.default(n.keys(this._out[t]),e),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this}setParent(t,e){if(!this._isCompound)throw Error("Cannot set parent in a non-compound graph");if(d.isUndefined(e))e="\0";else{e+="";for(var i=e;!d.isUndefined(i);i=this.parent(i))if(i===t)throw Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this}_removeFromParentsChildList(t){delete this._children[this._parent[t]][t]}parent(t){if(this._isCompound){var e=this._parent[t];if("\0"!==e)return e}}children(t){if(d.isUndefined(t)&&(t="\0"),this._isCompound){var e=this._children[t];if(e)return n.keys(e)}else if("\0"===t)return this.nodes();else if(this.hasNode(t))return[]}predecessors(t){var e=this._preds[t];if(e)return n.keys(e)}successors(t){var e=this._sucs[t];if(e)return n.keys(e)}neighbors(t){var e=this.predecessors(t);if(e)return h(e,this.successors(t))}isLeaf(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length}filterNodes(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var i=this;s.default(this._nodes,function(i,n){t(n)&&e.setNode(n,i)}),s.default(this._edgeObjs,function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,i.edge(t))});var n={};return this._isCompound&&s.default(e.nodes(),function(t){e.setParent(t,function t(a){var r=i.parent(a);return void 0===r||e.hasNode(r)?(n[a]=r,r):r in n?n[r]:t(r)}(t))}),e}setDefaultEdgeLabel(t){return e.isFunction(t)||(t=i.default(t)),this._defaultEdgeLabelFn=t,this}edgeCount(){return this._edgeCount}edges(){return f.values(this._edgeObjs)}setPath(t,e){var i=this,n=arguments;return c.reduce(t,function(t,a){return n.length>1?i.setEdge(t,a,e):i.setEdge(t,a),a}),this}setEdge(){var t,e,i,n,a=!1,r=arguments[0];"object"==typeof r&&null!==r&&"v"in r?(t=r.v,e=r.w,i=r.name,2==arguments.length&&(n=arguments[1],a=!0)):(t=r,e=arguments[1],i=arguments[3],arguments.length>2&&(n=arguments[2],a=!0)),t=""+t,e=""+e,d.isUndefined(i)||(i=""+i);var s=C(this._isDirected,t,e,i);if(Object.prototype.hasOwnProperty.call(this._edgeLabels,s))return a&&(this._edgeLabels[s]=n),this;if(!d.isUndefined(i)&&!this._isMultigraph)throw Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[s]=a?n:this._defaultEdgeLabelFn(t,e,i);var o=function(t,e,i,n){var a=""+e,r=""+i;if(!t&&a>r){var s=a;a=r,r=s}var d={v:a,w:r};return n&&(d.name=n),d}(this._isDirected,t,e,i);return t=o.v,e=o.w,Object.freeze(o),this._edgeObjs[s]=o,_(this._preds[e],t),_(this._sucs[t],e),this._in[e][s]=o,this._out[t][s]=o,this._edgeCount++,this}edge(t,e,i){var n=1==arguments.length?x(this._isDirected,arguments[0]):C(this._isDirected,t,e,i);return this._edgeLabels[n]}hasEdge(t,e,i){var n=1==arguments.length?x(this._isDirected,arguments[0]):C(this._isDirected,t,e,i);return Object.prototype.hasOwnProperty.call(this._edgeLabels,n)}removeEdge(t,e,i){var n=1==arguments.length?x(this._isDirected,arguments[0]):C(this._isDirected,t,e,i),a=this._edgeObjs[n];return a&&(t=a.v,e=a.w,delete this._edgeLabels[n],delete this._edgeObjs[n],v(this._preds[e],t),v(this._sucs[t],e),delete this._in[e][n],delete this._out[t][n],this._edgeCount--),this}inEdges(t,e){var i=this._in[t];if(i){var n=f.values(i);return e?a.filter(n,function(t){return t.v===e}):n}}outEdges(t,e){var i=this._out[t];if(i){var n=f.values(i);return e?a.filter(n,function(t){return t.w===e}):n}}nodeEdges(t,e){var i=this.inEdges(t,e);if(i)return i.concat(this.outEdges(t,e))}constructor(t={}){this._isDirected=!Object.prototype.hasOwnProperty.call(t,"directed")||t.directed,this._isMultigraph=!!Object.prototype.hasOwnProperty.call(t,"multigraph")&&t.multigraph,this._isCompound=!!Object.prototype.hasOwnProperty.call(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=i.default(void 0),this._defaultEdgeLabelFn=i.default(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}}function _(t,e){t[e]?t[e]++:t[e]=1}function v(t,e){--t[e]||delete t[e]}function C(t,e,i,n){var a=""+e,r=""+i;if(!t&&a>r){var s=a;a=r,r=s}return a+"\x01"+r+"\x01"+(d.isUndefined(n)?"\0":n)}function x(t,e){return C(t,e.v,e.w,e.name)}p.prototype._nodeCount=0,p.prototype._edgeCount=0},292377,t=>{"use strict";t.s(["diagram",()=>D]);var e,i=t.i(209509);t.i(707510),t.i(35815),t.i(893016),t.i(754802),t.i(620502),t.i(407983),t.i(102256),t.i(833448),t.i(780262);var n=t.i(195923),a=t.i(80926),r=t.i(171206);t.i(947716);var s=t.i(723685);t.i(461696);var d=t.i(915888);t.i(566661);var o=t.i(704642),g=t.i(785833),l=t.i(891169),u=(0,r.__name)(t=>t.append("circle").attr("class","start-state").attr("r",(0,a.getConfig2)().state.sizeUnit).attr("cx",(0,a.getConfig2)().state.padding+(0,a.getConfig2)().state.sizeUnit).attr("cy",(0,a.getConfig2)().state.padding+(0,a.getConfig2)().state.sizeUnit),"drawStartState"),h=(0,r.__name)(t=>t.append("line").style("stroke","grey").style("stroke-dasharray","3").attr("x1",(0,a.getConfig2)().state.textHeight).attr("class","divider").attr("x2",2*(0,a.getConfig2)().state.textHeight).attr("y1",0).attr("y2",0),"drawDivider"),f=(0,r.__name)((t,e)=>{let i=t.append("text").attr("x",2*(0,a.getConfig2)().state.padding).attr("y",(0,a.getConfig2)().state.textHeight+2*(0,a.getConfig2)().state.padding).attr("font-size",(0,a.getConfig2)().state.fontSize).attr("class","state-title").text(e.id),n=i.node().getBBox();return t.insert("rect",":first-child").attr("x",(0,a.getConfig2)().state.padding).attr("y",(0,a.getConfig2)().state.padding).attr("width",n.width+2*(0,a.getConfig2)().state.padding).attr("height",n.height+2*(0,a.getConfig2)().state.padding).attr("rx",(0,a.getConfig2)().state.radius),i},"drawSimpleState"),c=(0,r.__name)((t,e)=>{let i=(0,r.__name)(function(t,e,i){let n=t.append("tspan").attr("x",2*(0,a.getConfig2)().state.padding).text(e);i||n.attr("dy",(0,a.getConfig2)().state.textHeight)},"addTspan"),n=t.append("text").attr("x",2*(0,a.getConfig2)().state.padding).attr("y",(0,a.getConfig2)().state.textHeight+1.3*(0,a.getConfig2)().state.padding).attr("font-size",(0,a.getConfig2)().state.fontSize).attr("class","state-title").text(e.descriptions[0]).node().getBBox(),s=n.height,d=t.append("text").attr("x",(0,a.getConfig2)().state.padding).attr("y",s+.4*(0,a.getConfig2)().state.padding+(0,a.getConfig2)().state.dividerMargin+(0,a.getConfig2)().state.textHeight).attr("class","state-description"),o=!0,g=!0;e.descriptions.forEach(function(t){o||(i(d,t,g),g=!1),o=!1});let l=t.append("line").attr("x1",(0,a.getConfig2)().state.padding).attr("y1",(0,a.getConfig2)().state.padding+s+(0,a.getConfig2)().state.dividerMargin/2).attr("y2",(0,a.getConfig2)().state.padding+s+(0,a.getConfig2)().state.dividerMargin/2).attr("class","descr-divider"),u=d.node().getBBox(),h=Math.max(u.width,n.width);return l.attr("x2",h+3*(0,a.getConfig2)().state.padding),t.insert("rect",":first-child").attr("x",(0,a.getConfig2)().state.padding).attr("y",(0,a.getConfig2)().state.padding).attr("width",h+2*(0,a.getConfig2)().state.padding).attr("height",u.height+s+2*(0,a.getConfig2)().state.padding).attr("rx",(0,a.getConfig2)().state.radius),t},"drawDescrState"),p=(0,r.__name)((t,e,i)=>{let n,r=(0,a.getConfig2)().state.padding,s=2*(0,a.getConfig2)().state.padding,d=t.node().getBBox(),o=d.width,g=d.x,l=t.append("text").attr("x",0).attr("y",(0,a.getConfig2)().state.titleShift).attr("font-size",(0,a.getConfig2)().state.fontSize).attr("class","state-title").text(e.id),u=l.node().getBBox().width+s,h=Math.max(u,o);h===o&&(h+=s);let f=t.node().getBBox();e.doc,n=g-r,u>o&&(n=(o-h)/2+r),Math.abs(g-f.x)<r&&u>o&&(n=g-(u-o)/2);let c=1-(0,a.getConfig2)().state.textHeight;return t.insert("rect",":first-child").attr("x",n).attr("y",c).attr("class",i?"alt-composit":"composit").attr("width",h).attr("height",f.height+(0,a.getConfig2)().state.textHeight+(0,a.getConfig2)().state.titleShift+1).attr("rx","0"),l.attr("x",n+r),u<=o&&l.attr("x",g+(h-s)/2-u/2+r),t.insert("rect",":first-child").attr("x",n).attr("y",(0,a.getConfig2)().state.titleShift-(0,a.getConfig2)().state.textHeight-(0,a.getConfig2)().state.padding).attr("width",h).attr("height",3*(0,a.getConfig2)().state.textHeight).attr("rx",(0,a.getConfig2)().state.radius),t.insert("rect",":first-child").attr("x",n).attr("y",(0,a.getConfig2)().state.titleShift-(0,a.getConfig2)().state.textHeight-(0,a.getConfig2)().state.padding).attr("width",h).attr("height",f.height+3+2*(0,a.getConfig2)().state.textHeight).attr("rx",(0,a.getConfig2)().state.radius),t},"addTitleAndBox"),_=(0,r.__name)(t=>(t.append("circle").attr("class","end-state-outer").attr("r",(0,a.getConfig2)().state.sizeUnit+(0,a.getConfig2)().state.miniPadding).attr("cx",(0,a.getConfig2)().state.padding+(0,a.getConfig2)().state.sizeUnit+(0,a.getConfig2)().state.miniPadding).attr("cy",(0,a.getConfig2)().state.padding+(0,a.getConfig2)().state.sizeUnit+(0,a.getConfig2)().state.miniPadding),t.append("circle").attr("class","end-state-inner").attr("r",(0,a.getConfig2)().state.sizeUnit).attr("cx",(0,a.getConfig2)().state.padding+(0,a.getConfig2)().state.sizeUnit+2).attr("cy",(0,a.getConfig2)().state.padding+(0,a.getConfig2)().state.sizeUnit+2)),"drawEndState"),v=(0,r.__name)((t,e)=>{let i=(0,a.getConfig2)().state.forkWidth,n=(0,a.getConfig2)().state.forkHeight;if(e.parentId){let t=i;i=n,n=t}return t.append("rect").style("stroke","black").style("fill","black").attr("width",i).attr("height",n).attr("x",(0,a.getConfig2)().state.padding).attr("y",(0,a.getConfig2)().state.padding)},"drawForkJoinState"),C=(0,r.__name)((t,e,i,n)=>{let r=0,s=n.append("text");s.style("text-anchor","start"),s.attr("class","noteText");let d=t.replace(/\r\n/g,"<br/>"),o=(d=d.replace(/\n/g,"<br/>")).split(a.common_default.lineBreakRegex),g=1.25*(0,a.getConfig2)().state.noteMargin;for(let t of o){let n=t.trim();if(n.length>0){let t=s.append("tspan");t.text(n),0===g&&(g+=t.node().getBBox().height),r+=g,t.attr("x",e+(0,a.getConfig2)().state.noteMargin),t.attr("y",i+r+1.25*(0,a.getConfig2)().state.noteMargin)}}return{textWidth:s.node().getBBox().width,textHeight:r}},"_drawLongText"),x=(0,r.__name)((t,e)=>{e.attr("class","state-note");let i=e.append("rect").attr("x",0).attr("y",(0,a.getConfig2)().state.padding),{textWidth:n,textHeight:r}=C(t,0,0,e.append("g"));return i.attr("height",r+2*(0,a.getConfig2)().state.noteMargin),i.attr("width",n+2*(0,a.getConfig2)().state.noteMargin),i},"drawNote"),y=(0,r.__name)(function(t,e){let i=e.id,n={id:i,label:e.id,width:0,height:0},r=t.append("g").attr("id",i).attr("class","stateGroup");"start"===e.type&&u(r),"end"===e.type&&_(r),("fork"===e.type||"join"===e.type)&&v(r,e),"note"===e.type&&x(e.note.text,r),"divider"===e.type&&h(r),"default"===e.type&&0===e.descriptions.length&&f(r,e),"default"===e.type&&e.descriptions.length>0&&c(r,e);let s=r.node().getBBox();return n.width=s.width+2*(0,a.getConfig2)().state.padding,n.height=s.height+2*(0,a.getConfig2)().state.padding,n},"drawState"),m=0,b=(0,r.__name)(function(t,e,s){let d=(0,r.__name)(function(t){switch(t){case i.StateDB.relationType.AGGREGATION:return"aggregation";case i.StateDB.relationType.EXTENSION:return"extension";case i.StateDB.relationType.COMPOSITION:return"composition";case i.StateDB.relationType.DEPENDENCY:return"dependency"}},"getRelationType");e.points=e.points.filter(t=>!Number.isNaN(t.y));let o=e.points,u=(0,g.line)().x(function(t){return t.x}).y(function(t){return t.y}).curve(l.curveBasis),h=t.append("path").attr("d",u(o)).attr("id","edge"+m).attr("class","transition"),f="";if((0,a.getConfig2)().state.arrowMarkerAbsolute&&(f=(0,a.getUrl)(!0)),h.attr("marker-end","url("+f+"#"+d(i.StateDB.relationType.DEPENDENCY)+"End)"),void 0!==s.title){let i=t.append("g").attr("class","stateLabel"),{x:d,y:o}=n.utils_default.calcLabelPosition(e.points),g=a.common_default.getRows(s.title),l=0,u=[],h=0,f=0;for(let t=0;t<=g.length;t++){let e=i.append("text").attr("text-anchor","middle").text(g[t]).attr("x",d).attr("y",o+l),n=e.node().getBBox();h=Math.max(h,n.width),f=Math.min(f,n.x),r.log.info(n.x,d,o+l),0===l&&(l=e.node().getBBox().height,r.log.info("Title height",l,o)),u.push(e)}let c=l*g.length;if(g.length>1){let t=(g.length-1)*l*.5;u.forEach((e,i)=>e.attr("y",o+i*l-t)),c=l*g.length}let p=i.node().getBBox();i.insert("rect",":first-child").attr("class","box").attr("x",d-h/2-(0,a.getConfig2)().state.padding/2).attr("y",o-c/2-(0,a.getConfig2)().state.padding/2-3.5).attr("width",h+(0,a.getConfig2)().state.padding).attr("height",c+(0,a.getConfig2)().state.padding),r.log.info(p)}m++},"drawEdge"),w={},B=(0,r.__name)(function(){},"setConf"),E=(0,r.__name)(function(t){t.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"insertMarkers"),N=(0,r.__name)(function(t,i,n,d){let o;e=(0,a.getConfig2)().state;let g=(0,a.getConfig2)().securityLevel;"sandbox"===g&&(o=(0,s.select)("#i"+i));let l="sandbox"===g?(0,s.select)(o.nodes()[0].contentDocument.body):(0,s.select)("body"),u="sandbox"===g?o.nodes()[0].contentDocument:document;r.log.debug("Rendering diagram "+t);let h=l.select("[id='".concat(i,"']"));E(h),S(d.db.getRootDoc(),h,void 0,!1,l,u,d);let f=e.padding,c=h.node().getBBox(),p=c.width+2*f,_=c.height+2*f;(0,a.configureSvgSize)(h,_,1.75*p,e.useMaxWidth),h.attr("viewBox","".concat(c.x-e.padding,"  ").concat(c.y-e.padding," ")+p+" "+_)},"draw"),O=(0,r.__name)(t=>t?t.length*e.fontSizeFactor:1,"getLabelWidth"),S=(0,r.__name)((t,i,n,s,g,l,u)=>{let h,f=new o.Graph({compound:!0,multigraph:!0}),c=!0;for(h=0;h<t.length;h++)if("relation"===t[h].stmt){c=!1;break}n?f.setGraph({rankdir:"LR",multigraph:!0,compound:!0,ranker:"tight-tree",ranksep:c?1:e.edgeLengthFactor,nodeSep:c?1:50,isMultiGraph:!0}):f.setGraph({rankdir:"TB",multigraph:!0,compound:!0,ranksep:c?1:e.edgeLengthFactor,nodeSep:c?1:50,ranker:"tight-tree",isMultiGraph:!0}),f.setDefaultEdgeLabel(function(){return{}});let _=u.db.getStates(),v=u.db.getRelations();for(let t of Object.keys(_)){let a,r=_[t];if(n&&(r.parentId=n),r.doc){let t=i.append("g").attr("id",r.id).attr("class","stateGroup");a=S(r.doc,t,r.id,!s,g,l,u);{let i=(t=p(t,r,s)).node().getBBox();a.width=i.width,a.height=i.height+e.padding/2,w[r.id]={y:e.compositTitleSize}}}else a=y(i,r,f);if(r.note){let t=y(i,{descriptions:[],id:r.id+"-note",note:r.note,type:"note"},f);"left of"===r.note.position?(f.setNode(a.id+"-note",t),f.setNode(a.id,a)):(f.setNode(a.id,a),f.setNode(a.id+"-note",t)),f.setParent(a.id,a.id+"-group"),f.setParent(a.id+"-note",a.id+"-group")}else f.setNode(a.id,a)}r.log.debug("Count=",f.nodeCount(),f);let C=0;v.forEach(function(t){C++,r.log.debug("Setting edge",t),f.setEdge(t.id1,t.id2,{relation:t,width:O(t.title),height:e.labelHeight*a.common_default.getRows(t.title).length,labelpos:"c"},"id"+C)}),(0,d.layout)(f),r.log.debug("Graph after layout",f.nodes());let x=i.node();f.nodes().forEach(function(t){void 0!==t&&void 0!==f.node(t)?(r.log.warn("Node "+t+": "+JSON.stringify(f.node(t))),g.select("#"+x.id+" #"+t).attr("transform","translate("+(f.node(t).x-f.node(t).width/2)+","+(f.node(t).y+(w[t]?w[t].y:0)-f.node(t).height/2)+" )"),g.select("#"+x.id+" #"+t).attr("data-x-shift",f.node(t).x-f.node(t).width/2),l.querySelectorAll("#"+x.id+" #"+t+" .divider").forEach(t=>{let e=t.parentElement,i=0,n=0;e&&(e.parentElement&&(i=e.parentElement.getBBox().width),Number.isNaN(n=parseInt(e.getAttribute("data-x-shift"),10))&&(n=0)),t.setAttribute("x1",0-n+8),t.setAttribute("x2",i-n-8)})):r.log.debug("No Node "+t+": "+JSON.stringify(f.node(t)))});let m=x.getBBox();f.edges().forEach(function(t){void 0!==t&&void 0!==f.edge(t)&&(r.log.debug("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(f.edge(t))),b(i,f.edge(t),f.edge(t).relation))});let B={id:n||"root",label:n||"root",width:0,height:0};return B.width=(m=x.getBBox()).width+2*e.padding,B.height=m.height+2*e.padding,r.log.debug("Doc rendered",B,f),B},"renderDoc"),D={parser:i.stateDiagram_default,get db(){return new i.StateDB(1)},renderer:{setConf:B,draw:N},styles:i.styles_default,init:(0,r.__name)(t=>{t.state||(t.state={}),t.state.arrowMarkerAbsolute=t.arrowMarkerAbsolute},"init")}}]);