(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,430477,e=>{"use strict";e.s(["MultipleChoiceQuestion",()=>m]);var t=e.i(843476),s=e.i(271645),r=e.i(859951),i=e.i(628574),n=e.i(605458),l=e.i(269638),a=e.i(373884),c=e.i(985559),o=e.i(657688);let d=["What does this image show?","What is shown in the picture?","What is depicted in this image?","What is this an picture of?","What can you see in the picture?","Identify what's in the image.","Name what the image shows.","Choose the best description of the picture.","Which option best describes the image?"],h=["Select the picture for","Choose the correct image for","Pick the image that matches","Which picture shows","Identify the image for","Click on the picture that represents","Find the correct image for the word","Select the image that best illustrates","Which image corresponds to","Point to the picture that matches the word"],u=["What does","Select the correct meaning of","Choose the right translation for","Pick the correct meaning of the word","Which is the correct meaning of","Identify the correct translation of","Choose the option that correctly translates","Find the correct meaning of the word","Which option gives the right meaning of"];function m(e){let{type:m,questionText:x,passage:g,questionImage:p,targetWord:f,choices:b,correctChoiceId:j,explanation:y,showCorrectAnswer:v=!0,lockAfterSubmit:N=!1,onComplete:C,controlled:w=!1,value:k=null,onAnswerChange:S,disableInlineFeedback:A=!1,hideActions:M=!1,readOnly:_=!1}=e,[E,W]=(0,s.useState)(k),[q,I]=(0,s.useState)({visible:!1,isCorrect:!1,message:""}),[B,R]=(0,s.useState)(!1),T=(0,s.useMemo)(()=>{var e;return null==(e=b.find(e=>e.id===j))?void 0:e.text},[b,j]),P=w?!!_:B&&N;(0,s.useEffect)(()=>{w&&W(null!=k?k:null)},[w,k]);let F=e=>{P||(w?null==S||S(e):(W(e),I({visible:!1,isCorrect:!1,message:""})))};return(0,t.jsxs)("div",{className:"w-full max-w-2xl mx-auto",children:[(()=>{let e=(0,s.useMemo)(()=>{if(x)return x;switch(m){case"image-question":let e=Math.abs((p||m).split("").reduce((e,t)=>(e=(e<<5)-e+t.charCodeAt(0))&e,0))%d.length;return d[e];case"image-choices":let t=Math.abs((f||m).split("").reduce((e,t)=>(e=(e<<5)-e+t.charCodeAt(0))&e,0))%h.length,s=h[t];return f?"".concat(s,' "').concat(f,'"'):"Choose the appropriate image";case"word-translation":let r=Math.abs((f||m).split("").reduce((e,t)=>(e=(e<<5)-e+t.charCodeAt(0))&e,0))%u.length,i=u[r];return f?"".concat(i," "):"Choose the correct translation";default:return"Select the correct answer"}},[x,m,p,f]);switch(m){case"text-only":return(0,t.jsxs)("div",{className:"mb-6",children:[g&&(0,t.jsx)(i.Card,{className:"mb-4",children:(0,t.jsx)(i.CardContent,{className:"p-4",children:(0,t.jsx)("p",{className:"text-gray-700",children:g})})}),(0,t.jsx)("h3",{className:"text-xl font-medium mb-2",children:e})]});case"image-question":return console.log("[MCQ] Rendering image-question with questionImage:",p),(0,t.jsxs)("div",{className:"mb-6 flex flex-col md:flex-row gap-4",children:[p&&(0,t.jsx)("div",{className:"md:w-1/2",children:(0,t.jsx)("div",{className:"relative h-64 w-full rounded-lg overflow-hidden",children:(0,t.jsx)(o.default,{src:p||"/placeholder.svg",alt:"Question image",fill:!0,className:"object-cover"})})}),(0,t.jsx)("div",{className:"md:w-1/2",children:(0,t.jsx)("h3",{className:"text-xl font-medium mb-2",children:e})})]});case"word-translation":return(0,t.jsxs)("div",{className:"mb-6 text-center",children:[(0,t.jsx)("h3",{className:"text-xl font-medium mb-2",children:e}),f&&(0,t.jsx)("div",{className:"text-3xl font-bold text-primary my-4",children:f})]});default:return(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsx)("h3",{className:"text-xl font-medium mb-2",children:e})})}})(),(0,t.jsx)("div",{className:"mb-6",children:"image-choices"===m?(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:b.map(e=>(0,t.jsx)(i.Card,{className:(0,n.cn)("cursor-pointer transition-all hover:border-primary",E===e.id&&"ring-2 ring-primary border-primary",q.visible&&E===e.id&&(q.isCorrect?"bg-green-50 border-green-200":"bg-red-50 border-red-200")),onClick:()=>F(e.id),children:(0,t.jsxs)(i.CardContent,{className:"p-4 flex flex-col items-center",children:[e.imageUrl&&(0,t.jsx)("div",{className:"relative h-32 w-full mb-2 rounded overflow-hidden",children:(0,t.jsx)(o.default,{src:e.imageUrl||"/placeholder.svg",alt:e.text,fill:!0,className:"object-cover"})}),(0,t.jsx)("p",{className:"text-center font-medium",children:e.text})]})},e.id))}):(0,t.jsx)("div",{className:"space-y-3",children:b.map(e=>(0,t.jsx)(r.Button,{variant:"outline",className:(0,n.cn)("w-full justify-start text-left h-auto py-3 px-4",E===e.id&&"border-primary bg-primary/5",q.visible&&E===e.id&&(q.isCorrect?"bg-green-50 border-green-200":"bg-red-50 border-red-200")),onClick:()=>F(e.id),disabled:P,children:(0,t.jsx)("span",{children:e.text})},e.id))})}),!w&&!A&&q.visible&&(0,t.jsx)(c.Alert,{className:(0,n.cn)("mb-6",q.isCorrect?"bg-green-50 border-green-200":"bg-red-50 border-red-200"),children:(0,t.jsxs)("div",{className:"flex items-center",children:[q.isCorrect?(0,t.jsx)(l.CheckCircle,{className:"h-5 w-5 text-green-500 mr-2"}):(0,t.jsx)(a.XCircle,{className:"h-5 w-5 text-red-500 mr-2"}),(0,t.jsx)(c.AlertDescription,{children:q.message})]})}),!M&&(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)(r.Button,{variant:"outline",onClick:()=>{w?null==S||S(null):(W(null),I({visible:!1,isCorrect:!1,message:""}),R(!1))},children:"Reset"}),!w&&(0,t.jsx)(r.Button,{onClick:()=>{if(!E)return;let e=E===j,t=b.find(e=>e.id===E);!w&&(I({visible:!0,isCorrect:e,message:e?"Correct! Great job!":"Not quite right. Try again!"}),R(!0),C&&t&&C(e,t))},disabled:!E||P,children:"Check Answer"})]}),!w&&B&&(y||v)&&(0,t.jsx)(i.Card,{className:"mt-6",children:(0,t.jsxs)(i.CardContent,{className:"p-4",children:[y&&(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Explanation:"}),(0,t.jsx)("div",{className:"text-gray-800",children:y})]}),v&&!q.isCorrect&&(0,t.jsxs)("div",{className:"mt-1",children:[(0,t.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Correct answer:"}),(0,t.jsx)("div",{className:"font-medium text-green-700",children:T})]})]})})]})}},759443,e=>{"use strict";e.s(["ChooseWords",()=>u]);var t=e.i(843476),s=e.i(271645),r=e.i(859951),i=e.i(628574),n=e.i(605458),l=e.i(382373),a=e.i(269638),c=e.i(373884),o=e.i(985559),d=e.i(978618);let h=e=>{let{word:s,onClick:i,isSelected:l}=e;return(0,t.jsxs)(r.Button,{variant:"outline",className:(0,n.cn)("m-1 transition-all",l&&"bg-primary/10 border-primary"),onClick:()=>i(s),children:[void 0!==s.position&&(0,t.jsxs)("span",{className:"mr-1 text-primary font-medium",children:["(",s.position,")"]}),s.content]})};function u(e){let{question:u,sentence:m,words:x,type:g,onComplete:p,correctAnswer:f,highlightedWords:b=[],audioUrl:j,characterImageUrl:y,controlled:v=!1,value:N=null,onAnswerChange:C,disableInlineFeedback:w=!1,hideActions:k=!1,readOnly:S=!1}=e,A=e=>e.map((e,t)=>({id:"word-".concat(e,"-").concat(t),content:e})),[M,_]=(0,s.useState)(A(x)),[E,W]=(0,s.useState)([]),[q,I]=(0,s.useState)({visible:!1,isCorrect:!1,message:""}),[B,R]=(0,s.useState)([]),T=(0,s.useMemo)(()=>{let e=["Can you make the correct sentence?","Can you put these words in the right order?","Can you build the correct sentence?","Can you arrange the words to form a sentence?","Can you unscramble these words into a sentence?","Can you create the correct sentence from these words?","Can you fix the word order to make a sentence?","Can you reorder the words correctly?","Can you piece the words together into a sentence?","Can you make sense of these words?"];return e[Math.floor(Math.random()*e.length)]},[]);(0,s.useEffect)(()=>{if("fill_in_blanks"===g){let e=[];m.split(" ").forEach((t,s)=>{"___"===t&&e.push(e.length+1)}),R(e)}},[m,g]);let P=(0,s.useRef)("");(0,s.useEffect)(()=>{let e="".concat(u,"|").concat(m,"|").concat(x.join("||"));P.current!==e&&(P.current=e,_(A(x)),W([]),I({visible:!1,isCorrect:!1,message:""}))},[x,m,u]),(0,s.useEffect)(()=>{if(!v)return;let e=Array.isArray(N)?N:[],t=A(x),s=[],r=[];for(let i of e){let e=t.findIndex((e,t)=>e.content===i&&!s.includes(t));e>=0&&(r.push(t[e]),s.push(e))}let i=t.filter((e,t)=>!s.includes(t)),n="sentence_scramble"===g?i.sort(()=>Math.random()-.5):i;W(r),_(n)},[v,N,x,g]);let F=e=>{if(v&&S)return;let t={...e};if("fill_in_blanks"===g){let e=E.map(e=>e.position).filter(e=>void 0!==e),s=B.filter(t=>!e.includes(t));s.length>0&&(t.position=s[0])}_(t=>t.filter(t=>t.id!==e.id)),W(e=>[...e,t]),q.visible&&I({visible:!1,isCorrect:!1,message:""})},z=e=>{v&&S||(W(t=>t.filter(t=>t.id!==e.id)),_(t=>[...t,{...e,position:void 0}]),q.visible&&I({visible:!1,isCorrect:!1,message:""}))},D=(0,s.useRef)([]);return(0,s.useEffect)(()=>{if(v){let e=E.map(e=>e.content),t=D.current;JSON.stringify(e)!==JSON.stringify(t)&&(D.current=e,null==C||C(e))}},[v,E]),(0,t.jsxs)("div",{className:"w-full max-w-2xl mx-auto",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"sentence_scramble"===g?T:u}),(0,t.jsxs)("div",{className:"flex items-center mb-4",children:[y&&(0,t.jsx)("div",{className:"mr-4",children:(0,t.jsx)("img",{src:y||"/placeholder.svg",alt:"Character",className:"w-16 h-16 object-contain"})}),(0,t.jsxs)(i.Card,{className:"p-3 flex items-center",children:[j&&(0,t.jsx)(r.Button,{variant:"ghost",size:"icon",className:"mr-2",onClick:()=>new Audio(j).play(),children:(0,t.jsx)(l.Volume2,{className:"h-4 w-4"})}),(0,t.jsx)("div",{className:"text-lg",children:(()=>{if("fill_in_blanks"===g){let e=m.split(" "),s=0;return e.map((e,r)=>"___"===e?(s++,(0,t.jsxs)("span",{className:"mx-1",children:[(0,t.jsxs)("span",{className:"text-primary font-medium",children:["(",s,")"]}),(0,t.jsx)("span",{className:"border-b-2 border-primary px-2",children:"___"})]},r)):(0,t.jsx)("span",{className:"mr-1",children:e},r))}return"translation"===g&&m?(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"English:"}),(0,t.jsx)("div",{className:"text-lg font-medium",children:m}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Vietnamese (arrange the words below):"})]}):b&&b.length>0?m.split(" ").map((e,s)=>{let r=b.includes(e);return(0,t.jsx)("span",{className:(0,n.cn)("mr-1",r&&"text-primary font-medium underline"),children:e},s)}):m})()})]})]})]}),(0,t.jsx)("div",{className:(0,n.cn)("min-h-24 w-full border-2 border-dashed rounded-md p-4 mb-6 flex flex-wrap items-center",E.length>0?"border-primary bg-primary/5":"border-gray-300 bg-gray-50"),children:E.length>0?("fill_in_blanks"===g?[...E].sort((e,t)=>(e.position||Number.MAX_SAFE_INTEGER)-(t.position||Number.MAX_SAFE_INTEGER)):E).map(e=>(0,t.jsx)(h,{word:e,onClick:z,isSelected:!0},e.id)):(0,t.jsxs)("div",{className:"w-full text-center text-gray-400",children:["translation"===g&&"Click words below to form the Vietnamese translation","fill_in_blanks"===g&&"Click words below to fill in the blanks","sentence_scramble"===g&&"Click words below to unscramble the sentence"]})}),(0,t.jsx)("div",{className:"p-4 border-2 border-gray-200 rounded-md mb-6",children:(0,t.jsx)("div",{className:"flex flex-wrap",children:M.map(e=>(0,t.jsx)(h,{word:e,onClick:F},e.id))})}),!v&&!w&&q.visible&&(0,t.jsx)(o.Alert,{className:(0,n.cn)("mb-6",q.isCorrect?"bg-green-50 border-green-200":"bg-red-50 border-red-200"),children:(0,t.jsxs)("div",{className:"flex items-center",children:[q.isCorrect?(0,t.jsx)(a.CheckCircle,{className:"h-5 w-5 text-green-500 mr-2"}):(0,t.jsx)(c.XCircle,{className:"h-5 w-5 text-red-500 mr-2"}),(0,t.jsx)(o.AlertDescription,{children:q.message})]})}),!k&&(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)(r.Button,{variant:"outline",onClick:()=>{_(A(x)),W([]),I({visible:!1,isCorrect:!1,message:""})},children:"Reset"}),!v&&(0,t.jsx)(r.Button,{onClick:()=>{if(f){let e=!1;if("fill_in_blanks"===g){let t=new Map;E.forEach(e=>{void 0!==e.position&&t.set(e.position,e.content)}),e=f.every((e,s)=>{let r=t.get(s+1)||"";return(0,d.normalizeForComparison)(r)===(0,d.normalizeForComparison)(e)})}else{let t=E.map(e=>e.content).join(" "),s=f.join(" ");e=(0,d.normalizeForComparison)(t)===(0,d.normalizeForComparison)(s)}!v&&(I({visible:!0,isCorrect:e,message:e?"Correct! Great job!":"Not quite right. Try again!"}),p&&p(e,E.map(e=>e.content)))}},children:"Check Answer"})]})]})}},607010,e=>{"use strict";e.s(["SynonymsMatching",()=>l]);var t=e.i(843476),s=e.i(437902),r=e.i(271645),i=e.i(628574),n=e.i(605458);function l(e){let{pairs:l,onComplete:a,controlled:c=!1,onAnswerChange:o,readOnly:d=!1}=e,[h,u]=(0,r.useState)(new Set),[m,x]=(0,r.useState)(new Set),[g,p]=(0,r.useState)(null),[f,b]=(0,r.useState)([]),[j,y]=(0,r.useState)({first:null,second:null}),[v,N]=(0,r.useState)(!1),[C,w]=(0,r.useState)(null),k=(0,r.useRef)([]),S=(0,r.useRef)(null),A=(0,r.useMemo)(()=>l,[l]),M=(0,r.useMemo)(()=>{let e=[];return A.forEach(t=>{e.push({id:e.length,text:t.word1,pairId:t.id}),e.push({id:e.length,text:t.word2,pairId:t.id})}),e.sort(()=>Math.random()-.5)},[A]),_=(0,r.useMemo)(()=>{let e={};return M.forEach(t=>{e[t.id]=t.pairId}),e},[M]),E=(0,r.useMemo)(()=>{let e=["Find the Matching Synonyms","Pair the Words with Their Synonyms","Connect Each Word with Its Synonym","Synonym Matching Challenge","Match Words with the Same Meaning"],t=["Link words that share similar meanings","Test your synonym knowledge","Which words go together?","Check your vocabulary connections","Practice recognizing synonyms"];return{h1:e[Math.floor(Math.random()*e.length)],h2:t[Math.floor(Math.random()*t.length)]}},[]);(0,r.useEffect)(()=>{c&&!d&&(null==o||o(Array.from(m)))},[c,m,d]);let W=e=>{let t=_[e];return m.has(t)};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.default,{id:"189b2b73d5a17942",children:"@keyframes star{0%{opacity:0;transform:scale(0)rotate(0)}50%{opacity:1;transform:scale(1.5)rotate(180deg)}to{opacity:0;transform:scale(0)rotate(360deg)}}.animate-star.jsx-189b2b73d5a17942{font-size:1.5rem;animation:1.5s ease-out forwards star}@keyframes pulse-shadow{0%{box-shadow:0 0 15px rgba(255,165,0,.5)}50%{box-shadow:0 0 20px rgba(255,165,0,.8)}to{box-shadow:0 0 15px rgba(255,165,0,.5)}}.pulse-highlight.jsx-189b2b73d5a17942{animation:1.5s ease-in-out infinite pulse-shadow}"}),(0,t.jsxs)("div",{ref:S,className:"jsx-189b2b73d5a17942 max-w-4xl mx-auto p-6 relative",children:[(0,t.jsx)("h1",{className:"jsx-189b2b73d5a17942 text-2xl font-bold mb-8",children:E.h1}),(0,t.jsx)("h2",{className:"jsx-189b2b73d5a17942 text-lg font-medium mb-8",children:E.h2}),(0,t.jsx)("div",{className:"jsx-189b2b73d5a17942 grid grid-cols-2 gap-x-14 gap-y-5",children:M.map((e,s)=>(0,t.jsx)(i.Card,{ref:t=>k.current[e.id]=t,className:(0,n.cn)("p-4 cursor-pointer transition-all duration-300 relative",h.has(e.id)&&"bg-orange-100 border-orange-500",W(e.id)?"bg-gray-100 border-gray-300 text-gray-500":"",j.first===e.id||j.second===e.id?"border-2 border-red-500":"",W(e.id)&&v&&"border-2 border-green-500",g===e.id&&null!==C&&C!==e.id&&!W(e.id)&&"scale-105 bg-orange-50 border-orange-300 pulse-highlight"),onClick:()=>!W(e.id)&&(e=>{if(!d){if(h.has(e)){let t=new Set(h);t.delete(e),u(t),w(null);return}if(0===h.size){u(new Set([e])),w(e);return}if(null!==C){let t=_[C];t===_[e]?(x(new Set([...m,t])),u(new Set),w(null),N(!0),setTimeout(()=>N(!1),1500)):(y({first:C,second:e}),setTimeout(()=>{y({first:null,second:null}),u(new Set),w(null)},1e3))}}})(e.id),onMouseEnter:()=>p(e.id),onMouseLeave:()=>p(null),children:(0,t.jsxs)("div",{className:"jsx-189b2b73d5a17942 flex items-center gap-4",children:[(0,t.jsx)("span",{className:"jsx-189b2b73d5a17942 "+((0,n.cn)("w-8 h-8 flex items-center justify-center rounded-full",W(e.id)?"bg-gray-200 text-gray-500":"bg-gray-100")||""),children:s+1}),(0,t.jsx)("span",{className:"jsx-189b2b73d5a17942 text-lg",children:e.text})]})},e.id))})]})]})}},936904,e=>{"use strict";e.s(["WordsMatching",()=>n]);var t=e.i(843476),s=e.i(271645),r=e.i(628574),i=e.i(605458);function n(e){let{pairs:n,onComplete:l,controlled:a=!1,onAnswerChange:c,readOnly:o=!1}=e,[d,h]=(0,s.useState)(null),[u,m]=(0,s.useState)(null),[x,g]=(0,s.useState)(new Set),[p,f]=(0,s.useState)(null),[b,j]=(0,s.useState)(null),[y,v]=(0,s.useState)({left:null,right:null}),[N,C]=(0,s.useState)(!1),[w,k]=(0,s.useState)([]),S=(0,s.useRef)([]),A=(0,s.useRef)([]),M=(0,s.useRef)(null),_=(0,s.useMemo)(()=>[...n.map((e,t)=>t)].sort(()=>Math.random()-.5),[n]),E=(0,s.useMemo)(()=>_.map(e=>n[e].vietnamese),[_,n]),W=(0,s.useMemo)(()=>{let e={};return _.forEach((t,s)=>{e[s]=n[t].id}),e},[_,n]),q=(0,s.useMemo)(()=>{let e={};return _.forEach((t,s)=>{e[n[t].id]=s}),e},[_,n]);(0,s.useEffect)(()=>{a&&!o&&(null==c||c(Array.from(x)))},[a,x,o]),(0,s.useEffect)(()=>{if(!M.current||null===d||null===p||x.has(d))return void j(null);let e=S.current[n.findIndex(e=>e.id===d)],t=A.current[p];if(!e||!t)return void j(null);let s=M.current.getBoundingClientRect(),r=e.getBoundingClientRect(),i=t.getBoundingClientRect();j({start:{x:r.right-s.left,y:r.top+r.height/2-s.top},end:{x:i.left-s.left,y:i.top+i.height/2-s.top}})},[d,p,x,n]);let I=(0,s.useMemo)(()=>{let e={};return x.forEach(t=>{let s=q[t];void 0!==s&&(e[s]=!0)}),e},[x,q]),B=(0,s.useMemo)(()=>{let e=["Match the English words with their Vietnamese meanings","Find the correct pairs of words","Connect each word with its translation","Pair the words with their correct meanings","Link the English words to the right Vietnamese words","Make the correct matches","Which words go together?","Choose the pairs that match"];return e[Math.floor(Math.random()*e.length)]},[]);return(0,t.jsxs)("div",{className:"max-w-2xl mx-auto p-6 relative",ref:M,onMouseLeave:()=>{f(null),d||u||j(null)},children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-8",children:B}),(0,t.jsxs)("svg",{className:"absolute top-0 left-0 w-full h-full pointer-events-none z-10",children:[b&&(0,t.jsx)("line",{x1:b.start.x,y1:b.start.y,x2:b.end.x,y2:b.end.y,stroke:"orange",strokeWidth:"2",strokeDasharray:"5,5"}),w.map((e,s)=>(0,t.jsx)("line",{x1:e.start.x,y1:e.start.y,x2:e.end.x,y2:e.end.y,stroke:"green",strokeWidth:"2"},s))]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,t.jsx)("div",{className:"space-y-4",children:n.map((e,s)=>(0,t.jsx)(r.Card,{ref:e=>S.current[s]=e,className:(0,i.cn)("p-4 cursor-pointer transition-colors relative",d===e.id&&"bg-orange-100 border-orange-500",x.has(e.id)?"bg-gray-100 border-gray-300 text-gray-500":"",y.left===e.id&&"border-2 border-red-500",x.has(e.id)&&N&&"border-2 border-green-500"),onClick:()=>(e=>{if(!o&&!x.has(e)){if(null!==u){if(u===q[e]){g(new Set([...x,e])),h(null),m(null),j(null),C(!0),setTimeout(()=>C(!1),1500);return}v({left:e,right:u}),setTimeout(()=>{v({left:null,right:null})},1e3)}h(d===e?null:e),m(null)}})(e.id),children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("span",{className:(0,i.cn)("w-8 h-8 flex items-center justify-center rounded-full",x.has(e.id)?"bg-gray-200 text-gray-500":"bg-gray-100"),children:s+1}),(0,t.jsx)("span",{className:"text-lg",children:e.english})]})},e.id))}),(0,t.jsx)("div",{className:"space-y-4",children:E.map((e,s)=>(0,t.jsx)(r.Card,{ref:e=>A.current[s]=e,className:(0,i.cn)("p-4 cursor-pointer transition-colors relative",u===s&&"bg-orange-100 border-orange-500",I[s]?"bg-gray-100 border-gray-300 text-gray-500":"",y.right===s&&"border-2 border-red-500",I[s]&&N&&"border-2 border-green-500"),onClick:()=>(e=>{if(!o&&!I[e]){if(null!==d){if(d===W[e]){g(new Set([...x,d])),h(null),m(null),j(null),C(!0),setTimeout(()=>C(!1),1500);return}v({left:d,right:e}),setTimeout(()=>{v({left:null,right:null})},1e3)}m(u===e?null:e),h(null)}})(s),onMouseEnter:()=>{null===d||I[s]||f(s)},onMouseLeave:()=>{p===s&&f(null)},children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("span",{className:(0,i.cn)("w-8 h-8 flex items-center justify-center rounded-full",I[s]?"bg-gray-200 text-gray-500":"bg-gray-100"),children:s+6}),(0,t.jsx)("span",{className:"text-lg",children:e})]})},s))})]})]})}},151025,e=>{"use strict";e.s(["ErrorCorrection",()=>d]);var t=e.i(843476),s=e.i(271645),r=e.i(859951),i=e.i(628574),n=e.i(605458),l=e.i(985559),a=e.i(269638),c=e.i(373884),o=e.i(978618);function d(e){let{question:d,faultySentence:h,target:u,hint:m,onComplete:x,controlled:g=!1,value:p=null,onAnswerChange:f,disableInlineFeedback:b=!1,hideActions:j=!1,readOnly:y=!1}=e,[v,N]=(0,s.useState)(null!=p?p:h),[C,w]=(0,s.useState)(!1),[k,S]=(0,s.useState)(null);return(0,t.jsxs)("div",{className:"w-full max-w-2xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:d}),(0,t.jsxs)("p",{className:"text-gray-600",children:["Original sentence: ",(0,t.jsx)("span",{className:"font-medium",children:h})]})]}),(0,t.jsx)(i.Card,{children:(0,t.jsxs)(i.CardContent,{className:"p-6",children:[(0,t.jsx)("textarea",{className:"w-full rounded-md border p-3 focus:outline-none focus:ring-2 focus:ring-primary resize-none",rows:4,value:v,onChange:e=>{N(e.target.value),g&&(null==f||f(e.target.value))},placeholder:"Correct the sentence here...",disabled:y}),m&&(0,t.jsxs)("div",{className:"mt-3 text-sm text-blue-600 bg-blue-50 p-3 rounded-md",children:["ðŸ’¡ Hint: ",m]})]})}),!j&&(0,t.jsxs)("div",{className:"flex justify-center gap-3",children:[(0,t.jsx)(r.Button,{variant:"outline",onClick:()=>{N(h),w(!1),S(null)},children:"Reset"}),!g&&(0,t.jsx)(r.Button,{variant:"outline",onClick:()=>{N(u)},children:"Show Correct Answer"}),!g&&(0,t.jsx)(r.Button,{onClick:()=>{let e=(0,o.normalizeForComparison)(v)===(0,o.normalizeForComparison)(u),t=e?"Correct! Great job!":"Not quite right. Try again!";!g&&(S({isCorrect:e,message:t}),w(!0),x&&x(e,v))},disabled:C,children:"Check Answer"})]}),!g&&C&&k&&(0,t.jsx)(l.Alert,{className:(0,n.cn)("mb-6",k.isCorrect?"bg-green-50 border-green-200":"bg-red-50 border-red-200"),children:(0,t.jsxs)("div",{className:"flex items-center",children:[k.isCorrect?(0,t.jsx)(a.CheckCircle,{className:"h-5 w-5 text-green-500 mr-2"}):(0,t.jsx)(c.XCircle,{className:"h-5 w-5 text-red-500 mr-2"}),(0,t.jsx)(l.AlertDescription,{children:k.message})]})}),!g&&C&&k&&!k.isCorrect&&(0,t.jsx)(i.Card,{children:(0,t.jsxs)(i.CardContent,{className:"p-4",children:[(0,t.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:"Reference answer:"}),(0,t.jsx)("div",{className:"bg-gray-50 p-3 rounded-md font-medium",children:u}),(0,t.jsxs)("div",{className:"mt-3 text-sm",children:[(0,t.jsx)("div",{className:"text-gray-600 mb-2",children:"Differences:"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:((e,t)=>{let s=e.split(/\s+/),r=t.split(/\s+/),i=Array(s.length+1).fill(null).map(()=>Array(r.length+1).fill(0));for(let e=1;e<=s.length;e++)for(let t=1;t<=r.length;t++)i[e][t]=s[e-1]===r[t-1]?i[e-1][t-1]+1:Math.max(i[e-1][t],i[e][t-1]);let n=[],l=s.length,a=r.length;for(;l>0&&a>0;)s[l-1]===r[a-1]?(n.unshift({type:"equal",text:s[l-1]}),l--,a--):i[l-1][a]>=i[l][a-1]?(n.unshift({type:"del",text:s[l-1]}),l--):(n.unshift({type:"add",text:r[a-1]}),a--);for(;l>0;)n.unshift({type:"del",text:s[l-1]}),l--;for(;a>0;)n.unshift({type:"add",text:r[a-1]}),a--;return n})(v,u).map((e,s)=>(0,t.jsx)("span",{className:(0,n.cn)("rounded px-2 py-1 text-sm","equal"===e.type&&"bg-gray-100","add"===e.type&&"bg-green-100 text-green-800","del"===e.type&&"bg-red-100 text-red-800 line-through"),children:e.text},s))})]})]})})]})}},847337,e=>{"use strict";e.s(["DialogueCompletion",()=>h]);var t=e.i(843476),s=e.i(271645),r=e.i(859951),i=e.i(628574),n=e.i(605458),l=e.i(985559),a=e.i(269638),c=e.i(373884);let o=["As the speaker, whatâ€™s your next line?","What is the appropriate next line in the dialogue?","Choose the best continuation of the conversation.","Which response completes the dialogue correctly?","Select the sentence that best continues the dialogue.","What should be said next in this conversation?","Pick the correct line to complete the dialogue.","Which option fits naturally as the next line?","Identify the correct response to continue the conversation.","Complete the dialogue by choosing the best line."],d=e=>{let{who:s,text:r,isFirstSpeaker:i}=e;return(0,t.jsx)("div",{className:(0,n.cn)("flex mb-3",i?"justify-start":"justify-end"),children:(0,t.jsxs)("div",{className:(0,n.cn)("max-w-[85%] rounded-2xl px-4 py-3 text-sm relative",i?"bg-gray-100 text-gray-800":"bg-primary text-white"),children:[(0,t.jsx)("div",{className:"text-xs opacity-70 mb-1 font-medium",children:s}),(0,t.jsx)("div",{children:r})]})})};function h(e){let{context:h,choices:u,correctChoiceId:m,explanation:x,showCorrectAnswer:g=!0,lockAfterSubmit:p=!1,onComplete:f,controlled:b=!1,value:j=null,onAnswerChange:y,disableInlineFeedback:v=!1,hideActions:N=!1,readOnly:C=!1}=e,[w,k]=(0,s.useState)(null),[S,A]=(0,s.useState)(!1),[M,_]=(0,s.useState)({visible:!1,isCorrect:!1,message:""}),E=b?!!C:S&&p;(0,s.useEffect)(()=>{b&&k(null!=j?j:null)},[b,j]);let W=(0,s.useMemo)(()=>{let e=Math.abs(((Array.isArray(h)?h:[]).map(e=>e.text).join("")||"dialogue").split("").reduce((e,t)=>(e=(e<<5)-e+t.charCodeAt(0))&e,0))%o.length;return o[e]},[h]),q=(0,s.useMemo)(()=>{var e;return null==(e=u.find(e=>e.id===m))?void 0:e.text},[u,m]),I=(0,s.useMemo)(()=>{let e=Array.from(new Set(h.map(e=>e.who)));return{firstSpeaker:e[0]||"A",secondSpeaker:e[1]||"B"}},[h]);return(0,t.jsxs)("div",{className:"w-full max-w-6xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:W}),(0,t.jsx)("p",{className:"text-gray-600",children:"Complete the dialogue by choosing the best response."})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsx)(i.Card,{children:(0,t.jsxs)(i.CardContent,{className:"p-6",children:[(0,t.jsx)("div",{className:"text-sm text-gray-600 mb-4 font-medium",children:"Dialogue"}),(0,t.jsx)("div",{className:"space-y-3",children:Array.isArray(h)?h.map((e,s)=>(0,t.jsx)(d,{who:e.who,text:e.text,isFirstSpeaker:e.who===I.firstSpeaker},s)):(0,t.jsx)("div",{className:"text-sm text-gray-500 italic",children:"No dialogue context available"})})]})}),(0,t.jsx)(i.Card,{children:(0,t.jsxs)(i.CardContent,{className:"p-6",children:[(0,t.jsx)("div",{className:"text-sm text-gray-600 mb-4 font-medium",children:"Choose a response"}),(0,t.jsx)("div",{className:"space-y-3",children:u.map(e=>(0,t.jsx)(r.Button,{variant:"outline",className:(0,n.cn)("w-full justify-start text-left h-auto py-3 px-4",w===e.id&&"border-primary bg-primary/5",S&&w===e.id&&(M.isCorrect?"bg-green-50 border-green-200":"bg-red-50 border-red-200")),onClick:()=>{var t;return t=e.id,void(!E&&(b?null==y||y(t):(k(t),_({visible:!1,isCorrect:!1,message:""}))))},disabled:E,children:e.text},e.id))})]})})]}),!N&&(0,t.jsxs)("div",{className:"flex justify-center gap-3",children:[(0,t.jsx)(r.Button,{variant:"outline",onClick:()=>{k(null),A(!1),_({visible:!1,isCorrect:!1,message:""})},children:"Reset"}),!b&&(0,t.jsx)(r.Button,{onClick:()=>{if(!w)return;let e=w===m,t=u.find(e=>e.id===w);!b&&(_({visible:!0,isCorrect:e,message:e?"Great response!":"Not quite right. Try again!"}),A(!0),f&&t&&f(e,t))},disabled:!w||S,children:"Check Answer"})]}),!b&&!v&&M.visible&&(0,t.jsx)(l.Alert,{className:(0,n.cn)("mb-6",M.isCorrect?"bg-green-50 border-green-200":"bg-red-50 border-red-200"),children:(0,t.jsxs)("div",{className:"flex items-center",children:[M.isCorrect?(0,t.jsx)(a.CheckCircle,{className:"h-5 w-5 text-green-500 mr-2"}):(0,t.jsx)(c.XCircle,{className:"h-5 w-5 text-red-500 mr-2"}),(0,t.jsx)(l.AlertDescription,{children:M.message})]})}),!b&&S&&(x||g&&!M.isCorrect)&&(0,t.jsx)(i.Card,{children:(0,t.jsxs)(i.CardContent,{className:"p-4",children:[x&&(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Explanation:"}),(0,t.jsx)("div",{className:"text-gray-800",children:x})]}),g&&!M.isCorrect&&(0,t.jsxs)("div",{className:"mt-1",children:[(0,t.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Correct answer:"}),(0,t.jsx)("div",{className:"font-medium text-green-700",children:q})]})]})})]})}},301748,e=>{"use strict";e.s(["RolePlay",()=>h]);var t=e.i(843476),s=e.i(271645),r=e.i(859951),i=e.i(628574),n=e.i(243970),l=e.i(605458),a=e.i(985559),c=e.i(269638),o=e.i(373884);let d=e=>{let{who:s,text:r,isCorrect:i}=e,n="A"===s;return(0,t.jsx)("div",{className:(0,l.cn)("flex mb-3",n?"justify-start":"justify-end"),children:(0,t.jsxs)("div",{className:(0,l.cn)("max-w-[80%] rounded-2xl px-4 py-3 text-sm relative",n?"bg-gray-100 text-gray-800":!0===i?"bg-green-100 text-green-800":!1===i?"bg-red-100 text-red-800":"bg-primary text-white"),children:[(0,t.jsx)("div",{className:"text-xs opacity-70 mb-1 font-medium",children:s}),(0,t.jsx)("div",{children:r}),void 0!==i&&(0,t.jsx)("div",{className:"absolute -bottom-2 right-2 text-xs",children:i?"âœ…":"âŒ"})]})})};function h(e){let{title:h,steps:u,onComplete:m}=e,[x,g]=(0,s.useState)(0),[p,f]=(0,s.useState)(null),[b,j]=(0,s.useState)([]),[y,v]=(0,s.useState)(!1),N=u[x],C=x===u.length-1;b.filter(e=>e.correct).length;let w=u.length;return(0,t.jsxs)("div",{className:"w-full max-w-2xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Interactive Role-play"}),(0,t.jsx)("p",{className:"text-gray-600 mb-2",children:h}),(0,t.jsxs)("div",{className:"text-sm text-gray-500 mb-4",children:["Step ",x+1," of ",w]}),(0,t.jsx)(n.Progress,{value:(x+1)/w*100,className:"w-full max-w-md mx-auto"})]}),(0,t.jsx)(i.Card,{children:(0,t.jsx)(i.CardContent,{className:"p-6",children:(0,t.jsxs)("div",{className:"space-y-4",children:[b.map((e,s)=>(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d,{who:"A",text:e.bot}),(0,t.jsx)(d,{who:"B",text:e.user,isCorrect:e.correct})]},s)),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(d,{who:"A",text:N.bot}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Choose your response:"}),N.choices.map((e,s)=>(0,t.jsx)(r.Button,{variant:"outline",className:(0,l.cn)("w-full justify-start text-left h-auto py-3 px-4",p===s&&"border-primary bg-primary/5",y&&p===s&&(s===N.expected?"bg-green-50 border-green-200":"bg-red-50 border-red-200")),onClick:()=>{!y&&f(s)},disabled:y,children:e.text},s))]}),N.tips&&(0,t.jsxs)("div",{className:"text-sm text-blue-600 bg-blue-50 p-3 rounded-md",children:["ðŸ’¡ Tip: ",N.tips]}),y&&(0,t.jsx)(a.Alert,{className:(0,l.cn)(p===N.expected?"bg-green-50 border-green-200":"bg-red-50 border-red-200"),children:(0,t.jsxs)("div",{className:"flex items-center",children:[p===N.expected?(0,t.jsx)(c.CheckCircle,{className:"h-5 w-5 text-green-500 mr-2"}):(0,t.jsx)(o.XCircle,{className:"h-5 w-5 text-red-500 mr-2"}),(0,t.jsx)(a.AlertDescription,{children:p===N.expected?"Great response!":"Not the best choice. The recommended response was shown above."})]})})]})]})})}),(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)(r.Button,{onClick:()=>{if(null===p||y)return;let e=p===N.expected,t=N.choices[p].text,s=[...b,{bot:N.bot,user:t,correct:e,index:p}];j(s),v(!0),setTimeout(()=>{if(C){let e=s.filter(e=>e.correct).length/u.length;m&&m(1===e,e,s.map(e=>e.index))}else g(x+1),f(null),v(!1)},1500)},disabled:null===p||y,children:y?"Next":"Say this"})})]})}},301385,e=>{"use strict";e.s(["ExerciseContainer",()=>N,"ExerciseContainerShell",()=>C]);var t=e.i(843476),s=e.i(271645),r=e.i(618566),i=e.i(859951),n=e.i(628574),l=e.i(243970),a=e.i(985559),c=e.i(543687),o=e.i(430477),d=e.i(759443),h=e.i(607010),u=e.i(936904),m=e.i(151025),x=e.i(847337),g=e.i(301748),p=e.i(396644),f=e.i(971094);function b(){let{nextQuestion:e,isAnswered:s,skipQuestion:r}=(0,c.useExercise)();return(0,t.jsx)("div",{className:"sticky bottom-0 left-0 right-0 z-10 mt-8 border-t bg-background/90 backdrop-blur supports-[backdrop-filter]:bg-background/70",children:(0,t.jsxs)("div",{className:"mx-auto max-w-4xl px-4 py-3 flex items-center justify-end gap-3",children:[(0,t.jsx)(y,{}),(0,t.jsx)(i.Button,{variant:"outline",onClick:r,disabled:s,children:"Skip"}),(0,t.jsx)(i.Button,{onClick:e,disabled:!s,children:"Next"})]})})}function j(e){let{topicSlug:s,lessonSlug:o}=e,{exercise:d,progress:h,resetExercise:u,gradeResult:m,currentQuestion:x,isAnswered:g}=(0,c.useExercise)(),p=(0,r.useRouter)();if(!d)return null;let j=d.questions.length,y=h.correctAnswers+h.incorrectAnswers;if(h.completed){let e=d.questions.length,r=h.correctAnswers,l=(0,f.calculateAccuracy)(h),a=(0,f.isExercisePassed)(l,void 0,d.zoneLevel),c=void 0;return(0,t.jsx)(n.Card,{className:"mx-auto max-w-3xl",children:(0,t.jsxs)(n.CardContent,{className:"p-8 text-center space-y-4",children:[(0,t.jsx)("div",{className:"text-3xl font-semibold",children:"Exercise Complete"}),(0,t.jsx)("div",{className:"text-muted-foreground",children:"Nice work staying focused."}),(0,t.jsxs)("div",{className:"mt-2 flex items-center justify-center gap-6",children:[(0,t.jsxs)("div",{className:"rounded-lg border px-6 py-4",children:[(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Score"}),(0,t.jsxs)("div",{className:"text-2xl font-bold",children:[r,"/",e]})]}),(0,t.jsxs)("div",{className:"rounded-lg border px-6 py-4",children:[(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Accuracy"}),(0,t.jsxs)("div",{className:"text-2xl font-bold",children:[l,"%"]})]})]}),(0,t.jsxs)("div",{className:"mt-6 flex flex-col sm:flex-row items-center justify-center gap-3",children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>u(),children:"Retry"}),(0,t.jsx)(i.Button,{variant:"secondary",className:"w-full sm:w-auto",onClick:()=>p.replace("/learn/".concat(s,"/").concat(o)),children:"Back to Lesson"}),a&&(0,t.jsx)(i.Button,{className:"w-full sm:w-auto",onClick:()=>{c?p.replace("/learn/".concat(s,"/").concat(c)):p.replace("/learn/".concat(s))},children:"Next Lesson"})]})]})})}let N=()=>{var e,t,s,r,i,n,l;if(!x)return null;switch(x.type){case"multiple-choice":return null==(e=x.choices.find(e=>e.id===x.correctChoiceId))?void 0:e.text;case"choose-words":{let e=x.question_data;if(e&&e.data){if("fill_in_blanks"===e.subtype)return((null==(n=e.data)||null==(i=n.blanks)?void 0:i.correct)||[]).join(" ");return(null==(s=e.data)?void 0:s.canonical_sentence)||((null==(r=e.data)?void 0:r.tokens)||[]).join(" ")}return null==(t=x.correctAnswer)?void 0:t.join(" ")}case"error-correction":return x.target;case"dialogue-completion":return null==(l=x.choices.find(e=>e.id===x.correctChoiceId))?void 0:l.text;default:return null}};return(0,t.jsxs)("div",{className:"mx-auto max-w-4xl px-4 pb-24",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)(l.Progress,{value:y/j*100}),(0,t.jsxs)("div",{className:"mt-2 text-sm text-right text-muted-foreground",children:[y,"/",j]})]}),g&&m&&(0,t.jsx)(a.Alert,{variant:m.isCorrect?"default":"destructive",className:"mb-6",children:(0,t.jsxs)(a.AlertDescription,{children:[m.feedback,!m.isCorrect&&N()&&(0,t.jsxs)("div",{className:"mt-2 text-sm",children:["Correct answer: ",N()]})]})}),(0,t.jsx)(v,{}),(0,t.jsx)(b,{})]})}function y(){let{submitAnswer:e,isAnswered:r,userAnswer:n,currentQuestion:l}=(0,c.useExercise)(),a=(0,s.useMemo)(()=>{if(!l||r)return!1;switch(l.type){case"multiple-choice":return"string"==typeof n&&!!n;case"choose-words":case"synonyms-matching":case"word-matching":case"role-play":return Array.isArray(n)&&n.length>0;case"error-correction":case"dialogue-completion":return"string"==typeof n&&n.trim().length>0;default:return!1}},[l,r,n]);return(0,t.jsx)(i.Button,{onClick:e,disabled:!a,children:"Submit"})}function v(){var e,r;let{currentQuestion:i,userAnswer:n,setUserAnswer:l,isAnswered:a,submitAnswer:p}=(0,c.useExercise)(),[,f]=(0,s.useState)(!1),b=(0,s.useCallback)((e,t)=>{l(e),f(e.length===t)},[l,f]),j=(0,s.useCallback)(e=>{l(e)},[l]);if(!i)return null;let y={controlled:!0,hideActions:!0,disableInlineFeedback:!0};switch(i.type){case"multiple-choice":return console.log("[QuestionRenderer] MCQ question image:",i.questionImage),(0,t.jsx)(o.MultipleChoiceQuestion,{...y,readOnly:a,type:i.questionType,questionText:i.questionText,passage:i.passage,questionImage:i.questionImage,targetWord:i.targetWord,choices:i.choices,correctChoiceId:i.correctChoiceId,explanation:"",value:null!=n?n:null,onAnswerChange:e=>l(e)});case"role-play":return(0,t.jsx)(g.RolePlay,{title:i.title,steps:i.steps,onComplete:(e,t,s)=>{Array.isArray(s)&&l(s)}});case"choose-words":{let s=i.question_data;console.log("[QuestionRenderer] ChooseWords question audioUrl:",i.audioUrl);let l=e=>{let t=[...e];for(let e=t.length-1;e>0;e--){let s=Math.floor(Math.random()*(e+1));[t[e],t[s]]=[t[s],t[e]]}return t},c="",o="",h=[],u=null==s?void 0:s.subtype,m=null==s||null==(e=s.ui)?void 0:e.highlight_tokens;if(s&&s.data)if("translation"===s.subtype)c="Dá»‹ch sang tiáº¿ng Viá»‡t",o=s.data.source_sentence||"",h=l(s.data.tokens||[]),s.data.tokens;else if("fill_in_blanks"===s.subtype){c="Äiá»n vÃ o chá»— trá»‘ng";let e=(null==(r=s.data.canonical_sentence)?void 0:r.split(" "))||[],t=s.data.blanks,i=(null==t?void 0:t.indices)||[];o=e.map((e,t)=>i.includes(t)?"___":e).join(" ");let n=[...(null==t?void 0:t.correct)||[],...(null==t?void 0:t.word_bank)||[]],l=new Set;h=n.filter(e=>!l.has(e)&&(l.add(e),!0)),null==t||t.correct}else"sentence_scramble"===s.subtype?(c="Can you make the correct sentence?",o="",h=l(s.data.tokens||[])):(c="Sáº¯p xáº¿p thÃ nh cÃ¢u Ä‘Ãºng",o="",h=s.data.tokens||[]),s.data.tokens;else c=i.question,o=i.sentence,h=i.words,i.correctAnswer,u=i.exerciseType,m=i.highlightedWords;return(0,t.jsx)(d.ChooseWords,{...y,readOnly:a,question:c,sentence:o,words:h,type:u,highlightedWords:m,audioUrl:i.audioUrl,characterImageUrl:i.characterImageUrl,value:null!=n?n:null,onAnswerChange:j})}case"error-correction":return(0,t.jsx)(m.ErrorCorrection,{...y,readOnly:a,question:i.question,faultySentence:i.faultySentence,target:i.target,hint:i.hint,value:null!=n?n:"",onAnswerChange:e=>l(e)});case"dialogue-completion":return(0,t.jsx)(x.DialogueCompletion,{...y,readOnly:a,context:i.context,choices:i.choices,correctChoiceId:i.correctChoiceId,explanation:i.explanation,value:null!=n?n:null,onAnswerChange:e=>l(null!=e?e:null)});case"synonyms-matching":return(0,t.jsx)(h.SynonymsMatching,{controlled:!0,readOnly:a,pairs:i.pairs,onAnswerChange:e=>b(e,i.pairs.length)});case"word-matching":return(0,t.jsx)(u.WordsMatching,{controlled:!0,readOnly:a,pairs:i.pairs,onAnswerChange:e=>b(e,i.pairs.length)});default:return(0,t.jsxs)("div",{children:["Unsupported question type: ",i.type]})}}function N(e){let{exercise:i,topicSlug:n,lessonSlug:l}=e,{urlIndex:a,setIndex:o}=function(e){let t=(0,r.useRouter)(),i=(0,r.useSearchParams)();return{urlIndex:function(e,t){let s=e.get("q");return Math.max(1,Math.min(t,s&&parseInt(s,10)||1))}(i,e)-1,setIndex:(0,s.useCallback)(s=>{let r=new URLSearchParams(i.toString());r.set("q",String(Math.max(1,Math.min(e,s+1)))),t.replace("?".concat(r.toString()))},[t,i,e])}}(i.questions.length),{setOpen:d,setOpenMobile:h}=(0,p.useSidebar)();return(0,s.useEffect)(()=>{try{d(!1),h(!1)}catch(e){}},[d,h]),(0,t.jsx)(c.ExerciseProvider,{exerciseData:i,topicSlug:n,lessonSlug:l,urlQuestionIndex:a,onQuestionChange:o,children:(0,t.jsx)(j,{topicSlug:n,lessonSlug:l})})}function C(e){return(0,t.jsx)(s.Suspense,{children:(0,t.jsx)(N,{...e})})}}]);