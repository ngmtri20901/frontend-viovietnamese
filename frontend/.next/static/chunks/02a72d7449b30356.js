(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,299749,e=>{"use strict";function a(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}e.s(["_",()=>a])},972520,e=>{"use strict";e.s(["ArrowRight",()=>a],972520);let a=(0,e.i(475254).default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},788510,115518,e=>{"use strict";e.s(["default",()=>l],788510);var a=e.i(843476),t=e.i(271645),s=e.i(657688);let r=()=>{let[e,r]=(0,t.useState)(""),[l,o]=(0,t.useState)(""),n=["/images/loading/banh-mi.webp","/images/loading/cafe.webp","/images/loading/lotus.webp","/images/loading/non-la.webp","/images/loading/pho.webp"],i=["Connecting you to Vietnam...","Bringing you the best of Vietnamese...","Loading your learning experience..."];return((0,t.useEffect)(()=>{let e=Math.floor(Math.random()*n.length);r(n[e]);let a=Math.floor(Math.random()*i.length);o(i[a])},[]),e)?(0,a.jsx)("div",{className:"fixed inset-0 bg-white/80 backdrop-blur-sm z-50 flex flex-col items-center justify-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-6",children:[(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)(s.default,{src:e,alt:"Loading",width:120,height:120,className:"animate-sway drop-shadow-lg",priority:!0})}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:l}),(0,a.jsxs)("div",{className:"flex space-x-1 justify-center",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce"}),(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})]})}):null},l=e=>{let{children:t,isLoading:s}=e;return(0,a.jsxs)(a.Fragment,{children:[s&&(0,a.jsx)(r,{}),t]})};e.s(["useLoading",()=>o],115518);let o=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],[a,s]=(0,t.useState)(e),r=(0,t.useRef)(null),l=(0,t.useCallback)(()=>{s(!0),r.current=setTimeout(()=>{console.warn("Loading timeout reached, forcing stop"),s(!1)},1e4)},[]),o=(0,t.useCallback)(()=>{s(!1),r.current&&(clearTimeout(r.current),r.current=null)},[]),n=(0,t.useCallback)(async e=>{try{return l(),await e()}finally{o()}},[l,o]),i=(0,t.useCallback)(async function(e){let a,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;for(let s=0;s<=t;s++)try{return 0===s&&l(),await e()}catch(e){if(a=e,console.warn("Attempt ".concat(s+1," failed:"),e),s===t)throw a;await new Promise(e=>setTimeout(e,1e3*Math.pow(2,s)))}finally{s===t&&o()}throw a},[l,o]);return{isLoading:a,startLoading:l,stopLoading:o,withLoading:n,withLoadingAndRetry:i}}},532671,e=>{"use strict";e.s(["flashcardAPI",()=>o,"getAllFlashcards",()=>n,"getAllTopics",()=>i,"getAllWordTypes",()=>c,"getFlashcardsByCategoryWithPagination",()=>u,"getFlashcardsByTopic",()=>d,"getFlashcardsByTopicWithPagination",()=>h],532671),e.i(247167);var a=e.i(299749);class t extends Error{constructor(e,t){super(t),(0,a._)(this,"status",void 0),this.status=e,this.name="APIError"}}async function s(e,a){let s="".concat("https://vietnamesenext.onrender.com").concat("/api/v1").concat(e);try{let e=await fetch(s,{headers:{"Content-Type":"application/json",...null==a?void 0:a.headers},cache:"no-store",...a});if(!e.ok)throw new t(e.status,"API request failed: ".concat(e.statusText));return await e.json()}catch(e){if(e instanceof t)throw e;throw new t(0,"Network error: ".concat(e instanceof Error?e.message:"Unknown error"))}}function r(e){return{id:e.id,vietnamese:e.vietnamese,english:e.english,type:e.type,is_multiword:e.is_multiword,is_multimeaning:e.is_multimeaning,common_meaning:e.common_meaning,vietnamese_sentence:e.vietnamese_sentence,english_sentence:e.english_sentence,topic:e.topic,is_common:"common"===e.common_class,image_url:e.image_url,audio_url:e.audio_url,pronunciation:e.pronunciation,saved_id:e.saved_id,saved_at:e.saved_at,flashcard_type:e.flashcard_type,tags:e.tags,review_count:e.review_count,last_reviewed:e.last_reviewed,notes:e.notes,is_favorite:e.is_favorite,ipa_pronunciation:e.ipa_pronunciation}}function l(e){return{id:e.id,title:e.title,description:e.description,count:e.count,imageUrl:e.imageUrl||"/placeholder.svg?height=200&width=400"}}let o={async getAllFlashcards(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return(await s("/flashcards?skip=".concat(e,"&limit=").concat(a))).map(r)},async getRandomFlashcards(){let{count:e=20,commonWordsOnly:a=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams({count:String(e),common_words_only:String(a)});return(await s("/flashcards/random?".concat(t.toString()))).map(r)},async searchFlashcards(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return(await s("/flashcards/search?q=".concat(encodeURIComponent(e),"&limit=").concat(a))).map(r)},async getAllTopics(e){let a=e?"/flashcards/topics?complexity=".concat(encodeURIComponent(e)):"/flashcards/topics";return(await s(a)).map(l)},async getFlashcardsByTopic(e,a){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20,o=(await this.getAllTopics()).find(a=>a.id===e);if(!o)return console.warn("Topic not found for ID: ".concat(e)),{flashcards:[],total:0,hasMore:!1};let n=new URLSearchParams({skip:t.toString(),limit:l.toString()});a&&n.append("complexity",a);let i="/flashcards/by-topic/".concat(encodeURIComponent(o.title),"?").concat(n.toString()),c=await s(i);return{flashcards:c.flashcards.map(r),total:c.total,hasMore:c.has_more}},async getFlashcardsByTopicLegacy(e,a){return(await this.getFlashcardsByTopic(e,a,0,1e3)).flashcards},async getFlashcardsByType(e,a){let t=a?"/flashcards/by-type/".concat(encodeURIComponent(e),"?complexity=").concat(encodeURIComponent(a)):"/flashcards/by-type/".concat(encodeURIComponent(e));return(await s(t)).map(r)},async getMultiwordFlashcards(e){let a=e?"/flashcards/multiword?complexity=".concat(encodeURIComponent(e)):"/flashcards/multiword";return(await s(a)).map(r)},async getMultimeaningFlashcards(e){let a=e?"/flashcards/multimeaning?complexity=".concat(encodeURIComponent(e)):"/flashcards/multimeaning";return(await s(a)).map(r)},async getFlashcardsByComplexity(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;return(await s("/flashcards/by-complexity/".concat(encodeURIComponent(e),"?skip=").concat(a,"&limit=").concat(t))).map(r)},getComplexityCounts:async()=>await s("/flashcards/complexity-counts"),getFlashcardById:async e=>r(await s("/flashcards/".concat(e))),getFlashcardAudio:async e=>await s("/flashcards/".concat(e,"/audio")),healthCheck:async()=>await s("/flashcards/health"),async getAllWordTypes(e){let a=e?"/flashcards/word-types?complexity=".concat(encodeURIComponent(e)):"/flashcards/word-types";return await s(a)},async getOthersCounts(e){let a=e?"/flashcards/others-counts?complexity=".concat(encodeURIComponent(e)):"/flashcards/others-counts";return await s(a)},async getFlashcardsByTypeWithPagination(e,a){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20,o=new URLSearchParams({skip:t.toString(),limit:l.toString()});a&&o.append("complexity",a);let n=await s("/flashcards/by-type/".concat(encodeURIComponent(e),"?").concat(o));return{flashcards:n.flashcards.map(r),total:n.total,hasMore:n.has_more}},async getMultiwordFlashcardsWithPagination(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,l=new URLSearchParams({skip:a.toString(),limit:t.toString()});e&&l.append("complexity",e);let o=await s("/flashcards/multiword?".concat(l));return{flashcards:o.flashcards.map(r),total:o.total,hasMore:o.has_more}},async getMultimeaningFlashcardsWithPagination(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,l=new URLSearchParams({skip:a.toString(),limit:t.toString()});e&&l.append("complexity",e);let o=await s("/flashcards/multimeaning?".concat(l));return{flashcards:o.flashcards.map(r),total:o.total,hasMore:o.has_more}},async getSavedFlashcards(e){let a=await s("/flashcards/saved/".concat(e));return{flashcards:a.flashcards.map(r),total:a.total}},getSavedFlashcardsCount:async e=>await s("/flashcards/saved/".concat(e,"/count")),getFlashcardsByIds:async e=>(await s("/flashcards/by-ids",{method:"POST",body:JSON.stringify(e)})).map(r)};async function n(){return o.getAllFlashcards()}async function i(){return o.getAllTopics()}async function c(){return o.getAllWordTypes()}async function d(e,a){let t=["multi-meaning","multi-word"];try{let s=await o.getAllWordTypes();if(s.map(e=>e.id).includes(e.toLowerCase())){let t=s.find(a=>a.id===e.toLowerCase());if(t)return{flashcards:await o.getFlashcardsByType(t.name,a),title:t.title}}if(t.includes(e.toLowerCase())){let t,s;return"multi-meaning"===e.toLowerCase()?(t=await o.getMultimeaningFlashcards(a),s="Multi-meaning Words"):"multi-word"===e.toLowerCase()?(t=await o.getMultiwordFlashcards(a),s="Multi-word Expressions"):(t=[],s=e),{flashcards:t,title:s}}}catch(t){if(console.error("Error loading word types:",t),["verb","noun","adj","adv","prep","conj","intj","pron","num","det","part"].includes(e.toLowerCase())){let t=e.toUpperCase();return{flashcards:await o.getFlashcardsByType(t,a),title:({VERB:"Verbs",NOUN:"Nouns",ADJ:"Adjectives",ADV:"Adverbs",PREP:"Prepositions",CONJ:"Conjunctions",INTJ:"Interjections",PRON:"Pronouns",NUM:"Numbers",DET:"Determiners",PART:"Particles"})[t]||t}}}if(t.includes(e.toLowerCase())){let t,s;return"multi-meaning"===e.toLowerCase()?(t=await o.getMultimeaningFlashcards(a),s="Multi-meaning Words"):"multi-word"===e.toLowerCase()?(t=await o.getMultiwordFlashcards(a),s="Multi-word Expressions"):(t=[],s=e),{flashcards:t,title:s}}let s=await o.getFlashcardsByTopicLegacy(e,a),r=(await o.getAllTopics()).find(a=>a.id===e);return{flashcards:s,title:(null==r?void 0:r.title)||"Topic: ".concat(e)}}async function h(e,a){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20;try{let r=await o.getFlashcardsByTopic(e,a,t,s),l=(await o.getAllTopics()).find(a=>a.id===e);return{flashcards:r.flashcards,title:(null==l?void 0:l.title)||"Topic: ".concat(e),total:r.total,hasMore:r.hasMore}}catch(e){throw console.error("Error fetching flashcards by topic with pagination:",e),e}}async function u(e,a){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20;try{try{let r=await o.getAllWordTypes();if(r.map(e=>e.id).includes(e.toLowerCase())){let l=r.find(a=>a.id===e.toLowerCase());if(l){let e=await o.getFlashcardsByTypeWithPagination(l.name,a,t,s);return{flashcards:e.flashcards,title:l.title,total:e.total,hasMore:e.hasMore}}}}catch(r){if(console.error("Error loading word types, falling back to hardcoded list:",r),["verb","noun","adj","adv","prep","conj","intj","pron","num","det","part"].includes(e.toLowerCase())){let r=e.toUpperCase(),l=await o.getFlashcardsByTypeWithPagination(r,a,t,s);return{flashcards:l.flashcards,title:({VERB:"Verbs",NOUN:"Nouns",ADJ:"Adjectives",ADV:"Adverbs",PREP:"Prepositions",CONJ:"Conjunctions",INTJ:"Interjections",PRON:"Pronouns",NUM:"Numbers",DET:"Determiners",PART:"Particles"})[r]||r,total:l.total,hasMore:l.hasMore}}}if(["multi-meaning","multi-word"].includes(e.toLowerCase())){let r,l;return"multi-meaning"===e.toLowerCase()?(r=await o.getMultimeaningFlashcardsWithPagination(a,t,s),l="Multi-meaning Words"):"multi-word"===e.toLowerCase()?(r=await o.getMultiwordFlashcardsWithPagination(a,t,s),l="Multi-word Expressions"):(r={flashcards:[],total:0,hasMore:!1},l=e),{flashcards:r.flashcards,title:l,total:r.total,hasMore:r.hasMore}}let r=await o.getFlashcardsByTopic(e,a,t,s),l=(await o.getAllTopics()).find(a=>a.id===e);return{flashcards:r.flashcards,title:(null==l?void 0:l.title)||"Topic: ".concat(e),total:r.total,hasMore:r.hasMore}}catch(e){throw console.error("Error fetching flashcards by category with pagination:",e),e}}},871689,e=>{"use strict";e.s(["ArrowLeft",()=>a],871689);let a=(0,e.i(475254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},642677,e=>{"use strict";e.s(["FlashcardDeck",()=>m],642677);var a=e.i(843476),t=e.i(437902),s=e.i(628574),r=e.i(166778),l=e.i(571930),o=e.i(726714),n=e.i(373375),i=e.i(463059),c=e.i(859951),d=e.i(271645),h=e.i(956058);function u(e){let{count:t=3,displayMode:r="grid"}=e;return"row"===r?(0,a.jsx)("div",{className:"flex gap-4 pb-4",children:Array.from({length:t},(e,t)=>(0,a.jsx)("div",{className:"flex-shrink-0",style:{width:"260px"},children:(0,a.jsx)(s.Card,{className:"p-4 h-full bg-white",children:(0,a.jsxs)(s.CardContent,{className:"p-0",children:[(0,a.jsx)(h.Skeleton,{className:"w-full h-32 mb-3 rounded-lg"}),(0,a.jsx)(h.Skeleton,{className:"h-4 w-3/4 mb-1"}),(0,a.jsx)(h.Skeleton,{className:"h-3 w-1/2 mb-2"}),(0,a.jsx)(h.Skeleton,{className:"h-5 w-16 rounded-full"})]})})},t))}):(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Array.from({length:t},(e,t)=>(0,a.jsx)(s.Card,{className:"p-3 bg-white",children:(0,a.jsxs)(s.CardContent,{className:"p-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)(h.Skeleton,{className:"h-4 w-12 rounded-full"}),(0,a.jsx)(h.Skeleton,{className:"h-6 w-6 rounded"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(h.Skeleton,{className:"w-8 h-8 rounded border"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)(h.Skeleton,{className:"h-3 w-full mb-1"}),(0,a.jsx)(h.Skeleton,{className:"h-3 w-2/3"})]})]})]})},t))})}function m(e){let{cards:h,currentIndex:m,savedCards:f,onCardSelect:g,onSave:p,displayMode:x="grid",title:w,subtitle:v,itemsPerRow:y=5,hasMore:b=!1,isLoading:j=!1,onLoadMore:N,total:S}=e,[C,F]=(0,d.useState)(!1),[k,_]=(0,d.useState)({x:0,scrollLeft:0}),[L,A]=(0,d.useState)(0),M=(0,d.useRef)(null),T=(0,d.useRef)(null),P=(0,d.useCallback)(()=>{if(!T.current||!N||j||!b)return;let{scrollTop:e,scrollHeight:a,clientHeight:t}=T.current;a-e<=1.5*t&&N()},[N,j,b]);(0,d.useEffect)(()=>{let e=T.current;if(e&&"grid"===x)return e.addEventListener("scroll",P),()=>e.removeEventListener("scroll",P)},[P,x]);let E=e=>{if(!C||"row"!==x||!T.current)return;e.preventDefault();let a=(e.pageX-k.x)*1.5;T.current.scrollLeft=k.scrollLeft-a,A(a)},I=()=>{if(C&&"row"===x&&T.current){if(F(!1),Math.abs(L)>3){let e=L,a=setInterval(()=>{T.current&&Math.abs(e)>.5?(T.current.scrollLeft-=.9*e,e*=.9):clearInterval(a)},16)}document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",I)}};return((0,d.useEffect)(()=>{if("row"===x&&void 0!==m&&T.current){let e=280*m-T.current.clientWidth/2+140;T.current.scrollTo({left:Math.max(0,e),behavior:"smooth"})}},[m,x]),(0,d.useEffect)(()=>()=>{document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",I)},[]),"grid"===x)?(0,a.jsxs)("div",{className:"w-full max-w-4xl mx-auto mt-12 pt-8 border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:w}),v&&(0,a.jsx)("p",{className:"text-sm text-gray-600",children:v}),S&&(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Showing ",h.length," of ",S," flashcards"]})]}),(0,a.jsxs)("div",{ref:T,className:"max-h-80 overflow-y-auto bg-gray-50 p-4 rounded-lg",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[h.map((e,t)=>(0,a.jsxs)(s.Card,{className:"p-3 cursor-pointer transition-all hover:shadow-md ".concat(void 0!==m&&t===m%h.length?"ring-2 ring-blue-500 bg-blue-50":"hover:bg-white bg-white"),onClick:()=>g(t),children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,a.jsx)(r.Badge,{variant:"outline",className:"text-xs",children:Array.isArray(e.type)?e.type.join(", "):e.type}),(0,a.jsx)(c.Button,{variant:"ghost",size:"sm",onClick:a=>{a.stopPropagation(),p(e.id)},className:"p-1 h-auto","aria-label":f.has(e.id)?"Bá» lÆ°u tháº»":"LÆ°u tháº»",children:f.has(e.id)?(0,a.jsx)(o.BookmarkCheck,{className:"h-3 w-3 text-blue-600"}):(0,a.jsx)(l.Bookmark,{className:"h-3 w-3 text-gray-400"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("img",{src:e.image_url||"https://placehold.co/40x40/E2E8F0/4A5568?text=".concat(encodeURIComponent(e.vietnamese[0])),alt:e.vietnamese,className:"w-8 h-8 object-cover rounded border",loading:"lazy",onError:a=>{let t=a.target;t.onerror=null,t.src="https://placehold.co/40x40/E2E8F0/4A5568?text=".concat(encodeURIComponent(e.vietnamese[0]))}}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"font-medium text-sm text-gray-800 truncate",children:e.vietnamese}),(0,a.jsx)("p",{className:"text-xs text-gray-600 truncate",children:e.common_meaning})]})]})]},e.id)),j&&(0,a.jsx)(u,{count:8,displayMode:"grid"})]}),!j&&b&&N&&(0,a.jsx)("div",{className:"flex justify-center mt-6",children:(0,a.jsx)(c.Button,{onClick:N,variant:"outline",className:"px-6",children:"Load More Flashcards"})}),!b&&h.length>0&&(0,a.jsx)("div",{className:"text-center mt-6 text-gray-500 text-sm",children:"You've reached the end of the flashcards"})]})]}):"row"===x?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.default,{id:"1e4c325e7b860a03",children:".flashcard-scroll-container{scrollbar-width:none;-ms-overflow-style:none}.flashcard-scroll-container::-webkit-scrollbar{display:none}"}),(0,a.jsx)("div",{ref:M,className:"jsx-1e4c325e7b860a03 w-full mx-auto relative group select-none",children:(0,a.jsxs)("div",{className:"jsx-1e4c325e7b860a03 relative",children:[(0,a.jsx)(c.Button,{variant:"outline",size:"icon",onClick:()=>{T.current&&T.current.scrollBy({left:-300,behavior:"smooth"})},className:"absolute -left-12 top-1/2 -translate-y-1/2 z-20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 h-8 w-8 rounded-full","aria-label":"Scroll left",children:(0,a.jsx)(n.ChevronLeft,{className:"h-4 w-4"})}),(0,a.jsx)(c.Button,{variant:"outline",size:"icon",onClick:()=>{T.current&&T.current.scrollBy({left:300,behavior:"smooth"})},className:"absolute -right-12 top-1/2 -translate-y-1/2 z-20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 h-8 w-8 rounded-full","aria-label":"Scroll right",children:(0,a.jsx)(i.ChevronRight,{className:"h-4 w-4"})}),(0,a.jsx)("div",{ref:T,style:{cursor:C?"grabbing":"grab"},onMouseDown:e=>{"row"===x&&T.current&&(F(!0),_({x:e.pageX,scrollLeft:T.current.scrollLeft}),A(0),document.addEventListener("mousemove",E),document.addEventListener("mouseup",I))},onTouchStart:e=>{"row"===x&&T.current&&(F(!0),_({x:e.touches[0].pageX,scrollLeft:T.current.scrollLeft}),A(0))},onTouchMove:e=>{if(!C||"row"!==x||!T.current)return;let a=(e.touches[0].pageX-k.x)*1.5;T.current.scrollLeft=k.scrollLeft-a,A(a)},onTouchEnd:()=>{if(C&&"row"===x&&T.current&&(F(!1),Math.abs(L)>3)){let e=L,a=setInterval(()=>{T.current&&Math.abs(e)>.5?(T.current.scrollLeft-=.9*e,e*=.9):clearInterval(a)},16)}},className:"jsx-1e4c325e7b860a03 flashcard-scroll-container overflow-x-auto px-4 py-2",children:(0,a.jsx)("div",{className:"jsx-1e4c325e7b860a03 flex gap-4 pb-4",children:h.map((e,t)=>{let n=void 0!==m&&t===m;return(0,a.jsx)("div",{style:{width:"260px"},className:"jsx-1e4c325e7b860a03 "+"flex-shrink-0 transition-all duration-300 ".concat(n?"scale-105":"hover:scale-[1.02]"),children:(0,a.jsxs)(s.Card,{className:"p-4 cursor-pointer transition-all duration-300 hover:shadow-xl rounded-xl flex flex-col justify-between bg-white h-full ".concat(n?"ring-4 ring-blue-500 ring-offset-2 shadow-2xl bg-gradient-to-br from-blue-50 via-white to-blue-50":"hover:shadow-lg border-2 border-transparent hover:border-blue-200 hover:bg-blue-50/30"),onClick:()=>(e=>{if(C)return;let a=h.findIndex(a=>a.id===e.id);-1!==a&&g(a)})(e),children:[(0,a.jsxs)("div",{className:"jsx-1e4c325e7b860a03",children:[(0,a.jsxs)("div",{className:"jsx-1e4c325e7b860a03 relative w-full h-32 mb-3 rounded-lg overflow-hidden border-2 border-gray-100",children:[(0,a.jsx)("img",{src:e.image_url||"https://placehold.co/300x200/E2E8F0/4A5568?text=".concat(encodeURIComponent(e.vietnamese)),alt:e.vietnamese,loading:"lazy",onError:a=>{let t=a.target;t.onerror=null,t.src="https://placehold.co/300x200/E2E8F0/4A5568?text=".concat(encodeURIComponent(e.vietnamese))},className:"jsx-1e4c325e7b860a03 w-full h-full object-cover"}),(0,a.jsx)(c.Button,{variant:"ghost",size:"sm",onClick:a=>{a.stopPropagation(),p(e.id)},className:"absolute top-2 right-2 p-1.5 h-auto bg-white/80 hover:bg-white rounded-full backdrop-blur-sm shadow-sm","aria-label":f.has(e.id)?"Bá» lÆ°u tháº»":"LÆ°u tháº»",children:f.has(e.id)?(0,a.jsx)(o.BookmarkCheck,{className:"h-4 w-4 text-blue-600"}):(0,a.jsx)(l.Bookmark,{className:"h-4 w-4 text-gray-500"})})]}),(0,a.jsx)("h4",{className:"jsx-1e4c325e7b860a03 "+"font-semibold text-sm mb-1 truncate transition-colors ".concat(n?"text-blue-900":"text-gray-900"),children:e.vietnamese}),(0,a.jsx)("p",{className:"jsx-1e4c325e7b860a03 "+"text-xs mb-2 truncate transition-colors ".concat(n?"text-blue-700":"text-gray-600"),children:e.common_meaning})]}),(0,a.jsx)(r.Badge,{variant:"secondary",className:"text-xs self-start transition-all duration-300 ".concat(n?"bg-blue-100 text-blue-800 border-blue-300 shadow-sm":"bg-blue-50 text-blue-700 border-blue-200"),children:Array.isArray(e.type)?e.type.join(", "):e.type})]})},e.id)})})}),(0,a.jsx)("div",{className:"jsx-1e4c325e7b860a03 flex justify-center mt-4",children:(0,a.jsx)("div",{className:"jsx-1e4c325e7b860a03 h-1.5 w-32 bg-gray-200 rounded-full overflow-hidden shadow-inner",children:(0,a.jsx)("div",{style:{width:"".concat(Math.min(100,(void 0!==m?(m+1)/h.length:0)*100),"%")},className:"jsx-1e4c325e7b860a03 h-full bg-gradient-to-r from-blue-500 to-blue-600 transition-all duration-300 rounded-full"})})})]})})]}):null}},906324,e=>{"use strict";e.s(["useSavedFlashcards",()=>r]);var a=e.i(271645),t=e.i(859016),s=e.i(846696);function r(){let[e,r]=(0,a.useState)(new Set),[l,o]=(0,a.useState)(!1),n=(0,a.useRef)(new Set);(0,a.useEffect)(()=>{n.current=e},[e]),(0,a.useEffect)(()=>{(async()=>{try{let e=(0,t.createClient)(),{data:{user:a}}=await e.auth.getUser();if(!a)return;o(!0);let{data:s,error:l}=await e.from("saved_flashcards").select("flashcard_id").eq("UserID",a.id).eq("flashcard_type","APP");if(l){console.error("Failed to load saved cards:",l);let e=localStorage.getItem("saved_flashcards_".concat(a.id));if(e){let a=JSON.parse(e),t=new Set(a);r(t),n.current=t}return}let i=(null==s?void 0:s.map(e=>e.flashcard_id))||[],c=new Set(i);r(c),n.current=c,localStorage.setItem("saved_flashcards_".concat(a.id),JSON.stringify(i))}catch(e){console.error("Failed to load saved cards:",e)}finally{o(!1)}})()},[]);let i=(0,a.useCallback)(async(e,a)=>{try{let l=(0,t.createClient)(),{data:{user:i}}=await l.auth.getUser();if(!i)return s.toast.error("Please log in to save flashcards"),!1;o(!0);let c=n.current.has(e);if(console.log("ðŸ”„ [useSavedFlashcards] Toggling save for flashcard:",e,"isSaved:",c),c){console.log("ðŸ—‘ï¸ [useSavedFlashcards] Removing flashcard from saved_flashcards");let{error:a}=await l.from("saved_flashcards").delete().eq("UserID",i.id).eq("flashcard_id",e).eq("flashcard_type","APP");if(a)return console.error("âŒ [useSavedFlashcards] Failed to unsave flashcard:",a),s.toast.error("Failed to remove flashcard"),!1;return r(a=>{let t=new Set(a);t.delete(e);let s=Array.from(t);return localStorage.setItem("saved_flashcards_".concat(i.id),JSON.stringify(s)),t}),console.log("âœ… [useSavedFlashcards] Flashcard removed successfully"),s.toast.success("Flashcard removed from your collection"),!0}{console.log("ðŸ’¾ [useSavedFlashcards] Adding flashcard to saved_flashcards");let{error:t}=await l.from("saved_flashcards").insert({UserID:i.id,flashcard_id:e,flashcard_type:"APP",topic:a||null,saved_at:new Date().toISOString(),is_favorite:!1,review_count:0,tags:[]});if(t){if("23505"===t.code)return console.log("â„¹ï¸ [useSavedFlashcards] Flashcard already saved (duplicate key)"),s.toast.info("Flashcard is already saved"),r(a=>{let t=new Set(a);t.add(e);let s=Array.from(t);return localStorage.setItem("saved_flashcards_".concat(i.id),JSON.stringify(s)),t}),!0;return console.error("âŒ [useSavedFlashcards] Failed to save flashcard:",t),console.error("âŒ [useSavedFlashcards] Error details:",{code:t.code,message:t.message,details:t.details,hint:t.hint}),s.toast.error("Failed to save flashcard: ".concat(t.message||"Unknown error")),!1}return r(a=>{let t=new Set(a);t.add(e);let s=Array.from(t);return localStorage.setItem("saved_flashcards_".concat(i.id),JSON.stringify(s)),t}),console.log("âœ… [useSavedFlashcards] Flashcard saved successfully"),s.toast.success("Flashcard saved to your collection"),!0}}catch(a){console.error("âŒ [useSavedFlashcards] Unexpected error toggling save:",a);let e=a instanceof Error?a.message:"An unknown error occurred";return s.toast.error("An error occurred: ".concat(e)),!1}finally{o(!1)}},[]),c=(0,a.useCallback)(a=>e.has(a),[e]);return{savedCards:e,toggleSave:i,isFlashcardSaved:c,loading:l}}},743952,e=>{"use strict";e.s(["default",()=>f]);var a=e.i(843476),t=e.i(271645),s=e.i(618566),r=e.i(859951),l=e.i(871689),o=e.i(972520),n=e.i(367240),i=e.i(532671),c=e.i(642677),d=e.i(399220),h=e.i(906324),u=e.i(788510),m=e.i(115518);function f(){let{isLoading:e,withLoading:f}=(0,m.useLoading)(),g=(0,s.useParams)(),p=(0,s.useSearchParams)(),x=g.topicID,w=p.get("complexity"),[v,y]=(0,t.useState)([]),[b,j]=(0,t.useState)(""),[N,S]=(0,t.useState)(null),[C,F]=(0,t.useState)(0),[k,_]=(0,t.useState)(!1),[L,A]=(0,t.useState)(!0),[M,T]=(0,t.useState)(0),[P,E]=(0,t.useState)(!1),{isFlashcardSaved:I,toggleSave:B}=(0,h.useSavedFlashcards)();(0,t.useEffect)(()=>{!async function(){if(!x){console.warn("No topicId provided in route params"),S("Invalid topic ID");return}await f(async()=>{try{S(null);let e=await (0,i.getFlashcardsByCategoryWithPagination)(x,w||void 0,0,20);y(e.flashcards),j(e.title),T(e.total),A(e.hasMore),0===e.flashcards.length&&0===e.total&&console.warn("No flashcards found for topic: ".concat(x," with complexity: ").concat(w||"all"))}catch(e){console.error("Failed to load flashcards:",e),S(e instanceof Error?e.message:"Failed to load flashcards. Please try again.")}})}()},[x,w,f]);let R=(0,t.useCallback)(async()=>{if(x&&!P&&L){E(!0);try{let e=await (0,i.getFlashcardsByCategoryWithPagination)(x,w||void 0,v.length,20);y(a=>[...a,...e.flashcards]),A(e.hasMore)}catch(e){console.error("Failed to load more flashcards:",e)}finally{E(!1)}}},[x,w,v.length,P,L]);(0,t.useEffect)(()=>{_(!1)},[C]);let U=e=>{B(e,b)},D=(0,t.useCallback)(()=>{F(e=>(e+1)%v.length)},[v.length]),W=(0,t.useCallback)(()=>{F(e=>0===e?v.length-1:e-1)},[v.length]),O=(0,t.useCallback)(()=>{_(e=>!e)},[]);if((0,t.useEffect)(()=>{let e=e=>{switch(["Space","ArrowLeft","ArrowRight"].includes(e.code)&&e.preventDefault(),e.code){case"Space":O();break;case"ArrowLeft":W();break;case"ArrowRight":D()}};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[O,W,D]),N)return(0,a.jsx)(u.default,{isLoading:e,children:(0,a.jsxs)("div",{className:"container mx-auto py-10 px-4 text-center",children:[(0,a.jsx)("div",{className:"text-red-600 mb-4",children:N}),(0,a.jsx)(r.Button,{onClick:()=>window.location.reload(),children:"Try Again"})]})});if(0===v.length)return(0,a.jsx)(u.default,{isLoading:e,children:(0,a.jsxs)("div",{className:"container mx-auto py-10 px-4 text-center",children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold mb-6",children:[b||"Topic"," Flashcards"]}),(0,a.jsx)("p",{className:"text-gray-600 mb-8",children:"No flashcards found for this topic."})]})});let z=v[C];return(0,a.jsx)(u.default,{isLoading:e,children:(0,a.jsxs)("div",{className:"container mx-auto py-10 px-4",tabIndex:0,children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold mb-6 text-center",children:[b," Flashcards"]}),(0,a.jsxs)("div",{className:"text-center text-gray-600 mb-10",children:[(0,a.jsxs)("p",{className:"mb-2",children:[M," flashcards available"]}),(0,a.jsxs)("div",{className:"text-sm space-y-1",children:[(0,a.jsxs)("p",{children:["ðŸ’¡ ",(0,a.jsx)("strong",{children:"Tap"})," to flip â€¢ ",(0,a.jsx)("strong",{children:"Swipe left/right"})," to navigate"]}),(0,a.jsxs)("p",{children:["âŒ¨ï¸ ",(0,a.jsx)("strong",{children:"Spacebar"}),": flip â€¢ ",(0,a.jsx)("strong",{children:"â† â†’"}),": navigate"]})]})]}),z&&(0,a.jsxs)("div",{className:"mb-16 relative z-10",children:[(0,a.jsx)("div",{className:"max-w-2xl mx-auto mb-8",children:(0,a.jsx)(d.FlashcardComponent,{data:z,saved:I(z.id),onSave:U,onSwipe:e=>{"left"===e?D():W()},onFlip:O,isFlipped:k})}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-4 mb-6",children:[(0,a.jsxs)(r.Button,{variant:"outline",onClick:W,className:"flex items-center gap-2",title:"Previous card (â† key)",children:[(0,a.jsx)(l.ArrowLeft,{className:"h-4 w-4"})," Previous"]}),(0,a.jsxs)(r.Button,{variant:"default",onClick:O,className:"px-6 flex items-center gap-2",title:"Flip card (Spacebar)",children:[(0,a.jsx)(n.RotateCcw,{className:"h-4 w-4"}),k?"Show Front":"Show Back"]}),(0,a.jsxs)(r.Button,{variant:"outline",onClick:D,className:"flex items-center gap-2",title:"Next card (â†’ key)",children:["Next ",(0,a.jsx)(o.ArrowRight,{className:"h-4 w-4"})]})]}),(0,a.jsx)("div",{className:"text-center mb-8",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Card ",C+1," of ",v.length]})})]}),(0,a.jsx)("div",{className:"relative z-0",children:(0,a.jsx)(c.FlashcardDeck,{cards:v,currentIndex:C,savedCards:new Set(v.filter(e=>I(e.id)).map(e=>e.id)),onCardSelect:e=>{if("number"==typeof e)F(e);else{let a=v.findIndex(a=>a.id===e);-1!==a&&F(a)}},onSave:U,hasMore:L,isLoading:P,onLoadMore:R,total:M})})]})})}}]);