module.exports=[489026,a=>{"use strict";a.s(["useExerciseSession",()=>c]);var b=a.i(572131);function c(){let a=(0,b.useRef)(!1),c=(0,b.useRef)(!1),d=(0,b.useCallback)(async b=>{if(a.current)return console.warn("[useExerciseSession] Start already in progress"),null;a.current=!0;try{console.log("[useExerciseSession] Starting exercise:",b);let a=await fetch("/api/exercise/start",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({practiceSetId:b})}),c=await a.json();if(!a.ok||!c.success)return console.error("[useExerciseSession] Failed to start exercise:",{status:a.status,statusText:a.statusText,error:c.error,data:c}),null;return console.log("[useExerciseSession] Exercise started:",{practiceResultId:c.practiceResultId,attemptNo:c.attemptNo,resumed:c.resumed}),{practiceResultId:c.practiceResultId,attemptNo:c.attemptNo}}catch(a){return console.error("[useExerciseSession] Error starting exercise:",a),null}finally{a.current=!1}},[]);return{startExercise:d,submitExercise:(0,b.useCallback)(async a=>{if(c.current)return console.warn("[useExerciseSession] Submit already in progress"),{success:!1,error:"Submit already in progress"};c.current=!0;try{console.log("[useExerciseSession] Submitting exercise:",{practiceResultId:a.practiceResultId,scorePercent:a.scorePercent,passed:a.passed});let b=await fetch("/api/exercise/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),c=await b.json();if(!b.ok||!c.success)return console.error("[useExerciseSession] Failed to submit exercise:",c.error),{success:!1,error:c.error};return console.log("[useExerciseSession] Exercise submitted successfully:",{isFirstPass:c.isFirstPass,coinsEarned:c.coinsEarned,xpEarned:c.xpEarned}),c}catch(a){return console.error("[useExerciseSession] Error submitting exercise:",a),{success:!1,error:a instanceof Error?a.message:"Unknown error"}}finally{c.current=!1}},[]),checkForResume:(0,b.useCallback)(async a=>{try{console.log("[useExerciseSession] Checking for in_progress session:",a);let b=await fetch(`/api/exercise/resume?practiceSetId=${a}`),c=await b.json();if(!b.ok||!c.success)return console.error("[useExerciseSession] Failed to check resume:",c.error),null;if(c.practiceResult)return console.log("[useExerciseSession] Found in_progress session:",c.practiceResult.id),{practiceResultId:c.practiceResult.id,attemptNo:c.practiceResult.attemptNo};return console.log("[useExerciseSession] No in_progress session found"),null}catch(a){return console.error("[useExerciseSession] Error checking resume:",a),null}},[])}}},601876,a=>{"use strict";a.s(["normalizeForComparison",()=>d,"searchVietnamese",()=>e]);let b={à:"a",á:"a",ả:"a",ã:"a",ạ:"a",ă:"a",ằ:"a",ắ:"a",ẳ:"a",ẵ:"a",ặ:"a",â:"a",ầ:"a",ấ:"a",ẩ:"a",ẫ:"a",ậ:"a",è:"e",é:"e",ẻ:"e",ẽ:"e",ẹ:"e",ê:"e",ề:"e",ế:"e",ể:"e",ễ:"e",ệ:"e",ì:"i",í:"i",ỉ:"i",ĩ:"i",ị:"i",ò:"o",ó:"o",ỏ:"o",õ:"o",ọ:"o",ô:"o",ồ:"o",ố:"o",ổ:"o",ỗ:"o",ộ:"o",ơ:"o",ờ:"o",ớ:"o",ở:"o",ỡ:"o",ợ:"o",ù:"u",ú:"u",ủ:"u",ũ:"u",ụ:"u",ư:"u",ừ:"u",ứ:"u",ử:"u",ữ:"u",ự:"u",ỳ:"y",ý:"y",ỷ:"y",ỹ:"y",ỵ:"y",đ:"d",À:"A",Á:"A",Ả:"A",Ã:"A",Ạ:"A",Ă:"A",Ằ:"A",Ắ:"A",Ẳ:"A",Ẵ:"A",Ặ:"A",Â:"A",Ầ:"A",Ấ:"A",Ẩ:"A",Ẫ:"A",Ậ:"A",È:"E",É:"E",Ẻ:"E",Ẽ:"E",Ẹ:"E",Ê:"E",Ề:"E",Ế:"E",Ể:"E",Ễ:"E",Ệ:"E",Ì:"I",Í:"I",Ỉ:"I",Ĩ:"I",Ị:"I",Ò:"O",Ó:"O",Ỏ:"O",Õ:"O",Ọ:"O",Ô:"O",Ồ:"O",Ố:"O",Ổ:"O",Ỗ:"O",Ộ:"O",Ơ:"O",Ờ:"O",Ớ:"O",Ở:"O",Ỡ:"O",Ợ:"O",Ù:"U",Ú:"U",Ủ:"U",Ũ:"U",Ụ:"U",Ư:"U",Ừ:"U",Ứ:"U",Ử:"U",Ữ:"U",Ự:"U",Ỳ:"Y",Ý:"Y",Ỷ:"Y",Ỹ:"Y",Ỵ:"Y",Đ:"D"};function c(a){if(!a)return"";let c=a;for(let[a,d]of Object.entries(b))c=c.replace(RegExp(a,"g"),d);return c}function d(a,b={}){if(!a)return"";let{preserveCase:e=!1,preserveWhitespace:f=!1}=b,g=c(a);return g=g.replace(/[\p{P}\p{S}]+/gu,""),f||(g=g.replace(/\s+/g," ").trim()),e||(g=g.toLowerCase()),g}function e(a,b,d=!1){if(!a||!b)return!1;let f=c(a),g=c(b);return d?f.includes(g):f.toLowerCase().includes(g.toLowerCase())}}];

//# sourceMappingURL=_8357955a._.js.map