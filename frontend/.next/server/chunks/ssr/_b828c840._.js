module.exports=[308549,a=>{"use strict";a.s(["Pause",()=>b],308549);let b=(0,a.i(883706).default)("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]])},566471,a=>{"use strict";a.s(["Popover",()=>Q,"PopoverContent",()=>S,"PopoverTrigger",()=>R],566471);var b=a.i(187924),c=a.i(572131),d=a.i(507554),e=a.i(470121),f=a.i(750104),g=a.i(596743),h=a.i(486228),i=a.i(422297),j=a.i(392843),k=a.i(704691),l=a.i(692616),m=a.i(777192),n=a.i(30553),o=Symbol("radix.slottable");function p(a){return c.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===o}var q=a.i(225152),r=a.i(241852),s=a.i(152081),t="Popover",[u,v]=(0,f.createContextScope)(t,[k.createPopperScope]),w=(0,k.createPopperScope)(),[x,y]=u(t),z=a=>{let{__scopePopover:d,children:e,open:f,defaultOpen:g,onOpenChange:h,modal:i=!1}=a,l=w(d),m=c.useRef(null),[n,o]=c.useState(!1),[p,r]=(0,q.useControllableState)({prop:f,defaultProp:g??!1,onChange:h,caller:t});return(0,b.jsx)(k.Root,{...l,children:(0,b.jsx)(x,{scope:d,contentId:(0,j.useId)(),triggerRef:m,open:p,onOpenChange:r,onOpenToggle:c.useCallback(()=>r(a=>!a),[r]),hasCustomAnchor:n,onCustomAnchorAdd:c.useCallback(()=>o(!0),[]),onCustomAnchorRemove:c.useCallback(()=>o(!1),[]),modal:i,children:e})})};z.displayName=t;var A="PopoverAnchor";c.forwardRef((a,d)=>{let{__scopePopover:e,...f}=a,g=y(A,e),h=w(e),{onCustomAnchorAdd:i,onCustomAnchorRemove:j}=g;return c.useEffect(()=>(i(),()=>j()),[i,j]),(0,b.jsx)(k.Anchor,{...h,...f,ref:d})}).displayName=A;var B="PopoverTrigger",C=c.forwardRef((a,c)=>{let{__scopePopover:f,...g}=a,h=y(B,f),i=w(f),j=(0,e.useComposedRefs)(c,h.triggerRef),l=(0,b.jsx)(n.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":h.open,"aria-controls":h.contentId,"data-state":O(h.open),...g,ref:j,onClick:(0,d.composeEventHandlers)(a.onClick,h.onOpenToggle)});return h.hasCustomAnchor?l:(0,b.jsx)(k.Anchor,{asChild:!0,...i,children:l})});C.displayName=B;var D="PopoverPortal",[E,F]=u(D,{forceMount:void 0}),G=a=>{let{__scopePopover:c,forceMount:d,children:e,container:f}=a,g=y(D,c);return(0,b.jsx)(E,{scope:c,forceMount:d,children:(0,b.jsx)(m.Presence,{present:d||g.open,children:(0,b.jsx)(l.Portal,{asChild:!0,container:f,children:e})})})};G.displayName=D;var H="PopoverContent",I=c.forwardRef((a,c)=>{let d=F(H,a.__scopePopover),{forceMount:e=d.forceMount,...f}=a,g=y(H,a.__scopePopover);return(0,b.jsx)(m.Presence,{present:e||g.open,children:g.modal?(0,b.jsx)(K,{...f,ref:c}):(0,b.jsx)(L,{...f,ref:c})})});I.displayName=H;var J=function(a){let d=function(a){let b=c.forwardRef((a,b)=>{let{children:d,...f}=a;if(c.isValidElement(d)){var g;let a,h,i=(g=d,(h=(a=Object.getOwnPropertyDescriptor(g.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?g.ref:(h=(a=Object.getOwnPropertyDescriptor(g,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?g.props.ref:g.props.ref||g.ref),j=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(f,d.props);return d.type!==c.Fragment&&(j.ref=b?(0,e.composeRefs)(b,i):i),c.cloneElement(d,j)}return c.Children.count(d)>1?c.Children.only(null):null});return b.displayName=`${a}.SlotClone`,b}(a),f=c.forwardRef((a,e)=>{let{children:f,...g}=a,h=c.Children.toArray(f),i=h.find(p);if(i){let a=i.props.children,f=h.map(b=>b!==i?b:c.Children.count(a)>1?c.Children.only(null):c.isValidElement(a)?a.props.children:null);return(0,b.jsx)(d,{...g,ref:e,children:c.isValidElement(a)?c.cloneElement(a,void 0,f):null})}return(0,b.jsx)(d,{...g,ref:e,children:f})});return f.displayName=`${a}.Slot`,f}("PopoverContent.RemoveScroll"),K=c.forwardRef((a,f)=>{let g=y(H,a.__scopePopover),h=c.useRef(null),i=(0,e.useComposedRefs)(f,h),j=c.useRef(!1);return c.useEffect(()=>{let a=h.current;if(a)return(0,r.hideOthers)(a)},[]),(0,b.jsx)(s.RemoveScroll,{as:J,allowPinchZoom:!0,children:(0,b.jsx)(M,{...a,ref:i,trapFocus:g.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,d.composeEventHandlers)(a.onCloseAutoFocus,a=>{a.preventDefault(),j.current||g.triggerRef.current?.focus()}),onPointerDownOutside:(0,d.composeEventHandlers)(a.onPointerDownOutside,a=>{let b=a.detail.originalEvent,c=0===b.button&&!0===b.ctrlKey;j.current=2===b.button||c},{checkForDefaultPrevented:!1}),onFocusOutside:(0,d.composeEventHandlers)(a.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),L=c.forwardRef((a,d)=>{let e=y(H,a.__scopePopover),f=c.useRef(!1),g=c.useRef(!1);return(0,b.jsx)(M,{...a,ref:d,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:b=>{a.onCloseAutoFocus?.(b),b.defaultPrevented||(f.current||e.triggerRef.current?.focus(),b.preventDefault()),f.current=!1,g.current=!1},onInteractOutside:b=>{a.onInteractOutside?.(b),b.defaultPrevented||(f.current=!0,"pointerdown"===b.detail.originalEvent.type&&(g.current=!0));let c=b.target;e.triggerRef.current?.contains(c)&&b.preventDefault(),"focusin"===b.detail.originalEvent.type&&g.current&&b.preventDefault()}})}),M=c.forwardRef((a,c)=>{let{__scopePopover:d,trapFocus:e,onOpenAutoFocus:f,onCloseAutoFocus:j,disableOutsidePointerEvents:l,onEscapeKeyDown:m,onPointerDownOutside:n,onFocusOutside:o,onInteractOutside:p,...q}=a,r=y(H,d),s=w(d);return(0,h.useFocusGuards)(),(0,b.jsx)(i.FocusScope,{asChild:!0,loop:!0,trapped:e,onMountAutoFocus:f,onUnmountAutoFocus:j,children:(0,b.jsx)(g.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:p,onEscapeKeyDown:m,onPointerDownOutside:n,onFocusOutside:o,onDismiss:()=>r.onOpenChange(!1),children:(0,b.jsx)(k.Content,{"data-state":O(r.open),role:"dialog",id:r.contentId,...s,...q,ref:c,style:{...q.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),N="PopoverClose";function O(a){return a?"open":"closed"}c.forwardRef((a,c)=>{let{__scopePopover:e,...f}=a,g=y(N,e);return(0,b.jsx)(n.Primitive.button,{type:"button",...f,ref:c,onClick:(0,d.composeEventHandlers)(a.onClick,()=>g.onOpenChange(!1))})}).displayName=N,c.forwardRef((a,c)=>{let{__scopePopover:d,...e}=a,f=w(d);return(0,b.jsx)(k.Arrow,{...f,...e,ref:c})}).displayName="PopoverArrow";var P=a.i(16116);function Q({...a}){return(0,b.jsx)(z,{"data-slot":"popover",...a})}function R({...a}){return(0,b.jsx)(C,{"data-slot":"popover-trigger",...a})}function S({className:a,align:c="center",sideOffset:d=4,...e}){return(0,b.jsx)(G,{children:(0,b.jsx)(I,{"data-slot":"popover-content",align:c,sideOffset:d,className:(0,P.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",a),...e})})}},300247,a=>{"use strict";a.s(["default",()=>u],300247);var b=a.i(187924),c=a.i(731626),d=a.i(572131),e=a.i(325015),f=a.i(308549),g=a.i(212439);let h=(0,a.i(883706).default)("rotate-cw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);var i=a.i(787654),j=a.i(596221),k=a.i(57703),l=a.i(214549),m=a.i(694660),n=a.i(566471),o=a.i(350669);let p=[{bg:"bg-[#E8F2FF]",border:"border-[#bcd9ff]",text:"text-[#0b5bbf]",tail:"bg-[#E8F2FF] border-[#bcd9ff]"},{bg:"bg-[#FFF6CC]",border:"border-[#f1dc86]",text:"text-[#8a6a00]",tail:"bg-[#FFF6CC] border-[#f1dc86]"},{bg:"bg-[#F1F5F9]",border:"border-[#d7dee7]",text:"text-[#0f172a]",tail:"bg-[#F1F5F9] border-[#d7dee7]"}];function q(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function r(a,c){if(!a||!c?.length)return a;let d=c.filter(Boolean).map(q).join("|");if(!d)return a;let e=RegExp(`(${d})`,"gi");return a.split(e).map((a,c)=>c%2?(0,b.jsx)("mark",{className:"bg-yellow-200/70 rounded px-0.5",children:a},c):(0,b.jsx)("span",{children:a},c))}function s(a,c,d,e,f){return c&&0!==c.length?(0,b.jsx)("div",{className:"inline leading-relaxed",children:c.map((a,f)=>(0,b.jsxs)("span",{onClick:()=>e(f,a.s/1e3),className:`cursor-pointer transition-all duration-200 rounded-sm px-0.5 -mx-0.5 ${d===f?"bg-violet-100 text-violet-900 font-semibold shadow-sm":null!==d&&f<d?"text-gray-400":"text-gray-700 hover:bg-gray-50"}`,style:{textDecoration:d===f?"underline":"none",textDecorationColor:d===f?"#6D28D9":"transparent",textUnderlineOffset:"3px"},children:[a.t,f<c.length-1?" ":""]},f))}):r(a,f)}function t(a){let b=Math.floor(a/60),c=Math.floor(a%60);return`${b}:${c.toString().padStart(2,"0")}`}function u({title:a,spriteUrl:q,lines:u,meta:v,defaultHighlight:w=[],maxVisibleLines:x=10,speakerPalette:y=p}){let z=(0,d.useRef)(null),A=(0,d.useRef)(null),[B,C]=(0,d.useState)(null),[D,E]=(0,d.useState)(null),[F,G]=(0,d.useState)(!1),[H,I]=(0,d.useState)(!1),[J,K]=(0,d.useState)(0),[L,M]=(0,d.useState)(0),[N,O]=(0,d.useState)(1),[P,Q]=(0,d.useState)(1),[R,S]=(0,d.useState)(null),[T,U]=(0,d.useState)(null),[V,W]=(0,d.useState)(!1),[X,Y]=(0,d.useState)(!1),[Z,$]=(0,d.useState)(!1),[_,aa]=(0,d.useState)(!1),ab=(0,d.useRef)(null),ac=[.25,.5,.75,1,1.25,1.5],ad=(0,d.useRef)(void 0),ae=(0,d.useRef)(null),af=(0,d.useMemo)(()=>{let a=new Set,b=[];for(let c of u){let d=(c.speaker??"").trim();d&&(a.has(d)||(a.add(d),b.push(d)))}return b},[u]),ag=(0,d.useMemo)(()=>{let a=new Map;return af.forEach((b,c)=>a.set(b,c)),a},[af]),ah=(0,d.useMemo)(()=>u.map(a=>{let b=null!=a.start&&null!=a.end?Math.max(0,a.end-a.start):void 0;return{...a,_duration:b,_hl:a.highlight_words?.length?a.highlight_words:w,_speakerIndex:ag.get(a.speaker??"")??0}}),[u,ag,w]),ai=!!q&&ah.every(a=>null!=a._duration&&null!=a.start),aj=(0,d.useMemo)(()=>{if(!ai)return 0;let a=0;for(let b of ah)"number"==typeof b.end&&b.end>a&&(a=b.end);return a},[ai,ah]);(0,d.useEffect)(()=>()=>{clearTimeout(ab.current),z.current?.pause()},[]),(0,d.useEffect)(()=>{let a=A.current;if(!a)return;let b=()=>{Y(a.scrollHeight>a.clientHeight),$(a.scrollTop>4),aa(a.scrollTop+a.clientHeight<a.scrollHeight-4)};return b(),a.addEventListener("scroll",b,{passive:!0}),window.addEventListener("resize",b),()=>{a.removeEventListener("scroll",b),window.removeEventListener("resize",b)}},[ah.length]),(0,d.useEffect)(()=>{let a=setTimeout(()=>{let a=A.current;if(a){let b=a.scrollHeight>a.clientHeight;b!==X&&Y(b)}},100);return()=>clearTimeout(a)},[ah,X]);let ak=(0,d.useCallback)(()=>{let a=z.current;a&&(F?a.pause():(I(!0),ae.current=null,C(null),a.play().catch(console.error)))},[F]),al=(0,d.useCallback)(a=>{let b=z.current;if(!b||!isFinite(b.duration)||0===b.duration)return;let c=Math.max(0,Math.min(b.currentTime+a,b.duration));b.currentTime=c,K(c)},[]),am=(0,d.useCallback)(()=>{let a=(ac.indexOf(N)+1)%ac.length,b=ac[a];O(b),z.current&&(z.current.playbackRate=b)},[N,ac]),an=(0,d.useCallback)(a=>{O(a),z.current&&(z.current.playbackRate=a)},[]),ao=(0,d.useCallback)(a=>{let b=z.current;if(!b||!isFinite(b.duration)||0===b.duration)return;let c=Math.max(0,Math.min(a,b.duration));b.currentTime=c,K(c)},[]),ap=(0,d.useCallback)((a,b)=>{ao(b)},[ao]),aq=(0,d.useCallback)(a=>{let b=Math.max(0,Math.min(100,a[0]))/100;Q(b),z.current&&(z.current.volume=b)},[]),ar=(0,d.useCallback)(()=>{if(!v?.word_index)return;let a=1e3*J,b=function(a,b){for(let c=0;c<a.length;c++){let d=a[c];if(void 0!==d.start&&void 0!==d.end){let a=1e3*d.start,e=1e3*d.end;if(b>=a&&b<=e)return c}}return null}(ah,a),c=null;if(null!==b){let d=(b+1).toString(),e=v.word_index[d],f=ah[b].start?1e3*ah[b].start:0;e&&(c=function(a,b,c=0){for(let d=0;d<a.length;d++){let e=c+a[d].s,f=c+a[d].e;if(b>=e&&b<=f)return d}return null}(e,a,f))}S(b),U(c)},[v?.word_index,ah,J]);return(0,d.useEffect)(()=>{let a=a=>{if(document.activeElement?.tagName.toLowerCase()!=="input")switch(a.key.toLowerCase()){case" ":case"k":a.preventDefault(),ak();break;case"j":case"arrowleft":a.preventDefault(),al(-3);break;case"l":case"arrowright":a.preventDefault(),al(3)}};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[ak,al]),(0,d.useEffect)(()=>{let a=()=>{ar(),F&&(ad.current=requestAnimationFrame(a))};return F&&(ad.current=requestAnimationFrame(a)),()=>{ad.current&&cancelAnimationFrame(ad.current)}},[F,ar]),(0,d.useEffect)(()=>{let a=z.current;if(!a)return;let b=()=>{let b=a.duration;(!isFinite(b)||b<=0)&&aj>0&&(b=aj),isFinite(b)&&b>0&&M(b)},c=()=>{b(),I(!1)},d=()=>{V||K(a.currentTime),null!==B&&null!=ae.current&&a.currentTime>=ae.current-.01&&(a.pause(),ae.current=null,C(null),G(!1))},e=()=>{G(!0),I(!1)},f=()=>G(!1),g=()=>{G(!1),S(null),U(null),ae.current=null,C(null)},h=()=>I(!0),i=()=>{I(!1),b()};return a.addEventListener("loadedmetadata",c),a.addEventListener("durationchange",b),a.addEventListener("timeupdate",d),a.addEventListener("play",e),a.addEventListener("pause",f),a.addEventListener("ended",g),a.addEventListener("loadstart",h),a.addEventListener("canplay",i),a.volume=P,a.playbackRate=N,b(),()=>{a.removeEventListener("loadedmetadata",c),a.removeEventListener("durationchange",b),a.removeEventListener("timeupdate",d),a.removeEventListener("play",e),a.removeEventListener("pause",f),a.removeEventListener("ended",g),a.removeEventListener("loadstart",h),a.removeEventListener("canplay",i)}},[q,N,P,V,B,aj]),(0,b.jsx)(o.TooltipProvider,{delayDuration:150,children:(0,b.jsxs)("div",{className:"jsx-a45d5ed199426603 space-y-6",children:[(0,b.jsxs)("div",{className:"jsx-a45d5ed199426603 bg-white rounded-2xl border border-gray-200 shadow-lg p-6",children:[(0,b.jsx)("audio",{ref:z,preload:"auto",src:q,crossOrigin:"anonymous",className:"jsx-a45d5ed199426603 hidden"}),(0,b.jsxs)("div",{className:"jsx-a45d5ed199426603 flex items-center gap-4 mb-4",children:[(0,b.jsx)("div",{className:"jsx-a45d5ed199426603 relative",children:(0,b.jsx)(l.Button,{onClick:ak,className:"w-14 h-14 rounded-full bg-gray-900 hover:bg-gray-800 text-white shadow-lg relative",size:"icon",disabled:H,children:H?(0,b.jsx)(j.Loader2,{className:"w-7 h-7 animate-spin"}):F?(0,b.jsx)(f.Pause,{className:"w-7 h-7"}):(0,b.jsx)(e.Play,{className:"w-7 h-7 ml-1"})})}),(0,b.jsxs)("div",{className:"jsx-a45d5ed199426603 flex-1 mx-4",children:[a&&(0,b.jsx)("div",{className:"jsx-a45d5ed199426603 text-center mb-2",children:(0,b.jsx)("h4",{className:"jsx-a45d5ed199426603 text-sm font-medium text-gray-700 tracking-wide",children:a})}),(0,b.jsxs)("div",{className:"jsx-a45d5ed199426603 flex items-center gap-3",children:[(0,b.jsx)("span",{className:"jsx-a45d5ed199426603 text-sm font-mono text-gray-500 min-w-[2.5rem]",children:t(J)}),(0,b.jsx)("div",{className:"jsx-a45d5ed199426603 flex-1",children:(0,b.jsx)(m.Slider,{value:[L>0?Math.min(J,L):J],max:L>0?L:1,step:.05,onValueChange:([a])=>{W(!0),K(a)},onValueCommit:([a])=>{ao(a),W(!1)},className:"w-full cursor-pointer"})}),(0,b.jsx)("span",{className:"jsx-a45d5ed199426603 text-sm font-mono text-gray-500 min-w-[2.5rem]",children:t(L)})]})]}),(0,b.jsxs)(n.Popover,{children:[(0,b.jsx)(n.PopoverTrigger,{asChild:!0,children:(0,b.jsx)(l.Button,{variant:"ghost",size:"icon",className:"w-10 h-10 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-full",children:(0,b.jsx)(g.Volume2,{className:"w-5 h-5"})})}),(0,b.jsx)(n.PopoverContent,{className:"w-24 p-2",align:"end",children:(0,b.jsxs)("div",{className:"jsx-a45d5ed199426603 flex flex-col items-center h-24 justify-center",children:[(0,b.jsx)(m.Slider,{value:[Math.round(100*P)],max:100,step:1,onValueChange:aq,orientation:"vertical",className:"h-24"}),(0,b.jsxs)("div",{className:"jsx-a45d5ed199426603 text-[10px] text-center mt-1 text-gray-500 w-full",children:[Math.round(100*P),"%"]})]})})]})]}),(0,b.jsxs)("div",{className:"jsx-a45d5ed199426603 flex items-center justify-center gap-6",children:[(0,b.jsxs)(o.Tooltip,{children:[(0,b.jsx)(o.TooltipTrigger,{asChild:!0,children:(0,b.jsx)(l.Button,{variant:"ghost",size:"icon",onClick:()=>al(-3),className:"w-10 h-10 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-full",children:(0,b.jsx)(i.RotateCcw,{className:"w-5 h-5"})})}),(0,b.jsx)(o.TooltipContent,{children:"Skip back 3s"})]}),(0,b.jsxs)(o.Tooltip,{children:[(0,b.jsx)(o.TooltipTrigger,{asChild:!0,children:(0,b.jsxs)(l.Button,{variant:"ghost",onClick:am,className:"text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded-lg px-3 py-2 text-sm font-medium min-w-[3rem]",children:[N,"×"]})}),(0,b.jsx)(o.TooltipContent,{children:(0,b.jsxs)("div",{className:"jsx-a45d5ed199426603 text-center",children:[(0,b.jsx)("div",{className:"jsx-a45d5ed199426603 text-xs text-gray-500 mb-1",children:"Available speeds:"}),(0,b.jsx)("div",{className:"jsx-a45d5ed199426603 flex gap-2 justify-center text-sm",children:ac.map(a=>(0,b.jsxs)("button",{onClick:()=>an(a),className:`jsx-a45d5ed199426603 px-1.5 py-0.5 rounded cursor-pointer transition-colors ${a===N?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[a,"×"]},a))})]})})]}),(0,b.jsxs)(o.Tooltip,{children:[(0,b.jsx)(o.TooltipTrigger,{asChild:!0,children:(0,b.jsx)(l.Button,{variant:"ghost",size:"icon",onClick:()=>al(3),className:"w-10 h-10 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-full",children:(0,b.jsx)(h,{className:"w-5 h-5"})})}),(0,b.jsx)(o.TooltipContent,{children:"Skip forward 3s"})]})]})]}),null!==R&&(0,b.jsxs)("div",{className:"jsx-a45d5ed199426603 bg-gray-50 rounded-xl p-6 border border-gray-200",children:[(0,b.jsx)("div",{className:"jsx-a45d5ed199426603 text-lg leading-relaxed text-center",children:(()=>{let a=ah[R],b=v?.word_index?.[String(R+1)],c=a.start??0;return s(a.vi,b,T,a=>{let d=b?.[a];d&&ap(a,c+d.s/1e3)},a.highlight_words?.length?a.highlight_words:w)})()}),(0,b.jsx)("div",{className:"jsx-a45d5ed199426603 text-center mt-3",children:(0,b.jsx)("span",{className:"jsx-a45d5ed199426603 text-sm text-gray-500 font-medium",children:ah[R].speaker||"Speaker"})}),ah[R].en&&(0,b.jsxs)("div",{className:"jsx-a45d5ed199426603 text-center mt-2 text-sm text-gray-600 italic",children:['"',ah[R].en,'"']})]}),(0,b.jsxs)("div",{ref:A,className:"jsx-a45d5ed199426603 relative max-h-[60vh] overflow-y-auto scroll-area pr-1",children:[X&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:`jsx-a45d5ed199426603 pointer-events-none absolute left-0 right-0 top-0 h-6 bg-gradient-to-b from-white to-transparent transition-opacity ${Z?"opacity-100":"opacity-0"}`}),(0,b.jsx)("div",{className:`jsx-a45d5ed199426603 pointer-events-none absolute left-0 right-0 bottom-0 h-6 bg-gradient-to-t from-white to-transparent transition-opacity ${_?"opacity-100":"opacity-0"}`})]}),(0,b.jsx)("div",{className:"jsx-a45d5ed199426603 space-y-4",children:ah.map((a,c)=>{let d=a._speakerIndex,e=d%2==0,h=y[d]??y[y.length-1];return(0,b.jsx)("div",{className:`jsx-a45d5ed199426603 flex ${e?"justify-start":"justify-end"}`,children:(0,b.jsxs)("div",{className:`jsx-a45d5ed199426603 relative max-w-[92%] rounded-xl border p-3 shadow-sm ${h.bg} ${h.border} ${e?"rounded-tl-none":"rounded-tr-none"}`,children:[(0,b.jsx)("span",{"aria-hidden":!0,className:`jsx-a45d5ed199426603 absolute top-3 ${e?"-left-1.5":"-right-1.5"} h-3 w-3 rotate-45 ${h.bg} z-[-1]`}),(0,b.jsxs)("div",{className:"jsx-a45d5ed199426603 flex items-center gap-2",children:[(0,b.jsx)("span",{className:"jsx-a45d5ed199426603 font-semibold text-gray-700",children:a.speaker??(e?"A":"B")}),(ai||a.audioUrl)&&(0,b.jsx)(l.Button,{size:"icon",variant:"ghost",onClick:()=>B===c?void(clearTimeout(ab.current),z.current?.pause(),C(null),ae.current=null):(a=>{let b=z.current;if(!b)return;let c=ah[a];try{ai&&void 0!==c.start&&void 0!==c.end?(b.currentTime=Math.max(0,c.start),ae.current=c.end,b.play().then(()=>C(a)).catch(a=>{console.error("Play sprite line error:",a),C(null),ae.current=null})):c.audioUrl&&(b.src!==c.audioUrl&&(b.src=c.audioUrl),ae.current=null,b.currentTime=0,b.play().then(()=>C(a)).catch(a=>{console.error("Play line file error:",a),C(null)}))}catch(a){console.error("Error playing line:",a),C(null)}})(c),title:"Play line",className:"ml-1",children:B===c?(0,b.jsx)(f.Pause,{className:"h-4 w-4"}):(0,b.jsx)(g.Volume2,{className:"h-4 w-4"})}),(0,b.jsxs)(o.Tooltip,{children:[(0,b.jsx)(o.TooltipTrigger,{asChild:!0,children:(0,b.jsx)(l.Button,{variant:"ghost",size:"icon",className:"p-1 h-7 w-7 text-gray-500 hover:text-indigo-600 hover:bg-indigo-50 rounded-full","aria-label":"See English translation",onMouseEnter:()=>E(c),onMouseLeave:()=>E(a=>a===c?null:a),disabled:!a.en,children:(0,b.jsx)(k.TbMessageLanguage,{className:"h-4 w-4"})})}),a.en&&D===c?(0,b.jsx)(o.TooltipContent,{side:"top",align:"center",sideOffset:8,className:"max-w-[28rem] whitespace-pre-wrap leading-relaxed text-sm",children:(0,b.jsxs)("p",{className:"jsx-a45d5ed199426603 italic text-gray-700",children:["“",a.en,"”"]})}):null]})]}),(0,b.jsx)("div",{className:`jsx-a45d5ed199426603 mt-1 ${h.text} font-medium`,children:R===c?(()=>{let b=v?.word_index?.[String(c+1)],d=a.start??0;return s(a.vi,b,T,a=>{let c=b?.[a];c&&ap(a,d+c.s/1e3)},a.highlight_words?.length?a.highlight_words:w)})():r(a.vi,a.highlight_words?.length?a.highlight_words:w)})]})},c)})})]}),(0,b.jsx)(c.default,{id:"a45d5ed199426603",children:".scroll-area{scrollbar-gutter:stable both-edges;scroll-behavior:smooth;scrollbar-width:none}.scroll-area:hover{scrollbar-width:thin}.scroll-area::-webkit-scrollbar{width:0;height:0}.scroll-area:hover::-webkit-scrollbar{width:6px;height:6px}.scroll-area::-webkit-scrollbar-track{background:0 0}.scroll-area::-webkit-scrollbar-thumb{background:0 0;border-radius:999px}.scroll-area:hover::-webkit-scrollbar-thumb{background:#00000059}.scroll-area::-webkit-scrollbar-thumb:hover{background:#00000080}"})]})})}},894336,a=>{"use strict";a.s(["default",()=>d]);var b=a.i(187924),c=a.i(572131);function d({url:a,label:d="Open Storybook (Popup)"}){let[e,f]=(0,c.useState)(!1);return(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("button",{onClick:()=>{if(!a)return;let b=function(a,b="gemini_story",c=960,d=720){let e=window.top??window,f=e.outerHeight?Math.max(0,(e.outerHeight-d)/2):0,g=e.outerWidth?Math.max(0,(e.outerWidth-c)/2):0;return window.open(a,b,`popup=yes,toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=${c},height=${d},top=${f},left=${g}`)}(a);if(!b||b.closed){f(!0);let b=document.createElement("a");b.href=a,b.target="_blank",b.rel="noopener noreferrer",b.click()}},className:"inline-flex items-center rounded-md px-3 py-2 bg-[#067BC2] text-white hover:bg-[#055a9f] text-sm",children:d}),e&&(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Popup bị chặn bởi trình duyệt, đã mở trong tab mới."})]})}},120073,a=>{"use strict";a.s(["default",()=>j],120073);var b=a.i(187924),c=a.i(572131),d=a.i(613749),e=a.i(50522);let f=(0,a.i(883706).default)("book-marked",[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);var g=a.i(533441),h=a.i(557116),i=a.i(214549);function j({grammarPoints:a}){let[j,k]=(0,c.useState)(0);if(!a||0===a.length)return null;let l=a[j],m=a.length;return(0,b.jsxs)(h.Card,{className:"bg-white shadow-lg rounded-xl",children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(f,{className:"h-6 w-6 text-violet-600"}),(0,b.jsx)(h.CardTitle,{className:"text-xl font-bold text-slate-800",children:"Grammar Points"})]}),m>1&&(0,b.jsxs)("div",{className:"ml-auto flex items-center gap-1.5 flex-nowrap",children:[(0,b.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:()=>{k(a=>0===a?m-1:a-1)},className:"h-8 w-8 rounded-full hover:bg-violet-100 hover:text-violet-700 transition-colors","aria-label":"Previous grammar point",children:(0,b.jsx)(d.ChevronLeft,{className:"h-4 w-4"})}),(0,b.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:()=>{k(a=>a===m-1?0:a+1)},className:"h-8 w-8 rounded-full hover:bg-violet-100 hover:text-violet-700 transition-colors","aria-label":"Next grammar point",children:(0,b.jsx)(e.ChevronRight,{className:"h-4 w-4"})})]})]})}),(0,b.jsxs)(h.CardContent,{children:[(0,b.jsxs)("div",{className:"space-y-3 rounded-lg border border-violet-200 bg-violet-50/50 p-4 min-h-[200px]",children:[l.usage&&(0,b.jsx)("p",{className:"text-base text-slate-700 leading-relaxed",children:l.usage}),l.structure&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h5",{className:"text-sm font-semibold text-slate-600 mb-1",children:"Formula"}),(0,b.jsx)("div",{className:"rounded-md bg-violet-100 p-2 text-sm font-mono text-violet-900 border border-violet-200",children:l.structure})]}),Array.isArray(l.notes)&&l.notes.length>0&&(0,b.jsxs)("div",{className:"pt-2",children:[(0,b.jsx)("h5",{className:"text-sm font-semibold text-slate-600 mb-2",children:"Notes"}),(0,b.jsx)("ul",{className:"space-y-2",children:l.notes.map((a,c)=>(0,b.jsxs)("li",{className:"flex items-start gap-2",children:[(0,b.jsx)(g.Check,{className:"h-4 w-4 mt-1 shrink-0 text-violet-500"}),(0,b.jsx)("span",{className:"text-sm text-slate-600",children:a})]},c))})]})]}),m>1&&(0,b.jsx)("div",{className:"flex justify-center gap-1 mt-4",children:Array.from({length:m}).map((a,c)=>(0,b.jsx)("button",{onClick:()=>k(c),className:`h-2 w-2 rounded-full transition-colors ${c===j?"bg-violet-600":"bg-violet-200 hover:bg-violet-300"}`,"aria-label":`Go to grammar point ${c+1}`},c))})]})]})}},874387,a=>{"use strict";a.s(["default",()=>n],874387);var b=a.i(187924),c=a.i(572131),d=a.i(45222),e=a.i(325015),f=a.i(308549),g=a.i(504699),g=g,h=a.i(598091),h=h,i=a.i(57703),j=a.i(557116),k=a.i(214549),l=a.i(350669),m=a.i(298621);function n({examples:a}){if(!a||0===a.length)return null;let[e,f]=(0,c.useState)(!1),i=a.length>2;return(0,b.jsxs)(j.Card,{className:"bg-white shadow-lg rounded-xl",children:[(0,b.jsx)(j.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(d.MessageCircle,{className:"h-6 w-6 text-emerald-600"}),(0,b.jsx)(j.CardTitle,{className:"text-xl font-bold text-slate-800 flex-1",children:"Example Sentences"}),i&&(0,b.jsx)(k.Button,{variant:"ghost",size:"sm",onClick:()=>f(a=>!a),className:"h-7 px-2 text-emerald-700 hover:text-emerald-800 hover:bg-emerald-100","aria-expanded":e,children:e?(0,b.jsxs)("span",{className:"flex items-center gap-1 text-sm font-medium",children:["Less ",(0,b.jsx)(h.default,{className:"h-4 w-4"})]}):(0,b.jsxs)("span",{className:"flex items-center gap-1 text-sm font-medium",children:["More ",(0,b.jsx)(g.default,{className:"h-4 w-4"})]})})]})}),(0,b.jsx)(l.TooltipProvider,{children:(0,b.jsxs)(j.CardContent,{className:"relative",children:[(0,b.jsx)("div",{className:"space-y-3",children:a.map((a,c)=>(0,b.jsx)("div",{className:(0,m.default)(!e&&c>=2&&"hidden"),children:(0,b.jsx)(o,{example:a})},c))}),i&&!e&&(0,b.jsx)("div",{className:"pointer-events-none absolute inset-x-0 bottom-0 h-20 bg-gradient-to-t from-white to-transparent rounded-b-xl"})]})})]})}function o({example:a}){let[d,g]=(0,c.useState)(!1),[h,j]=(0,c.useState)(0),[m,n]=(0,c.useState)(0),[o,p]=(0,c.useState)(a.audioUrl??null),q=(0,c.useRef)(null),r=(0,c.useRef)(null);return(0,c.useEffect)(()=>{!a.audioUrl&&a.audioPath&&p(`https://uavvljncupscxoxofcvp.supabase.co/storage/v1/object/public/lesson-materials/${a.audioPath}`)},[a.audioUrl,a.audioPath]),(0,b.jsxs)("div",{className:"group rounded-lg border border-slate-200 bg-slate-50/70 p-4 transition-all duration-200 hover:border-emerald-200 hover:bg-emerald-50/60",children:[o&&(0,b.jsx)("audio",{ref:q,src:o,preload:"metadata",onPlay:()=>g(!0),onPause:()=>g(!1),onEnded:()=>g(!1),onTimeUpdate:()=>{n(q.current?.currentTime||0)},onLoadedMetadata:()=>{j(q.current?.duration||0)}}),(0,b.jsxs)("div",{className:"mb-3 flex items-start gap-2",children:[(0,b.jsxs)("p",{className:"font-semibold text-emerald-800 text-base leading-relaxed flex-1",children:["“",a.vi,"”"]}),a.en&&(0,b.jsxs)(l.Tooltip,{children:[(0,b.jsx)(l.TooltipTrigger,{asChild:!0,children:(0,b.jsx)(k.Button,{variant:"ghost",size:"sm","aria-label":"Show English translation",className:"h-7 w-7 p-0 shrink-0 text-emerald-700 hover:text-emerald-800 hover:bg-emerald-100",children:(0,b.jsx)(i.TbMessageLanguage,{className:"h-4 w-4"})})}),(0,b.jsx)(l.TooltipContent,{side:"top",className:"max-w-xs",children:(0,b.jsx)("p",{className:"text-sm italic",children:a.en})})]})]}),o&&(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(k.Button,{size:"icon",variant:"ghost",onClick:()=>{d?q.current?.pause():q.current?.play(),g(!d)},className:"h-8 w-8 shrink-0 rounded-full text-emerald-700 bg-emerald-100 hover:bg-emerald-200",children:d?(0,b.jsx)(f.Pause,{className:"h-4 w-4"}):(0,b.jsx)(e.Play,{className:"h-4 w-4"})}),(0,b.jsx)("div",{className:"flex-grow flex items-center gap-2",children:(0,b.jsx)("div",{ref:r,onClick:a=>{if(r.current&&q.current){let b=r.current.clientWidth,c=a.nativeEvent.offsetX/b*h;q.current.currentTime=c,n(c)}},className:"w-full h-1.5 bg-emerald-200/80 rounded-full cursor-pointer",children:(0,b.jsx)("div",{style:{width:`${h>0?m/h*100:0}%`},className:"h-full bg-emerald-600 rounded-full transition-all"})})})]})]})}},251232,a=>{"use strict";a.s(["default",()=>u],251232);var b=a.i(187924),c=a.i(808406),d=a.i(821374),e=a.i(557116),f=a.i(16116),g=a.i(419499),h=a.i(572131),i=a.i(212439),j=a.i(438617),k=a.i(596221),l=a.i(566471),m=a.i(214549),n=a.i(405050),o=(0,n.createServerReference)("40b7874b5beee18e2e913212052e9efd3061f9459a",n.callServer,void 0,n.findSourceMapURL,"saveVocabularyFromLesson"),p=(0,n.createServerReference)("40a12d3392f5f7e3fd35f464eebcfef7da83f3293b",n.callServer,void 0,n.findSourceMapURL,"unsaveVocabularyFromLesson");async function q(a,b){if(!a)throw Error("Audio path is required");let{data:c}=b.storage.from("lesson-materials").getPublicUrl(a),d=c.publicUrl;if(!d)throw Error("Failed to get public URL for audio file");let e=new Audio(d);return new Promise((a,b)=>{e.oncanplaythrough=()=>{e.play().then(()=>{a(e)}).catch(a=>{b(Error(`Failed to play audio: ${a.message}`))})},e.onerror=a=>{b(Error(`Audio loading error: ${a}`))},e.load()})}var r=a.i(255895),s=a.i(50944);function t({vocabulary:a,topicId:c,lessonId:d,children:e}){let[g,n]=(0,h.useState)(!1),[t,u]=(0,h.useState)(a.isSaved),[v,w]=(0,h.useState)(!1),[x,y]=(0,h.useState)(!1),z=(0,h.useRef)(null),A=(0,s.useRouter)();(0,h.useEffect)(()=>()=>{var a;z.current&&(a=z.current)&&(a.pause(),a.currentTime=0)},[]);let B=async()=>{if(a.audio)try{y(!0);let b=(0,r.createClient)(),c=await q(a.audio,b);z.current=c,c.onended=()=>{y(!1),z.current=null},c.onerror=()=>{y(!1),z.current=null}}catch(a){console.error("Error playing audio:",a),y(!1)}},C=async()=>{if(!v)try{w(!0);let b=await o({topicId:c,lessonId:d,vietnameseText:a.vi,englishText:a.en,ipa:a.ipa||null,audioPath:a.audio||null,pos:a.pos||null});b.success?(u(!0),A.refresh()):console.error("Failed to save vocabulary:",b.error)}catch(a){console.error("Error saving vocabulary:",a)}finally{w(!1)}},D=async()=>{if(!v)try{w(!0);let b=await p(a.vocabKey);b.success?(u(!1),A.refresh()):console.error("Failed to unsave vocabulary:",b.error)}catch(a){console.error("Error unsaving vocabulary:",a)}finally{w(!1)}};return(0,b.jsxs)(l.Popover,{open:g,onOpenChange:n,children:[(0,b.jsx)(l.PopoverTrigger,{asChild:!0,children:(0,b.jsx)("span",{className:(0,f.cn)("cursor-pointer transition-all",g&&"underline decoration-dashed",t&&"text-indigo-600"),onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:e})}),(0,b.jsx)(l.PopoverContent,{className:"w-auto p-2",side:"top",align:"start",sideOffset:8,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[a.ipa&&(0,b.jsxs)("span",{className:"text-sm font-mono text-slate-700",children:["/",a.ipa,"/"]}),a.audio&&(0,b.jsx)(m.Button,{variant:"ghost",size:"icon",onClick:B,disabled:x,className:"h-7 w-7",title:"Play pronunciation",children:x?(0,b.jsx)(k.Loader2,{className:"h-3.5 w-3.5 animate-spin"}):(0,b.jsx)(i.Volume2,{className:"h-3.5 w-3.5"})}),(0,b.jsx)(m.Button,{variant:"ghost",size:"icon",onClick:t?D:C,disabled:v,className:(0,f.cn)("h-7 w-7",t&&"text-primary"),title:t?"Unsave vocabulary":"Save vocabulary",children:v?(0,b.jsx)(k.Loader2,{className:"h-3.5 w-3.5 animate-spin"}):(0,b.jsx)(j.Bookmark,{className:(0,f.cn)("h-3.5 w-3.5",t&&"fill-current")})})]})})]})}function u({vocabulary:a,topicId:h,lessonId:i,maxHeight:j="200px"}){return a&&0!==a.length?(0,b.jsxs)(e.Card,{className:"bg-white shadow-lg rounded-xl",children:[(0,b.jsxs)(e.CardHeader,{className:"pb-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(c.Sparkles,{className:"h-6 w-6 text-indigo-600"}),(0,b.jsx)(e.CardTitle,{className:"text-xl font-bold text-slate-800",children:"Key Vocabulary"})]}),a.length>8&&(0,b.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:["Scroll to see all ",a.length," words"]})]}),(0,b.jsx)(e.CardContent,{className:"pt-0",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:(0,f.cn)("divide-y divide-slate-200 overflow-y-auto custom-scrollbar pr-2",a.length>8&&"pb-4"),style:{maxHeight:j},children:a.map((a,c)=>{let e=(a=>{if(!a)return{label:"",className:"hidden"};let b=String(a).toLowerCase().trim();switch(b.toLowerCase()){case"noun":case"n":return{label:"n.",className:"bg-blue-100 text-blue-800"};case"verb":case"v":return{label:"v.",className:"bg-emerald-100 text-emerald-800"};case"adjective":case"adj":return{label:"adj.",className:"bg-purple-100 text-purple-800"};case"adverb":case"adv":return{label:"adv.",className:"bg-teal-100 text-teal-800"};case"phrase":case"phr":case"phr.":return{label:"phr.",className:"bg-amber-100 text-amber-800"};case"verb phrase":case"vp":return{label:"v.phr.",className:"bg-emerald-200 text-emerald-900"};case"conjunction":case"conj":return{label:"conj.",className:"bg-pink-100 text-pink-800"};case"pronoun":case"pron":return{label:"pron.",className:"bg-indigo-100 text-indigo-800"};case"preposition":case"prep":return{label:"prep.",className:"bg-rose-100 text-rose-800"};case"particle":case"prt":return{label:"prt.",className:"bg-gray-200 text-gray-800"};case"determiner":case"det":return{label:"det.",className:"bg-yellow-100 text-yellow-800"};case"classifier":case"clf":return{label:"clf.",className:"bg-lime-100 text-lime-800"};default:return{label:b.slice(0,3)+".",className:"bg-slate-100 text-slate-800"}}})(a.pos);return(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 py-3 first:pt-0 hover:bg-indigo-50/50 transition-colors duration-150 rounded-md px-2 -mx-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 relative",children:[(0,b.jsx)(g.Badge,{className:(0,f.cn)("rounded-md px-2 py-0.5 text-xs pointer-events-none transition-none",e.className),children:e.label}),(0,b.jsxs)("div",{className:"flex items-center gap-2 relative flex-1",children:[(0,b.jsx)(t,{vocabulary:a,topicId:h,lessonId:i,children:(0,b.jsx)("span",{className:"font-semibold text-indigo-700 leading-relaxed",children:a.vi})}),a.isSaved&&(0,b.jsx)(d.Star,{className:"h-3 w-3 text-amber-500 fill-amber-500 shrink-0"})]})]}),(0,b.jsx)("p",{className:"text-slate-600 justify-self-end text-right leading-relaxed",children:a.en})]},c)})}),a.length>8&&(0,b.jsx)("div",{className:"absolute bottom-0 left-0 right-2 h-6 bg-gradient-to-t from-white to-transparent pointer-events-none rounded-b-lg","aria-hidden":"true"})]})})]}):null}},124985,a=>{"use strict";a.s(["default",()=>f]);var b=a.i(187924),c=a.i(439193),d=a.i(872089),e=a.i(572131);let f=()=>{let{profile:a,loading:f}=(0,c.useUserProfile)(),[g,h]=(0,e.useState)(!1);(0,e.useEffect)(()=>{h(!0)},[]);let i=g&&f,j=i?"--":a?.coins??0;return(0,b.jsxs)("div",{className:`flex items-center gap-2 bg-amber-50 px-3 py-1.5 rounded-full border border-amber-200 ${i?"animate-pulse":""}`,children:[(0,b.jsx)(d.Coins,{className:"h-5 w-5 text-amber-500"}),(0,b.jsx)("span",{className:"font-semibold text-amber-700",children:j})]})}},709323,a=>{"use strict";a.s(["UserProgressProvider",()=>g,"useUserProgress",()=>h]);var b=a.i(187924),c=a.i(572131),d=a.i(875757);let e={completedLessons:[],unlockedChapters:[],coins:0},f=(0,c.createContext)(void 0),g=({children:a})=>{let[g,h]=(0,c.useState)(e),{toast:i}=(0,d.useToast)();return(0,b.jsx)(f.Provider,{value:{userProgress:g,completeLesson:a=>{g.completedLessons.includes(a)||(h(b=>({...b,completedLessons:[...b.completedLessons,a],coins:b.coins+10})),i({title:"Lesson Completed!",description:"You've earned 10 coins.",variant:"default"}))},unlockChapter:(a,b)=>g.coins<b?(i({title:"Not enough coins",description:`You need ${b} coins to unlock this chapter.`,variant:"destructive"}),!1):(g.unlockedChapters.includes(a)||(h(c=>({...c,unlockedChapters:[...c.unlockedChapters,a],coins:c.coins-b})),i({title:"Chapter Unlocked!",description:`You've spent ${b} coins to unlock this chapter.`,variant:"default"})),!0),isLessonLocked:(a,b)=>{if(!g.unlockedChapters.includes(b))return!0;if(1===a.order)return!1;let c=`${b}-${a.order-1}`;return!g.completedLessons.includes(c)},canUnlockChapter:a=>g.coins>=a},children:a})},h=()=>{let a=(0,c.useContext)(f);if(void 0===a)throw Error("useUserProgress must be used within a UserProgressProvider");return a}},522776,a=>{"use strict";a.s(["default",()=>g]);var b=a.i(187924),c=a.i(571987),d=a.i(50944),e=a.i(557116),f=a.i(709323);let g=({topic:a})=>{let g=(0,d.useRouter)(),{userProgress:h}=(0,f.useUserProgress)(),i=a.chapters.flatMap(a=>a.lessons),j=i.filter(a=>h.completedLessons.includes(a.id)).length,k=i.length>0?j/i.length*100:0;return(0,b.jsx)(e.Card,{className:"group cursor-pointer transition-all duration-300 hover:shadow-xl hover:scale-105 bg-white border-0 shadow-md overflow-hidden rounded-xl",onClick:()=>{g.push(`/learn/${a.slug}`)},children:(0,b.jsxs)(e.CardContent,{className:"p-0",children:[(0,b.jsxs)("div",{className:"relative aspect-square bg-gradient-to-br from-orange-100 to-orange-200 overflow-hidden rounded-t-xl",children:[a.image?(0,b.jsx)(c.default,{src:a.image,alt:a.title,fill:!0,className:"object-cover group-hover:scale-110 transition-transform duration-300"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,b.jsx)("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center",children:(0,b.jsx)("div",{className:"w-8 h-8 bg-orange-400 rounded-lg"})})}),k>0&&(0,b.jsx)("div",{className:"absolute top-3 right-3 bg-white/90 backdrop-blur-sm rounded-full px-3 py-1.5",children:(0,b.jsxs)("span",{className:"text-xs font-bold text-green-600",children:[Math.round(k),"%"]})})]}),(0,b.jsxs)("div",{className:"p-5",children:[(0,b.jsx)("h3",{className:"font-bold text-gray-900 mb-2 group-hover:text-[#067BC2] transition-colors text-lg",children:a.title}),a.description&&(0,b.jsx)("p",{className:"text-sm text-gray-600 leading-relaxed mb-3 line-clamp-2",children:a.description}),(0,b.jsxs)("div",{className:"text-xs text-gray-500 font-medium",children:[a.lessonCount??0," lesson",(a.lessonCount??0)!==1?"s":""]})]})]})})}},969596,a=>{"use strict";a.s(["default",()=>d]);var b=a.i(187924),c=a.i(522776);let d=({zone:a})=>(0,b.jsxs)("section",{className:"mb-12",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:a.title}),(0,b.jsx)("p",{className:"text-gray-600 text-lg leading-relaxed max-w-4xl",children:a.description})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:a.topics.map(a=>(0,b.jsx)(c.default,{topic:a},a.id))})]})},167453,a=>{"use strict";a.s(["CheckCircle2",()=>b.default]);var b=a.i(767511)},239111,a=>{"use strict";a.s(["LessonProgressBadge",()=>g]);var b=a.i(187924),c=a.i(419499),d=a.i(167453),e=a.i(641710),f=a.i(65151);function g({status:a,bestScore:g=0,passThreshold:h=80,className:i=""}){return"passed"===a?(0,b.jsxs)(c.Badge,{className:`bg-green-500 hover:bg-green-600 text-white flex items-center gap-1 text-xs px-2 py-1 w-fit ${i}`,children:[(0,b.jsx)(d.CheckCircle2,{size:12}),(0,b.jsxs)("span",{children:[Math.round(g),"%"]})]}):"in_progress"===a?(0,b.jsxs)(c.Badge,{variant:"secondary",className:`bg-blue-100 hover:bg-blue-200 text-blue-700 flex items-center gap-1 text-xs px-2 py-1 w-fit ${i}`,children:[(0,b.jsx)(e.Clock,{size:12}),(0,b.jsxs)("span",{children:[Math.round(g),"%"]})]}):(0,b.jsxs)(c.Badge,{variant:"outline",className:`bg-gray-50 text-gray-600 flex items-center gap-1 text-xs px-2 py-1 w-fit ${i}`,children:[(0,b.jsx)(f.Circle,{size:12}),(0,b.jsx)("span",{children:"Start"})]})}},371676,a=>{"use strict";a.s(["LessonUnlockTooltip",()=>g]);var b=a.i(187924),c=a.i(350669),d=a.i(943108),e=a.i(167453),f=a.i(786520);function g({unlockStatus:a,children:g}){return a.isLocked?(0,b.jsx)(c.TooltipProvider,{children:(0,b.jsxs)(c.Tooltip,{children:[(0,b.jsx)(c.TooltipTrigger,{asChild:!0,children:g}),(0,b.jsx)(c.TooltipContent,{side:"right",className:"bg-gray-900 text-white border-gray-700 max-w-xs",children:(()=>{switch(a.reason){case"login_required":return(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsx)(d.Lock,{size:16,className:"mt-0.5 flex-shrink-0"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold",children:"Login Required"}),(0,b.jsx)("p",{className:"text-xs text-gray-300 mt-1",children:"Please log in to access lessons"})]})]});case"zone_locked":return(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsx)(d.Lock,{size:16,className:"mt-0.5 flex-shrink-0"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold",children:"Zone Locked"}),(0,b.jsx)("p",{className:"text-xs text-gray-300 mt-1",children:a.requiredAction}),void 0!==a.completedTopicsInPrevZone&&void 0!==a.totalTopicsInPrevZone&&(0,b.jsxs)("div",{className:"mt-2",children:[(0,b.jsx)("div",{className:"text-xs text-gray-400",children:"Progress:"}),(0,b.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-2 mt-1",children:(0,b.jsx)("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${a.completedTopicsInPrevZone/a.totalTopicsInPrevZone*100}%`}})}),(0,b.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:[a.completedTopicsInPrevZone," / ",a.totalTopicsInPrevZone," topics completed"]})]})]})]});case"previous_incomplete":return(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsx)(e.CheckCircle2,{size:16,className:"mt-0.5 flex-shrink-0"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold",children:"Previous Lesson Required"}),(0,b.jsx)("p",{className:"text-xs text-gray-300 mt-1",children:a.requiredAction})]})]});case"tier_restriction":return(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsx)(f.Crown,{size:16,className:"mt-0.5 flex-shrink-0 text-yellow-400"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold",children:"Upgrade Required"}),(0,b.jsx)("p",{className:"text-xs text-gray-300 mt-1",children:a.requiredAction||"Upgrade your subscription to access this lesson"})]})]});case"loading":return(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold",children:"Loading..."}),(0,b.jsx)("p",{className:"text-xs text-gray-300 mt-1",children:"Checking unlock status"})]})]});default:return(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsx)(d.Lock,{size:16,className:"mt-0.5 flex-shrink-0"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold",children:"Locked"}),(0,b.jsx)("p",{className:"text-xs text-gray-300 mt-1",children:"This lesson is currently unavailable"})]})]})}})()})]})}):(0,b.jsx)(b.Fragment,{children:g})}}];

//# sourceMappingURL=_b828c840._.js.map