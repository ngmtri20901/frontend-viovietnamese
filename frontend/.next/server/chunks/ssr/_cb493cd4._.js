module.exports=[400210,a=>{"use strict";a.s(["ArrowLeft",()=>b],400210);let b=(0,a.i(883706).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},367919,a=>{"use strict";a.s(["FlashcardDeck",()=>n],367919);var b=a.i(187924),c=a.i(731626),d=a.i(557116),e=a.i(419499),f=a.i(438617),g=a.i(257394),h=a.i(613749),i=a.i(50522),j=a.i(214549),k=a.i(572131),l=a.i(394074);function m({count:a=3,displayMode:c="grid"}){return"row"===c?(0,b.jsx)("div",{className:"flex gap-4 pb-4",children:Array.from({length:a},(a,c)=>(0,b.jsx)("div",{className:"flex-shrink-0",style:{width:"260px"},children:(0,b.jsx)(d.Card,{className:"p-4 h-full bg-white",children:(0,b.jsxs)(d.CardContent,{className:"p-0",children:[(0,b.jsx)(l.Skeleton,{className:"w-full h-32 mb-3 rounded-lg"}),(0,b.jsx)(l.Skeleton,{className:"h-4 w-3/4 mb-1"}),(0,b.jsx)(l.Skeleton,{className:"h-3 w-1/2 mb-2"}),(0,b.jsx)(l.Skeleton,{className:"h-5 w-16 rounded-full"})]})})},c))}):(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Array.from({length:a},(a,c)=>(0,b.jsx)(d.Card,{className:"p-3 bg-white",children:(0,b.jsxs)(d.CardContent,{className:"p-0",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)(l.Skeleton,{className:"h-4 w-12 rounded-full"}),(0,b.jsx)(l.Skeleton,{className:"h-6 w-6 rounded"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(l.Skeleton,{className:"w-8 h-8 rounded border"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)(l.Skeleton,{className:"h-3 w-full mb-1"}),(0,b.jsx)(l.Skeleton,{className:"h-3 w-2/3"})]})]})]})},c))})}function n({cards:a,currentIndex:l,savedCards:n,onCardSelect:o,onSave:p,displayMode:q="grid",title:r,subtitle:s,itemsPerRow:t=5,hasMore:u=!1,isLoading:v=!1,onLoadMore:w,total:x}){let[y,z]=(0,k.useState)(!1),[A,B]=(0,k.useState)({x:0,scrollLeft:0}),[C,D]=(0,k.useState)(0),E=(0,k.useRef)(null),F=(0,k.useRef)(null),G=(0,k.useCallback)(()=>{if(!F.current||!w||v||!u)return;let{scrollTop:a,scrollHeight:b,clientHeight:c}=F.current;b-a<=1.5*c&&w()},[w,v,u]);(0,k.useEffect)(()=>{let a=F.current;if(a&&"grid"===q)return a.addEventListener("scroll",G),()=>a.removeEventListener("scroll",G)},[G,q]);let H=a=>{if(!y||"row"!==q||!F.current)return;a.preventDefault();let b=(a.pageX-A.x)*1.5;F.current.scrollLeft=A.scrollLeft-b,D(b)},I=()=>{if(y&&"row"===q&&F.current){if(z(!1),Math.abs(C)>3){let a=C,b=setInterval(()=>{F.current&&Math.abs(a)>.5?(F.current.scrollLeft-=.9*a,a*=.9):clearInterval(b)},16)}document.removeEventListener("mousemove",H),document.removeEventListener("mouseup",I)}};return((0,k.useEffect)(()=>{if("row"===q&&void 0!==l&&F.current){let a=280*l-F.current.clientWidth/2+140;F.current.scrollTo({left:Math.max(0,a),behavior:"smooth"})}},[l,q]),(0,k.useEffect)(()=>()=>{document.removeEventListener("mousemove",H),document.removeEventListener("mouseup",I)},[]),"grid"===q)?(0,b.jsxs)("div",{className:"w-full max-w-4xl mx-auto mt-12 pt-8 border-t border-gray-200",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:r}),s&&(0,b.jsx)("p",{className:"text-sm text-gray-600",children:s}),x&&(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:["Showing ",a.length," of ",x," flashcards"]})]}),(0,b.jsxs)("div",{ref:F,className:"max-h-80 overflow-y-auto bg-gray-50 p-4 rounded-lg",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[a.map((c,h)=>(0,b.jsxs)(d.Card,{className:`p-3 cursor-pointer transition-all hover:shadow-md ${void 0!==l&&h===l%a.length?"ring-2 ring-blue-500 bg-blue-50":"hover:bg-white bg-white"}`,onClick:()=>o(h),children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,b.jsx)(e.Badge,{variant:"outline",className:"text-xs",children:Array.isArray(c.type)?c.type.join(", "):c.type}),(0,b.jsx)(j.Button,{variant:"ghost",size:"sm",onClick:a=>{a.stopPropagation(),p(c.id)},className:"p-1 h-auto","aria-label":n.has(c.id)?"Bá» lÆ°u tháº»":"LÆ°u tháº»",children:n.has(c.id)?(0,b.jsx)(g.BookmarkCheck,{className:"h-3 w-3 text-blue-600"}):(0,b.jsx)(f.Bookmark,{className:"h-3 w-3 text-gray-400"})})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)("img",{src:c.image_url||`https://placehold.co/40x40/E2E8F0/4A5568?text=${encodeURIComponent(c.vietnamese[0])}`,alt:c.vietnamese,className:"w-8 h-8 object-cover rounded border",loading:"lazy",onError:a=>{let b=a.target;b.onerror=null,b.src=`https://placehold.co/40x40/E2E8F0/4A5568?text=${encodeURIComponent(c.vietnamese[0])}`}}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"font-medium text-sm text-gray-800 truncate",children:c.vietnamese}),(0,b.jsx)("p",{className:"text-xs text-gray-600 truncate",children:c.common_meaning})]})]})]},c.id)),v&&(0,b.jsx)(m,{count:8,displayMode:"grid"})]}),!v&&u&&w&&(0,b.jsx)("div",{className:"flex justify-center mt-6",children:(0,b.jsx)(j.Button,{onClick:w,variant:"outline",className:"px-6",children:"Load More Flashcards"})}),!u&&a.length>0&&(0,b.jsx)("div",{className:"text-center mt-6 text-gray-500 text-sm",children:"You've reached the end of the flashcards"})]})]}):"row"===q?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(c.default,{id:"1e4c325e7b860a03",children:".flashcard-scroll-container{scrollbar-width:none;-ms-overflow-style:none}.flashcard-scroll-container::-webkit-scrollbar{display:none}"}),(0,b.jsx)("div",{ref:E,className:"jsx-1e4c325e7b860a03 w-full mx-auto relative group select-none",children:(0,b.jsxs)("div",{className:"jsx-1e4c325e7b860a03 relative",children:[(0,b.jsx)(j.Button,{variant:"outline",size:"icon",onClick:()=>{F.current&&F.current.scrollBy({left:-300,behavior:"smooth"})},className:"absolute -left-12 top-1/2 -translate-y-1/2 z-20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 h-8 w-8 rounded-full","aria-label":"Scroll left",children:(0,b.jsx)(h.ChevronLeft,{className:"h-4 w-4"})}),(0,b.jsx)(j.Button,{variant:"outline",size:"icon",onClick:()=>{F.current&&F.current.scrollBy({left:300,behavior:"smooth"})},className:"absolute -right-12 top-1/2 -translate-y-1/2 z-20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 h-8 w-8 rounded-full","aria-label":"Scroll right",children:(0,b.jsx)(i.ChevronRight,{className:"h-4 w-4"})}),(0,b.jsx)("div",{ref:F,style:{cursor:y?"grabbing":"grab"},onMouseDown:a=>{"row"===q&&F.current&&(z(!0),B({x:a.pageX,scrollLeft:F.current.scrollLeft}),D(0),document.addEventListener("mousemove",H),document.addEventListener("mouseup",I))},onTouchStart:a=>{"row"===q&&F.current&&(z(!0),B({x:a.touches[0].pageX,scrollLeft:F.current.scrollLeft}),D(0))},onTouchMove:a=>{if(!y||"row"!==q||!F.current)return;let b=(a.touches[0].pageX-A.x)*1.5;F.current.scrollLeft=A.scrollLeft-b,D(b)},onTouchEnd:()=>{if(y&&"row"===q&&F.current&&(z(!1),Math.abs(C)>3)){let a=C,b=setInterval(()=>{F.current&&Math.abs(a)>.5?(F.current.scrollLeft-=.9*a,a*=.9):clearInterval(b)},16)}},className:"jsx-1e4c325e7b860a03 flashcard-scroll-container overflow-x-auto px-4 py-2",children:(0,b.jsx)("div",{className:"jsx-1e4c325e7b860a03 flex gap-4 pb-4",children:a.map((c,h)=>{let i=void 0!==l&&h===l;return(0,b.jsx)("div",{style:{width:"260px"},className:`jsx-1e4c325e7b860a03 flex-shrink-0 transition-all duration-300 ${i?"scale-105":"hover:scale-[1.02]"}`,children:(0,b.jsxs)(d.Card,{className:`p-4 cursor-pointer transition-all duration-300 hover:shadow-xl rounded-xl flex flex-col justify-between bg-white h-full ${i?"ring-4 ring-blue-500 ring-offset-2 shadow-2xl bg-gradient-to-br from-blue-50 via-white to-blue-50":"hover:shadow-lg border-2 border-transparent hover:border-blue-200 hover:bg-blue-50/30"}`,onClick:()=>(b=>{if(y)return;let c=a.findIndex(a=>a.id===b.id);-1!==c&&o(c)})(c),children:[(0,b.jsxs)("div",{className:"jsx-1e4c325e7b860a03",children:[(0,b.jsxs)("div",{className:"jsx-1e4c325e7b860a03 relative w-full h-32 mb-3 rounded-lg overflow-hidden border-2 border-gray-100",children:[(0,b.jsx)("img",{src:c.image_url||`https://placehold.co/300x200/E2E8F0/4A5568?text=${encodeURIComponent(c.vietnamese)}`,alt:c.vietnamese,loading:"lazy",onError:a=>{let b=a.target;b.onerror=null,b.src=`https://placehold.co/300x200/E2E8F0/4A5568?text=${encodeURIComponent(c.vietnamese)}`},className:"jsx-1e4c325e7b860a03 w-full h-full object-cover"}),(0,b.jsx)(j.Button,{variant:"ghost",size:"sm",onClick:a=>{a.stopPropagation(),p(c.id)},className:"absolute top-2 right-2 p-1.5 h-auto bg-white/80 hover:bg-white rounded-full backdrop-blur-sm shadow-sm","aria-label":n.has(c.id)?"Bá» lÆ°u tháº»":"LÆ°u tháº»",children:n.has(c.id)?(0,b.jsx)(g.BookmarkCheck,{className:"h-4 w-4 text-blue-600"}):(0,b.jsx)(f.Bookmark,{className:"h-4 w-4 text-gray-500"})})]}),(0,b.jsx)("h4",{className:`jsx-1e4c325e7b860a03 font-semibold text-sm mb-1 truncate transition-colors ${i?"text-blue-900":"text-gray-900"}`,children:c.vietnamese}),(0,b.jsx)("p",{className:`jsx-1e4c325e7b860a03 text-xs mb-2 truncate transition-colors ${i?"text-blue-700":"text-gray-600"}`,children:c.common_meaning})]}),(0,b.jsx)(e.Badge,{variant:"secondary",className:`text-xs self-start transition-all duration-300 ${i?"bg-blue-100 text-blue-800 border-blue-300 shadow-sm":"bg-blue-50 text-blue-700 border-blue-200"}`,children:Array.isArray(c.type)?c.type.join(", "):c.type})]})},c.id)})})}),(0,b.jsx)("div",{className:"jsx-1e4c325e7b860a03 flex justify-center mt-4",children:(0,b.jsx)("div",{className:"jsx-1e4c325e7b860a03 h-1.5 w-32 bg-gray-200 rounded-full overflow-hidden shadow-inner",children:(0,b.jsx)("div",{style:{width:`${Math.min(100,(void 0!==l?(l+1)/a.length:0)*100)}%`},className:"jsx-1e4c325e7b860a03 h-full bg-gradient-to-r from-blue-500 to-blue-600 transition-all duration-300 rounded-full"})})})]})})]}):null}},829469,a=>{"use strict";a.s(["useSavedFlashcards",()=>e]);var b=a.i(572131),c=a.i(255895),d=a.i(823292);function e(){let[a,e]=(0,b.useState)(new Set),[f,g]=(0,b.useState)(!1),h=(0,b.useRef)(new Set);(0,b.useEffect)(()=>{h.current=a},[a]),(0,b.useEffect)(()=>{(async()=>{try{let a=(0,c.createClient)(),{data:{user:b}}=await a.auth.getUser();if(!b)return;g(!0);let{data:d,error:f}=await a.from("saved_flashcards").select("flashcard_id").eq("UserID",b.id).eq("flashcard_type","APP");if(f){console.error("Failed to load saved cards:",f);let a=localStorage.getItem(`saved_flashcards_${b.id}`);if(a){let b=JSON.parse(a),c=new Set(b);e(c),h.current=c}return}let i=d?.map(a=>a.flashcard_id)||[],j=new Set(i);e(j),h.current=j,localStorage.setItem(`saved_flashcards_${b.id}`,JSON.stringify(i))}catch(a){console.error("Failed to load saved cards:",a)}finally{g(!1)}})()},[]);let i=(0,b.useCallback)(async(a,b)=>{try{let f=(0,c.createClient)(),{data:{user:i}}=await f.auth.getUser();if(!i)return d.toast.error("Please log in to save flashcards"),!1;g(!0);let j=h.current.has(a);if(console.log("ðŸ”„ [useSavedFlashcards] Toggling save for flashcard:",a,"isSaved:",j),j){console.log("ðŸ—‘ï¸ [useSavedFlashcards] Removing flashcard from saved_flashcards");let{error:b}=await f.from("saved_flashcards").delete().eq("UserID",i.id).eq("flashcard_id",a).eq("flashcard_type","APP");if(b)return console.error("âŒ [useSavedFlashcards] Failed to unsave flashcard:",b),d.toast.error("Failed to remove flashcard"),!1;return e(b=>{let c=new Set(b);c.delete(a);let d=Array.from(c);return localStorage.setItem(`saved_flashcards_${i.id}`,JSON.stringify(d)),c}),console.log("âœ… [useSavedFlashcards] Flashcard removed successfully"),d.toast.success("Flashcard removed from your collection"),!0}{console.log("ðŸ’¾ [useSavedFlashcards] Adding flashcard to saved_flashcards");let{error:c}=await f.from("saved_flashcards").insert({UserID:i.id,flashcard_id:a,flashcard_type:"APP",topic:b||null,saved_at:new Date().toISOString(),is_favorite:!1,review_count:0,tags:[]});if(c){if("23505"===c.code)return console.log("â„¹ï¸ [useSavedFlashcards] Flashcard already saved (duplicate key)"),d.toast.info("Flashcard is already saved"),e(b=>{let c=new Set(b);c.add(a);let d=Array.from(c);return localStorage.setItem(`saved_flashcards_${i.id}`,JSON.stringify(d)),c}),!0;return console.error("âŒ [useSavedFlashcards] Failed to save flashcard:",c),console.error("âŒ [useSavedFlashcards] Error details:",{code:c.code,message:c.message,details:c.details,hint:c.hint}),d.toast.error(`Failed to save flashcard: ${c.message||"Unknown error"}`),!1}return e(b=>{let c=new Set(b);c.add(a);let d=Array.from(c);return localStorage.setItem(`saved_flashcards_${i.id}`,JSON.stringify(d)),c}),console.log("âœ… [useSavedFlashcards] Flashcard saved successfully"),d.toast.success("Flashcard saved to your collection"),!0}}catch(b){console.error("âŒ [useSavedFlashcards] Unexpected error toggling save:",b);let a=b instanceof Error?b.message:"An unknown error occurred";return d.toast.error(`An error occurred: ${a}`),!1}finally{g(!1)}},[]),j=(0,b.useCallback)(b=>a.has(b),[a]);return{savedCards:a,toggleSave:i,isFlashcardSaved:j,loading:f}}}];

//# sourceMappingURL=_cb493cd4._.js.map