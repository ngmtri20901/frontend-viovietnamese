module.exports=[166672,a=>{"use strict";a.s(["default",()=>t],166672);var b=a.i(187924),c=a.i(572131),d=a.i(238246),e=a.i(214549),f=a.i(975009),g=a.i(746402),h=a.i(817249),i=a.i(367919),j=a.i(596221),k=a.i(400210),l=a.i(732860),m=a.i(787654),n=a.i(643608),o=a.i(125138),p=a.i(761355),q=a.i(966395),r=a.i(829469),s=a.i(699432);function t(){let{isLoading:a,withLoading:t}=(0,p.useLoading)(),[u,v]=(0,c.useState)([]),[w,x]=(0,c.useState)([]),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)([]),[C,D]=(0,c.useState)([]),[E,F]=(0,c.useState)("all"),[G,H]=(0,c.useState)({all:0,simple:0,complex:0}),[I,J]=(0,c.useState)(0),[K,L]=(0,c.useState)(!1),[M,N]=(0,c.useState)(0),[O,P]=(0,c.useState)(!1),[Q,R]=(0,c.useState)(!1),[S,T]=(0,c.useState)(null),{isFlashcardSaved:U,toggleSave:V,loading:W}=(0,r.useSavedFlashcards)(),{data:X,isLoading:Y,isFetching:Z,refetch:$,error:_}=function(a={}){let{count:b=20,commonWordsOnly:d=!1}=a,[e,f]=(0,c.useState)(void 0),[g,h]=(0,c.useState)(!0),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(null),m=(0,c.useCallback)(async(a=!1)=>{j(!0),l(null);try{let a=await q.flashcardAPI.getRandomFlashcards({count:b,commonWordsOnly:d});return f(a),h(!1),{data:a}}catch(c){let b=c instanceof Error?c:Error("Failed to fetch random flashcards");if(l(b),h(!1),a)throw b;return{data:void 0}}finally{j(!1)}},[b,d]);return(0,c.useEffect)(()=>{m()},[m]),{data:e,isLoading:g,isFetching:i,refetch:(0,c.useCallback)(async a=>await m(a?.throwOnError),[m]),error:k}}({count:25}),aa=a||Y;(0,c.useEffect)(()=>{(async()=>{await t(async()=>{try{T(null);let a=s.STATIC_TOPICS.map(a=>(0,s.convertToTopicFormat)(a,"all")),b=s.STATIC_WORD_TYPES.map(a=>(0,s.convertToWordTypeFormat)(a,"all")),c=(0,s.calculateTotalComplexityCounts)();v(a),x(b),H(c)}catch(a){console.error("Failed to load initial data:",a),T("Failed to load some content. Please refresh the page.")}})})()},[t]),(0,c.useEffect)(()=>{X&&D(X)},[X]),(0,c.useEffect)(()=>{_&&(console.error("Failed to load today's flashcards:",_),X||D([]))},[X,_]),(0,c.useEffect)(()=>{let a=setTimeout(async()=>{if(!y.trim())return void B([]);try{R(!0);let a=await q.flashcardAPI.searchFlashcards(y,50);B(a)}catch(a){console.error("Search failed:",a),B([])}finally{R(!1)}},300);return()=>clearTimeout(a)},[y]),(0,c.useEffect)(()=>{L(!1)},[I]),(0,c.useEffect)(()=>{P(!1),N(0)},[A]),(0,c.useEffect)(()=>{let a=s.STATIC_TOPICS.map(a=>(0,s.convertToTopicFormat)(a,E)),b=s.STATIC_WORD_TYPES.map(a=>(0,s.convertToWordTypeFormat)(a,E));v(a),x(b)},[E]);let ab=a=>{let b=y?A[M]:C[I];V(a,void b?.id)},ac=(0,c.useCallback)(()=>{J(a=>(a+1)%C.length)},[C.length]),ad=(0,c.useCallback)(()=>{J(a=>0===a?C.length-1:a-1)},[C.length]),ae=(0,c.useCallback)(()=>{L(a=>!a)},[]),af=(0,c.useCallback)(()=>{N(a=>(a+1)%A.length)},[A.length]),ag=(0,c.useCallback)(()=>{N(a=>0===a?A.length-1:a-1)},[A.length]),ah=(0,c.useCallback)(()=>{P(a=>!a)},[]);(0,c.useEffect)(()=>{if(!y&&C.length>0){let a=a=>{switch(["Space","ArrowLeft","ArrowRight"].includes(a.code)&&a.preventDefault(),a.code){case"Space":ae();break;case"ArrowLeft":ad();break;case"ArrowRight":ac()}};return window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)}}},[ae,ad,ac,y,C.length]),(0,c.useEffect)(()=>{if(y&&A.length>0){let a=a=>{switch(["Space","ArrowLeft","ArrowRight"].includes(a.code)&&a.preventDefault(),a.code){case"Space":ah();break;case"ArrowLeft":ag();break;case"ArrowRight":af()}};return window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)}}},[ah,ag,af,y,A.length]);let ai=(0,c.useMemo)(()=>w.map(a=>({id:a.id,title:a.title,description:a.description,count:a.count,imageUrl:a.imageUrl})),[w]),aj=(0,c.useMemo)(()=>s.STATIC_OTHERS.map(a=>({id:a.id,title:a.title,description:a.description,count:a.counts[E],imageUrl:a.imageUrl})),[E]);return S?(0,b.jsx)(o.default,{isLoading:aa,children:(0,b.jsx)("div",{className:"container mx-auto py-10 px-4",children:(0,b.jsx)(n.Alert,{variant:"destructive",className:"max-w-2xl mx-auto",children:(0,b.jsxs)(n.AlertDescription,{children:[S,(0,b.jsx)(e.Button,{variant:"outline",size:"sm",className:"ml-4",onClick:()=>window.location.reload(),children:"Retry"})]})})})}):(0,b.jsx)(o.default,{isLoading:aa,children:(0,b.jsxs)("div",{className:"container mx-auto py-10 px-6 sm:px-12 max-w-full overflow-x-hidden",children:[(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Vietnamese Flashcards"})}),(0,b.jsx)("div",{className:"max-w-xl mx-auto mb-8 px-6 sm:px-12",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(f.Input,{value:y,onChange:a=>z(a.target.value),placeholder:'Search "xin chào" or "hello"',className:"h-12 text-lg shadow"}),Q&&(0,b.jsx)(j.Loader2,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 animate-spin text-gray-400"})]})}),y&&(0,b.jsxs)("div",{className:"mb-16 px-6 sm:px-12",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsx)("h2",{className:"text-2xl font-semibold",children:"Search Results"}),A.length>0&&(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:["Found ",A.length," flashcard",1!==A.length?"s":""]})]}),0!==A.length||Q?A.length>0?(0,b.jsxs)(b.Fragment,{children:[A[M]&&(0,b.jsxs)("div",{className:"mb-12 relative z-10",children:[(0,b.jsx)("div",{className:"max-w-2xl mx-auto mb-8",children:(0,b.jsx)(h.FlashcardComponent,{data:A[M],saved:U(A[M].id),onSave:ab,onSwipe:a=>{"left"===a?af():ag()},onFlip:ah,isFlipped:O})}),(0,b.jsxs)("div",{className:"flex items-center justify-center gap-4 mb-6",children:[(0,b.jsxs)(e.Button,{variant:"outline",onClick:ag,className:"flex items-center gap-2",title:"Previous card (← key)",children:[(0,b.jsx)(k.ArrowLeft,{className:"h-4 w-4"})," Previous"]}),(0,b.jsxs)(e.Button,{variant:"default",onClick:ah,className:"px-6 flex items-center gap-2",title:"Flip card (Spacebar)",children:[(0,b.jsx)(m.RotateCcw,{className:"h-4 w-4"}),O?"Show Front":"Show Back"]}),(0,b.jsxs)(e.Button,{variant:"outline",onClick:af,className:"flex items-center gap-2",title:"Next card (→ key)",children:["Next ",(0,b.jsx)(l.ArrowRight,{className:"h-4 w-4"})]})]}),(0,b.jsx)("div",{className:"text-center mb-8",children:(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:["Card ",M+1," of ",A.length]})})]}),(0,b.jsxs)("div",{className:"relative z-0",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Search Results"}),(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:["Browse through ",A.length," matching flashcard",1!==A.length?"s":""]})]}),(0,b.jsx)(i.FlashcardDeck,{cards:A,savedCards:new Set(A.filter(a=>U(a.id)).map(a=>a.id)),displayMode:"row",onCardSelect:a=>{if("number"==typeof a)N(a);else{let b=A.findIndex(b=>b.id===a);-1!==b&&N(b)}},onSave:ab,itemsPerRow:5,currentIndex:M})]})]}):null:(0,b.jsxs)("div",{className:"text-center text-gray-500 py-12",children:[(0,b.jsx)("p",{className:"text-lg mb-2",children:"No results found."}),(0,b.jsx)("p",{className:"text-sm",children:"Try different keywords or check your spelling."})]})]}),!y&&C.length>0&&(0,b.jsxs)("div",{className:"mb-16 px-6 sm:px-12",children:[(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsx)("h2",{className:"text-2xl font-semibold",children:"Today's Flashcards"})}),C[I]&&(0,b.jsxs)("div",{className:"mb-12 relative z-10",children:[(0,b.jsx)("div",{className:"max-w-2xl mx-auto mb-8",children:(0,b.jsx)(h.FlashcardComponent,{data:C[I],saved:U(C[I].id),onSave:ab,onSwipe:a=>{"left"===a?ac():ad()},onFlip:ae,isFlipped:K})}),(0,b.jsxs)("div",{className:"flex items-center justify-center gap-4 mb-6",children:[(0,b.jsxs)(e.Button,{variant:"outline",onClick:ad,className:"flex items-center gap-2",title:"Previous card (← key)",children:[(0,b.jsx)(k.ArrowLeft,{className:"h-4 w-4"})," Previous"]}),(0,b.jsxs)(e.Button,{variant:"default",onClick:ae,className:"px-6 flex items-center gap-2",title:"Flip card (Spacebar)",children:[(0,b.jsx)(m.RotateCcw,{className:"h-4 w-4"}),K?"Show Front":"Show Back"]}),(0,b.jsxs)(e.Button,{variant:"outline",onClick:ac,className:"flex items-center gap-2",title:"Next card (→ key)",children:["Next ",(0,b.jsx)(l.ArrowRight,{className:"h-4 w-4"})]})]}),(0,b.jsx)("div",{className:"text-center mb-8",children:(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:["Card ",I+1," of ",C.length]})})]}),(0,b.jsx)("div",{className:"relative z-0",children:(0,b.jsx)(i.FlashcardDeck,{cards:C,savedCards:new Set(C.filter(a=>U(a.id)).map(a=>a.id)),displayMode:"row",onCardSelect:a=>{if("number"==typeof a)J(a);else{let b=C.findIndex(b=>b.id===a);-1!==b&&J(b)}},onSave:ab,itemsPerRow:5,currentIndex:I})})]}),(0,b.jsx)("div",{className:"mb-6 px-6 sm:px-12",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold",children:"Browse Flashcard Sets"}),(0,b.jsx)(g.Tabs,{value:E,onValueChange:F,className:"mr-0 sm:mr-12",children:(0,b.jsxs)(g.TabsList,{children:[(0,b.jsx)(g.TabsTrigger,{value:"all",children:"All"}),(0,b.jsx)(g.TabsTrigger,{value:"simple",children:"Simple"}),(0,b.jsx)(g.TabsTrigger,{value:"complex",children:"Complex"})]})})]})}),(0,b.jsxs)("div",{className:"mb-10 px-6 sm:px-12",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"By Topic"}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:0===u.length?(0,b.jsx)("div",{className:"text-center text-gray-500 py-8 w-full col-span-full",children:"No topics available."}):u.map(a=>(0,b.jsx)(d.default,{href:`/flashcards/topic/${a.id}${"all"!==E?`?complexity=${E}`:""}`,className:"block",children:(0,b.jsxs)("article",{className:"cta-card group",children:[(0,b.jsx)("div",{className:"cta-card__image",children:(0,b.jsx)("img",{src:a.imageUrl,alt:a.title,className:"cta-card__img"})}),(0,b.jsxs)("div",{className:"cta-card__content",children:[(0,b.jsx)("h4",{className:"cta-card__title group-hover:text-blue-600 transition-colors duration-200",children:a.title}),(0,b.jsx)("p",{className:"cta-card__description",children:a.description}),(0,b.jsxs)("div",{className:"cta-card__footer",children:[(0,b.jsxs)("span",{className:"cta-card__count",children:[a.count," flashcards"]}),(0,b.jsx)("span",{className:"cta-card__button",children:"Start Learning"})]})]})]})},a.id))})]}),(0,b.jsxs)("div",{className:"mb-10 overflow-hidden px-6 sm:px-12",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"By Word Type"}),(0,b.jsx)("div",{className:"relative group overflow-hidden w-full",children:0===ai.length?(0,b.jsx)("div",{className:"text-center text-gray-500 py-8 w-full",children:"No word type groups available."}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"flex gap-6 overflow-x-auto scrollbar-hide py-2 px-2 word-type-scroll-container",style:{scrollBehavior:"smooth"},children:ai.map(a=>(0,b.jsx)(d.default,{href:`/flashcards/topic/${a.id}${"all"!==E?`?complexity=${E}`:""}`,className:"flex-shrink-0",children:(0,b.jsxs)("article",{className:"cta-card-horizontal group",children:[(0,b.jsx)("div",{className:"cta-card-horizontal__image",children:(0,b.jsx)("img",{src:a.imageUrl,alt:a.title,className:"cta-card-horizontal__img"})}),(0,b.jsxs)("div",{className:"cta-card-horizontal__content",children:[(0,b.jsx)("h4",{className:"cta-card-horizontal__title group-hover:text-blue-600 transition-colors duration-200",children:a.title}),(0,b.jsx)("p",{className:"cta-card-horizontal__description",children:a.description}),(0,b.jsxs)("div",{className:"cta-card-horizontal__footer",children:[(0,b.jsxs)("span",{className:"cta-card-horizontal__count",children:[a.count," flashcards"]}),(0,b.jsx)("span",{className:"cta-card-horizontal__button",children:"Start Learning"})]})]})]})},a.id))}),(0,b.jsx)("button",{className:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-white dark:bg-gray-800 rounded-full p-2 shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-10 hover:bg-gray-50 dark:hover:bg-gray-700",onClick:a=>{a.preventDefault();let b=a.currentTarget.parentElement?.querySelector(".word-type-scroll-container");b&&b.scrollBy({left:-300,behavior:"smooth"})},"aria-label":"Scroll left",children:(0,b.jsx)(k.ArrowLeft,{className:"h-5 w-5 text-gray-600 dark:text-gray-300"})}),(0,b.jsx)("button",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-white dark:bg-gray-800 rounded-full p-2 shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-10 hover:bg-gray-50 dark:hover:bg-gray-700",onClick:a=>{a.preventDefault();let b=a.currentTarget.parentElement?.querySelector(".word-type-scroll-container");b&&b.scrollBy({left:300,behavior:"smooth"})},"aria-label":"Scroll right",children:(0,b.jsx)(l.ArrowRight,{className:"h-5 w-5 text-gray-600 dark:text-gray-300"})})]})})]}),(0,b.jsxs)("div",{className:"mb-10 overflow-hidden px-6 sm:px-12",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Others"}),(0,b.jsx)("div",{className:"relative group overflow-hidden w-full",children:0===aj.length?(0,b.jsx)("div",{className:"text-center text-gray-500 py-8 w-full",children:"No other groups available."}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"flex gap-6 overflow-x-auto scrollbar-hide py-2 px-2 others-scroll-container",style:{scrollBehavior:"smooth"},children:aj.map(a=>(0,b.jsx)(d.default,{href:`/flashcards/topic/${a.id}${"all"!==E?`?complexity=${E}`:""}`,className:"flex-shrink-0",children:(0,b.jsxs)("article",{className:"cta-card-horizontal group",children:[(0,b.jsx)("div",{className:"cta-card-horizontal__image",children:(0,b.jsx)("img",{src:a.imageUrl,alt:a.title,className:"cta-card-horizontal__img"})}),(0,b.jsxs)("div",{className:"cta-card-horizontal__content",children:[(0,b.jsx)("h4",{className:"cta-card-horizontal__title group-hover:text-blue-600 transition-colors duration-200",children:a.title}),(0,b.jsx)("p",{className:"cta-card-horizontal__description",children:a.description}),(0,b.jsxs)("div",{className:"cta-card-horizontal__footer",children:[(0,b.jsxs)("span",{className:"cta-card-horizontal__count",children:[a.count," flashcards"]}),(0,b.jsx)("span",{className:"cta-card-horizontal__button",children:"Start Learning"})]})]})]})},a.id))}),(0,b.jsx)("button",{className:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-white dark:bg-gray-800 rounded-full p-2 shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-10 hover:bg-gray-50 dark:hover:bg-gray-700",onClick:a=>{a.preventDefault();let b=a.currentTarget.parentElement?.querySelector(".others-scroll-container");b&&b.scrollBy({left:-300,behavior:"smooth"})},"aria-label":"Scroll left",children:(0,b.jsx)(k.ArrowLeft,{className:"h-5 w-5 text-gray-600 dark:text-gray-300"})}),(0,b.jsx)("button",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-white dark:bg-gray-800 rounded-full p-2 shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-10 hover:bg-gray-50 dark:hover:bg-gray-700",onClick:a=>{a.preventDefault();let b=a.currentTarget.parentElement?.querySelector(".others-scroll-container");b&&b.scrollBy({left:300,behavior:"smooth"})},"aria-label":"Scroll right",children:(0,b.jsx)(l.ArrowRight,{className:"h-5 w-5 text-gray-600 dark:text-gray-300"})})]})})]})]})})}}];

//# sourceMappingURL=app_%28app%29_flashcards_page_tsx_45f22629._.js.map