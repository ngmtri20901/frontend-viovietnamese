module.exports=[945682,a=>{"use strict";a.s(["audioManager",()=>c,"playCorrectSound",()=>d,"playFlipSound",()=>f,"playIncorrectSound",()=>e]);class b{static instance;audioCache=new Map;settings=null;constructor(){}static getInstance(){return b.instance||(b.instance=new b),b.instance}updateSettings(a){this.settings=a}getSoundEffectsVolume(){return this.settings?this.settings.muteSounds?0:this.settings.soundVolume/100:0}getPronunciationVolume(){return this.settings?this.settings.soundVolume/100:.75}async loadAudio(a,b={}){if(this.audioCache.has(a))return this.audioCache.get(a);let c=new Audio(a);c.volume=b.volume??.75,c.loop=b.loop??!1,c.preload=b.preload?"auto":"metadata";try{return await new Promise((a,b)=>{c.oncanplaythrough=a,c.onerror=b,c.load()}),this.audioCache.set(a,c),c}catch(b){throw console.error(`Failed to load audio: ${a}`,b),b}}async playSoundEffect(a,b={}){let c=this.getSoundEffectsVolume();if(0!==c)try{let d=await this.loadAudio(a,b);d.volume=b.volume??c,d.currentTime=0,await d.play()}catch(b){console.error(`Failed to play sound effect: ${a}`,b)}}async playPronunciation(a,b={}){let c=this.getPronunciationVolume();try{let d=await this.loadAudio(a,b);d.volume=b.volume??c,d.currentTime=0,await d.play()}catch(b){console.error(`Failed to play pronunciation: ${a}`,b)}}stopAllSounds(){this.audioCache.forEach(a=>{a.pause(),a.currentTime=0})}updateVolume(){this.audioCache.forEach((a,b)=>{b.includes("/tts/")||b.includes("/pronunciation/")?a.volume=this.getPronunciationVolume():a.volume=this.getSoundEffectsVolume()})}clearCache(){this.stopAllSounds(),this.audioCache.clear()}}let c=b.getInstance(),d=()=>c.playSoundEffect("/sounds/correct.mp3"),e=()=>c.playSoundEffect("/sounds/incorrect.wav"),f=()=>c.playSoundEffect("/sounds/flip.mp3")},675751,a=>{"use strict";a.s(["Dialog",()=>f,"DialogContent",()=>i,"DialogDescription",()=>m,"DialogFooter",()=>k,"DialogHeader",()=>j,"DialogTitle",()=>l]);var b=a.i(187924),c=a.i(897942),d=a.i(422262),e=a.i(16116);function f({...a}){return(0,b.jsx)(c.Root,{"data-slot":"dialog",...a})}function g({...a}){return(0,b.jsx)(c.Portal,{"data-slot":"dialog-portal",...a})}function h({className:a,...d}){return(0,b.jsx)(c.Overlay,{"data-slot":"dialog-overlay",className:(0,e.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...d})}function i({className:a,children:f,showCloseButton:i=!0,...j}){return(0,b.jsxs)(g,{"data-slot":"dialog-portal",children:[(0,b.jsx)(h,{}),(0,b.jsxs)(c.Content,{"data-slot":"dialog-content",className:(0,e.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...j,children:[f,i&&(0,b.jsxs)(c.Close,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,b.jsx)(d.XIcon,{}),(0,b.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function j({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"dialog-header",className:(0,e.cn)("flex flex-col gap-2 text-center sm:text-left",a),...c})}function k({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"dialog-footer",className:(0,e.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...c})}function l({className:a,...d}){return(0,b.jsx)(c.Title,{"data-slot":"dialog-title",className:(0,e.cn)("text-lg leading-none font-semibold",a),...d})}function m({className:a,...d}){return(0,b.jsx)(c.Description,{"data-slot":"dialog-description",className:(0,e.cn)("text-muted-foreground text-sm",a),...d})}},633508,a=>{"use strict";a.s(["X",()=>b.default]);var b=a.i(562213)},669520,a=>{"use strict";a.s(["RefreshCw",()=>b],669520);let b=(0,a.i(883706).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},771441,a=>{"use strict";a.s(["ReviewSession",()=>k],771441);var b=a.i(187924),c=a.i(557116),d=a.i(214549);let e=(0,a.i(883706).default)("alarm-clock",[["circle",{cx:"12",cy:"13",r:"8",key:"3y4lt7"}],["path",{d:"M12 9v4l2 2",key:"1c63tq"}],["path",{d:"M5 3 2 6",key:"18tl5t"}],["path",{d:"m22 6-3-3",key:"1opdir"}],["path",{d:"M6.38 18.7 4 21",key:"17xu3x"}],["path",{d:"M17.64 18.67 20 21",key:"kv2oe2"}]]);var f=a.i(533441),g=a.i(633508),h=a.i(218064),h=h,i=a.i(669520),j=a.i(817249);function k({practiceCards:a,currentCard:k,currentCardIndex:l,isFlipped:m,timer:n,isTimerActive:o,cardResults:p,progressStats:q,savedCards:r,onCardResult:s,onSaveCard:t,onFlipCard:u,onRefreshCards:v,onGetFreshCards:w,getAnimationDuration:x,isLoading:y}){return a.length&&k?(0,b.jsx)(c.Card,{className:"mb-8 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950/20 dark:to-indigo-950/20 border-blue-200 dark:border-blue-800",children:(0,b.jsx)(c.CardContent,{className:"p-8",children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"text-center",children:(0,b.jsxs)("div",{className:"flex items-center justify-center gap-4 mb-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(e,{className:"h-5 w-5 text-blue-600"}),(0,b.jsx)("span",{className:"text-lg font-medium text-blue-900 dark:text-blue-100",children:n>0?`${n}s`:m?"Review time!":""})]}),(0,b.jsx)(d.Button,{onClick:v,variant:"outline",size:"sm",className:"h-8 w-8 p-0",disabled:y,title:"Restart session",children:(0,b.jsx)(i.RefreshCw,{className:`h-4 w-4 ${y?"animate-spin":""}`})})]})}),(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsx)(j.FlashcardComponent,{data:k,saved:r.has(k.id),onSave:t,onFlip:u,isFlipped:m,animationDuration:x()})}),(0,b.jsxs)("div",{className:"flex justify-center gap-4 md:gap-6",children:[(0,b.jsx)(d.Button,{onClick:()=>s("incorrect"),className:"w-16 h-16 rounded-full bg-red-100 hover:bg-red-200 border-0",variant:"outline",disabled:!m,children:(0,b.jsx)(g.X,{className:"h-8 w-8 text-red-600"})}),(0,b.jsx)(d.Button,{onClick:()=>s("unsure"),className:"w-16 h-16 rounded-full bg-yellow-100 hover:bg-yellow-200 border-0",variant:"outline",disabled:!m,title:"Unsure","aria-label":"Unsure",children:(0,b.jsx)(h.default,{className:"h-8 w-8 text-yellow-600"})}),(0,b.jsx)(d.Button,{onClick:()=>s("correct"),className:"w-16 h-16 rounded-full bg-green-100 hover:bg-green-200 border-0",variant:"outline",disabled:!m,children:(0,b.jsx)(f.Check,{className:"h-8 w-8 text-green-600"})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsxs)("span",{className:"text-blue-700 dark:text-blue-300",children:["Card ",l+1," of ",a.length]}),(0,b.jsxs)("span",{className:"text-blue-700 dark:text-blue-300",children:["Correct: ",q.correct," | Incorrect:"," ",q.incorrect," | Unsure: ",q.unsure]})]}),(0,b.jsx)("div",{className:"grid grid-cols-10 gap-1",children:a.map((a,c)=>{let d="bg-gray-200";if(c<q.total){let a=p[c]?.result;"correct"===a?d="bg-green-500":"incorrect"===a?d="bg-red-500":"unsure"===a&&(d="bg-yellow-500")}else c===l&&(d="bg-gray-300");return(0,b.jsx)("div",{className:`h-2 rounded ${d}`},c)})})]})]})})}):null}},6912,164593,a=>{"use strict";a.s(["useFlashcardReview",()=>i],6912);var b=a.i(572131),c=a.i(255895);a.s(["authSessionManager",()=>e],164593);class d{static instance;isReviewSession=!1;refreshTimeout=null;constructor(){this.setupVisibilityListener()}static getInstance(){return d.instance||(d.instance=new d),d.instance}setReviewSession(a){this.isReviewSession=a,console.log("ðŸ”„ AuthSessionManager: Review session status:",a)}setupVisibilityListener(){}async handleTabFocus(){if(this.isReviewSession)return void console.log("ðŸš« AuthSessionManager: Skipping session refresh during review session");this.refreshTimeout&&clearTimeout(this.refreshTimeout),this.refreshTimeout=setTimeout(async()=>{await this.refreshSession()},2e3)}handleTabBlur(){this.refreshTimeout&&(clearTimeout(this.refreshTimeout),this.refreshTimeout=null)}async refreshSession(){try{let a=(0,c.createClient)(),{data:b,error:d}=await a.auth.getSession();d?console.error("âŒ Auth session refresh error:",d):console.log("âœ… Auth session refreshed successfully")}catch(a){console.error("âŒ Auth session refresh failed:",a)}}async forceRefresh(){if(this.isReviewSession)return void console.log("ðŸš« AuthSessionManager: Cannot force refresh during review session");await this.refreshSession()}}let e=d.getInstance();var f=a.i(823292),g=a.i(945682),h=a.i(319408);let i=({cards:a,onSessionComplete:d,enableTimer:i=!0})=>{let{getReviewTimeSeconds:j}=(0,h.useDisplaySettings)(),k=j(),[l,m]=(0,b.useState)(0),[n,o]=(0,b.useState)(!1),[p,q]=(0,b.useState)(k),[r,s]=(0,b.useState)(!1),[t,u]=(0,b.useState)([]),[v,w]=(0,b.useState)(null),[x,y]=(0,b.useState)(new Set);(0,b.useEffect)(()=>(e.setReviewSession(!0),()=>{e.setReviewSession(!1)}),[]),(0,b.useEffect)(()=>{},[l,n,p,r,a.length,v]),(0,b.useEffect)(()=>{(async()=>{try{let{data:{user:a}}=await c.supabase.auth.getUser();if(!a)return;let{data:b,error:d}=await c.supabase.from("saved_flashcards").select("flashcard_id, flashcard_type, topic").eq("UserID",a.id);b&&y(new Set(b.map(a=>a.flashcard_id)))}catch(a){console.error("Error loading saved cards:",a)}})()},[]),(0,b.useEffect)(()=>{if(!i||!r||p<=0)return;let a=setInterval(()=>{q(a=>a-1)},1e3);return()=>{clearInterval(a)}},[i,r,p]),(0,b.useEffect)(()=>{i&&0===p&&r&&(o(!0),s(!1),(0,g.playFlipSound)())},[i,p,r]);let z=(0,b.useCallback)(()=>{o(!1),q(k),i&&s(!0),w(new Date)},[i,k,l]);(0,b.useEffect)(()=>{a.length>0&&l<a.length&&z()},[l,a.length,z]),(0,b.useEffect)(()=>{},[l,n,p,r,a.length]);let A=(0,b.useCallback)(b=>{if(!a[l])return void console.warn("âŒ [HOOK] No card at index:",l,{cardsLength:a.length,currentCardIndex:l,timestamp:new Date().toISOString()});let c=v??new Date;v||w(c),"correct"===b?(0,g.playCorrectSound)():"incorrect"===b&&(0,g.playIncorrectSound)();let e=Date.now()-c.getTime(),f={cardId:a[l].id,result:b,timeSpent:e};u(a=>[...a,f]),l<a.length-1?m(a=>a+1):d&&d(),s(!1)},[a,l,v,d,n,p,r]),B=(0,b.useCallback)(async a=>{try{let{data:{user:b}}=await c.supabase.auth.getUser();if(!b)return;let d=new Set(x);d.has(a)?(d.delete(a),await c.supabase.from("saved_flashcards").delete().eq("UserID",b.id).eq("flashcard_id",a),f.toast.success("Card removed from saved!")):(d.add(a),await c.supabase.from("saved_flashcards").insert({UserID:b.id,flashcard_id:a}),f.toast.success("Card saved!")),y(d)}catch(a){console.error("Error saving card:",a),f.toast.error("Failed to save card")}},[x]),C=(0,b.useCallback)(()=>{o(a=>(a||((0,g.playFlipSound)(),s(!1)),!a))},[n,l,p,r]),D=(0,b.useCallback)(()=>{m(0),o(!1),q(k),s(!1),u([]),w(null)},[k]),E=(0,b.useCallback)(()=>{let b=t.filter(a=>"correct"===a.result).length,c=t.filter(a=>"incorrect"===a.result).length,d=t.filter(a=>"unsure"===a.result).length,e=t.length;return{correct:b,incorrect:c,unsure:d,total:e,remaining:a.length-e,accuracy:e>0?b/e*100:0}},[t,a.length]);return{currentCard:a[l]||null,currentCardIndex:l,isFlipped:n,timer:p,isTimerActive:r,cardResults:t,savedCards:x,startTime:v,handleCardResult:A,handleSaveCard:B,handleFlipCard:C,resetSession:D,getProgressStats:E,hasMoreCards:l<a.length-1,progress:a.length>0?(l+1)/a.length*100:0}}}];

//# sourceMappingURL=_e39468e1._.js.map