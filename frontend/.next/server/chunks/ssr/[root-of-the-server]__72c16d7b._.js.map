{"version":3,"sources":["turbopack:///[project]/app/(public)/blog/page.tsx"],"sourcesContent":["import { createClient as createSupabaseClient } from \"@/shared/lib/supabase/server\";\r\nimport { client } from \"@/shared/lib/sanity/client\";\r\nimport { Button } from \"@/shared/components/ui/button\";\r\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/shared/components/ui/avatar\";\r\nimport Link from \"next/link\";\r\nimport type { Metadata } from \"next\";\r\nimport styles from './blog.module.css';\r\nimport type { BlogPost, CategoryWithCount, GroupedCategory } from \"@/features/blog/types/blog\";\r\nimport { categoryGroups } from \"@/features/blog/utils/blogUtils\";\r\nimport { CATEGORIES_QUERY, ALL_POSTS_QUERY } from \"@/shared/lib/sanity/queries\";\r\nimport { PostCard } from \"@/features/blog/components/PostCard\";\r\nimport { CategoryList } from \"@/features/blog/components/CategoryList\";\r\n\r\nexport const metadata: Metadata = {\r\n  title: \"Blog | Learn Vietnamese\",\r\n  description: \"Explore Vietnamese learning tips and culture\",\r\n};\r\n\r\nexport default async function BlogPage() {\r\n  const supabase = await createSupabaseClient();\r\n  const { data: { session } } = await supabase.auth.getSession();\r\n  \r\n  // Fetch all posts, no category filtering on the main page\r\n  const posts = await client.fetch<BlogPost[]>(ALL_POSTS_QUERY);\r\n  const allCategories = await client.fetch<CategoryWithCount[]>(CATEGORIES_QUERY);\r\n\r\n  const groupedCategories: GroupedCategory[] = categoryGroups.map(group => ({\r\n    name: group.name,\r\n    categories: allCategories.filter((category: CategoryWithCount) => group.titles.includes(category.title)),\r\n  }));\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\r\n      {/* Top section with title and user session info */}\r\n      <div className=\"flex flex-col sm:flex-row justify-between items-center mb-12\">\r\n        <div className=\"text-center sm:text-left flex-1 mb-6 sm:mb-0\">\r\n          <h1 className=\"text-4xl font-bold mb-2\">Vietnamese Learning Blog</h1>\r\n          <p className=\"text-gray-600 max-w-2xl\">\r\n            Explore our collection of articles, guides, and resources to help you master Vietnamese.\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Main two-column layout */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-12\">\r\n        {/* Left Column: All Posts */}\r\n        <div className=\"lg:col-span-2\">\r\n          <div className=\"flex justify-between items-center mb-8\">\r\n            <h2 className=\"text-3xl font-semibold\">All Posts</h2>\r\n          </div>\r\n          \r\n          <div className={styles['posts-grid']}>\r\n            {posts.length === 0 ? (\r\n              <div className={`text-center py-12 text-gray-600 ${styles['fade-in']}`}>\r\n                <p>No posts available at the moment. Check back later!</p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"space-y-8\">\r\n                {posts.map((post: BlogPost, index: number) => (\r\n                  <PostCard key={post._id} post={post} index={index} />\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Right Column: Categories */}\r\n        <div className=\"lg:col-span-1\">\r\n          <h2 className=\"text-3xl font-semibold mb-8\">Categories</h2>\r\n          <CategoryList groupedCategories={groupedCategories} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"urBAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAKA,EAAA,EAAA,CAAA,CAAA,QAEA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAEO,IAAM,EAAqB,CAChC,MAAO,0BACP,YAAa,8CACf,EAEe,eAAe,IAC5B,IAAM,EAAW,MAAM,CAAA,EAAA,EAAA,YAAA,AAAoB,IACrC,CAAE,KAAM,SAAE,CAAO,CAAE,CAAE,CAAG,MAAM,EAAS,IAAI,CAAC,UAAU,GAGtD,EAAQ,MAAM,EAAA,MAAM,CAAC,KAAK,CAAa,EAAA,eAAe,EACtD,EAAgB,MAAM,EAAA,MAAM,CAAC,KAAK,CAAsB,EAAA,gBAAgB,EAExE,EAAuC,EAAA,cAAc,CAAC,GAAG,CAAC,GAAU,EACxE,GADuE,EACjE,EAAM,IAAI,CAChB,WAAY,EAAc,MAAM,CAAC,AAAC,GAAgC,EAAM,MAAM,CAAC,QAAQ,CAAC,EAAS,KAAK,EACxG,CAAC,GAED,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yDAEb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wEACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yDACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,mCAA0B,6BACxC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,mCAA0B,kGAO3C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0BACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kDACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,kCAAyB,gBAGzC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,EAAA,OAAM,CAAC,aAAa,UAChB,IAAjB,EAAM,MAAM,CACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAC,gCAAgC,EAAE,EAAA,OAAM,CAAC,UAAU,CAAA,CAAE,UACpE,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,UAAE,0DAGL,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACZ,EAAM,GAAG,CAAC,CAAC,EAAgB,IAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAgB,KAAM,EAAM,MAAO,GAA7B,EAAK,GAAG,UAQjC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0BACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,uCAA8B,eAC5C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,YAAY,CAAA,CAAC,kBAAmB,YAK3C"}