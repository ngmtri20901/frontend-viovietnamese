{"version":3,"sources":["turbopack:///[project]/features/learn/hooks/use-exercise-session.ts","turbopack:///[project]/shared/utils/vi-normalize.ts"],"sourcesContent":["\"use client\"\r\n\r\nimport { useCallback, useRef } from 'react'\r\nimport type { QuestionAttempt } from '@/features/learn/utils/exercise-utils'\r\n\r\nexport interface ExerciseSession {\r\n  practiceResultId: string\r\n  attemptNo: number\r\n}\r\n\r\n/**\r\n * Hook for managing exercise sessions via API routes\r\n * Handles starting, submitting, and resuming exercises\r\n */\r\nexport function useExerciseSession() {\r\n  const isStarting = useRef(false)\r\n  const isSubmitting = useRef(false)\r\n\r\n  /**\r\n   * Start a new exercise session\r\n   * Creates a practice_result record with status 'in_progress'\r\n   */\r\n  const startExercise = useCallback(async (practiceSetId: string): Promise<ExerciseSession | null> => {\r\n    if (isStarting.current) {\r\n      console.warn('[useExerciseSession] Start already in progress')\r\n      return null\r\n    }\r\n\r\n    isStarting.current = true\r\n\r\n    try {\r\n      console.log('[useExerciseSession] Starting exercise:', practiceSetId)\r\n\r\n      const response = await fetch('/api/exercise/start', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ practiceSetId })\r\n      })\r\n\r\n      const data = await response.json()\r\n\r\n      if (!response.ok || !data.success) {\r\n        console.error('[useExerciseSession] Failed to start exercise:', {\r\n          status: response.status,\r\n          statusText: response.statusText,\r\n          error: data.error,\r\n          data\r\n        })\r\n        return null\r\n      }\r\n\r\n      console.log('[useExerciseSession] Exercise started:', {\r\n        practiceResultId: data.practiceResultId,\r\n        attemptNo: data.attemptNo,\r\n        resumed: data.resumed\r\n      })\r\n\r\n      return {\r\n        practiceResultId: data.practiceResultId,\r\n        attemptNo: data.attemptNo\r\n      }\r\n    } catch (error) {\r\n      console.error('[useExerciseSession] Error starting exercise:', error)\r\n      return null\r\n    } finally {\r\n      isStarting.current = false\r\n    }\r\n  }, [])\r\n\r\n  /**\r\n   * Submit completed exercise results\r\n   * Updates practice_result to 'completed' and saves all details\r\n   */\r\n  const submitExercise = useCallback(async (data: {\r\n    practiceResultId: string\r\n    practiceSetId: string\r\n    scorePercent: number\r\n    totalCorrect: number\r\n    totalIncorrect: number\r\n    totalSkipped: number\r\n    timeSpentSeconds: number\r\n    attempts: QuestionAttempt[]\r\n    passed: boolean\r\n  }): Promise<{\r\n    success: boolean\r\n    isFirstPass?: boolean\r\n    coinsEarned?: number\r\n    xpEarned?: number\r\n    topicId?: number\r\n    lessonId?: number\r\n    error?: string\r\n  }> => {\r\n    if (isSubmitting.current) {\r\n      console.warn('[useExerciseSession] Submit already in progress')\r\n      return { success: false, error: 'Submit already in progress' }\r\n    }\r\n\r\n    isSubmitting.current = true\r\n\r\n    try {\r\n      console.log('[useExerciseSession] Submitting exercise:', {\r\n        practiceResultId: data.practiceResultId,\r\n        scorePercent: data.scorePercent,\r\n        passed: data.passed\r\n      })\r\n\r\n      const response = await fetch('/api/exercise/submit', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(data)\r\n      })\r\n\r\n      const result = await response.json()\r\n\r\n      if (!response.ok || !result.success) {\r\n        console.error('[useExerciseSession] Failed to submit exercise:', result.error)\r\n        return { success: false, error: result.error }\r\n      }\r\n\r\n      console.log('[useExerciseSession] Exercise submitted successfully:', {\r\n        isFirstPass: result.isFirstPass,\r\n        coinsEarned: result.coinsEarned,\r\n        xpEarned: result.xpEarned\r\n      })\r\n\r\n      return result\r\n    } catch (error) {\r\n      console.error('[useExerciseSession] Error submitting exercise:', error)\r\n      return { \r\n        success: false, \r\n        error: error instanceof Error ? error.message : 'Unknown error' \r\n      }\r\n    } finally {\r\n      isSubmitting.current = false\r\n    }\r\n  }, [])\r\n\r\n  /**\r\n   * Check for existing in_progress session to resume\r\n   */\r\n  const checkForResume = useCallback(async (practiceSetId: string): Promise<ExerciseSession | null> => {\r\n    try {\r\n      console.log('[useExerciseSession] Checking for in_progress session:', practiceSetId)\r\n\r\n      const response = await fetch(`/api/exercise/resume?practiceSetId=${practiceSetId}`)\r\n\r\n      const data = await response.json()\r\n\r\n      if (!response.ok || !data.success) {\r\n        console.error('[useExerciseSession] Failed to check resume:', data.error)\r\n        return null\r\n      }\r\n\r\n      if (data.practiceResult) {\r\n        console.log('[useExerciseSession] Found in_progress session:', data.practiceResult.id)\r\n        return {\r\n          practiceResultId: data.practiceResult.id,\r\n          attemptNo: data.practiceResult.attemptNo\r\n        }\r\n      }\r\n\r\n      console.log('[useExerciseSession] No in_progress session found')\r\n      return null\r\n    } catch (error) {\r\n      console.error('[useExerciseSession] Error checking resume:', error)\r\n      return null\r\n    }\r\n  }, [])\r\n\r\n  return {\r\n    startExercise,\r\n    submitExercise,\r\n    checkForResume\r\n  }\r\n}\r\n","/**\r\n * Vietnamese Text Normalization Utility\r\n *\r\n * This utility removes Vietnamese diacritical marks (tones and special characters)\r\n * to enable search and matching for users who cannot type Vietnamese with proper accents.\r\n *\r\n * Example:\r\n * - \"Xin chào\" → \"xin chao\"\r\n * - \"Cà phê\" → \"ca phe\"\r\n * - \"Học sinh\" → \"hoc sinh\"\r\n */\r\n\r\n/**\r\n * Map of Vietnamese characters with diacritics to their base form\r\n */\r\nconst VIETNAMESE_MAP: Record<string, string> = {\r\n  // Lowercase vowels with tones\r\n  'à': 'a', 'á': 'a', 'ả': 'a', 'ã': 'a', 'ạ': 'a',\r\n  'ă': 'a', 'ằ': 'a', 'ắ': 'a', 'ẳ': 'a', 'ẵ': 'a', 'ặ': 'a',\r\n  'â': 'a', 'ầ': 'a', 'ấ': 'a', 'ẩ': 'a', 'ẫ': 'a', 'ậ': 'a',\r\n  'è': 'e', 'é': 'e', 'ẻ': 'e', 'ẽ': 'e', 'ẹ': 'e',\r\n  'ê': 'e', 'ề': 'e', 'ế': 'e', 'ể': 'e', 'ễ': 'e', 'ệ': 'e',\r\n  'ì': 'i', 'í': 'i', 'ỉ': 'i', 'ĩ': 'i', 'ị': 'i',\r\n  'ò': 'o', 'ó': 'o', 'ỏ': 'o', 'õ': 'o', 'ọ': 'o',\r\n  'ô': 'o', 'ồ': 'o', 'ố': 'o', 'ổ': 'o', 'ỗ': 'o', 'ộ': 'o',\r\n  'ơ': 'o', 'ờ': 'o', 'ớ': 'o', 'ở': 'o', 'ỡ': 'o', 'ợ': 'o',\r\n  'ù': 'u', 'ú': 'u', 'ủ': 'u', 'ũ': 'u', 'ụ': 'u',\r\n  'ư': 'u', 'ừ': 'u', 'ứ': 'u', 'ử': 'u', 'ữ': 'u', 'ự': 'u',\r\n  'ỳ': 'y', 'ý': 'y', 'ỷ': 'y', 'ỹ': 'y', 'ỵ': 'y',\r\n  'đ': 'd',\r\n\r\n  // Uppercase vowels with tones\r\n  'À': 'A', 'Á': 'A', 'Ả': 'A', 'Ã': 'A', 'Ạ': 'A',\r\n  'Ă': 'A', 'Ằ': 'A', 'Ắ': 'A', 'Ẳ': 'A', 'Ẵ': 'A', 'Ặ': 'A',\r\n  'Â': 'A', 'Ầ': 'A', 'Ấ': 'A', 'Ẩ': 'A', 'Ẫ': 'A', 'Ậ': 'A',\r\n  'È': 'E', 'É': 'E', 'Ẻ': 'E', 'Ẽ': 'E', 'Ẹ': 'E',\r\n  'Ê': 'E', 'Ề': 'E', 'Ế': 'E', 'Ể': 'E', 'Ễ': 'E', 'Ệ': 'E',\r\n  'Ì': 'I', 'Í': 'I', 'Ỉ': 'I', 'Ĩ': 'I', 'Ị': 'I',\r\n  'Ò': 'O', 'Ó': 'O', 'Ỏ': 'O', 'Õ': 'O', 'Ọ': 'O',\r\n  'Ô': 'O', 'Ồ': 'O', 'Ố': 'O', 'Ổ': 'O', 'Ỗ': 'O', 'Ộ': 'O',\r\n  'Ơ': 'O', 'Ờ': 'O', 'Ớ': 'O', 'Ở': 'O', 'Ỡ': 'O', 'Ợ': 'O',\r\n  'Ù': 'U', 'Ú': 'U', 'Ủ': 'U', 'Ũ': 'U', 'Ụ': 'U',\r\n  'Ư': 'U', 'Ừ': 'U', 'Ứ': 'U', 'Ử': 'U', 'Ữ': 'U', 'Ự': 'U',\r\n  'Ỳ': 'Y', 'Ý': 'Y', 'Ỷ': 'Y', 'Ỹ': 'Y', 'Ỵ': 'Y',\r\n  'Đ': 'D',\r\n}\r\n\r\n/**\r\n * Normalize Vietnamese text by removing all diacritical marks\r\n * @param text - The Vietnamese text to normalize\r\n * @returns The normalized text without diacritics\r\n *\r\n * @example\r\n * normalizeVietnamese(\"Xin chào\") // returns \"xin chao\"\r\n * normalizeVietnamese(\"Cà phê\") // returns \"ca phe\"\r\n * normalizeVietnamese(\"Học sinh\") // returns \"hoc sinh\"\r\n */\r\nexport function normalizeVietnamese(text: string): string {\r\n  if (!text) return ''\r\n\r\n  let normalized = text\r\n\r\n  // Replace each Vietnamese character with its base form\r\n  for (const [accented, base] of Object.entries(VIETNAMESE_MAP)) {\r\n    normalized = normalized.replace(new RegExp(accented, 'g'), base)\r\n  }\r\n\r\n  return normalized\r\n}\r\n\r\n/**\r\n * Normalize Vietnamese text for exercise comparison by:\r\n * 1. Removing diacritics\r\n * 2. Removing punctuation marks (.,!?;:'\"()[]{}...)\r\n * 3. Normalizing whitespace\r\n * 4. Converting to lowercase (optional)\r\n *\r\n * This is useful for comparing user input with expected answers in exercises\r\n * where minor punctuation differences shouldn't mark the answer as incorrect.\r\n *\r\n * @param text - The Vietnamese text to normalize\r\n * @param options - Normalization options\r\n * @returns The normalized text\r\n *\r\n * @example\r\n * normalizeForComparison(\"Xin chào, bạn khỏe không?\")\r\n * // returns \"xin chao ban khoe khong\"\r\n *\r\n * normalizeForComparison(\"Tôi ăn cơm.\")\r\n * // returns \"toi an com\"\r\n *\r\n * normalizeForComparison(\"Hôm nay, trời đẹp!\", { preserveCase: true })\r\n * // returns \"Hom nay troi dep\"\r\n */\r\nexport function normalizeForComparison(\r\n  text: string,\r\n  options: {\r\n    preserveCase?: boolean\r\n    preserveWhitespace?: boolean\r\n  } = {}\r\n): string {\r\n  if (!text) return ''\r\n\r\n  const { preserveCase = false, preserveWhitespace = false } = options\r\n\r\n  // Step 1: Remove diacritics\r\n  let normalized = normalizeVietnamese(text)\r\n\r\n  // Step 2: Remove all punctuation marks using Unicode property escapes\r\n  // \\p{P} matches any punctuation character\r\n  // \\p{S} matches any symbol character (like currency, math symbols, etc.)\r\n  normalized = normalized.replace(/[\\p{P}\\p{S}]+/gu, '')\r\n\r\n  // Step 3: Normalize whitespace (replace multiple spaces with single space)\r\n  if (!preserveWhitespace) {\r\n    normalized = normalized.replace(/\\s+/g, ' ').trim()\r\n  }\r\n\r\n  // Step 4: Convert to lowercase (if not preserving case)\r\n  if (!preserveCase) {\r\n    normalized = normalized.toLowerCase()\r\n  }\r\n\r\n  return normalized\r\n}\r\n\r\n/**\r\n * Compare two Vietnamese strings without considering diacritics\r\n * Useful for case-insensitive search/matching\r\n *\r\n * @param str1 - First string to compare\r\n * @param str2 - Second string to compare\r\n * @param options - Comparison options\r\n * @returns true if strings match after normalization\r\n *\r\n * @example\r\n * compareVietnamese(\"Xin chào\", \"xin chao\") // returns true\r\n * compareVietnamese(\"Cà phê\", \"CA PHE\") // returns true\r\n * compareVietnamese(\"Học\", \"hoc\") // returns true\r\n * compareVietnamese(\"Xin chào!\", \"Xin chao\", { ignorePunctuation: true }) // returns true\r\n */\r\nexport function compareVietnamese(\r\n  str1: string,\r\n  str2: string,\r\n  options: {\r\n    caseSensitive?: boolean\r\n    ignorePunctuation?: boolean\r\n  } = {}\r\n): boolean {\r\n  if (!str1 || !str2) return str1 === str2\r\n\r\n  const { caseSensitive = false, ignorePunctuation = false } = options\r\n\r\n  let normalized1: string\r\n  let normalized2: string\r\n\r\n  if (ignorePunctuation) {\r\n    // Use full normalization including punctuation removal\r\n    normalized1 = normalizeForComparison(str1, { preserveCase: caseSensitive })\r\n    normalized2 = normalizeForComparison(str2, { preserveCase: caseSensitive })\r\n    return normalized1 === normalized2\r\n  } else {\r\n    // Only remove diacritics\r\n    normalized1 = normalizeVietnamese(str1)\r\n    normalized2 = normalizeVietnamese(str2)\r\n\r\n    if (caseSensitive) {\r\n      return normalized1 === normalized2\r\n    }\r\n\r\n    return normalized1.toLowerCase() === normalized2.toLowerCase()\r\n  }\r\n}\r\n\r\n/**\r\n * Check if a Vietnamese string contains a search term (with normalization)\r\n * Useful for search functionality where users might not type with diacritics\r\n *\r\n * @param text - The Vietnamese text to search in\r\n * @param searchTerm - The search term (can be with or without diacritics)\r\n * @param caseSensitive - Whether search should be case-sensitive (default: false)\r\n * @returns true if text contains the search term after normalization\r\n *\r\n * @example\r\n * searchVietnamese(\"Xin chào bạn\", \"chao\") // returns true\r\n * searchVietnamese(\"Cà phê sữa đá\", \"ca phe\") // returns true\r\n * searchVietnamese(\"Học tiếng Việt\", \"hoc tieng viet\") // returns true\r\n */\r\nexport function searchVietnamese(\r\n  text: string,\r\n  searchTerm: string,\r\n  caseSensitive: boolean = false\r\n): boolean {\r\n  if (!text || !searchTerm) return false\r\n\r\n  const normalizedText = normalizeVietnamese(text)\r\n  const normalizedSearch = normalizeVietnamese(searchTerm)\r\n\r\n  if (caseSensitive) {\r\n    return normalizedText.includes(normalizedSearch)\r\n  }\r\n\r\n  return normalizedText.toLowerCase().includes(normalizedSearch.toLowerCase())\r\n}\r\n"],"names":[],"mappings":"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K,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IACvD,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAC7C,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IACvD,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAC7C,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAC7C,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IACvD,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IACvD,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAC7C,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IACvD,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAC7C,EAAK,IAGL,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAC7C,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IACvD,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IACvD,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAC7C,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IACvD,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAC7C,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAC7C,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IACvD,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IACvD,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAC7C,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IACvD,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAAK,EAAK,IAC7C,EAAK,GACP,EAYO,SAAS,EAAoB,CAAY,EAC9C,GAAI,CAAC,EAAM,MAAO,GAElB,IAAI,EAAa,EAGjB,IAAK,GAAM,CAAC,EAAU,EAAK,GAAI,OAAO,OAAO,CAAC,GAC5C,EAAa,EAAW,OAAO,CAAC,AAAI,CADyB,MAClB,EAAU,KAAM,GAG7D,OAAO,CACT,CA0BO,SAAS,EACd,CAAY,CACZ,EAGI,CAAC,CAAC,EAEN,GAAI,CAAC,EAAM,MAAO,GAElB,GAAM,cAAE,GAAe,CAAK,CAAE,qBAAqB,EAAK,CAAE,CAAG,EAGzD,EAAa,EAAoB,GAiBrC,OAZA,EAAa,EAAW,OAAO,CAAC,kBAAmB,IAG/C,AAAC,IACH,EAAa,EAAW,OAAO,CAAC,IADT,GACiB,KAAK,IAAI,EAAA,EAI9C,AAAD,IACF,EAAa,EAAW,MADP,KACkB,EAAA,EAG9B,CACT,CAgEO,SAAS,EACd,CAAY,CACZ,CAAkB,CAClB,EAAyB,EAAK,EAE9B,GAAI,CAAC,GAAQ,CAAC,EAAY,OAAO,EAEjC,IAAM,EAAiB,EAAoB,GACrC,EAAmB,EAAoB,UAE7C,AAAI,EACK,EAAe,QAAQ,CAAC,EADd,CAIZ,EAAe,WAAW,GAAG,QAAQ,CAAC,EAAiB,WAAW,GAC3E"}