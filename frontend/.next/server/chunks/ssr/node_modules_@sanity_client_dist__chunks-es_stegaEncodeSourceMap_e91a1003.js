module.exports=[614025,a=>{"use strict";a.s(["encodeIntoResult",()=>i,"stegaEncodeSourceMap",()=>q,"stegaEncodeSourceMap$1",()=>r]);var b=a.i(587127);let c=/_key\s*==\s*['"](.*)['"]/;function d(a){if(!Array.isArray(a))throw Error("Path is not an array");return a.reduce((a,b,d)=>{let e=typeof b;if("number"===e)return`${a}[${b}]`;if("string"===e)return`${a}${0===d?"":"."}${b}`;if(("string"==typeof b?c.test(b.trim()):"object"==typeof b&&"_key"in b)&&b._key)return`${a}[_key=="${b._key}"]`;if(Array.isArray(b)){let[c,d]=b;return`${a}[${c}:${d}]`}throw Error(`Unsupported path segment \`${JSON.stringify(b)}\``)},"")}let e={"\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","'":"\\'","\\":"\\\\"},f={"\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"	","\\'":"'","\\\\":"\\"};function g(a){let b,c=[],d=/\['(.*?)'\]|\[(\d+)\]|\[\?\(@\._key=='(.*?)'\)\]/g;for(;null!==(b=d.exec(a));){if(void 0!==b[1]){let a=b[1].replace(/\\(\\|f|n|r|t|')/g,a=>f[a]);c.push(a);continue}if(void 0!==b[2]){c.push(parseInt(b[2],10));continue}if(void 0!==b[3]){let a=b[3].replace(/\\(\\')/g,a=>f[a]);c.push({_key:a,_index:-1});continue}}return c}function h(a){return a.map(a=>{if("string"==typeof a||"number"==typeof a)return a;if(""!==a._key)return{_key:a._key};if(-1!==a._index)return a._index;throw Error(`invalid segment:${JSON.stringify(a)}`)})}function i(a,c,d){return function a(c,d,e=[]){if(null!==c&&Array.isArray(c))return c.map((c,f)=>{if((0,b.isRecord)(c)){let b=c._key;if("string"==typeof b)return a(c,d,e.concat({_key:b,_index:f}))}return a(c,d,e.concat(f))});if((0,b.isRecord)(c)){if("block"===c._type||"span"===c._type){let b={...c};return"block"===c._type?b.children=a(c.children,d,e.concat("children")):"span"===c._type&&(b.text=a(c.text,d,e.concat("text"))),b}return Object.fromEntries(Object.entries(c).map(([b,c])=>[b,a(c,d,e.concat(b))]))}return d(c,e)}(a,(a,b)=>{if("string"!=typeof a)return a;let f=function(a,b){var c;if(!b?.mappings)return;let d=(c=a.map(a=>{if("string"==typeof a||"number"==typeof a)return a;if(-1!==a._index)return a._index;throw Error(`invalid segment:${JSON.stringify(a)}`)}),`$${c.map(a=>"string"==typeof a?`['${a.replace(/[\f\n\r\t'\\]/g,a=>e[a])}']`:"number"==typeof a?`[${a}]`:""!==a._key?`[?(@._key=='${a._key.replace(/['\\]/g,a=>e[a])}')]`:`[${a._index}]`).join("")}`);if(void 0!==b.mappings[d])return{mapping:b.mappings[d],matchedPath:d,pathSuffix:""};let f=Object.entries(b.mappings).filter(([a])=>d.startsWith(a)).sort(([a],[b])=>b.length-a.length);if(0==f.length)return;let[g,h]=f[0],i=d.substring(g.length);return{mapping:h,matchedPath:g,pathSuffix:i}}(b,c);if(!f)return a;let{mapping:h,matchedPath:i}=f;if("value"!==h.type||"documentValue"!==h.source.type)return a;let j=c.documents[h.source.document],k=c.paths[h.source.path],l=g(i);return d({sourcePath:g(k).concat(b.slice(l.length)),sourceDocument:j,resultPath:b,value:a})})}let j="drafts.";function k(a){return a.startsWith(j)}function l(a){return a.startsWith("versions.")}let m=({sourcePath:a,resultPath:b,value:c})=>{if(function(a){return!!/^\d{4}-\d{2}-\d{2}/.test(a)&&!!Date.parse(a)}(c)||function(a){try{let{protocol:b}=new URL(a,a.startsWith("/")?"https://acme.com":void 0);return o.has(b)||b.startsWith("web+")}catch{return!1}}(c))return!1;let d=a.at(-1);return!("slug"===a.at(-2)&&"current"===d||"string"==typeof d&&(d.startsWith("_")||d.endsWith("Id"))||a.some(a=>"meta"===a||"metadata"===a||"openGraph"===a||"seo"===a)||p(a)||p(b)||"string"==typeof d&&n.has(d))},n=new Set(["color","colour","currency","email","format","gid","hex","href","hsl","hsla","icon","id","index","key","language","layout","link","linkAction","locale","lqip","page","path","ref","rgb","rgba","route","secret","slug","status","tag","template","theme","type","textTheme","unit","url","username","variant","website"]),o=new Set(["app:","data:","discord:","file:","ftp:","ftps:","geo:","http:","https:","imap:","javascript:","magnet:","mailto:","maps:","ms-excel:","ms-powerpoint:","ms-word:","slack:","sms:","spotify:","steam:","teams:","tel:","vscode:","zoom:"]);function p(a){return a.some(a=>"string"==typeof a&&null!==a.match(/type/i))}function q(a,e,f){let{filter:g,logger:n,enabled:o}=f;if(!o){let b="config.enabled must be true, don't call this function otherwise";throw n?.error?.(`[@sanity/client]: ${b}`,{result:a,resultSourceMap:e,config:f}),TypeError(b)}if(!e)return n?.error?.("[@sanity/client]: Missing Content Source Map from response body",{result:a,resultSourceMap:e,config:f}),a;if(!f.studioUrl){let b="config.studioUrl must be defined";throw n?.error?.(`[@sanity/client]: ${b}`,{result:a,resultSourceMap:e,config:f}),TypeError(b)}let p=[],q=[],r=i(a,e,({sourcePath:a,sourceDocument:c,resultPath:e,value:i})=>{var o;let r;if(("function"==typeof g?g({sourcePath:a,resultPath:e,filterDefault:m,sourceDocument:c,value:i}):m({sourcePath:a,resultPath:e,value:i}))===!1)return n&&q.push({path:d(h(a)),value:`${i.slice(0,20)}${i.length>20?"...":""}`,length:i.length}),i;n&&p.push({path:d(h(a)),value:`${i.slice(0,20)}${i.length>20?"...":""}`,length:i.length});let{baseUrl:s,workspace:t,tool:u}=("/"!==(r="string"==typeof(o="function"==typeof f.studioUrl?f.studioUrl(c):f.studioUrl)?o:o.baseUrl)&&(r=r.replace(/\/$/,"")),"string"==typeof o?{baseUrl:r}:{...o,baseUrl:r});if(!s)return i;let{_id:v,_type:w,_projectId:x,_dataset:y}=c;return(0,b.C)(i,{origin:"sanity.io",href:function(a){let{baseUrl:b,workspace:c="default",tool:e="default",id:f,type:g,path:i,projectId:m,dataset:n}=a;if(!b)throw Error("baseUrl is required");if(!i)throw Error("path is required");if(!f)throw Error("id is required");if("/"!==b&&b.endsWith("/"))throw Error("baseUrl must not end with a slash");let o="default"===c?void 0:c,p="default"===e?void 0:e,q=l(f)?f.split(".").slice(2).join("."):k(f)?f.slice(j.length):f,r=Array.isArray(i)?d(h(i)):i,s=new URLSearchParams({baseUrl:b,id:q,type:g,path:r});if(o&&s.set("workspace",o),p&&s.set("tool",p),m&&s.set("projectId",m),n&&s.set("dataset",n),k(f)||l(f)){if(l(f)){let a=function(a){if(!l(a))return;let[b,c,...d]=a.split(".");return c}(f);s.set("perspective",a)}}else s.set("perspective","published");let t=["/"===b?"":b];o&&t.push(o);let u=["mode=presentation",`id=${q}`,`type=${g}`,`path=${encodeURIComponent(r)}`];return p&&u.push(`tool=${p}`),t.push("intent","edit",`${u.join(";")}?${s}`),t.join("/")}({baseUrl:s,workspace:t,tool:u,id:v,type:w,path:a,...!f.omitCrossDatasetReferenceData&&{dataset:y,projectId:x}})},!1)});if(n){let a=q.length,b=p.length;if((a||b)&&((n?.groupCollapsed||n.log)?.("[@sanity/client]: Encoding source map into result"),n.log?.(`[@sanity/client]: Paths encoded: ${p.length}, skipped: ${q.length}`)),p.length>0&&(n?.log?.("[@sanity/client]: Table of encoded paths"),(n?.table||n.log)?.(p)),q.length>0){let a=new Set;for(let{path:b}of q)a.add(b.replace(c,"0").replace(/\[\d+\]/g,"[]"));n?.log?.("[@sanity/client]: List of skipped paths",[...a.values()])}(a||b)&&n?.groupEnd?.()}return r}var r=Object.freeze({__proto__:null,stegaEncodeSourceMap:q})}];

//# sourceMappingURL=node_modules_%40sanity_client_dist__chunks-es_stegaEncodeSourceMap_e91a1003.js.map