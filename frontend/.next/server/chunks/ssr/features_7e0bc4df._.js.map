{"version":3,"sources":["turbopack:///[project]/features/flashcards/components/core/flashcard-front.tsx","turbopack:///[project]/features/flashcards/components/core/flashcard-back.tsx","turbopack:///[project]/node_modules/lucide-react/src/icons/bookmark-check.ts","turbopack:///[project]/node_modules/@tanstack/query-core/build/modern/mutationObserver.js","turbopack:///[project]/node_modules/@tanstack/react-query/build/modern/useMutation.js","turbopack:///[project]/features/settings/hooks/use-display-settings.ts","turbopack:///[project]/features/settings/hooks/use-user-settings.ts","turbopack:///[project]/features/flashcards/components/core/flashcard-component.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\n\nimport { useState } from \"react\"\nimport { Volume2, Bookmark, BookmarkCheck } from \"lucide-react\"\nimport { TbMessageLanguage } from \"react-icons/tb\";\nimport { Button } from \"@/shared/components/ui/button\"\nimport { Badge } from \"@/shared/components/ui/badge\"\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/shared/components/ui/tooltip\"\n// import { toast } from \"sonner\" // TODO: Install sonner or use alternative toast solution\nimport { audioManager } from \"@/shared/utils/audio\"\n\ninterface FlashcardFrontProps {\n  data: {\n    id: string\n    vietnamese: string\n    english: string[]\n    type: string[] | string\n    vietnamese_sentence: string\n    english_sentence: string\n    image_url: string | null\n    audio_url: string | null\n    common_meaning: string\n    is_multimeaning?: boolean\n    is_common?: boolean\n\n    // New pronunciation field from backend\n    pronunciation?: string\n  }\n  saved: boolean\n  onSave: (id: string) => void\n}\n\nexport function FlashcardFront({ data, saved, onSave }: FlashcardFrontProps) {\n  const [showTranslation, setShowTranslation] = useState(false)\n  const [isPlayingAudio, setIsPlayingAudio] = useState(false)\n\n  const playAudio = async () => {\n    if (isPlayingAudio) {\n      // toast.info(\"Audio is already playing\") // TODO: Add toast notification\n      return\n    }\n    \n    setIsPlayingAudio(true)\n    \n    try {\n      if (data.audio_url && data.flashcard_type === 'APP') {\n        // For APP flashcards, use the stored audio URL with audio manager\n        console.log(\"Playing APP flashcard audio:\", data.audio_url)\n        await audioManager.playPronunciation(data.audio_url)\n      } else if (data.flashcard_type === 'CUSTOM') {\n        // For custom flashcards, use Google TTS\n        console.log(\"Playing CUSTOM flashcard audio for:\", data.vietnamese)\n        await playCustomFlashcardAudio(data.id, data.vietnamese)\n      } else if (data.audio_url) {\n        // Fallback for any audio URL\n        console.log(\"Playing fallback audio:\", data.audio_url)\n        await audioManager.playPronunciation(data.audio_url)\n      } else {\n        console.log(\"No audio available for:\", data.vietnamese)\n        // toast.info(\"No audio available for this flashcard\") // TODO: Add toast notification\n      }\n    } catch (error) {\n      console.error(\"Failed to play audio:\", error)\n      // toast.error(\"Failed to play audio\") // TODO: Add toast notification\n    } finally {\n      setIsPlayingAudio(false)\n    }\n  }\n\n\n  const handleSave = (e: React.MouseEvent) => {\n    e.stopPropagation()\n    console.log(\"Save button clicked for card:\", data.id)\n    try {\n      onSave(data.id)\n    } catch (error) {\n      console.error(\"Error saving flashcard:\", error)\n      // toast.error(\"Failed to save flashcard\") // TODO: Add toast notification\n    }\n  }\n\n  // Format word type for display\n  const formatWordType = (type: string[] | string): string => {\n    if (Array.isArray(type)) {\n      return type.join(\", \")\n    }\n    return type\n  }\n\n  // Get primary English translation\n  const primaryTranslation = Array.isArray(data.english) ? data.english[0] : data.english\n\n  // Safely escape special regex characters in the term to highlight\n  const escapeRegExp = (input: string): string => input.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\")\n\n  // Highlight the exact Vietnamese term in the sentence without using innerHTML (XSS-safe)\n  const highlightTermInSentence = (sentence: string, term: string): React.ReactNode => {\n    if (!sentence || !term) return sentence\n\n    const escaped = escapeRegExp(term)\n\n    // Prefer Unicode-aware, letter-bounded matching; fall back gracefully if unsupported\n    let regex: RegExp\n    try {\n      regex = new RegExp(`(?<!\\\\\\p{L})(${escaped})(?!\\\\\\p{L})`, \"giu\")\n    } catch {\n      // Fallback for environments without lookbehind/unicode property escapes support\n      regex = new RegExp(`(${escaped})`, \"gi\")\n    }\n\n    const parts: React.ReactNode[] = []\n    let lastIndex = 0\n\n    for (const match of sentence.matchAll(regex)) {\n      const start = match.index ?? 0\n      const end = start + match[0].length\n\n      if (start > lastIndex) {\n        parts.push(sentence.slice(lastIndex, start))\n      }\n\n      parts.push(\n        <mark\n          key={`hl-${start}`}\n          className=\"rounded-md px-1 bg-amber-200/70 text-gray-900 ring-1 ring-amber-300 underline decoration-amber-500/50 decoration-2 underline-offset-2\"\n        >\n          {match[0]}\n        </mark>\n      )\n\n      lastIndex = end\n    }\n\n    if (lastIndex === 0) return sentence\n    if (lastIndex < sentence.length) {\n      parts.push(sentence.slice(lastIndex))\n    }\n\n    return parts\n  }\n\n  return (\n    <div className=\"w-full max-w-2xl mx-auto bg-white rounded-3xl p-8 shadow-lg border border-gray-200\">\n      {/* Save button */}\n      <div className=\"flex justify-end mb-4\">\n        <Button variant=\"ghost\" size=\"sm\" onClick={handleSave} className=\"p-2 hover:bg-gray-100\">\n          {saved ? <BookmarkCheck className=\"h-5 w-5 text-blue-600\" /> : <Bookmark className=\"h-5 w-5 text-gray-500\" />}\n        </Button>\n      </div>\n\n      <div className=\"flex gap-8 h-full\">\n        {/* Image section */}\n        <div className=\"flex-shrink-0\">\n          {data.image_url ? (\n            <img\n              src={data.image_url}\n              alt={data.vietnamese}\n              className=\"w-48 h-48 object-cover rounded-xl border-2 border-gray-200\"\n              loading=\"lazy\"\n              onError={(e) => {\n                // Fallback to placeholder if image fails to load\n                const target = e.target as HTMLImageElement;\n                target.src = \"/placeholder.svg\";\n              }}\n            />\n          ) : (\n            <div className=\"w-48 h-48 bg-gray-100 rounded-xl border-2 border-gray-200 flex items-center justify-center\">\n              <div className=\"text-center text-gray-400\">\n                <div className=\"text-4xl mb-2\">ðŸ“š</div>\n                <div className=\"text-sm\">No image</div>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Content section */}\n        <div className=\"flex-1 flex flex-col justify-center space-y-6\">\n          {/* Vietnamese word and audio */}\n          <div className=\"flex items-center gap-4\">\n            <div className=\"flex flex-col\">\n              <h2 className=\"text-4xl font-bold text-gray-800\">{data.vietnamese}</h2>\n              {/* IPA Pronunciation display */}\n              {data.pronunciation && (\n                <p className=\"text-lg text-gray-500 mt-1 font-mono\">\n                  /{data.pronunciation}/\n                </p>\n              )}\n            </div>\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={(e) => {\n                e.stopPropagation()\n                playAudio()\n              }}\n              className={`p-3 hover:bg-gray-100 rounded-full ${isPlayingAudio ? 'animate-pulse bg-blue-100' : ''}`}\n              disabled={isPlayingAudio}\n              title={isPlayingAudio ? \"Playing audio...\" : \"Play pronunciation\"}\n            >\n              <Volume2 className={`h-6 w-6 ${isPlayingAudio ? 'text-blue-700' : 'text-blue-600'}`} />\n            </Button>\n          </div>\n\n          {/* Word type and badges */}\n          <div className=\"flex items-center gap-2\">\n            <Badge variant=\"secondary\" className=\"bg-blue-100 text-blue-800\">\n              {formatWordType(data.type)}\n            </Badge>\n            {data.is_multimeaning && (\n              <Badge variant=\"outline\" className=\"text-purple-600 border-purple-300\">\n                Multi-meaning\n              </Badge>\n            )}\n          </div>\n\n\n          {/* Vietnamese example sentence */}\n          {data.vietnamese_sentence ? (\n            <div className=\"space-y-1\">\n              <p className=\"text-sm text-gray-500 font-medium\">Example sentence:</p>\n              <p className=\"text-md md:text-lg text-gray-700 italic\">\n                <span className=\"text-gray-400\">\"</span>\n                {highlightTermInSentence(data.vietnamese_sentence, data.vietnamese)}\n                <span className=\"text-gray-400\">\"</span>\n              </p>\n\n              {/* English translation with hover - CHá»ˆ DÃ™NG TOOLTIP */}\n              {data.english_sentence && (\n                <div className=\"flex items-center gap-1 mt-1\">\n                  <TooltipProvider>\n                    <Tooltip>\n                      <TooltipTrigger asChild>\n                        <Button\n                          variant=\"ghost\"\n                          size=\"icon\" // Sá»­ dá»¥ng size=\"icon\" cho cÃ¡c nÃºt chá»‰ chá»©a icon\n                          className=\"p-1 h-auto text-gray-500 hover:text-indigo-600 hover:bg-indigo-50 rounded-full\"\n                          aria-label=\"Xem dá»‹ch cÃ¢u vÃ­ dá»¥\"\n                        >\n                          <TbMessageLanguage className=\"h-4 w-4\" />\n                        </Button>\n                      </TooltipTrigger>\n                      <TooltipContent side=\"bottom\" align=\"start\">\n                        <p className=\"text-sm text-gray-700 italic\">\"{data.english_sentence}\"</p>\n                      </TooltipContent>\n                    </Tooltip>\n                  </TooltipProvider>\n                </div>\n              )}\n            </div>\n          ) : (\n            <div className=\"space-y-1\">\n              <p className=\"text-sm text-gray-500 font-medium\">Example sentence:</p>\n              <p className=\"text-md md:text-lg text-gray-400 italic\">\n                No example sentence available\n              </p>\n            </div>\n          )}\n\n        </div>\n      </div>\n    </div>\n  )\n}\n","\"use client\"\r\n\r\nimport type React from \"react\"\r\nimport { Bookmark, BookmarkCheck } from \"lucide-react\"\r\nimport { Button } from \"@/shared/components/ui/button\"\r\nimport { ScrollArea } from \"@/shared/components/ui/scroll-area\"\r\n// import { toast } from \"sonner\" // TODO: Install sonner or use alternative toast solution\r\n\r\ninterface FlashcardBackProps {\r\n  data: {\r\n    id: string\r\n    vietnamese: string\r\n    english: string[]\r\n    common_meaning: string\r\n    is_multimeaning?: boolean\r\n    is_multiword?: boolean\r\n    // Custom flashcard fields\r\n    flashcard_type?: 'APP' | 'CUSTOM'\r\n    ipa_pronunciation?: string\r\n  }\r\n  saved: boolean\r\n  onSave: (id: string) => void\r\n}\r\n\r\nexport function FlashcardBack({ data, saved, onSave }: FlashcardBackProps) {\r\n  const handleSave = (e: React.MouseEvent) => {\r\n    e.stopPropagation()\r\n    console.log(\"Save button clicked for card:\", data.id)\r\n    try {\r\n      onSave(data.id)\r\n    } catch (error) {\r\n      console.error(\"Error saving flashcard:\", error)\r\n      // toast.error(\"Failed to save flashcard\") // TODO: Add toast notification\r\n    }\r\n  }\r\n\r\n  // Get other meanings (excluding the common meaning)\r\n  const otherMeanings = data.english ? data.english.filter(meaning => meaning !== data.common_meaning) : []\r\n\r\n  return (\r\n    <div className=\"w-full h-full bg-white rounded-3xl p-6 shadow-lg border border-gray-200 flex flex-col\">\r\n      {/* Save button */}\r\n      <div className=\"flex justify-end mb-4\">\r\n        <Button variant=\"ghost\" size=\"sm\" onClick={handleSave} className=\"p-2 hover:bg-gray-100\">\r\n          {saved ? (\r\n            <BookmarkCheck className=\"h-5 w-5 text-green-600\" />\r\n          ) : (\r\n            <Bookmark className=\"h-5 w-5 text-gray-500\" />\r\n          )}\r\n        </Button>\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col space-y-6 min-h-0\">\r\n\r\n        {/* Primary meaning */}\r\n        <div className=\"flex-shrink-0\">\r\n          <h3 className=\"text-xl font-semibold text-gray-800 mb-3\">Primary Meaning</h3>\r\n          <p className=\"text-2xl font-medium text-green-700 bg-green-50 rounded-lg p-4 border border-green-200\">\r\n            {data.common_meaning || (data.english && data.english.length > 0 ? data.english[0] : \"No translation available\")}\r\n          </p>\r\n\r\n          {/* IPA pronunciation for custom flashcards */}\r\n          {data.flashcard_type === 'CUSTOM' && data.ipa_pronunciation && (\r\n            <div className=\"mt-3\">\r\n              <p className=\"text-sm text-gray-600 italic\">\r\n                IPA: <span className=\"font-mono text-blue-600\">{data.ipa_pronunciation}</span>\r\n              </p>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Other meanings - only show if there are multiple meanings */}\r\n        {otherMeanings && otherMeanings.length > 0 && (\r\n          <div className=\"flex-1 flex flex-col min-h-0\">\r\n            <h3 className=\"text-xl font-semibold text-gray-800 mb-3 flex-shrink-0\">\r\n              Other Meanings ({otherMeanings.length})\r\n            </h3>\r\n            \r\n            {/* Scrollable area for other meanings */}\r\n            <ScrollArea className=\"flex-1 max-h-48 rounded-lg border border-gray-200 bg-gray-50 p-3\">\r\n              <div className=\"space-y-3\">\r\n                {otherMeanings.map((meaning, idx) => (\r\n                  <p key={idx} className=\"text-base text-gray-700 bg-white rounded-lg p-3 border border-gray-200 shadow-sm\">\r\n                    â€¢ {meaning}\r\n                  </p>\r\n                ))}\r\n              </div>\r\n            </ScrollArea>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'm19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z', key: '169p4p' }],\n  ['path', { d: 'm9 10 2 2 4-4', key: '1gnqz4' }],\n];\n\n/**\n * @component @name BookmarkCheck\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTkgMjEtNy00LTcgNFY1YTIgMiAwIDAgMSAyLTJoMTBhMiAyIDAgMCAxIDIgMloiIC8+CiAgPHBhdGggZD0ibTkgMTAgMiAyIDQtNCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/bookmark-check\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst BookmarkCheck = createLucideIcon('bookmark-check', __iconNode);\n\nexport default BookmarkCheck;\n","// src/mutationObserver.ts\nimport { getDefaultState } from \"./mutation.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Subscribable } from \"./subscribable.js\";\nimport { hashKey, shallowEqualObjects } from \"./utils.js\";\nvar MutationObserver = class extends Subscribable {\n  #client;\n  #currentResult = void 0;\n  #currentMutation;\n  #mutateOptions;\n  constructor(client, options) {\n    super();\n    this.#client = client;\n    this.setOptions(options);\n    this.bindMethods();\n    this.#updateResult();\n  }\n  bindMethods() {\n    this.mutate = this.mutate.bind(this);\n    this.reset = this.reset.bind(this);\n  }\n  setOptions(options) {\n    const prevOptions = this.options;\n    this.options = this.#client.defaultMutationOptions(options);\n    if (!shallowEqualObjects(this.options, prevOptions)) {\n      this.#client.getMutationCache().notify({\n        type: \"observerOptionsUpdated\",\n        mutation: this.#currentMutation,\n        observer: this\n      });\n    }\n    if (prevOptions?.mutationKey && this.options.mutationKey && hashKey(prevOptions.mutationKey) !== hashKey(this.options.mutationKey)) {\n      this.reset();\n    } else if (this.#currentMutation?.state.status === \"pending\") {\n      this.#currentMutation.setOptions(this.options);\n    }\n  }\n  onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.#currentMutation?.removeObserver(this);\n    }\n  }\n  onMutationUpdate(action) {\n    this.#updateResult();\n    this.#notify(action);\n  }\n  getCurrentResult() {\n    return this.#currentResult;\n  }\n  reset() {\n    this.#currentMutation?.removeObserver(this);\n    this.#currentMutation = void 0;\n    this.#updateResult();\n    this.#notify();\n  }\n  mutate(variables, options) {\n    this.#mutateOptions = options;\n    this.#currentMutation?.removeObserver(this);\n    this.#currentMutation = this.#client.getMutationCache().build(this.#client, this.options);\n    this.#currentMutation.addObserver(this);\n    return this.#currentMutation.execute(variables);\n  }\n  #updateResult() {\n    const state = this.#currentMutation?.state ?? getDefaultState();\n    this.#currentResult = {\n      ...state,\n      isPending: state.status === \"pending\",\n      isSuccess: state.status === \"success\",\n      isError: state.status === \"error\",\n      isIdle: state.status === \"idle\",\n      mutate: this.mutate,\n      reset: this.reset\n    };\n  }\n  #notify(action) {\n    notifyManager.batch(() => {\n      if (this.#mutateOptions && this.hasListeners()) {\n        const variables = this.#currentResult.variables;\n        const onMutateResult = this.#currentResult.context;\n        const context = {\n          client: this.#client,\n          meta: this.options.meta,\n          mutationKey: this.options.mutationKey\n        };\n        if (action?.type === \"success\") {\n          this.#mutateOptions.onSuccess?.(\n            action.data,\n            variables,\n            onMutateResult,\n            context\n          );\n          this.#mutateOptions.onSettled?.(\n            action.data,\n            null,\n            variables,\n            onMutateResult,\n            context\n          );\n        } else if (action?.type === \"error\") {\n          this.#mutateOptions.onError?.(\n            action.error,\n            variables,\n            onMutateResult,\n            context\n          );\n          this.#mutateOptions.onSettled?.(\n            void 0,\n            action.error,\n            variables,\n            onMutateResult,\n            context\n          );\n        }\n      }\n      this.listeners.forEach((listener) => {\n        listener(this.#currentResult);\n      });\n    });\n  }\n};\nexport {\n  MutationObserver\n};\n//# sourceMappingURL=mutationObserver.js.map","\"use client\";\n\n// src/useMutation.ts\nimport * as React from \"react\";\nimport {\n  MutationObserver,\n  noop,\n  notifyManager,\n  shouldThrowError\n} from \"@tanstack/query-core\";\nimport { useQueryClient } from \"./QueryClientProvider.js\";\nfunction useMutation(options, queryClient) {\n  const client = useQueryClient(queryClient);\n  const [observer] = React.useState(\n    () => new MutationObserver(\n      client,\n      options\n    )\n  );\n  React.useEffect(() => {\n    observer.setOptions(options);\n  }, [observer, options]);\n  const result = React.useSyncExternalStore(\n    React.useCallback(\n      (onStoreChange) => observer.subscribe(notifyManager.batchCalls(onStoreChange)),\n      [observer]\n    ),\n    () => observer.getCurrentResult(),\n    () => observer.getCurrentResult()\n  );\n  const mutate = React.useCallback(\n    (variables, mutateOptions) => {\n      observer.mutate(variables, mutateOptions).catch(noop);\n    },\n    [observer]\n  );\n  if (result.error && shouldThrowError(observer.options.throwOnError, [result.error])) {\n    throw result.error;\n  }\n  return { ...result, mutate, mutateAsync: result.mutate };\n}\nexport {\n  useMutation\n};\n//# sourceMappingURL=useMutation.js.map","\"use client\"\r\n\r\nimport { useDisplaySettingsBase } from '@/features/settings/hooks/use-user-settings'\r\nimport { DisplaySettings } from '@/shared/types/settings'\r\n\r\nexport type FlashcardAnimationSpeed = \"slow\" | \"normal\" | \"fast\"\r\n\r\n// Animation duration mappings (keep existing)\r\nexport const ANIMATION_DURATIONS = {\r\n  slow: 750,   \r\n  normal: 500, \r\n  fast: 250,   \r\n} as const\r\n\r\n// Constraints (keep existing)\r\nexport const REVIEW_TIME_CONSTRAINTS = {\r\n  min: 2,\r\n  max: 8,\r\n  default: 4,\r\n} as const\r\n\r\nexport const SOUND_VOLUME_CONSTRAINTS = {\r\n  min: 0,\r\n  max: 100,\r\n  default: 75,\r\n  step: 5,\r\n} as const\r\n\r\n/**\r\n * Enhanced display settings hook with utility functions\r\n * Wraps the base useDisplaySettings hook with flashcard-specific utilities\r\n */\r\nexport const useDisplaySettings = () => {\r\n  const { \r\n    settings: displaySettings, \r\n    savedSettings,\r\n    updateDisplaySetting,\r\n    updateDisplaySettings,\r\n    saveSettings,\r\n    discardChanges,\r\n    resetToDefaults,\r\n    hasUnsavedChanges,\r\n    isSaving \r\n  } = useDisplaySettingsBase()\r\n\r\n  // Update individual setting - now only updates draft state\r\n  const updateSetting = <K extends keyof DisplaySettings>(\r\n    key: K,\r\n    value: DisplaySettings[K]\r\n  ) => {\r\n    updateDisplaySetting(key, value)\r\n  }\r\n\r\n  // Update multiple settings at once - now only updates draft state\r\n  const updateMultipleSettings = (updates: Partial<DisplaySettings>) => {\r\n    const newSettings = { ...displaySettings, ...updates }\r\n    updateDisplaySettings(newSettings)\r\n  }\r\n\r\n  // Reset to defaults - now only updates draft state\r\n  const resetSettings = () => {\r\n    resetToDefaults()\r\n  }\r\n\r\n  // Explicit save function for the Save button\r\n  const saveCurrentSettings = () => {\r\n    saveSettings()\r\n  }\r\n\r\n  // Discard unsaved changes\r\n  const discardSettings = () => {\r\n    discardChanges()\r\n  }\r\n\r\n  // Utility functions (keep existing logic)\r\n  const getAnimationDuration = () => {\r\n    return ANIMATION_DURATIONS[displaySettings.flashcardAnimationSpeed]\r\n  }\r\n\r\n  const getReviewTimeSeconds = () => {\r\n    const { min, max } = REVIEW_TIME_CONSTRAINTS\r\n    return Math.max(min, Math.min(max, displaySettings.reviewTimeSeconds))\r\n  }\r\n\r\n  const updateReviewTime = (seconds: number) => {\r\n    const { min, max } = REVIEW_TIME_CONSTRAINTS\r\n    const validatedSeconds = Math.max(min, Math.min(max, seconds))\r\n    updateSetting('reviewTimeSeconds', validatedSeconds)\r\n  }\r\n\r\n  const getSoundVolume = () => {\r\n    const { min, max } = SOUND_VOLUME_CONSTRAINTS\r\n    return Math.max(min, Math.min(max, displaySettings.soundVolume))\r\n  }\r\n\r\n  const updateSoundVolume = (volume: number) => {\r\n    const { min, max } = SOUND_VOLUME_CONSTRAINTS\r\n    const validatedVolume = Math.max(min, Math.min(max, volume))\r\n    updateSetting('soundVolume', validatedVolume)\r\n  }\r\n\r\n  const areSoundEffectsDisabled = () => {\r\n    return displaySettings.muteSounds || displaySettings.soundVolume === 0\r\n  }\r\n\r\n  const getEffectiveVolume = () => {\r\n    return displaySettings.muteSounds ? 0 : getSoundVolume()\r\n  }\r\n\r\n  const getPronunciationVolume = () => {\r\n    return getSoundVolume()\r\n  }\r\n\r\n  const toggleMute = () => {\r\n    updateSetting('muteSounds', !displaySettings.muteSounds)\r\n  }\r\n\r\n  return {\r\n    settings: displaySettings,\r\n    savedSettings,\r\n    updateSetting,\r\n    updateMultipleSettings,\r\n    resetSettings,\r\n    saveSettings: saveCurrentSettings,\r\n    discardSettings,\r\n    hasUnsavedChanges,\r\n    isLoaded: true, // Since we're using React Query, we can consider it loaded when not loading\r\n    isSaving,\r\n    getAnimationDuration,\r\n    getReviewTimeSeconds,\r\n    updateReviewTime,\r\n    getSoundVolume,\r\n    updateSoundVolume,\r\n    areSoundEffectsDisabled,\r\n    getEffectiveVolume,\r\n    getPronunciationVolume,\r\n    toggleMute,\r\n  }\r\n}\r\n\r\n","import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query'\r\nimport { useState, useCallback, useEffect } from 'react'\r\nimport { toast } from 'sonner'\r\nimport { supabase } from '@/shared/lib/supabase/client'\r\nimport { \r\n  UserSettings, \r\n  UserSettingsRow, \r\n  DisplaySettings, \r\n  NotificationSettings, \r\n  PrivacySettings,\r\n} from '@/shared/types/settings'\r\n\r\n// Default user settings\r\nexport const DEFAULT_USER_SETTINGS: UserSettings = {\r\n  display: {\r\n    flashcardAnimationSpeed: \"normal\",\r\n    muteSounds: false,\r\n    soundVolume: 75,\r\n    reviewTimeSeconds: 4,\r\n    language: \"en\",\r\n    timezone: \"UTC\",\r\n    dateFormat: \"MM/DD/YYYY\",\r\n    keyboardNavigation: true,\r\n    focusIndicators: true,\r\n  },\r\n  notifications: {\r\n    email: {\r\n      dailyReminders: false,\r\n      weeklyProgress: false,\r\n      achievements: false,\r\n      questUpdates: false,\r\n      marketingEmails: false,\r\n    },\r\n    push: {\r\n      studyReminders: false,\r\n      streakReminders: false,\r\n      achievements: false,\r\n      questUpdates: false,\r\n      flashcardReviews: false,\r\n    },\r\n    inApp: {\r\n      sounds: true,\r\n      popups: true,\r\n      achievements: true,\r\n      levelUps: true,\r\n    },\r\n    studyReminders: {\r\n      enabled: false,\r\n      dailyGoal: false,\r\n      weeklyGoal: false,\r\n      streakMaintenance: false,\r\n    },\r\n  },\r\n  privacy: {\r\n    dataCollection: true,\r\n    analyticsTracking: true,\r\n    crashReporting: true,\r\n    marketingCommunications: false,\r\n    sessionTimeout: \"30\",\r\n    passwordChangeNotifications: true,\r\n  },\r\n}\r\n\r\n// Validation functions\r\nexport function validateUserSettings(settings: any): UserSettings {\r\n  // Basic validation - in production, use Zod or similar\r\n  try {\r\n    return {\r\n      display: settings.display || DEFAULT_USER_SETTINGS.display,\r\n      notifications: settings.notifications || DEFAULT_USER_SETTINGS.notifications,\r\n      privacy: settings.privacy || DEFAULT_USER_SETTINGS.privacy,\r\n    }\r\n  } catch {\r\n    return DEFAULT_USER_SETTINGS\r\n  }\r\n}\r\n\r\nexport function safeParseUserSettings(settings: any): { success: boolean; data?: UserSettings; error?: Error } {\r\n  try {\r\n    const parsed = typeof settings === 'string' ? JSON.parse(settings) : settings\r\n    const validated = validateUserSettings(parsed)\r\n    return { success: true, data: validated }\r\n  } catch (error) {\r\n    return { success: false, error: error instanceof Error ? error : new Error('Failed to parse settings') }\r\n  }\r\n}\r\n\r\n// Query keys\r\nexport const userSettingsKeys = {\r\n  all: ['user-settings'] as const,\r\n  detail: (userId: string) => [...userSettingsKeys.all, 'detail', userId] as const,\r\n  category: (userId: string, category: string) => [...userSettingsKeys.all, category, userId] as const,\r\n}\r\n\r\n// Get current user ID helper\r\nconst getCurrentUserId = async () => {\r\n  const { data: { user }, error } = await supabase.auth.getUser()\r\n  if (error || !user) {\r\n    throw new Error('User not authenticated')\r\n  }\r\n  return user.id\r\n}\r\n\r\n// API functions\r\nconst fetchUserSettings = async (): Promise<UserSettings> => {\r\n  const userId = await getCurrentUserId()\r\n  \r\n  const { data, error } = await supabase\r\n    .from('user_settings')\r\n    .select('settings')\r\n    .eq('user_id', userId)\r\n    .single()\r\n\r\n  if (error) {\r\n    if (error.code === 'PGRST116') {\r\n      // No settings found, return defaults\r\n      return DEFAULT_USER_SETTINGS\r\n    }\r\n    throw new Error(`Failed to fetch user settings: ${error.message}`)\r\n  }\r\n\r\n  // Validate and parse settings from database\r\n  const parseResult = safeParseUserSettings(data.settings)\r\n  if (!parseResult.success) {\r\n    console.warn('Invalid settings from database, using defaults:', parseResult.error)\r\n    return DEFAULT_USER_SETTINGS\r\n  }\r\n\r\n  return parseResult.data\r\n}\r\n\r\nconst saveUserSettings = async (settings: UserSettings): Promise<void> => {\r\n  const userId = await getCurrentUserId()\r\n  \r\n  // Validate settings before saving\r\n  const validatedSettings = validateUserSettings(settings)\r\n  \r\n  const { error } = await supabase\r\n    .from('user_settings')\r\n    .upsert({\r\n      user_id: userId,\r\n      settings: validatedSettings,\r\n      updated_at: new Date().toISOString(),\r\n    }, {\r\n      onConflict: 'user_id'\r\n    })\r\n\r\n  if (error) {\r\n    throw new Error(`Failed to save user settings: ${error.message}`)\r\n  }\r\n}\r\n\r\n// Helper function to deeply compare settings objects\r\nconst areSettingsEqual = (settings1: UserSettings, settings2: UserSettings): boolean => {\r\n  return JSON.stringify(settings1) === JSON.stringify(settings2)\r\n}\r\n\r\n// Main hook for user settings with draft mode\r\nexport const useUserSettings = () => {\r\n  const queryClient = useQueryClient()\r\n  \r\n  // Draft state for unsaved changes\r\n  const [draftSettings, setDraftSettings] = useState<UserSettings | null>(null)\r\n\r\n  const query = useQuery({\r\n    queryKey: userSettingsKeys.all,\r\n    queryFn: fetchUserSettings,\r\n    staleTime: 5 * 60 * 1000, // 5 minutes\r\n    gcTime: 10 * 60 * 1000, // 10 minutes\r\n    retry: (failureCount, error) => {\r\n      // Don't retry auth errors\r\n      if (error.message.includes('not authenticated')) {\r\n        return false\r\n      }\r\n      return failureCount < 3\r\n    },\r\n  })\r\n\r\n  // Initialize draft settings when data loads\r\n  const savedSettings = query.data ?? DEFAULT_USER_SETTINGS\r\n  const currentSettings = draftSettings ?? savedSettings\r\n\r\n  // Calculate if there are unsaved changes\r\n  const hasUnsavedChanges = draftSettings !== null && !areSettingsEqual(draftSettings, savedSettings)\r\n\r\n  // Reset draft when saved settings change (e.g., after successful save or external update)\r\n  useEffect(() => {\r\n    if (query.data && draftSettings) {\r\n      // If the saved settings have changed and we have draft settings,\r\n      // check if they're now equal to reset draft state\r\n      if (areSettingsEqual(draftSettings, query.data)) {\r\n        setDraftSettings(null)\r\n      }\r\n    }\r\n  }, [query.data, draftSettings])\r\n\r\n  const saveMutation = useMutation({\r\n    mutationFn: saveUserSettings,\r\n    onMutate: async (newSettings) => {\r\n      // Cancel outgoing refetches\r\n      await queryClient.cancelQueries({ queryKey: userSettingsKeys.all })\r\n\r\n      // Snapshot previous value\r\n      const previousSettings = queryClient.getQueryData<UserSettings>(userSettingsKeys.all)\r\n\r\n      // Optimistically update\r\n      queryClient.setQueryData<UserSettings>(userSettingsKeys.all, newSettings)\r\n\r\n      return { previousSettings }\r\n    },\r\n    onError: (error, _newSettings, context) => {\r\n      // Rollback on error\r\n      if (context?.previousSettings) {\r\n        queryClient.setQueryData<UserSettings>(userSettingsKeys.all, context.previousSettings)\r\n      }\r\n      toast.error('Failed to save settings')\r\n      console.error('Settings save error:', error)\r\n    },\r\n    onSuccess: () => {\r\n      // Clear draft state after successful save\r\n      setDraftSettings(null)\r\n      toast.success('Settings saved successfully')\r\n    },\r\n    onSettled: () => {\r\n      // Refetch to ensure we have the latest data\r\n      queryClient.invalidateQueries({ queryKey: userSettingsKeys.all })\r\n    },\r\n  })\r\n\r\n  // Update draft setting (local only, no save to database)\r\n  const updateDraftSetting = useCallback((category: keyof UserSettings, key: string, value: any) => {\r\n    const baseSettings = draftSettings ?? savedSettings\r\n    const newSettings = {\r\n      ...baseSettings,\r\n      [category]: {\r\n        ...baseSettings[category],\r\n        [key]: value,\r\n      },\r\n    }\r\n    setDraftSettings(newSettings)\r\n  }, [draftSettings, savedSettings])\r\n\r\n  // Update draft category (local only, no save to database)\r\n  const updateDraftCategory = useCallback((category: keyof UserSettings, categorySettings: DisplaySettings | NotificationSettings | PrivacySettings) => {\r\n    const baseSettings = draftSettings ?? savedSettings\r\n    const newSettings = {\r\n      ...baseSettings,\r\n      [category]: categorySettings,\r\n    }\r\n    setDraftSettings(newSettings)\r\n  }, [draftSettings, savedSettings])\r\n\r\n  // Save current draft settings to database\r\n  const saveSettings = useCallback((settings?: UserSettings) => {\r\n    const settingsToSave = settings ?? currentSettings\r\n    return new Promise<void>((resolve, reject) => {\r\n      saveMutation.mutate(settingsToSave, {\r\n        onSuccess: () => {\r\n          resolve()\r\n        },\r\n        onError: (error) => {\r\n          reject(error)\r\n        }\r\n      })\r\n    })\r\n  }, [currentSettings, saveMutation])\r\n\r\n  // Discard changes and reset to saved settings\r\n  const discardChanges = useCallback(() => {\r\n    setDraftSettings(null)\r\n  }, [])\r\n\r\n  // Reset to default settings (draft only)\r\n  const resetToDefaults = useCallback(() => {\r\n    setDraftSettings(DEFAULT_USER_SETTINGS)\r\n  }, [])\r\n\r\n  return {\r\n    // Query data\r\n    settings: currentSettings,\r\n    savedSettings,\r\n    isLoading: query.isLoading,\r\n    isError: query.isError,\r\n    error: query.error,\r\n\r\n    // Draft state\r\n    hasUnsavedChanges,\r\n    draftSettings,\r\n\r\n    // Mutations\r\n    saveSettings,\r\n    updateDraftSetting,\r\n    updateDraftCategory,\r\n    discardChanges,\r\n    resetToDefaults,\r\n\r\n    // Mutation states\r\n    isSaving: saveMutation.isPending,\r\n  }\r\n}\r\n\r\n// Specialized hooks for individual categories\r\nexport const useDisplaySettingsBase = () => {\r\n  const { \r\n    settings, \r\n    savedSettings,\r\n    updateDraftCategory, \r\n    updateDraftSetting, \r\n    saveSettings, \r\n    discardChanges,\r\n    resetToDefaults,\r\n    hasUnsavedChanges,\r\n    isSaving \r\n  } = useUserSettings()\r\n\r\n  return {\r\n    settings: settings.display,\r\n    savedSettings: savedSettings.display,\r\n    updateDisplaySettings: (newSettings: DisplaySettings) => \r\n      updateDraftCategory('display', newSettings),\r\n    updateDisplaySetting: (key: keyof DisplaySettings, value: any) =>\r\n      updateDraftSetting('display', key, value),\r\n    saveSettings: () => saveSettings(),\r\n    discardChanges,\r\n    resetToDefaults,\r\n    hasUnsavedChanges,\r\n    isSaving,\r\n  }\r\n}\r\n\r\nexport const useNotificationSettings = () => {\r\n  const { \r\n    settings, \r\n    savedSettings,\r\n    updateDraftCategory, \r\n    updateDraftSetting, \r\n    saveSettings, \r\n    discardChanges,\r\n    resetToDefaults,\r\n    hasUnsavedChanges,\r\n    isSaving \r\n  } = useUserSettings()\r\n\r\n  return {\r\n    settings: settings.notifications,\r\n    savedSettings: savedSettings.notifications,\r\n    updateNotificationSettings: (newSettings: NotificationSettings) => \r\n      updateDraftCategory('notifications', newSettings),\r\n    updateNotificationSetting: (key: keyof NotificationSettings, value: any) =>\r\n      updateDraftSetting('notifications', key, value),\r\n    saveSettings: () => saveSettings(),\r\n    discardChanges,\r\n    resetToDefaults,\r\n    hasUnsavedChanges,\r\n    isSaving,\r\n  }\r\n}\r\n\r\nexport const usePrivacySettings = () => {\r\n  const { \r\n    settings, \r\n    savedSettings,\r\n    updateDraftCategory, \r\n    updateDraftSetting, \r\n    saveSettings, \r\n    discardChanges,\r\n    resetToDefaults,\r\n    hasUnsavedChanges,\r\n    isSaving \r\n  } = useUserSettings()\r\n\r\n  return {\r\n    settings: settings.privacy,\r\n    savedSettings: savedSettings.privacy,\r\n    updatePrivacySettings: (newSettings: PrivacySettings) => \r\n      updateDraftCategory('privacy', newSettings),\r\n    updatePrivacySetting: (key: keyof PrivacySettings, value: any) =>\r\n      updateDraftSetting('privacy', key, value),\r\n    saveSettings: () => saveSettings(),\r\n    discardChanges,\r\n    resetToDefaults,\r\n    hasUnsavedChanges,\r\n    isSaving,\r\n  }\r\n}\r\n\r\n","\"use client\"\r\n\r\nimport { useState, useRef, useEffect } from \"react\"\r\nimport { motion, useMotionValue, useTransform, AnimatePresence } from \"framer-motion\"\r\nimport { FlashcardFront } from \"./flashcard-front\"\r\nimport { FlashcardBack } from \"./flashcard-back\"\r\nimport type { FlashcardData } from \"@/features/flashcards/services/flashcardService\"\r\nimport { useDisplaySettings } from \"@/features/settings/hooks/use-display-settings\"\r\nimport { audioManager, playFlipSound } from \"@/shared/utils/audio\"\r\n\r\ninterface FlashcardComponentProps {\r\n  data: FlashcardData\r\n  saved: boolean\r\n  onSave: (id: string) => void\r\n  onSwipe?: (direction: 'left' | 'right') => void\r\n  onFlip?: () => void\r\n  isFlipped?: boolean\r\n  animationDuration?: number // Animation duration in milliseconds\r\n}\r\n\r\ninterface CardProps {\r\n  data: FlashcardData\r\n  saved: boolean\r\n  onSave: (id: string) => void\r\n  onFlip?: () => void\r\n  isFlipped?: boolean\r\n  frontCard: boolean\r\n  index?: number\r\n  setIndex?: (index: number) => void\r\n  drag?: boolean | \"x\" | \"y\"\r\n  animationDuration?: number\r\n}\r\n\r\nfunction Card({ \r\n  data, \r\n  saved, \r\n  onSave, \r\n  onFlip, \r\n  isFlipped, \r\n  frontCard, \r\n  index, \r\n  setIndex, \r\n  drag,\r\n  animationDuration = 500 \r\n}: CardProps) {\r\n  const [exitX, setExitX] = useState(0)\r\n\r\n  const x = useMotionValue(0)\r\n  const scale = useTransform(x, [-150, 0, 150], [0.5, 1, 0.5])\r\n  const rotate = useTransform(x, [-150, 0, 150], [-45, 0, 45], {\r\n    clamp: false\r\n  })\r\n\r\n  // Convert milliseconds to seconds for CSS transitions\r\n  const transitionDuration = animationDuration / 1000\r\n\r\n  const variantsFrontCard = {\r\n    animate: { scale: 1, y: 0, opacity: 1 },\r\n    exit: (custom: number) => ({\r\n      x: custom,\r\n      opacity: 0,\r\n      scale: 0.5,\r\n      transition: { duration: 0.2 }\r\n    })\r\n  }\r\n\r\n  const variantsBackCard = {\r\n    initial: { scale: 0, y: 105, opacity: 0 },\r\n    animate: { scale: 0.75, y: 30, opacity: 0.5 }\r\n  }\r\n\r\n  const handleDragEnd = (_: any, info: any) => {\r\n    if (info.offset.x < -100) {\r\n      setExitX(-250)\r\n      if (setIndex && typeof index === \"number\") {\r\n        setIndex(index + 1)\r\n      }\r\n    }\r\n    if (info.offset.x > 100) {\r\n      setExitX(250)\r\n      if (setIndex && typeof index === \"number\") {\r\n        setIndex(index - 1)\r\n      }\r\n    }\r\n  }\r\n\r\n  const handleCardClick = (e: React.MouseEvent) => {\r\n    // Only flip if not dragging and if the click target is not a button\r\n    const target = e.target as HTMLElement\r\n    if (target.closest('button')) {\r\n      // Don't flip if clicking on a button\r\n      return\r\n    }\r\n    \r\n    if (Math.abs(x.get()) < 5 && onFlip) {\r\n      e.preventDefault()\r\n      // Play flip sound when manually flipping card\r\n      playFlipSound()\r\n      onFlip()\r\n    }\r\n  }\r\n\r\n  return (\r\n    <motion.div\r\n      style={{\r\n        width: \"100%\",\r\n        height: 400,\r\n        position: \"absolute\",\r\n        top: 0,\r\n        x,\r\n        rotate,\r\n        cursor: \"grab\",\r\n        pointerEvents: 'auto'\r\n      }}\r\n      whileTap={{ cursor: \"grabbing\" }}\r\n      drag={drag}\r\n      dragConstraints={{ top: 0, right: 0, bottom: 0, left: 0 }}\r\n      onDragEnd={handleDragEnd}\r\n      variants={frontCard ? variantsFrontCard : variantsBackCard}\r\n      initial=\"initial\"\r\n      animate=\"animate\"\r\n      exit=\"exit\"\r\n      custom={exitX}\r\n      transition={\r\n        frontCard\r\n          ? { type: \"spring\", stiffness: 300, damping: 20 }\r\n          : { scale: { duration: 0.2 }, opacity: { duration: 0.4 } }\r\n      }\r\n      onClick={handleCardClick}\r\n    >\r\n      <motion.div\r\n        style={{\r\n          width: \"100%\",\r\n          height: \"100%\",\r\n          scale,\r\n          perspective: \"1000px\"\r\n        }}\r\n      >\r\n        <div\r\n          className={`relative w-full h-full transform-style-preserve-3d ${\r\n            isFlipped ? 'rotate-y-180' : ''\r\n          }`}\r\n          style={{\r\n            transformStyle: 'preserve-3d',\r\n            transform: isFlipped ? 'rotateY(180deg)' : 'rotateY(0deg)',\r\n            transition: `transform ${transitionDuration}s ease-in-out`,\r\n          }}\r\n        >\r\n          {/* Front side */}\r\n          <div\r\n            className={`w-full h-full backface-hidden ${\r\n              isFlipped ? 'opacity-0 pointer-events-none' : 'opacity-100'\r\n            }`}\r\n            style={{\r\n              backfaceVisibility: 'hidden',\r\n              WebkitBackfaceVisibility: 'hidden',\r\n              transition: `opacity ${transitionDuration}s ease-in-out`,\r\n            }}\r\n          >\r\n            <FlashcardFront data={data} saved={saved} onSave={onSave} />\r\n          </div>\r\n\r\n          {/* Back side */}\r\n          <div\r\n            className={`absolute inset-0 w-full h-full backface-hidden ${\r\n              isFlipped ? 'opacity-100' : 'opacity-0 pointer-events-none'\r\n            }`}\r\n            style={{\r\n              backfaceVisibility: 'hidden',\r\n              WebkitBackfaceVisibility: 'hidden',\r\n              transform: 'rotateY(180deg)',\r\n              transition: `opacity ${transitionDuration}s ease-in-out`,\r\n            }}\r\n          >\r\n            <FlashcardBack data={data} saved={saved} onSave={onSave} />\r\n          </div>\r\n        </div>\r\n      </motion.div>\r\n    </motion.div>\r\n  )\r\n}\r\n\r\nexport function FlashcardComponent({ \r\n  data, \r\n  saved, \r\n  onSave, \r\n  onSwipe, \r\n  onFlip,\r\n  isFlipped = false,\r\n  animationDuration = 500\r\n}: FlashcardComponentProps) {\r\n  const [cardIndex, setCardIndex] = useState(0)\r\n  const { settings } = useDisplaySettings()\r\n\r\n  // Update audio manager with current settings\r\n  useEffect(() => {\r\n    if (settings) {\r\n      audioManager.updateSettings(settings)\r\n    }\r\n  }, [settings])\r\n\r\n  const handleIndexChange = (newIndex: number) => {\r\n    const currentIndex = cardIndex\r\n    if (newIndex > currentIndex && onSwipe) {\r\n      onSwipe('left') // Swiped left = next card\r\n    } else if (newIndex < currentIndex && onSwipe) {\r\n      onSwipe('right') // Swiped right = previous card\r\n    }\r\n    setCardIndex(newIndex)\r\n  }\r\n\r\n  return (\r\n    <div className=\"w-full max-w-2xl mx-auto mb-8\">\r\n      <motion.div \r\n        style={{ \r\n          width: \"100%\", \r\n          height: 400, \r\n          position: \"relative\",\r\n          userSelect: 'none',\r\n          WebkitUserSelect: 'none',\r\n          MozUserSelect: 'none',\r\n          msUserSelect: 'none',\r\n          pointerEvents: 'auto'\r\n        }}\r\n      >\r\n        <AnimatePresence initial={false}>\r\n          {/* Background card */}\r\n          <Card\r\n            key={cardIndex + 1}\r\n            data={data}\r\n            saved={saved}\r\n            onSave={onSave}\r\n            onFlip={onFlip}\r\n            isFlipped={isFlipped}\r\n            frontCard={false}\r\n            animationDuration={animationDuration}\r\n          />\r\n          {/* Front card */}\r\n          <Card\r\n            key={cardIndex}\r\n            data={data}\r\n            saved={saved}\r\n            onSave={onSave}\r\n            onFlip={onFlip}\r\n            isFlipped={isFlipped}\r\n            frontCard={true}\r\n            index={cardIndex}\r\n            setIndex={handleIndexChange}\r\n            drag=\"x\"\r\n            animationDuration={animationDuration}\r\n          />\r\n        </AnimatePresence>\r\n      </motion.div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","ignoreList":[2,3,4]}