module.exports=[732860,a=>{"use strict";a.s(["ArrowRight",()=>b],732860);let b=(0,a.i(883706).default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},125138,761355,a=>{"use strict";a.s(["default",()=>f],125138);var b=a.i(187924),c=a.i(572131),d=a.i(571987);let e=()=>{let[a,e]=(0,c.useState)(""),[f,g]=(0,c.useState)(""),h=["/images/loading/banh-mi.webp","/images/loading/cafe.webp","/images/loading/lotus.webp","/images/loading/non-la.webp","/images/loading/pho.webp"],i=["Connecting you to Vietnam...","Bringing you the best of Vietnamese...","Loading your learning experience..."];return((0,c.useEffect)(()=>{let a=Math.floor(Math.random()*h.length);e(h[a]);let b=Math.floor(Math.random()*i.length);g(i[b])},[]),a)?(0,b.jsx)("div",{className:"fixed inset-0 bg-white/80 backdrop-blur-sm z-50 flex flex-col items-center justify-center",children:(0,b.jsxs)("div",{className:"flex flex-col items-center space-y-6",children:[(0,b.jsx)("div",{className:"relative",children:(0,b.jsx)(d.default,{src:a,alt:"Loading",width:120,height:120,className:"animate-sway drop-shadow-lg",priority:!0})}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:f}),(0,b.jsxs)("div",{className:"flex space-x-1 justify-center",children:[(0,b.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce"}),(0,b.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,b.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})]})}):null},f=({children:a,isLoading:c})=>(0,b.jsxs)(b.Fragment,{children:[c&&(0,b.jsx)(e,{}),a]});a.s(["useLoading",()=>g],761355);let g=(a=!1)=>{let[b,d]=(0,c.useState)(a),e=(0,c.useRef)(null),f=(0,c.useCallback)(()=>{d(!0),e.current=setTimeout(()=>{console.warn("Loading timeout reached, forcing stop"),d(!1)},1e4)},[]),g=(0,c.useCallback)(()=>{d(!1),e.current&&(clearTimeout(e.current),e.current=null)},[]),h=(0,c.useCallback)(async a=>{try{return f(),await a()}finally{g()}},[f,g]),i=(0,c.useCallback)(async(a,b=2)=>{let c;for(let d=0;d<=b;d++)try{return 0===d&&f(),await a()}catch(a){if(c=a,console.warn(`Attempt ${d+1} failed:`,a),d===b)throw c;await new Promise(a=>setTimeout(a,1e3*Math.pow(2,d)))}finally{d===b&&g()}throw c},[f,g]);return{isLoading:b,startLoading:f,stopLoading:g,withLoading:h,withLoadingAndRetry:i}}},966395,a=>{"use strict";a.s(["flashcardAPI",()=>f,"getAllFlashcards",()=>g,"getAllTopics",()=>h,"getAllWordTypes",()=>i,"getFlashcardsByCategoryWithPagination",()=>l,"getFlashcardsByTopic",()=>j,"getFlashcardsByTopicWithPagination",()=>k],966395);class b extends Error{status;constructor(a,b){super(b),this.status=a,this.name="APIError"}}async function c(a,c){let d=`https://vietnamesenext.onrender.com/api/v1${a}`;try{let a=await fetch(d,{headers:{"Content-Type":"application/json",...c?.headers},cache:"no-store",...c});if(!a.ok)throw new b(a.status,`API request failed: ${a.statusText}`);return await a.json()}catch(a){if(a instanceof b)throw a;throw new b(0,`Network error: ${a instanceof Error?a.message:"Unknown error"}`)}}function d(a){return{id:a.id,vietnamese:a.vietnamese,english:a.english,type:a.type,is_multiword:a.is_multiword,is_multimeaning:a.is_multimeaning,common_meaning:a.common_meaning,vietnamese_sentence:a.vietnamese_sentence,english_sentence:a.english_sentence,topic:a.topic,is_common:"common"===a.common_class,image_url:a.image_url,audio_url:a.audio_url,pronunciation:a.pronunciation,saved_id:a.saved_id,saved_at:a.saved_at,flashcard_type:a.flashcard_type,tags:a.tags,review_count:a.review_count,last_reviewed:a.last_reviewed,notes:a.notes,is_favorite:a.is_favorite,ipa_pronunciation:a.ipa_pronunciation}}function e(a){return{id:a.id,title:a.title,description:a.description,count:a.count,imageUrl:a.imageUrl||"/placeholder.svg?height=200&width=400"}}let f={getAllFlashcards:async(a=0,b=100)=>(await c(`/flashcards?skip=${a}&limit=${b}`)).map(d),async getRandomFlashcards({count:a=20,commonWordsOnly:b=!1}={}){let e=new URLSearchParams({count:String(a),common_words_only:String(b)});return(await c(`/flashcards/random?${e.toString()}`)).map(d)},searchFlashcards:async(a,b=50)=>(await c(`/flashcards/search?q=${encodeURIComponent(a)}&limit=${b}`)).map(d),async getAllTopics(a){let b=a?`/flashcards/topics?complexity=${encodeURIComponent(a)}`:"/flashcards/topics";return(await c(b)).map(e)},async getFlashcardsByTopic(a,b,e=0,f=20){let g=(await this.getAllTopics()).find(b=>b.id===a);if(!g)return console.warn(`Topic not found for ID: ${a}`),{flashcards:[],total:0,hasMore:!1};let h=new URLSearchParams({skip:e.toString(),limit:f.toString()});b&&h.append("complexity",b);let i=`/flashcards/by-topic/${encodeURIComponent(g.title)}?${h.toString()}`,j=await c(i);return{flashcards:j.flashcards.map(d),total:j.total,hasMore:j.has_more}},async getFlashcardsByTopicLegacy(a,b){return(await this.getFlashcardsByTopic(a,b,0,1e3)).flashcards},async getFlashcardsByType(a,b){let e=b?`/flashcards/by-type/${encodeURIComponent(a)}?complexity=${encodeURIComponent(b)}`:`/flashcards/by-type/${encodeURIComponent(a)}`;return(await c(e)).map(d)},async getMultiwordFlashcards(a){let b=a?`/flashcards/multiword?complexity=${encodeURIComponent(a)}`:"/flashcards/multiword";return(await c(b)).map(d)},async getMultimeaningFlashcards(a){let b=a?`/flashcards/multimeaning?complexity=${encodeURIComponent(a)}`:"/flashcards/multimeaning";return(await c(b)).map(d)},getFlashcardsByComplexity:async(a,b=0,e=100)=>(await c(`/flashcards/by-complexity/${encodeURIComponent(a)}?skip=${b}&limit=${e}`)).map(d),getComplexityCounts:async()=>await c("/flashcards/complexity-counts"),getFlashcardById:async a=>d(await c(`/flashcards/${a}`)),getFlashcardAudio:async a=>await c(`/flashcards/${a}/audio`),healthCheck:async()=>await c("/flashcards/health"),async getAllWordTypes(a){let b=a?`/flashcards/word-types?complexity=${encodeURIComponent(a)}`:"/flashcards/word-types";return await c(b)},async getOthersCounts(a){let b=a?`/flashcards/others-counts?complexity=${encodeURIComponent(a)}`:"/flashcards/others-counts";return await c(b)},async getFlashcardsByTypeWithPagination(a,b,e=0,f=20){let g=new URLSearchParams({skip:e.toString(),limit:f.toString()});b&&g.append("complexity",b);let h=await c(`/flashcards/by-type/${encodeURIComponent(a)}?${g}`);return{flashcards:h.flashcards.map(d),total:h.total,hasMore:h.has_more}},async getMultiwordFlashcardsWithPagination(a,b=0,e=20){let f=new URLSearchParams({skip:b.toString(),limit:e.toString()});a&&f.append("complexity",a);let g=await c(`/flashcards/multiword?${f}`);return{flashcards:g.flashcards.map(d),total:g.total,hasMore:g.has_more}},async getMultimeaningFlashcardsWithPagination(a,b=0,e=20){let f=new URLSearchParams({skip:b.toString(),limit:e.toString()});a&&f.append("complexity",a);let g=await c(`/flashcards/multimeaning?${f}`);return{flashcards:g.flashcards.map(d),total:g.total,hasMore:g.has_more}},async getSavedFlashcards(a){let b=await c(`/flashcards/saved/${a}`);return{flashcards:b.flashcards.map(d),total:b.total}},getSavedFlashcardsCount:async a=>await c(`/flashcards/saved/${a}/count`),getFlashcardsByIds:async a=>(await c("/flashcards/by-ids",{method:"POST",body:JSON.stringify(a)})).map(d)};async function g(){return f.getAllFlashcards()}async function h(){return f.getAllTopics()}async function i(){return f.getAllWordTypes()}async function j(a,b){let c=["multi-meaning","multi-word"];try{let d=await f.getAllWordTypes();if(d.map(a=>a.id).includes(a.toLowerCase())){let c=d.find(b=>b.id===a.toLowerCase());if(c)return{flashcards:await f.getFlashcardsByType(c.name,b),title:c.title}}if(c.includes(a.toLowerCase())){let c,d;return"multi-meaning"===a.toLowerCase()?(c=await f.getMultimeaningFlashcards(b),d="Multi-meaning Words"):"multi-word"===a.toLowerCase()?(c=await f.getMultiwordFlashcards(b),d="Multi-word Expressions"):(c=[],d=a),{flashcards:c,title:d}}}catch(c){if(console.error("Error loading word types:",c),["verb","noun","adj","adv","prep","conj","intj","pron","num","det","part"].includes(a.toLowerCase())){let c=a.toUpperCase();return{flashcards:await f.getFlashcardsByType(c,b),title:({VERB:"Verbs",NOUN:"Nouns",ADJ:"Adjectives",ADV:"Adverbs",PREP:"Prepositions",CONJ:"Conjunctions",INTJ:"Interjections",PRON:"Pronouns",NUM:"Numbers",DET:"Determiners",PART:"Particles"})[c]||c}}}if(c.includes(a.toLowerCase())){let c,d;return"multi-meaning"===a.toLowerCase()?(c=await f.getMultimeaningFlashcards(b),d="Multi-meaning Words"):"multi-word"===a.toLowerCase()?(c=await f.getMultiwordFlashcards(b),d="Multi-word Expressions"):(c=[],d=a),{flashcards:c,title:d}}let d=await f.getFlashcardsByTopicLegacy(a,b),e=(await f.getAllTopics()).find(b=>b.id===a);return{flashcards:d,title:e?.title||`Topic: ${a}`}}async function k(a,b,c=0,d=20){try{let e=await f.getFlashcardsByTopic(a,b,c,d),g=(await f.getAllTopics()).find(b=>b.id===a);return{flashcards:e.flashcards,title:g?.title||`Topic: ${a}`,total:e.total,hasMore:e.hasMore}}catch(a){throw console.error("Error fetching flashcards by topic with pagination:",a),a}}async function l(a,b,c=0,d=20){try{try{let e=await f.getAllWordTypes();if(e.map(a=>a.id).includes(a.toLowerCase())){let g=e.find(b=>b.id===a.toLowerCase());if(g){let a=await f.getFlashcardsByTypeWithPagination(g.name,b,c,d);return{flashcards:a.flashcards,title:g.title,total:a.total,hasMore:a.hasMore}}}}catch(e){if(console.error("Error loading word types, falling back to hardcoded list:",e),["verb","noun","adj","adv","prep","conj","intj","pron","num","det","part"].includes(a.toLowerCase())){let e=a.toUpperCase(),g=await f.getFlashcardsByTypeWithPagination(e,b,c,d);return{flashcards:g.flashcards,title:({VERB:"Verbs",NOUN:"Nouns",ADJ:"Adjectives",ADV:"Adverbs",PREP:"Prepositions",CONJ:"Conjunctions",INTJ:"Interjections",PRON:"Pronouns",NUM:"Numbers",DET:"Determiners",PART:"Particles"})[e]||e,total:g.total,hasMore:g.hasMore}}}if(["multi-meaning","multi-word"].includes(a.toLowerCase())){let e,g;return"multi-meaning"===a.toLowerCase()?(e=await f.getMultimeaningFlashcardsWithPagination(b,c,d),g="Multi-meaning Words"):"multi-word"===a.toLowerCase()?(e=await f.getMultiwordFlashcardsWithPagination(b,c,d),g="Multi-word Expressions"):(e={flashcards:[],total:0,hasMore:!1},g=a),{flashcards:e.flashcards,title:g,total:e.total,hasMore:e.hasMore}}let e=await f.getFlashcardsByTopic(a,b,c,d),g=(await f.getAllTopics()).find(b=>b.id===a);return{flashcards:e.flashcards,title:g?.title||`Topic: ${a}`,total:e.total,hasMore:e.hasMore}}catch(a){throw console.error("Error fetching flashcards by category with pagination:",a),a}}},45889,a=>{"use strict";a.s(["default",()=>o]);var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(214549),f=a.i(400210),g=a.i(732860),h=a.i(787654),i=a.i(966395),j=a.i(367919),k=a.i(817249),l=a.i(829469),m=a.i(125138),n=a.i(761355);function o(){let{isLoading:a,withLoading:o}=(0,n.useLoading)(),p=(0,d.useParams)(),q=(0,d.useSearchParams)(),r=p.topicID,s=q.get("complexity"),[t,u]=(0,c.useState)([]),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)(null),[z,A]=(0,c.useState)(0),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)(!0),[F,G]=(0,c.useState)(0),[H,I]=(0,c.useState)(!1),{isFlashcardSaved:J,toggleSave:K}=(0,l.useSavedFlashcards)();(0,c.useEffect)(()=>{!async function(){if(!r){console.warn("No topicId provided in route params"),y("Invalid topic ID");return}await o(async()=>{try{y(null);let a=await (0,i.getFlashcardsByCategoryWithPagination)(r,s||void 0,0,20);u(a.flashcards),w(a.title),G(a.total),E(a.hasMore),0===a.flashcards.length&&0===a.total&&console.warn(`No flashcards found for topic: ${r} with complexity: ${s||"all"}`)}catch(a){console.error("Failed to load flashcards:",a),y(a instanceof Error?a.message:"Failed to load flashcards. Please try again.")}})}()},[r,s,o]);let L=(0,c.useCallback)(async()=>{if(r&&!H&&D){I(!0);try{let a=await (0,i.getFlashcardsByCategoryWithPagination)(r,s||void 0,t.length,20);u(b=>[...b,...a.flashcards]),E(a.hasMore)}catch(a){console.error("Failed to load more flashcards:",a)}finally{I(!1)}}},[r,s,t.length,H,D]);(0,c.useEffect)(()=>{C(!1)},[z]);let M=a=>{K(a,v)},N=(0,c.useCallback)(()=>{A(a=>(a+1)%t.length)},[t.length]),O=(0,c.useCallback)(()=>{A(a=>0===a?t.length-1:a-1)},[t.length]),P=(0,c.useCallback)(()=>{C(a=>!a)},[]);if((0,c.useEffect)(()=>{let a=a=>{switch(["Space","ArrowLeft","ArrowRight"].includes(a.code)&&a.preventDefault(),a.code){case"Space":P();break;case"ArrowLeft":O();break;case"ArrowRight":N()}};return window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)}},[P,O,N]),x)return(0,b.jsx)(m.default,{isLoading:a,children:(0,b.jsxs)("div",{className:"container mx-auto py-10 px-4 text-center",children:[(0,b.jsx)("div",{className:"text-red-600 mb-4",children:x}),(0,b.jsx)(e.Button,{onClick:()=>window.location.reload(),children:"Try Again"})]})});if(0===t.length)return(0,b.jsx)(m.default,{isLoading:a,children:(0,b.jsxs)("div",{className:"container mx-auto py-10 px-4 text-center",children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold mb-6",children:[v||"Topic"," Flashcards"]}),(0,b.jsx)("p",{className:"text-gray-600 mb-8",children:"No flashcards found for this topic."})]})});let Q=t[z];return(0,b.jsx)(m.default,{isLoading:a,children:(0,b.jsxs)("div",{className:"container mx-auto py-10 px-4",tabIndex:0,children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold mb-6 text-center",children:[v," Flashcards"]}),(0,b.jsxs)("div",{className:"text-center text-gray-600 mb-10",children:[(0,b.jsxs)("p",{className:"mb-2",children:[F," flashcards available"]}),(0,b.jsxs)("div",{className:"text-sm space-y-1",children:[(0,b.jsxs)("p",{children:["ðŸ’¡ ",(0,b.jsx)("strong",{children:"Tap"})," to flip â€¢ ",(0,b.jsx)("strong",{children:"Swipe left/right"})," to navigate"]}),(0,b.jsxs)("p",{children:["âŒ¨ï¸ ",(0,b.jsx)("strong",{children:"Spacebar"}),": flip â€¢ ",(0,b.jsx)("strong",{children:"â† â†’"}),": navigate"]})]})]}),Q&&(0,b.jsxs)("div",{className:"mb-16 relative z-10",children:[(0,b.jsx)("div",{className:"max-w-2xl mx-auto mb-8",children:(0,b.jsx)(k.FlashcardComponent,{data:Q,saved:J(Q.id),onSave:M,onSwipe:a=>{"left"===a?N():O()},onFlip:P,isFlipped:B})}),(0,b.jsxs)("div",{className:"flex items-center justify-center gap-4 mb-6",children:[(0,b.jsxs)(e.Button,{variant:"outline",onClick:O,className:"flex items-center gap-2",title:"Previous card (â† key)",children:[(0,b.jsx)(f.ArrowLeft,{className:"h-4 w-4"})," Previous"]}),(0,b.jsxs)(e.Button,{variant:"default",onClick:P,className:"px-6 flex items-center gap-2",title:"Flip card (Spacebar)",children:[(0,b.jsx)(h.RotateCcw,{className:"h-4 w-4"}),B?"Show Front":"Show Back"]}),(0,b.jsxs)(e.Button,{variant:"outline",onClick:N,className:"flex items-center gap-2",title:"Next card (â†’ key)",children:["Next ",(0,b.jsx)(g.ArrowRight,{className:"h-4 w-4"})]})]}),(0,b.jsx)("div",{className:"text-center mb-8",children:(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:["Card ",z+1," of ",t.length]})})]}),(0,b.jsx)("div",{className:"relative z-0",children:(0,b.jsx)(j.FlashcardDeck,{cards:t,currentIndex:z,savedCards:new Set(t.filter(a=>J(a.id)).map(a=>a.id)),onCardSelect:a=>{if("number"==typeof a)A(a);else{let b=t.findIndex(b=>b.id===a);-1!==b&&A(b)}},onSave:M,hasMore:D,isLoading:H,onLoadMore:L,total:F})})]})})}}];

//# sourceMappingURL=_78a81727._.js.map