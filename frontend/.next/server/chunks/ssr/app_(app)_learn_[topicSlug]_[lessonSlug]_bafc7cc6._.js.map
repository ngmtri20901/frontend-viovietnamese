{"version":3,"sources":["turbopack:///[project]/app/(app)/learn/[topicSlug]/[lessonSlug]/StartExerciseButton.tsx/__nextjs-internal-proxy.mjs","turbopack:///[project]/app/(app)/learn/[topicSlug]/[lessonSlug]/page.tsx","turbopack:///[project]/node_modules/lucide-react/src/icons/play.ts","turbopack:///[project]/node_modules/lucide-react/src/icons/clock.ts","turbopack:///[project]/node_modules/lucide-react/src/icons/award.ts"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const StartExerciseButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call StartExerciseButton() from the server but StartExerciseButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/(app)/learn/[topicSlug]/[lessonSlug]/StartExerciseButton.tsx\",\n    \"StartExerciseButton\",\n);\n","// app/(dashboard)/learn/[topicSlug]/[lessonSlug]/page.tsx\r\nimport Link from \"next/link\";\r\nimport { createClient } from \"@/shared/lib/supabase/server\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/shared/components/ui/card\";\r\nimport { Button } from \"@/shared/components/ui/button\";\r\nimport { Clock, Award, BookOpen, Play, Lightbulb, Check } from \"lucide-react\";\r\nimport { DialoguePlayer } from \"@/features/learn/components/lesson\";\r\nimport StorybookPopup from \"@/features/learn/components/lesson/StorybookPopup\";\r\nimport GrammarCarousel from \"@/features/learn/components/lesson/GrammarCarousel\";\r\nimport ExampleSentences from \"@/features/learn/components/lesson/ExampleSentences\";\r\nimport KeyVocabulary from \"@/features/learn/components/lesson/KeyVocabulary\";\r\nimport { notFound } from \"next/navigation\";\r\nimport { StartExerciseButton } from \"./StartExerciseButton\";\r\nimport { generateVocabKey } from \"@/features/flashcards/utils/vocab-key\"; \r\n\r\n\r\n\r\nexport const revalidate = 1; // ISR 60 days\r\n\r\n// NOTE: Removed 'reading' and added 'storybook'\r\ntype Material = {\r\n  id: string;\r\n  side: \"main\" | \"sidebar\";\r\n  type:\r\n    | \"video\"\r\n    | \"image\"\r\n    | \"dialogue\"\r\n    | \"storybook\"\r\n    | \"vocabulary\"\r\n    | \"grammar\"\r\n    | \"examples\"\r\n    | \"notes\";\r\n  title: string | null;\r\n  explanation: string | null | any; // Can be string or object\r\n  data: any;\r\n  media_url: string | null;\r\n  order_index: number;\r\n};\r\n\r\nconst BUCKET = \"lesson-materials\";\r\n\r\n// Fisher-Yates shuffle to randomize example sentences (server-side so order varies per render)\r\nfunction shuffleExamples<T>(arr: T[]): T[] {\r\n  const a = [...arr];\r\n  for (let i = a.length - 1; i > 0; i--) {\r\n    const j = Math.floor(Math.random() * (i + 1));\r\n    [a[i], a[j]] = [a[j], a[i]];\r\n  }\r\n  return a;\r\n}\r\n\r\n// ===== helper =====\r\nfunction escapeRegex(s: string) {\r\n  return s.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\r\n}\r\nfunction highlightText(text: string, words?: string[]) {\r\n  if (!text || !words || words.length === 0) return text;\r\n  const tokens = words.filter(Boolean);\r\n  if (tokens.length === 0) return text;\r\n  const pattern = tokens.map(escapeRegex).join(\"|\");\r\n  const re = new RegExp(`(${pattern})`, \"gi\");\r\n  const parts = text.split(re);\r\n  return parts.map((part, i) =>\r\n    i % 2 === 1 ? (\r\n      <mark key={i} className=\"bg-yellow-200/70 rounded px-0.5\">{part}</mark>\r\n    ) : (\r\n      <span key={i}>{part}</span>\r\n    )\r\n  );\r\n}\r\n\r\nfunction isBlockedByGemini(url?: string | null) {\r\n  if (!url) return false;\r\n  try {\r\n    const u = new URL(url);\r\n    const host = u.hostname.toLowerCase();\r\n    return host === \"gemini.google.com\" || host === \"g.co\" || host.endsWith(\".google.com\");\r\n  } catch {\r\n    return false;\r\n  }\r\n}\r\n\r\n// Helper to normalize explanation (parse if string, return as-is if object)\r\nfunction normalizeExplanation(explanation: any): any {\r\n  if (!explanation) return null;\r\n  \r\n  if (typeof explanation === 'string') {\r\n    try {\r\n      return JSON.parse(explanation);\r\n    } catch {\r\n      return explanation;\r\n    }\r\n  }\r\n  \r\n  if (typeof explanation === 'object') {\r\n    return explanation;\r\n  }\r\n  \r\n  return null;\r\n}\r\n\r\n// Helper to safely render explanation (can be string or object)\r\nfunction renderExplanation(explanation: any) {\r\n  if (!explanation) return null;\r\n  \r\n  if (typeof explanation === 'string') {\r\n    return explanation;\r\n  }\r\n  \r\n  if (typeof explanation === 'object') {\r\n    // Handle structured explanation object\r\n    const parts = [];\r\n    if (explanation.summary) parts.push(explanation.summary);\r\n    if (explanation.grammar_focus) parts.push(`Grammar Focus: ${explanation.grammar_focus}`);\r\n    return parts.join('\\n\\n');\r\n  }\r\n  \r\n  return null;\r\n}\r\n\r\nexport default async function LessonPage({\r\n  params,\r\n}: {\r\n  params: Promise<{ topicSlug: string; lessonSlug: string }>;\r\n}) {\r\n  const { topicSlug, lessonSlug } = await params;\r\n  const supabase = await createClient();\r\n\r\n  // Get current user\r\n  const { data: { user } } = await supabase.auth.getUser();\r\n\r\n  // Topic\r\n  const { data: topic } = await (supabase as any)\r\n    .from(\"topics\")\r\n    .select(\"topic_id, english_title, slug\")\r\n    .eq(\"slug\", topicSlug)\r\n    .single();\r\n  if (!topic) {\r\n    return (\r\n      <div className=\"min-h-screen grid place-items-center\">\r\n        <div className=\"text-center\">\r\n          <h1 className=\"text-xl font-semibold mb-4\">Topic not found</h1>\r\n          <Link href=\"/learn\"><Button>Back to Learn</Button></Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Lesson\r\n  const { data: lesson } = await (supabase as any)\r\n    .from(\"lessons\")\r\n    .select(\"id, lesson_name, slug, status, duration_minutes, coins_reward\")\r\n    .eq(\"topic_id\", topic.topic_id)\r\n    .eq(\"slug\", lessonSlug)\r\n    .eq(\"status\", \"published\")\r\n    .single();\r\n  if (!lesson) {\r\n    notFound();\r\n  }\r\n\r\n  // Check if user has passed this lesson\r\n  let lessonPassed = false;\r\n  if (user) {\r\n    const { data: progressData } = await supabase\r\n      .from(\"user_lesson_progress\")\r\n      .select(\"status\")\r\n      .eq(\"user_id\", user.id)\r\n      .eq(\"lesson_id\", lesson.id)\r\n      .maybeSingle();\r\n\r\n    lessonPassed = progressData?.status === \"passed\";\r\n  }\r\n\r\n  // Get active practice set for this lesson\r\n  const { data: practiceSet } = await (supabase as any)\r\n    .from(\"practice_sets\")\r\n    .select(\"id\")\r\n    .eq(\"lesson_id\", lesson.id)\r\n    .eq(\"is_active\", true)\r\n    .eq(\"status\", \"ACTIVE\")\r\n    .order(\"sequence_order\", { ascending: true })\r\n    .limit(1)\r\n    .maybeSingle();\r\n\r\n  // Materials\r\n  const { data: materials } = await (supabase as any)\r\n    .from(\"lesson_materials\")\r\n    .select(\"id, side, type, title, explanation, data, media_url, order_index\")\r\n    .eq(\"lesson_id\", lesson.id)\r\n    .order(\"side\", { ascending: true })\r\n    .order(\"order_index\", { ascending: true });\r\n\r\n  const list = (materials ?? []) as Material[];\r\n  const mains = list\r\n    .filter((m) => m.side === \"main\")\r\n    .sort((a, b) => a.order_index - b.order_index);\r\n  const sidebars = list\r\n    .filter((m) => m.side === \"sidebar\")\r\n    .sort((a, b) => a.order_index - b.order_index);\r\n\r\n  const publicUrl = (path?: string | null) => {\r\n    if (!path) return null;\r\n    return supabase.storage.from(BUCKET).getPublicUrl(path).data.publicUrl ?? null;\r\n  };\r\n\r\n  const resolveMediaUrl = (m?: Material | null) => {\r\n    if (!m?.media_url) return null;\r\n    if (/^https?:\\/\\//i.test(m.media_url)) return m.media_url; // external\r\n    return publicUrl(m.media_url); // storage path -> public URL\r\n  };\r\n\r\n  // Chọn main ưu tiên: storybook > dialogue > image > video\r\n  const mainBlockRaw =\r\n    mains.find((m) => m.type === \"storybook\") ??\r\n    mains.find((m) => m.type === \"dialogue\") ??\r\n    mains.find((m) => m.type === \"image\") ??\r\n    mains.find((m) => m.type === \"video\") ??\r\n    null;\r\n\r\n  // Normalize explanation for mainBlock\r\n  const mainBlock = mainBlockRaw ? {\r\n    ...mainBlockRaw,\r\n    explanation: normalizeExplanation(mainBlockRaw.explanation)\r\n  } : null;\r\n\r\n  // Chuẩn bị media + highlight\r\n  let mainMediaUrl: string | null = resolveMediaUrl(mainBlock);\r\n  let dialogueLines: any[] = [];\r\n  const highlightWords: string[] =\r\n    (Array.isArray(mainBlock?.data?.hightlight_words)\r\n      ? (mainBlock!.data.hightlight_words as string[])\r\n      : undefined) ??\r\n    (Array.isArray(mainBlock?.data?.highlight_words)\r\n      ? (mainBlock!.data.highlight_words as string[])\r\n      : undefined) ??\r\n    [];\r\n\r\n  if (mainBlock?.type === \"dialogue\" && Array.isArray(mainBlock.data?.lines)) {\r\n    dialogueLines = mainBlock.data.lines.map((ln: any) => ({\r\n      ...ln,\r\n      audioUrl: ln.audio ? publicUrl(ln.audio) : null,\r\n      _hl: Array.isArray(ln.highlight_words) ? ln.highlight_words : highlightWords,\r\n    }));\r\n  }\r\n\r\n\r\n  // Chuẩn bị sidebar\r\n  const sidebarPrepared = sidebars.map((m) => {\r\n    if (m.type === \"grammar\" && m.media_url) {\r\n      return { ...m, mediaResolved: publicUrl(m.media_url) };\r\n    }\r\n    if (m.type === \"examples\" && Array.isArray(m.data?.pairs)) {\r\n      return {\r\n        ...m,\r\n        pairsResolved: m.data.pairs.map((p: any) => ({\r\n          ...p,\r\n          audioUrl: p.audio ? publicUrl(p.audio) : null,\r\n        })),\r\n      };\r\n    }\r\n    return m;\r\n  });\r\n\r\n  // Xác định có bị chặn nhúng (Gemini) hay không\r\n  const storyIsBlocked = mainBlock?.type === \"storybook\" && isBlockedByGemini(mainMediaUrl ?? undefined);\r\n\r\n  // Step 1: Quick check if user has ANY saved vocab for this lesson\r\n  let savedVocabKeys: Set<string> = new Set();\r\n  if (user) {\r\n    const { data: savedCheck } = await (supabase as any)\r\n      .from('saved_flashcards')\r\n      .select('flashcard_id')\r\n      .eq('UserID', user.id)\r\n      .eq('topic_id', topic.topic_id)\r\n      .eq('lesson_id', lesson.id)\r\n      .eq('flashcard_type', 'CUSTOM');\r\n    \r\n    if (savedCheck && savedCheck.length > 0) {\r\n      savedVocabKeys = new Set(savedCheck.map((s: any) => s.flashcard_id));\r\n    }\r\n  }\r\n\r\n  // Step 2: Process vocabulary materials with saved state\r\n  const vocabularyMaterials = sidebars\r\n    .filter((m) => m.type === \"vocabulary\")\r\n    .flatMap((m: any) => {\r\n      if (!Array.isArray(m.data?.items)) return [];\r\n      \r\n      return m.data.items.map((item: any) => {\r\n        const vocabKey = generateVocabKey(topic.topic_id, lesson.id, item.vi);\r\n        const isSaved = savedVocabKeys.has(vocabKey);\r\n        \r\n        return {\r\n          vi: item.vi,\r\n          en: item.en,\r\n          ipa: item.ipa,\r\n          audio: item.audio,\r\n          pos: item.pos,\r\n          vocabKey,\r\n          isSaved\r\n        };\r\n      });\r\n    });\r\n\r\n  return (\r\n    <div className=\"max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-8\">\r\n        {/* LEFT: MAIN (2 cols) */}\r\n        <section className=\"md:col-span-2 space-y-6\">\r\n          {/* Main Content Card */}\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle className=\"flex items-center justify-between\">\r\n                <span>{mainBlock?.title ?? \"Lesson Content\"}</span>\r\n                <span className=\"text-sm font-normal text-gray-500\">\r\n                  {mainBlock?.type?.toUpperCase()}\r\n                </span>\r\n              </CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-4\">\r\n              {!mainBlock && <p className=\"text-gray-600\">No main content yet.</p>}\r\n\r\n              {/* STORYBOOK */}\r\n              {mainBlock?.type === \"storybook\" && mainMediaUrl && (\r\n                <div className=\"space-y-3\">\r\n                  {storyIsBlocked ? (\r\n                    <div className=\"rounded-lg border p-4 bg-card space-y-3\">\r\n                      <p className=\"text-sm text-gray-700\">\r\n                      This storybook is hosted on a site that doesn’t allow direct embedding. Please open it in a new window to view the full experience.\r\n                      </p>\r\n                      <StorybookPopup url={mainMediaUrl} />\r\n                      <p className=\"text-xs text-gray-500\"> Alternatively, you can open it in a new tab.\r\n                      </p>\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"rounded-lg overflow-hidden border\">\r\n                      <iframe\r\n                        src={mainMediaUrl}\r\n                        className=\"w-full h-[75vh]\"\r\n                        allow=\"clipboard-read; clipboard-write\"\r\n                        referrerPolicy=\"no-referrer\"\r\n                        loading=\"lazy\"\r\n                        title={mainBlock.title ?? \"Storybook\"}\r\n                      />\r\n                    </div>\r\n                  )}\r\n\r\n                  <p className=\"text-sm text-gray-600\">\r\n                    You can{\" \"}\r\n                    <a\r\n                      href={mainMediaUrl}\r\n                      target=\"_blank\"\r\n                      rel=\"noopener noreferrer\"\r\n                      className=\"text-[#067BC2] underline\"\r\n                    >\r\n                      open it in a new tab\r\n                    </a>\r\n                    .\r\n                  </p>\r\n\r\n                        {(mainBlock.explanation?.summary || mainBlock.explanation?.grammar_focus || mainBlock.explanation?.notes) && (\r\n                          <div className=\"mt-6 rounded-lg border border-sky-200 bg-sky-50 p-4\">\r\n                            {/* Phần Header với Icon */}\r\n                            <div className=\"flex items-center gap-3\">\r\n                              <div className=\"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-sky-200\">\r\n                                <Lightbulb className=\"h-5 w-5 text-sky-700\" />\r\n                              </div>\r\n                              <h4 className=\"text-lg font-bold text-sky-800\">Explanation</h4>\r\n                            </div>\r\n\r\n                            {/* Phần nội dung được chia tách */}\r\n                            <div className=\"mt-3 space-y-4 text-sm\">\r\n                              {/* Hiển thị phần Summary */}\r\n                              {mainBlock.explanation.summary && (\r\n                                <div>\r\n                                  <p className=\"mt-1 text-slate-700\">{mainBlock.explanation.summary}</p>\r\n                                </div>\r\n                              )}\r\n\r\n                              {/* Hiển thị phần Grammar Focus (dưới dạng danh sách) */}\r\n                              {Array.isArray(mainBlock.explanation.grammar_focus) && mainBlock.explanation.grammar_focus.length > 0 && (\r\n                                <div>\r\n                                  <h5 className=\"font-semibold text-slate-800\">Grammar Focus</h5>\r\n                                  <ul className=\"mt-2 space-y-2\">\r\n                                    {mainBlock.explanation.grammar_focus.map((point: string, index: number) => (\r\n                                      <li key={index} className=\"flex items-start gap-2\">\r\n                                        <Check className=\"h-4 w-4 mt-1 shrink-0 text-violet-500\" />\r\n                                        <span className=\"text-slate-700\">{point}</span>\r\n                                      </li>\r\n                                    ))}\r\n                                  </ul>\r\n                                </div>\r\n                              )}\r\n\r\n                              {/* Hiển thị phần Cultural Notes */}\r\n                              {Array.isArray(mainBlock.explanation.notes) && mainBlock.explanation.notes.length > 0 && (\r\n                                <div>\r\n                                  <h5 className=\"font-semibold text-slate-800\">Notes</h5>\r\n                                  <ul className=\"mt-2 space-y-2\">\r\n                                    {mainBlock.explanation.notes.map((note: string, index: number) => (\r\n                                      <li key={index} className=\"flex items-start gap-2\">\r\n                                        <Check className=\"h-4 w-4 mt-1 shrink-0 text-amber-500\" />\r\n                                        <span className=\"text-slate-700\">{note}</span>\r\n                                      </li>\r\n                                    ))}\r\n                                  </ul>\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                        )}\r\n                </div>\r\n              )}\r\n\r\n              {/* DIALOGUE (sprite) */}\r\n              {mainBlock?.type === \"dialogue\" && (\r\n                <div className=\"space-y-4\">\r\n                  {(() => {\r\n                    const spritePath = (mainBlock.data?.sprite?.src as string | undefined) ?? undefined;\r\n                    const spriteUrl = spritePath ? publicUrl(spritePath) : mainMediaUrl;\r\n\r\n                    const linesRaw = Array.isArray(mainBlock.data?.lines) ? mainBlock.data.lines : [];\r\n                    const lines = linesRaw.map((ln: any) => ({\r\n                      speaker: ln.speaker,\r\n                      vi: ln.vi,\r\n                      en: ln.en,\r\n                      start: Number(ln.start ?? 0),\r\n                      end: Number(ln.end ?? 0),\r\n                      highlight_words: Array.isArray(ln.highlight_words) ? ln.highlight_words : undefined,\r\n                      audioUrl: ln.audio ? publicUrl(ln.audio) : null,\r\n                    }));\r\n                    const hl = Array.isArray(mainBlock.data?.highlight_words) ? mainBlock.data.highlight_words : [];\r\n\r\n                    return (\r\n                      <>\r\n                        {mainBlock.data?.scene && (\r\n                          <h3 className=\"text-lg font-semibold\">{mainBlock.data.scene}</h3>\r\n                        )}\r\n\r\n                        {/* Use client DialoguePlayer for all dialogue rendering. DialoguePlayer supports sprite playback and per-line audio. */}\r\n                        <DialoguePlayer title={undefined} spriteUrl={spriteUrl || undefined} lines={lines} defaultHighlight={hl} />\r\n\r\n                        {/* Kiểm tra xem mainBlock.explanation có dữ liệu hay không */}\r\n                        {mainBlock?.explanation && (mainBlock.explanation.summary || mainBlock.explanation.grammar_focus || mainBlock.explanation.notes) && (\r\n                          <div className=\"mt-6 rounded-lg border border-sky-200 bg-sky-50 p-4\">\r\n                            {/* Phần Header với Icon */}\r\n                            <div className=\"flex items-center gap-3\">\r\n                              <div className=\"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-sky-200\">\r\n                                <Lightbulb className=\"h-5 w-5 text-sky-700\" />\r\n                              </div>\r\n                              <h4 className=\"text-lg font-bold text-sky-800\">Explanation</h4>\r\n                            </div>\r\n\r\n                            {/* Phần nội dung được chia tách */}\r\n                            <div className=\"mt-3 space-y-4 text-sm\">\r\n                              {/* Hiển thị phần Summary */}\r\n                              {mainBlock.explanation?.summary && (\r\n                                <div>\r\n                                  <p className=\"mt-1 text-slate-700\">{mainBlock.explanation.summary}</p>\r\n                                </div>\r\n                              )}\r\n\r\n                              {/* Hiển thị phần Grammar Focus (dưới dạng danh sách) */}\r\n                              {Array.isArray(mainBlock.explanation?.grammar_focus) && mainBlock.explanation.grammar_focus.length > 0 && (\r\n                                <div>\r\n                                  <h5 className=\"font-semibold text-slate-800\">Grammar Focus</h5>\r\n                                  <ul className=\"mt-2 space-y-2\">\r\n                                    {mainBlock.explanation.grammar_focus.map((point: string, index: number) => (\r\n                                      <li key={index} className=\"flex items-start gap-2\">\r\n                                        <Check className=\"h-4 w-4 mt-1 shrink-0 text-violet-500\" />\r\n                                        <span className=\"text-slate-700\">{point}</span>\r\n                                      </li>\r\n                                    ))}\r\n                                  </ul>\r\n                                </div>\r\n                              )}\r\n\r\n                              {/* Hiển thị phần Notes */}\r\n                              {Array.isArray(mainBlock.explanation?.notes) && mainBlock.explanation.notes.length > 0 && (\r\n                                <div>\r\n                                  <h5 className=\"font-semibold text-slate-800\">Notes</h5>\r\n                                  <ul className=\"mt-2 space-y-2\">\r\n                                    {mainBlock.explanation.notes.map((note: string, index: number) => (\r\n                                      <li key={index} className=\"flex items-start gap-2\">\r\n                                        <Check className=\"h-4 w-4 mt-1 shrink-0 text-amber-500\" />\r\n                                        <span className=\"text-slate-700\">{note}</span>\r\n                                      </li>\r\n                                    ))}\r\n                                  </ul>\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                        )}\r\n                      </>\r\n                    );\r\n                  })()}\r\n                </div>\r\n              )}\r\n\r\n              {/* IMAGE */}\r\n              {mainBlock?.type === \"image\" && mainMediaUrl && (\r\n                <div className=\"space-y-4\">\r\n                  {/* eslint-disable-next-line @next/next/no-img-element */}\r\n                  <img\r\n                    src={mainMediaUrl}\r\n                    alt={mainBlock.title ?? \"Image\"}\r\n                    className=\"w-full h-auto rounded border\"\r\n                  />\r\n                  {(() => {\r\n                    const explanationText = renderExplanation(mainBlock.explanation);\r\n                    return explanationText && (\r\n                      <div className=\"rounded-lg bg-blue-50 p-4\">\r\n                        <h4 className=\"font-semibold mb-2\">Explanation</h4>\r\n                        <p className=\"text-gray-700 whitespace-pre-line\">{explanationText}</p>\r\n                      </div>\r\n                    );\r\n                  })()}\r\n                </div>\r\n              )}\r\n\r\n              {/* VIDEO */}\r\n              {mainBlock?.type === \"video\" && mainMediaUrl && (\r\n                <div className=\"space-y-4\">\r\n                  <video className=\"w-full rounded-lg border\" controls preload=\"metadata\" src={mainMediaUrl} />\r\n                </div>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* Practice Exercise Card */}\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle className=\"flex items-center gap-2\">\r\n                <Play className=\"h-5 w-5 text-[#067BC2]\" />\r\n                Practice Exercise\r\n              </CardTitle>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <div className=\"space-y-4\">\r\n                <p className=\"text-gray-600 mb-4\">\r\n                  Complete this exercise to test your knowledge and practice what you've learned.\r\n                </p>\r\n\r\n                <div className=\"space-y-3\">\r\n                  <div className=\"flex items-center gap-3 text-sm\">\r\n                    <Clock className=\"h-4 w-4 text-gray-500\" />\r\n                    <span>Estimated time: ~{lesson.duration_minutes ?? 15} minutes</span>\r\n                  </div>\r\n                  <div className=\"flex items-center gap-3 text-sm\">\r\n                    <Award className=\"h-4 w-4 text-amber-500\" />\r\n                    <span>Reward: {lesson.coins_reward ?? 50} coins</span>\r\n                  </div>\r\n                  <div className=\"flex items-center gap-3 text-sm\">\r\n                    <BookOpen className=\"h-4 w-4 text-blue-500\" />\r\n                    <span>Questions: 10–15 questions</span>\r\n                  </div>\r\n                </div>\r\n\r\n                {practiceSet ? (\r\n                  <StartExerciseButton\r\n                    topicSlug={topic.slug}\r\n                    lessonSlug={lesson.slug}\r\n                    practiceSetId={practiceSet.id}\r\n                    isReview={lessonPassed}\r\n                  />\r\n                ) : (\r\n                  <Button disabled className=\"w-full mt-6\">\r\n                    No Exercise Available\r\n                  </Button>\r\n                )}\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </section>\r\n\r\n        {/* RIGHT: SIDEBAR (1 col) */}\r\n        <aside className=\"space-y-6\">\r\n          {/* Grammar */}\r\n          {(() => {\r\n            const grammarMaterials = sidebarPrepared.filter((m) => m.type === \"grammar\");\r\n            const allGrammarPoints = grammarMaterials.flatMap((m: any) => m.data?.points ?? []);\r\n            \r\n            return allGrammarPoints.length > 0 ? (\r\n              <GrammarCarousel grammarPoints={allGrammarPoints} />\r\n            ) : null;\r\n          })()}\r\n\r\n\r\n\r\n          {/* Vocabulary */}\r\n          {vocabularyMaterials.length > 0 ? (\r\n            <KeyVocabulary \r\n              vocabulary={vocabularyMaterials} \r\n              topicId={topic.topic_id}\r\n              lessonId={lesson.id}\r\n            />\r\n          ) : null}\r\n\r\n          {/* Examples */}\r\n          {(() => {\r\n            const exampleMaterials = sidebarPrepared.filter((m) => m.type === \"examples\");\r\n            const collected = exampleMaterials.flatMap((m: any) =>\r\n              (m.pairsResolved ?? m.data?.pairs ?? []).map((p: any) => ({\r\n                vi: p.vi,\r\n                en: p.en,\r\n                audioUrl: p.audioUrl,\r\n                audioPath: p.audio_path,\r\n              }))\r\n            );\r\n            const allExamples = shuffleExamples(collected);\r\n\r\n            return allExamples.length > 0 ? (\r\n              <ExampleSentences examples={allExamples} />\r\n            ) : null;\r\n          })()}\r\n        </aside>\r\n    </div>\r\n  );\r\n}\r\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z',\n      key: '10ikf1',\n    },\n  ],\n];\n\n/**\n * @component @name Play\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNSA1YTIgMiAwIDAgMSAzLjAwOC0xLjcyOGwxMS45OTcgNi45OThhMiAyIDAgMCAxIC4wMDMgMy40NThsLTEyIDdBMiAyIDAgMCAxIDUgMTl6IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/play\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Play = createLucideIcon('play', __iconNode);\n\nexport default Play;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M12 6v6l4 2', key: 'mmk7yg' }],\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n];\n\n/**\n * @component @name Clock\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgNnY2bDQgMiIgLz4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/clock\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Clock = createLucideIcon('clock', __iconNode);\n\nexport default Clock;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'm15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526',\n      key: '1yiouv',\n    },\n  ],\n  ['circle', { cx: '12', cy: '8', r: '6', key: '1vp47v' }],\n];\n\n/**\n * @component @name Award\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTUuNDc3IDEyLjg5IDEuNTE1IDguNTI2YS41LjUgMCAwIDEtLjgxLjQ3bC0zLjU4LTIuNjg3YTEgMSAwIDAgMC0xLjE5NyAwbC0zLjU4NiAyLjY4NmEuNS41IDAgMCAxLS44MS0uNDY5bDEuNTE0LTguNTI2IiAvPgogIDxjaXJjbGUgY3g9IjEyIiBjeT0iOCIgcj0iNiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/award\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Award = createLucideIcon('award', __iconNode);\n\nexport default Award;\n"],"names":[],"mappings":"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","ignoreList":[0,2,3,4]}